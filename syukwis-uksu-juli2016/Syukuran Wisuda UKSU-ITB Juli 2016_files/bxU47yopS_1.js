if (self.CavalryLogger) { CavalryLogger.start_js(["pmnxF"]); }

__d('MImage.react',['React','joinClasses'],function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();function l(n,o,p){var q=n[o];if(typeof q==='string')return;if(q&&typeof q==='object'){if(q.sprited&&q.spriteMapCssClass&&q.spriteCssClass)return;if(!q.sprited&&q.uri)return;}return new Error('Provided `'+o+'` to `'+p+'`. Must be a string '+'or `ix` call.');}j=babelHelpers.inherits(m,h.Component);k=j&&j.prototype;m.prototype.render=function(){'use strict';var n=i(this.props.className,'img'),o=this.props.src,p=null;if(this.props.alt&&typeof o!=='string'&&o.sprited)p=h.createElement('u',null,this.props.alt);if(typeof o==='string')return h.createElement('img',babelHelpers['extends']({},this.props,{className:n}),p);if(o.sprited){n=i(n,o.spriteMapCssClass,o.spriteCssClass);return h.createElement('i',babelHelpers['extends']({},this.props,{className:n,src:null}),p);}if(this.props.width===undefined&&this.props.height===undefined)return (h.createElement('img',babelHelpers['extends']({},this.props,{className:n,width:o.width,height:o.height,src:o.uri}),p));return (h.createElement('img',babelHelpers['extends']({},this.props,{className:n,src:o.uri}),p));};function m(){'use strict';j.apply(this,arguments);}m.propTypes={src:l};m.validateImageSrcPropType=l;f.exports=m;},null);
__d('MXUIButton.react',['React','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j){var k,l;if(c.__markCompiled)c.__markCompiled();var m=h.PropTypes;k=babelHelpers.inherits(n,h.Component);l=k&&k.prototype;function n(){var o,p;'use strict';for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return o=(p=l.constructor).call.apply(p,[this].concat(r)),this.getClassListForAttribute=function(t){var u={size:{medium:"_56bw",large:"_56bx"},use:{special:"_56bv",primary:"_56bu",normal:"_56bt",'default':"_56bt",confirm:"_56bu"}};return u[t][this.props[t]];}.bind(this),o;}n.prototype.render=function(){'use strict';var o=j("_56bs",this.getClassListForAttribute('size'),this.getClassListForAttribute('use'));if(this.props.href)return (h.createElement('a',babelHelpers['extends']({},this.props,{href:this.props.href,className:j(this.props.className,o)}),this.props.children||this.props.label));return (h.createElement('button',babelHelpers['extends']({},this.props,{type:'submit',className:j(this.props.className,o)}),this.props.children||this.props.label));};n.propTypes={label:m.string,size:m.oneOf(['small','medium','large']),use:m.oneOf(['special','primary','normal','default','confirm'])};n.defaultProps={use:'normal',size:'small'};f.exports=n;},null);
__d('DOMContainer.react',['React','ReactDOM','invariant','isNode'],function a(b,c,d,e,f,g,h,i,j,k){var l,m;if(c.__markCompiled)c.__markCompiled();var n=h.PropTypes;l=babelHelpers.inherits(o,h.Component);m=l&&l.prototype;function o(){var p,q;'use strict';for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return p=(q=m.constructor).call.apply(q,[this].concat(s)),this.getDOMChild=function(){var u=this.props.children;!k(u)?j(0):void 0;return u;}.bind(this),p;}o.prototype.shouldComponentUpdate=function(p,q){'use strict';return p.children!==this.props.children;};o.prototype.componentDidMount=function(){'use strict';i.findDOMNode(this).appendChild(this.getDOMChild());};o.prototype.componentDidUpdate=function(){'use strict';var p=i.findDOMNode(this);while(p.lastChild)p.removeChild(p.lastChild);p.appendChild(this.getDOMChild());};o.prototype.render=function(){'use strict';if(this.props.display==='block')return h.createElement('div',this.props,undefined);return h.createElement('span',this.props,undefined);};o.propTypes={display:n.oneOf(['inline','block'])};o.defaultProps={display:'inline'};f.exports=o;},null);
__d('LeftRight.react',['React','cx','invariant','keyMirror','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l){var m,n;if(c.__markCompiled)c.__markCompiled();var o=k({left:true,right:true,both:true});function p(s){!(s&&(s.length===1||s.length===2))?j(0):void 0;}function q(s){var t=[];h.Children.forEach(s,function(u){t.push(u);},this);return t;}m=babelHelpers.inherits(r,h.Component);n=m&&m.prototype;r.prototype.render=function(){'use strict';var s=q(this.props.children);p(s);var t=this.props.direction||o.both,u=t===o.both,v=u||t===o.left?"_ohe lfloat":'',w=u||t===o.right?"_ohf rfloat":'',x=h.createElement('div',{key:'left',className:v},s[0]),y=s.length<2?null:h.createElement('div',{key:'right',className:w},s[1]),z=t===o.right&&y?[y,x]:[x,y];return (h.createElement('div',babelHelpers['extends']({},this.props,{className:l(this.props.className,"clearfix")}),z));};function r(){'use strict';m.apply(this,arguments);}r.DIRECTION=o;f.exports=r;},null);
__d('MGraphSearchCompositeSource',['TypeaheadCompositeSource'],function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,h);j=i&&i.prototype;k.prototype.mergeResults=function(l,m){'use strict';var n=j.mergeResults.call(this,l,m);if(!n||!this.$MGraphSearchCompositeSource1||n.some(function(ea){return ea.type==='trending';})||n.some(function(ea){return ea.isRecentSearch;}))return n;n.length=Math.min(n.length,this.$MGraphSearchCompositeSource1.maxResults);if(this.$MGraphSearchCompositeSource1.enableLegacyStyleBucketization)return this.bucketResults(n);var o=false,p=n[0];if(p&&(p.bootstrapped||p.bootstrap||p.type==='user'&&p.cost<this.$MGraphSearchCompositeSource1.minCostForUserToSurfaceAtTop))o=true;var q=false;for(var r=0;r<this.$MGraphSearchCompositeSource1.maxPositionOfEntityToDivideKeywords;r++)if(n[r]&&n[r].type!=='keyword')q=true;var s=[],t=[],u=[],v=null;for(var w=0;w<n.length;w++){v=n[w];if(!(v.bootstrapped&&this.$MGraphSearchCompositeSource1.keepBootstrapped)&&v.type in this.$MGraphSearchCompositeSource1.filterOutTypes)continue;if(v.type==='keyword'){if(!o&&(!q||t.length<this.$MGraphSearchCompositeSource1.maxKeywordAboveEntities)){t.push(v);}else u.push(v);}else s.push(v);}if(this.$MGraphSearchCompositeSource1.overrideKWRankingBehavior){var x,y=t;y.push.apply(y,u);var z=y.slice(0,this.$MGraphSearchCompositeSource1.numKeywordsAboveEntities),aa=y.slice(this.$MGraphSearchCompositeSource1.numKeywordsAboveEntities);n=z;(x=n).push.apply(x,s);if(this.$MGraphSearchCompositeSource1.hasKeywordsBelowEntities){var ba;(ba=n).push.apply(ba,aa);}}else{var ca,da;n=t;(ca=n).push.apply(ca,s);(da=n).push.apply(da,u);}return n;};k.prototype.bucketResults=function(l){'use strict';if(!l.length)return l;var m,n,o=[],p={};for(var q=0,r=l.length;q<r;q++){m=l[q];n=this.getBucketType(m);if(!p[n]){o.push(n);p[n]=[m];}else p[n].push(m);}return o.reduce(function(s,t){return s.concat(p[t]);},[]);};k.prototype.getBucketType=function(l){'use strict';if(l.type==='keyword'||l.is_grammar)return 'keyword';return 'entity';};k.prototype.setConfig=function(l){'use strict';this.$MGraphSearchCompositeSource1=l;};function k(){'use strict';i.apply(this,arguments);}f.exports=k;},null);
__d('MGraphSearchFlickerFix',['SearchMTouchGlobalOptions','URI','fbt'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=void 0,l=[],m={},n={insert:function(o,p,q){var r;p.forEach(function(ea){ea.isInvalidated=false;});p=n.removeInjected(p);var s=o.length===0,t=p.filter(function(ea){return ea.type==='keyword'&&ea.display.toLowerCase()!==o;}),u=t.filter(function(ea){return ea.display.toLowerCase()!==o;}),v=t.length;if(u.length>1)if(s){l=[];}else l=u.slice(0,2);if(m[o]||q===false||v>=h.defaultNumTopResultsToShow){m[o]=true;if(s){l=[];}else l=u.slice(0,2);return p;}var w=function(){if(y){if(z>=x.length)return 'break';aa=x[z++];}else{z=x.next();if(z.done)return 'break';aa=z.value;}var ea=aa;if(!p.some(function(fa){return fa.display===ea.display;})){ea.isInvalidated=true;p.push(ea);}};for(var x=l,y=Array.isArray(x),z=0,x=y?x:x[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var aa,r=w();if(r==='break')break;}var ba=p.filter(function(ea){return ea.type!=='keyword';});if(o.length<2||k==null)k=ba[0];if(k==null)return p;var ca=this.createResult(j._("{fullName} photos",[j.param('fullName',k.display.toLowerCase())]));p.push(ca);var da=this.createResult(j._("{fullName} posts",[j.param('fullName',k.display.toLowerCase())]));p.push(da);return p;},removeInjected:function(o){return o.filter(function(p){return !p.isInjected;});},createResult:function(o){var p=j._("Tap to search Facebook");return {id:String(o),type:'keyword',display:String(o),subtext:p,uri:new i('/foo'),isInvalidated:true,isInjected:true};}};f.exports=n;},null);
__d('MGraphSearchTypeaheadHeaders',['fbt','keyMirror'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=i({PYMK:null,RECENT:null,SUGGESTED:null,TOP_MATCHES:null,TRENDING:null,GROUP_POPULAR:null,GROUP_SEARCH:null,SUGGESTED_GLOBAL:null,SEE_MORE:null,INTENT_FIRST:null}),k={PYMK:h._("People You May Know"),RECENT:h._("Recent Searches"),SUGGESTED:h._("Searches"),TOP_MATCHES:h._("Top Matches"),TRENDING:h._("Trending"),GROUP_POPULAR:h._("Popular in this group"),GROUP_SEARCH:h._("Search this group"),SUGGESTED_GLOBAL:h._("Search all of Facebook"),INTENT_FIRST:h._("WHAT ARE YOU LOOKING FOR?")};f.exports={Types:j,Labels:k};},null);
__d('MGraphSearchTypeaheadBucketizer',['MGraphSearchTypeaheadHeaders'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=h.Types,j=20;function k(m){if(m.isTrending&&m.isNullStateSuggestion){return i.TRENDING;}else if(m.isRecentSearch){return i.RECENT;}else if(m.isPYMK){return i.PYMK;}else if(m.isScoped){return m.isNullStateSuggestion?i.GROUP_POPULAR:i.GROUP_SEARCH;}else if(m.isSeeMore){return i.SEE_MORE;}else if(m.type==='keyword'){return i.SUGGESTED;}else return i.TOP_MATCHES;}function l(m){'use strict';m=m||{};this.maxResults=m.maxResults||j;}l.prototype.bucketize=function(m,n,o){'use strict';var p={},q=Math.min(m.length,this.maxResults);if(o)p[i.SUGGESTED]=[];for(var r=0;r<q;r++){var s=m[r],t=k(s);if(!p[t])p[t]=[];p[t].push(s);}if(o&&!p[i.SUGGESTED].length){delete p[i.SUGGESTED];}else if(o&&n)p[i.SUGGESTED]=p[i.SUGGESTED].slice(0,n);return p;};f.exports=l;},null);
__d('MGraphSearchTypeaheadFilter.react',['DOMContainer.react','MViewport','MXUIButton.react','React','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m){var n,o;if(c.__markCompiled)c.__markCompiled();n=babelHelpers.inherits(p,k.Component);o=n&&n.prototype;function p(q){'use strict';o.constructor.call(this,q);this.componentWillReceiveProps=this.componentWillReceiveProps.bind(this);this.handleRadioButtonChange=this.handleRadioButtonChange.bind(this);this.createFilter=this.createFilter.bind(this);this.onResetEvent=this.onResetEvent.bind(this);this.onCancelEvent=this.onCancelEvent.bind(this);this.onApplyEvent=this.onApplyEvent.bind(this);this.handleFilterClick=this.handleFilterClick.bind(this);}p.prototype.componentWillReceiveProps=function(q){'use strict';var r={},s={};for(var t=this.props.filters.entries(),u=Array.isArray(t),v=0,t=u?t:t[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var w;if(u){if(v>=t.length)break;w=t[v++];}else{v=t.next();if(v.done)break;w=v.value;}var x=w,y=x[0],z=x[1];s[z.requestParam]=y===0;r[z.requestParam]='';}this.setState({filterState:r,selectedFilter:s});};p.prototype.handleRadioButtonChange=function(q){'use strict';var r=this.state.filterState;r[q.target.name]=q.target.value;this.setState({filterState:r});};p.prototype.handleFilterClick=function(q){'use strict';var r=this.state.selectedFilter,s=q.currentTarget;for(var t=Object.entries(r),u=Array.isArray(t),v=0,t=u?t:t[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var w;if(u){if(v>=t.length)break;w=t[v++];}else{v=t.next();if(v.done)break;w=v.value;}var x=w,y=x[0],z=x[1];r[y]=s.id===y&&!z;}this.setState({selectedFilter:r});};p.prototype.createFilter=function(q){'use strict';var r=k.createElement('div',{onClick:this.handleFilterClick,id:q.requestParam,className:"_2l23"},k.createElement(h,null,q.filterLabel));if(!this.state.selectedFilter[q.requestParam])return (k.createElement('div',{key:q.requestParam},r));var s=k.createElement('div',null,k.createElement('label',null,k.createElement(h,null,q.defaultLabel),k.createElement('input',{type:'radio',value:'',checked:this.state.filterState[q.requestParam]==='',name:q.requestParam,onChange:this.handleRadioButtonChange}))),t=[];for(var u=q.filterOptions,v=Array.isArray(u),w=0,u=v?u:u[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var x;if(v){if(w>=u.length)break;x=u[w++];}else{w=u.next();if(w.done)break;x=w.value;}var y=x,z=this.state.filterState[q.requestParam]===y.value,aa=k.createElement('div',{key:y.value},k.createElement('label',null,k.createElement(h,null,y.label),k.createElement('input',{type:'radio',value:y.value,checked:z,name:q.requestParam,onChange:this.handleRadioButtonChange})));t.push(aa);}return (k.createElement('div',{key:q.requestParam},r,s,t));};p.prototype.onResetEvent=function(q){'use strict';q.preventDefault();var r=this.state.filterState;for(var s=Object.keys(r),t=Array.isArray(s),u=0,s=t?s:s[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var v;if(t){if(u>=s.length)break;v=s[u++];}else{u=s.next();if(u.done)break;v=u.value;}var w=v;r[w]='';}this.setState({filterState:r});};p.prototype.onCancelEvent=function(q){'use strict';q.preventDefault();this.props.cancelFilters();};p.prototype.onApplyEvent=function(q){'use strict';q.preventDefault();this.props.applyFilters(this.state.filterState);};p.prototype.render=function(){'use strict';if(!this.props.isActive)return k.createElement('div',null);var q=k.createElement('div',{className:"_2l24"},k.createElement('div',{className:"_2l25"},m._("Filter Posts")),k.createElement('a',{className:"_2l26",onClick:this.onResetEvent,href:'#',role:'button'},m._("Reset"))),r=this.props.filters.map(this.createFilter),s=k.createElement('div',{className:"_1uk0",style:{width:i.getWidth().toString()+'px'}},k.createElement('div',{className:"_4pci"},k.createElement(j,{className:"_1uk3",onClick:this.onCancelEvent,use:'default'},m._("Cancel"))),k.createElement('div',{className:"_4pck"},k.createElement(j,{className:"_1uk3",onClick:this.onApplyEvent,use:'confirm'},m._("Apply"))));return (k.createElement('form',null,q,r,s));};f.exports=p;},null);
__d('TokenizeUtil',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=/[ ]+/g,i=/[^ ]+/g,j=new RegExp(k(),'g');function k(){return '[.,+*?$|#{}()\'\\^\\-\\[\\]\\\\\\/!@%"~=<>_:;'+'\u30fb\u3001\u3002\u3008-\u3011\u3014-\u301f\uff1a-\uff1f\uff01-\uff0f'+'\uff3b-\uff40\uff5b-\uff65\u2E2E\u061f\u066a-\u066c\u061b\u060c\u060d'+'\uFD3e\uFD3F\u1801\u0964\u104a\u104b\u2010-\u2027\u2030-\u205e'+'\u00a1-\u00b1\u00b4-\u00b8\u00ba\u00bb\u00bf]';}var l={},m={a:"\u0430 \u00e0 \u00e1 \u00e2 \u00e3 \u00e4 \u00e5 \u0101",b:"\u0431",c:"\u0446 \u00e7 \u010d",d:"\u0434 \u00f0 \u010f \u0111",e:"\u044d \u0435 \u00e8 \u00e9 \u00ea \u00eb \u011b \u0113",f:"\u0444",g:"\u0433 \u011f \u0123",h:"\u0445 \u0127",i:"\u0438 \u00ec \u00ed \u00ee \u00ef \u0131 \u012b",j:"\u0439",k:"\u043a \u0138 \u0137",l:"\u043b \u013e \u013a \u0140 \u0142 \u013c",m:"\u043c",n:"\u043d \u00f1 \u0148 \u0149 \u014b \u0146",o:"\u043e \u00f8 \u00f6 \u00f5 \u00f4 \u00f3 \u00f2",p:"\u043f",r:"\u0440 \u0159 \u0155",s:"\u0441 \u015f \u0161 \u017f",t:"\u0442 \u0165 \u0167 \u00fe",u:"\u0443 \u044e \u00fc \u00fb \u00fa \u00f9 \u016f \u016b",v:"\u0432",y:"\u044b \u00ff \u00fd",z:"\u0437 \u017e",ae:"\u00e6",oe:"\u0153",ts:"\u0446",ch:"\u0447",ij:"\u0133",sh:"\u0448",ss:"\u00df",ya:"\u044f"};for(var n in m){var o=m[n].split(' ');for(var p=0;p<o.length;p++)l[o[p]]=n;}var q={};function r(x){return x?x.replace(j,' '):'';}function s(x){x=x.toLowerCase();var y='',z='';for(var aa=x.length;aa--;){z=x.charAt(aa);y=(l[z]||z)+y;}return y.replace(h,' ');}function t(x){var y=[],z=i.exec(x);while(z){z=z[0];y.push(z);z=i.exec(x);}return y;}function u(x,y){if(!q.hasOwnProperty(x)){var z=s(x),aa=r(z);q[x]={value:x,flatValue:z,tokens:t(aa),isPrefixQuery:aa&&aa[aa.length-1]!=' '};}if(y&&typeof q[x].sortedTokens=='undefined'){q[x].sortedTokens=q[x].tokens.slice();q[x].sortedTokens.sort(function(ba,ca){return ca.length-ba.length;});}return q[x];}function v(x,y,z){var aa=u(y,x=='prefix'),ba=x=='prefix'?aa.sortedTokens:aa.tokens,ca=u(z).tokens,da={},ea=aa.isPrefixQuery&&x=='query'?ba.length-1:null,fa=function(ga,ha){for(var ia=0;ia<ca.length;++ia){var ja=ca[ia];if(!da[ia]&&(ja==ga||(x=='query'&&ha===ea||x=='prefix')&&ja.indexOf(ga)===0))return da[ia]=true;}return false;};return Boolean(ba.length&&ba.every(fa));}var w={flatten:s,parse:u,getPunctuation:k,isExactMatch:v.bind(null,'exact'),isQueryMatch:v.bind(null,'query'),isPrefixMatch:v.bind(null,'prefix'),tokenize:t};f.exports=w;},null);
__d('MGraphSearchTypeaheadOnDemandSource',['MTypeaheadOnDemandSource','MSearchKeywordsConst','TokenizeUtil','createArrayFromMixed','Stratcom'],function a(b,c,d,e,f,g,h,i,j,k,l){var m,n;if(c.__markCompiled)c.__markCompiled();var o='graph-search-entry-point';m=babelHelpers.inherits(p,h);n=m&&m.prototype;function p(q,r){'use strict';r=r||{};n.constructor.call(this,q,r);this.enableImmediateReturnOfCachedResults=true;this.setNormalizer(function(s){return s.toLowerCase();});this.setSanitizer(function(s){return s;});this.queryCache={};this.groupID=null;this.isScoped=false;this.numResultsToFetch=r.numResultsToFetch;l.listen('setCurrentProfileID',o,function(event){if(event.getData().profileID!==this.groupID){this.groupID=event.getData().profileID;this.clearCache();}}.bind(this));}p.prototype.getMatchedResults=function(q){'use strict';var r=q.toLowerCase();while(r.length>0&&!(r in this.queryCache))r=r.substr(0,r.length-1);if(!r)return [];var s=[];if(r===q){s=this.queryCache[q];return this.renderNodes(q,s);}for(var t=0;t<this.queryCache[r].length;t++){var u=this.queryCache[r][t];if(j.isQueryMatch(q,this._raw[u].display))s.push(u);}return this.renderNodes(q,s);};p.prototype.addToLookup=function(q,r){'use strict';this.addToQueryCache(q,r);};p.prototype.addResult=function(q,r){'use strict';var s=q.uid;if(!(s in this._raw)){q=(this.getTransformer()||this._defaultTransformer)(q);this._raw[s]=q;}this._raw[s].idx=q.idx;this.addToQueryCache(s,r);};p.prototype.addToQueryCache=function(q,r){'use strict';if(!this.queryCache[r])this.queryCache[r]=[];if(this.queryCache[r].indexOf(q)===-1)this.queryCache[r].push(q);};p.prototype.setGroupID=function(q){'use strict';this.groupID=q;};p.prototype.setIsScoped=function(q){'use strict';this.isScoped=q;};p.prototype.getAuxiliaryData=function(){'use strict';var q={};if(this.isScoped&&this.groupID!=null)q.group_id=this.groupID;return babelHelpers['extends']({max_results:this.numResultsToFetch},q);};p.prototype.tokenize=function(q){'use strict';var r=n.tokenize.call(this,q);if(r[r.length-1]==='')r.pop();return r;};p.prototype.ondata=function(q,r,s){'use strict';if(s.payload.results){l.invoke('MGraphSearchTypeaheadOnDemandSource:keywordsLimitUpdate',null,{keywordsLimit:s.payload.num_topresults_to_show,value:r});if(r)r=r.toLowerCase();n.ondata.call(this,q,r,k(s.payload.results));}else{this.invoke('req_recv',0);this.invoke('complete');}};p.prototype.getTransformer=function(){'use strict';return function(q){if(q.type==='keyword'){var r={cost:q.cost,idx:q.idx,display:q.text,name:q.text,type:q.untranslated_type||q.type,id:q.uid,uri:q.path,logInfo:q.logInfo,subtext:q.subtext,is_grammar:q.grammar_type!=null,isScoped:q.is_scoped,boldedSubtext:q.boldedSubtext,keywordBoldedSubtext:q.keywordBoldedSubtext,keywordRenderType:q.keywordRenderType,keyword_type:q.keyword_type},s=i.keywordTypes;Object.keys(i.keywordTypes).map(function(t){var u='is'+t.charAt(0).toUpperCase()+t.slice(1);r[u]=q.keyword_type===s[t];});i.intentKeys.map(function(t){r.isSpecialIntent=r.isSpecialIntent||r[t];});return r;}return {name:q.text,uri:q.path,id:q.uid,display:q.display||q.text,photo:q.photo,category:q.category,cost:q.cost,idx:q.idx,tokens:q.tokens,type:q.untranslated_type||q.type,verticalType:q.vertical_type,subtext:q.subtext,isVerified:q.is_verified,showGrayCheck:q.show_gray_check,logInfo:q.logInfo};};};p.prototype.clearCache=function(){'use strict';n.clearCache.call(this);this.queryCache={};};f.exports=p;},null);
__d("cssURL",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){return "url('"+i.replace(/(\\|\s|\(|\)|'|\")/g,'\\$1')+"')";}f.exports=h;},null);
__d('MGraphSearchTypeaheadResult.react',['cssURL','cx','fbt','MSearchConst','React'],function a(b,c,d,e,f,g,h,i,j,k,l){var m,n;if(c.__markCompiled)c.__markCompiled();var o=' \u00B7 ';m=babelHelpers.inherits(p,l.Component);n=m&&m.prototype;function p(){var q,r;'use strict';for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return q=(r=n.constructor).call.apply(r,[this].concat(t)),this.renderPhoto=function(){if(this.props.result.isTrending&&!this.props.typeaheadConfig.hasSkittlesTA)return (l.createElement('i',{className:"img _1_of _1_oh"}));var v=this.props.result.photo?h(this.props.result.photo):'none';return (l.createElement('i',{className:"_1_oh",style:{backgroundImage:v}}));}.bind(this),q;}p.prototype.render=function(){'use strict';var q=this.props.result.subtext,r=this.props.result.display;if(this.props.result.isSeeMore)r=j._("See more results for {query}",[j.param('query','"'+r+'"')]);var s=this.props.typeaheadConfig.hasSkittlesTA,t=this.props.result.boldedSubtext;if(s&&t)t=l.createElement('span',{className:"_53sg"},this.props.result.boldedSubtext);var u=this.props.forceLongBorder,v=this.props.vertical===k.feed_search&&this.props.result.type==='keyword',w="_1_oa"+(this.props.result.isInvalid?' '+"_s5k":'')+(this.props.result.isSeeMore?' '+"_bju":'')+(s?' '+"_4gvh":'')+(this.props.result.isSpecialIntentGeneric?' '+"_4gvi":'')+(this.props.result.isVideos?' '+"_4gvj":'')+(this.props.result.isPhotos?' '+"_4gvk":'')+(this.props.result.isTrending||this.props.result.isTrending?' '+"_4gvl":'')+(this.props.result.isPeople?' '+"_4gvm":'')+(this.props.result.isHashtag?' '+"_4gvn":'')+(this.props.result.isLocal&&!this.props.typeaheadConfig.useBlueLocalIcon?' '+"_4tt2":'')+(this.props.result.isLocal&&this.props.typeaheadConfig.useBlueLocalIcon?' '+"_2rxl":'')+(' '+"_1w-s")+(this.props.result.isTrending&&!s?' '+"_1_ob":'')+(this.props.result.isVerified?' '+"_21tt":'')+(this.props.result.showGrayCheck?' '+"_v27":'')+(!!q||!!t?' '+"_1_oc":'')+(this.props.result.photo!=null?' '+"_1_od":'')+(v?' '+"_18ka":'')+(u?' '+"_bmx":'')+(this.props.result.isInvalidated===true?' '+"_348k":''),x="_5h5e"+(this.props.result.isTrending&&!this.props.result.isVerified?' '+"_22wu":'')+(!this.props.result.isTrending&&this.props.result.isVerified?' '+"_22wv":'')+(this.props.result.isTrending&&this.props.result.isVerified?' '+"_22ww":''),y=v,z=null;if(this.props.vertical!==k.content_search)z=l.createElement('div',{className:"_38c2",onTouchStart:this.props.onAddToInputClick,onMouseDown:this.props.onAddToInputClick});return l.createElement('div',{className:w},l.createElement('div',null,l.createElement('a',{className:"touchable"+(' '+"_4rh3"),href:this.props.result.uriWithSession,rel:this.props.result.id,onClick:this.props.onClick,'data-sigil':'touchable',style:{display:this.props.visible?'':'none'}},l.createElement('i',{className:"img"+(v?' '+"_15i9":''),style:{display:y?'block':'none'}}),l.createElement('div',{className:"_1_oe"},l.createElement('span',{className:x},r),l.createElement('i',{className:"_21tu img"}),l.createElement('i',{className:"_v28 img"})),l.createElement('div',{className:"_1_og"},t,t&&q?o:null,q),this.renderPhoto()),z));};f.exports=p;},null);
__d('MGraphSearchTypeaheadTouchSource',['MTypeaheadTouchSource','createArrayFromMixed'],function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();j=babelHelpers.inherits(l,h);k=j&&j.prototype;l.prototype.ondata=function(m){'use strict';this.setNormalizer(function(n){return n.toLowerCase();});k.ondata.call(this,i(m.payload||m));};l.prototype.checkFragmentMatches=function(m,n,o,p){'use strict';if(m.substr(0,n.length)!==n)return false;var q=o[o.length-1]!==' ';if(!q||n!==p)return m==n;return true;};l.prototype.tokenize=function(m){'use strict';var n=k.tokenize.call(this,m);if(n[n.length-1]==='')n.pop();return n;};l.prototype.getTransformer=function(){'use strict';return function(m){return {name:m.text,uri:m.path,id:m.uid,display:m.display||m.text,photo:m.photo,category:m.category,cost:m.cost,idx:m.idx,tokens:m.tokens,type:m.untranslated_type||m.type,verticalType:m.vertical_type,subtext:m.text_only_subtext,logInfo:m.logInfo,bootstrapped:true,saved_context:m.saved_context};};};function l(){'use strict';j.apply(this,arguments);}f.exports=l;},null);
__d('MGraphSearchTypeaheadUtils',['MSearchConst','URI','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l='gsv2',m='group';f.exports={getContainerClasses:function(n){return "_djv"+(!n.isActive?' '+"_bjm":'')+(n.isActive?' '+"_bjn":'')+(n.withQuery?' '+"_xg3":'')+(n.isWaiting?' '+"_bjo":'')+(n.isVisible?' '+"_bjp":'')+(!n.isVisible?' '+"_bjq":'')+(n.hasTopNavSearch?' '+"_5ek4":'')+(!n.hasTopNavSearch?' '+"_5ek5":'')+(' '+"_3gwg")+(n.vertical===h.content_search?' '+"_2c_g":'')+(n.showFilters?' '+"_-hj":'');},getPlaceholder:function(n){if(n.searchMode===m){return k._("Search in {groupName}",[k.param('groupName',n.groupName)]);}else if(n.typeaheadConfig.hasTopNavSearch){if(n.selectedIntent!=null){return n.typeaheadConfig.MGraphSearchIntentTypes.Placeholders[n.selectedIntent];}else return k._("Search");}else return '';},getInitialSearchMode:function(){var n=new i(window.location),o=this.getSpecialSearchMode(n);if(o!=null)return o;var p=new i(n.getPath());return this.getGlobalSearchMode(p);},getSpecialSearchMode:function(n){if(n.getQueryData().groupID)return m;return null;},getGlobalSearchMode:function(n){return l;}};},null);
__d("XGroupSearchResultsController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/groups\/search\/",{groupID:{type:"Int"},query:{type:"String"},name:{type:"String"},cursor:{type:"String"},source:{type:"String"}});},null);
__d("arrayContains",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j){return i.indexOf(j)!==-1;}f.exports=h;},null);
__d('MGraphSearchTypeahead.react',['$','CSS','DOM','DOMContainer.react','EventListener','LeftRight.react','MGraphSearchCompositeSource','MGraphSearchFlickerFix','MGraphSearchTypeaheadBucketizer','MGraphSearchTypeaheadFilter.react','MGraphSearchTypeaheadHeaders','MGraphSearchTypeaheadOnDemandSource','MGraphSearchTypeaheadResult.react','MGraphSearchTypeaheadTouchSource','MGraphSearchTypeaheadUtils','MHistory','MImage.react','MJewel','MJewels','MNavTabs','MPageController','MRecentSearchesUpdater','MSearchConst','MSearchTrendingLogger','MSearchTypeaheadLogger','MSearchTypeaheadPerfLogger','MSearchTypeaheadPerfLoggerUtil','MSearchTypeaheadPerfLoggerV2','MTouchClick','MTypeaheadNullstateSource','MViewport','MXUIButton.react','Parent','React','ReactDOM','SearchMTouchGlobalOptions','Stratcom','Style','SubscriptionsHandler','URI','XGroupSearchResultsController','arrayContains','clearTimeout','csx','cx','fbt','invariant','ix','setTimeoutAcrossTransitions','throttle'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,ab,bb,cb,db,eb){var fb,gb;if(c.__markCompiled)c.__markCompiled();var hb=r.Types,ib=r.Labels,jb=[hb.TOP_MATCHES,hb.TRENDING],kb='/graphsearch/',lb='/keywords_',mb='keywords_top',nb='/search/metrics.php',ob='gsv2',pb='group',qb=null,rb=null,sb=false,tb={};fb=babelHelpers.inherits(ub,oa.Component);gb=fb&&fb.prototype;function ub(vb){'use strict';gb.constructor.call(this,vb);this.setResultsHeight=this.setResultsHeight.bind(this);this.invokeQueryChange=this.invokeQueryChange.bind(this);this.onFormSubmit=this.onFormSubmit.bind(this);this.onChromeTabShowOrHide=this.onChromeTabShowOrHide.bind(this);this.onInputChange=this.onInputChange.bind(this);this.onInputFocus=this.onInputFocus.bind(this);this.onInputBlur=this.onInputBlur.bind(this);this.onClearButtonEvent=this.onClearButtonEvent.bind(this);this.onCancelButtonEvent=this.onCancelButtonEvent.bind(this);this.onResultsWrapperTouchMove=this.onResultsWrapperTouchMove.bind(this);this.onAddToInputClick=this.onAddToInputClick.bind(this);this.onResultClick=this.onResultClick.bind(this);this.onEditRecentClick=this.onEditRecentClick.bind(this);this.onIntentChange=this.onIntentChange.bind(this);this.renderResult=this.renderResult.bind(this);this.renderRecentHeader=this.renderRecentHeader.bind(this);this.openFilters=this.openFilters.bind(this);this.popSoftState=this.popSoftState.bind(this);this.loadResultsPage=this.loadResultsPage.bind(this);this.getNumFiltersApplied=this.getNumFiltersApplied.bind(this);var wb=this.getInitialQuery(),xb=this.getInitialSearchMode(),yb=this.getInitialGroupID();this.state={query:wb||this.props.prefilledValue||'',prefilledValue:this.props.prefilledValue||'',results:[],isWaiting:false,isActive:false,isVisible:wb!=null||this.props.prefilledValue!=null,resultClicked:false,searchMode:xb,prevSearchMode:xb,querySource:null,filters:[],qpMegaphoneDismissed:false,isInputFocused:false,groupID:yb,groupName:this.props.groupName,isCancelled:false,showFilters:false,numFiltersApplied:0,selectedIntent:this.props.typeaheadConfig.hasIntentFirstTA?this.props.typeaheadConfig.MGraphSearchIntentTypes.Types.ANYTHING:null};}ub.prototype.shouldComponentUpdate=function(vb,wb){'use strict';return wb.query!==this.state.query||wb.isWaiting!==this.state.isWaiting||wb.isActive!==this.state.isActive||wb.isVisible!==this.state.isVisible||wb.results.length!==this.state.results.length||wb.results.some(function(xb,yb){return xb.id!==this.state.results[yb].id||xb.display!=this.state.results[yb].display;}.bind(this))||wb.searchMode!==this.state.searchMode||wb.qpMegaphoneDismissed!==this.state.qpMegaphoneDismissed||wb.selectedIntent!==this.state.selectedIntent||wb.showFilters!==this.state.showFilters||wb.filters.length!==this.state.filters.length;};ub.prototype.componentWillMount=function(){'use strict';if(rb)this.applyPayload(rb);this.$MGraphSearchTypeahead1=new ta();this.$MGraphSearchTypeahead2=new p({maxResults:this.props.typeaheadConfig.compositeSourceConfig.maxResults});this.$MGraphSearchTypeahead3=null;this.$MGraphSearchTypeahead4={};this.$MGraphSearchTypeahead5=[];this.$MGraphSearchTypeahead6={};this.$MGraphSearchTypeahead7={};this.invokeQueryChangeThrottled=eb(this.invokeQueryChange,200);this.$MGraphSearchTypeahead8=null;this.$MGraphSearchTypeahead9=null;this.setResultsHeightThrottled=eb(this.setResultsHeight,500);this.$MGraphSearchTypeahead1.addSubscriptions(ra.listen('MGraphSearchTypeaheadOnDemandSource:keywordsLimitUpdate',null,function(vb){var wb=vb.getData().keywordsLimit;if(wb!=null)tb[vb.getData().value]=wb;}));if(this.props.qpMegaphone)this.$MGraphSearchTypeahead1.addSubscriptions(ra.listen('click','m-megaphone-close',this.onDismissQPMegaphone.bind(this)));if(this.props.typeaheadConfig.hasTopNavSearch)this.$MGraphSearchTypeahead1.addSubscriptions(ra.listen('setSearchText','graph-search-entry-point',this.onSetSearchText.bind(this)));};ub.prototype.componentWillUnmount=function(){'use strict';xa(this.$MGraphSearchTypeahead8);if(this.$MGraphSearchTypeahead3!=null){this.$MGraphSearchTypeahead10.release();if(this.$MGraphSearchTypeahead3!=null)this.$MGraphSearchTypeahead3.unbindFromTypeahead();}this.$MGraphSearchTypeahead4=null;if(this.$MGraphSearchTypeahead9)this.$MGraphSearchTypeahead9.remove();this.$MGraphSearchTypeahead1.release();this.$MGraphSearchTypeahead17.release();qb=null;};ub.prototype.componentDidMount=function(){'use strict';!!qb?bb(0):void 0;qb=this;if(w.getParam(w.SOFT_STATE_KEY)===z.SEARCH){var vb={isActive:true,searchMode:this.props.searchMode||v.getGlobalSearchMode()};if(this.state.isVisible&&this.state.query===''&&this.state.prevQuery){vb.query=this.state.prevQuery;vb.searchMode=this.getInitialSearchMode();}this.setState(vb,function(){var wb=this.getInputElement();wb&&wb.focus();}.bind(this));}this.$MGraphSearchTypeahead1.addSubscriptions(ra.listen(['m:chrome:tab:show','m:chrome:tab:hide'],z.SEARCH,function(event){this.onChromeTabShowOrHide(event);}.bind(this)),ra.listen('m:page:loading',null,this.onMPageLoad.bind(this)),ra.listen('click','m-groups-scoped-search-button',this.onGroupSearchActivation.bind(this)));this.$MGraphSearchTypeahead9=l.listen(window,'scroll',this.onWindowScroll.bind(this));this.mGraphSearchTypeaheadContainer=na.bySelector(pa.findDOMNode(this),"._3qs0");this.positionSearchBox();this.$MGraphSearchTypeahead1.addSubscriptions(ra.listen('m:graph-search:position-search-box',null,this.positionSearchBox.bind(this)),ra.listen('MGraphSearchTypeahead:focus',null,this.onFocusRequest.bind(this)),ra.listen('m:chrome:tab:show',null,this.onChromeTabShow.bind(this)));if(this.props.active)this.setState({query:this.props.prefilledValue||'',isActive:true,isVisible:true});if(this.props.bootload)this.initializeXHPElements();ra.invoke('m:graph-search:ready');};ub.prototype.componentWillUpdate=function(vb,wb){'use strict';this.$MGraphSearchTypeahead18('render_start');if(w.getParam(w.SOFT_STATE_KEY)!==z.SEARCH&&!aa.hasNavTabs){var xb=j.find(h(y.JEWEL_NAV_NODE_ID),'*','search');i.conditionClass(xb,'isActive',wb.isVisible);}};ub.prototype.componentDidUpdate=function(vb,wb){'use strict';this.$MGraphSearchTypeahead5=wb.results;if(this.state.isActive){this.setResultsHeightThrottled();}else if(wb.isActive&&!this.state.isActive)sa.set(document.getElementById('page'),'height',null);if(!this.$MGraphSearchTypeahead11&&!vb.isVisible&&this.state.isVisible){this.configureDatasource(qa);this.configureMSideNavMarauderLogger();this.configureMSearchTypeaheadLogger();this.configureMSearchTypeaheadPerfLogger();this.configureMRecentSearchesUpdater();var xb=ja.hasTouchEvents()?'touchend':'click';if(!this.props.sessionID)ra.invoke(xb,'graph-search-activator');this.$MGraphSearchTypeahead18('change',[this.state.query]);this.$MGraphSearchTypeahead11=true;}else if(wb.searchMode!==this.state.searchMode){this.configureDatasource(qa,true);this.configureMSearchTypeaheadPerfLogger();this.invokeQueryChange();}this.$MGraphSearchTypeahead18('rendered');};ub.prototype.render=function(){'use strict';var vb=this.props.typeaheadConfig.hasTopNavSearch,wb=this.props.typeaheadConfig.isCompactSearch,xb=wb&&this.state.isActive&&this.state.isVisible,yb=v.getPlaceholder(Object.assign({},this.props,this.state)),zb=!this.state.isActive&&this.state.isVisible&&this.props.typeaheadConfig.hasFilters&&this.state.filters.length>0,ac=void 0;if(!this.props.bootload)ac=oa.createElement('form',{ref:'form',className:"_bjg"+(this.props.typeaheadConfig.hasIntentFirstTA&&this.state.query===''?' '+"_o68":''),onSubmit:this.onFormSubmit,action:'/search'},oa.createElement('div',{ref:'inputWrapper',className:"_bjh"},oa.createElement('input',{ref:'input',id:'main-search-input','data-sigil':'search-small-box',className:"_bji",type:'search',name:'query',placeholder:yb,autoComplete:'off',autoCorrect:'off',autoCapitalize:'off',onChange:this.onInputChange,onFocus:this.onInputFocus,onBlur:this.onInputBlur,value:this.state.query}),oa.createElement('label',{htmlFor:'main-search-input',className:"_3a7l"},ab._("Search")),oa.createElement('a',{href:'#',className:"_bjj",style:{display:!this.state.query||!this.state.isInputFocused?'none':''},role:'button',onMouseDown:this.onClearButtonEvent,onTouchStart:this.onClearButtonEvent},'Ã—')),oa.createElement('a',{href:'#',className:"_bjk",onClick:this.onCancelButtonEvent,style:{display:xb?'block':'none'},role:'button'},ab._("Cancel")));var bc=v.getContainerClasses({hasTopNavSearch:vb,isActive:this.state.isActive,isVisible:this.state.isVisible,isWaiting:this.state.isWaiting,vertical:this.props.vertical,withQuery:this.state.query!=null&&this.state.query!=='',showFilters:this.state.showFilters}),cc=this.renderResultsComponents(),dc=null;if(this.props.qpMegaphone&&!this.state.qpMegaphoneDismissed)dc=oa.createElement('div',{className:"_406x"},oa.createElement(k,null,this.props.qpMegaphone));var ec=oa.createElement('div',{ref:'results',className:"_bjs"},dc,cc),fc=void 0;if(zb){var gc=this.getNumFiltersApplied(),hc=void 0;if(gc===0){hc=ab._("Filter Results");}else hc=ab._({"*":"{number filters applied} Filters","268435456":"{number filters applied} Filter"},[ab.param('number filters applied',gc),ab.plural(gc,'number')]);fc=oa.createElement('div',{className:"_1uk0",style:{width:la.getWidth().toString()+'px'}},oa.createElement(ma,{className:"_1uk3"+(gc>0?' '+"_1uk4":''),onClick:this.openFilters,use:'confirm'},oa.createElement(x,{className:"_1uk5",src:cb('images/search_typeahead/filter-white.png')}),hc));}var ic=oa.createElement(q,{isActive:this.state.showFilters,applyFilters:this.loadResultsPage,cancelFilters:this.popSoftState,filters:this.state.filters});if(this.props.bootload){var jc=this.props.typeaheadShim.container;jc.className=bc;return (oa.createElement('div',{className:"_bjr",onTouchMove:this.onResultsWrapperTouchMove,onTouchStart:this.onResultsWrapperTouchMove},ec));}else return (oa.createElement('div',{className:bc},ac,oa.createElement('div',{className:"_bjr",onTouchMove:this.onResultsWrapperTouchMove,onTouchStart:this.onResultsWrapperTouchMove},ec),fc,ic));};ub.prototype.injectSeeMore=function(vb){'use strict';if(!this.state.query)return vb;var wb=vb.findIndex(function(yb){return yb.isSeeMore;});if(wb!==-1)vb.splice(wb,1);var xb={id:'seeMore',type:'keyword',isSpecialIntentGeneric:true,isSeeMore:true,display:this.state.query,uri:this.getSeeMoreURI(this.state.query).toString()};vb.push(xb);return vb;};ub.prototype.onChromeTabShow=function(event){'use strict';if(event.getPath()==='search')this.setState({isActive:true,isVisible:true},function(){this.getInputElement().focus();});};ub.prototype.onFocusRequest=function(){'use strict';this.getInputElement().focus();};ub.prototype.onDismissQPMegaphone=function(){'use strict';if(!this.state.isVisible)return;this.setState({qpMegaphoneDismissed:true});};ub.prototype.onGroupSearchActivation=function(vb){'use strict';var wb=vb.getTarget(),xb=wb.getAttribute('data-ft'),yb=wb.getAttribute('data-name');if(!xb||!yb)return;this.setState({searchMode:pb,groupID:xb,groupName:yb,isVisible:true,isActive:true,refURI:window.location.href,results:[]});this.getInputElement().focus();};ub.prototype.getHeaderTypeForResult=function(vb){'use strict';if(vb.isTrending){return hb.TRENDING;}else if(vb.isRecentSearch){return hb.RECENT;}else if(vb.type==='keyword'){return hb.SUGGESTED;}else return hb.TOP_MATCHES;};ub.prototype.renderResultsComponents=function(){'use strict';var vb=this.props.typeaheadConfig.defaultNumTopResultsToShow;if(tb[this.state.query]!=null)vb=tb[this.state.query];this.injectSeeMore(this.state.results);var wb=this.state.results,xb=this.$MGraphSearchTypeahead2.bucketize(wb,vb,this.props.typeaheadConfig.hasKeywordsFirst),yb=[],zb=[],ac=-1,bc=[],cc=true,dc=0;this.renderIntentFirstTypeahead(bc,xb);var ec=[];Object.keys(xb).forEach(function(fc){var gc=xb[fc];if(fc===hb.SUGGESTED&&hb.GROUP_SEARCH in xb)fc=hb.SUGGESTED_GLOBAL;var hc=this.renderHeader(fc,cc);if(hc!=null)bc.push(hc);cc=false;var ic=gc.map(function(jc,kc){ec.push(jc);if(this.state.isVisible&&jc.isTrending&&jc.isNullStateSuggestion){yb[dc]=jc.topicID;zb[dc]=dc+1;ac=jc.trendingQueryID;}var lc=wa(jb,fc)||kc===gc.length-1;return this.renderResult(jc,lc);}.bind(this));bc.push.apply(bc,ic);}.bind(this));this.$MGraphSearchTypeahead18('show',[ec,{preventSessionStart:true}]);if(yb.length>0&&!sb){sb=true;ea.registerTrendingTopicListeners(yb,da.msite_news_null_state,zb,ac);ea.logTrendingTopicImpressions(yb,da.msite_news_null_state,zb,ac);}else sb=false;return bc;};ub.prototype.positionSearchBox=function(){'use strict';sa.set(pa.findDOMNode(this),'top',la.getHeaderTop()+'px');};ub.prototype.getSeeMoreText=function(vb){'use strict';if(this.props.vertical===da.content_search)return this.state.query;var wb=this.state.query.trim();return ab._("Search for {query}",[ab.param('query','"'+wb+'"')]);};ub.prototype.getDefaultSource=function(){'use strict';return this.state.querySource?this.state.querySource:'typeahead';};ub.prototype.renderResult=function(vb,wb){'use strict';var xb=this.state.results.indexOf(vb),yb=vb!=null,zb='typeahead';if(yb&&vb.uri)if(this.redirectPages&&vb.type=='page'){vb.uriWithSession=new ua('/search/').addQueryData('query',vb.name).addQueryData('tsid',this.$MGraphSearchTypeahead12).addQueryData('source',zb).toString();}else vb.uriWithSession=new ua(vb.uri).addQueryData({tsid:this.$MGraphSearchTypeahead12,source:zb}).toString();if(!yb)vb=this.$MGraphSearchTypeahead5[xb]||{};if(vb.isTrending)vb.uriWithSession=new ua(vb.uriWithSession).addQueryData('position',xb+1).toString();var ac=vb.id+(vb.isInvalidated===true?'invalidated':'');return (oa.createElement(t,{key:ac,onClick:this.onResultClick,onAddToInputClick:this.onAddToInputClick,query:this.state.query,result:vb,vertical:this.props.vertical,visible:yb,forceLongBorder:wb,typeaheadConfig:this.props.typeaheadConfig}));};ub.prototype.renderHeader=function(vb,wb){'use strict';if(vb===hb.RECENT)return this.renderRecentHeader();if(this.state.query===''||this.state.searchMode===pb){return (oa.createElement('div',{className:"_tn0",key:vb},ib[vb]));}else if(!wb)return (oa.createElement('div',{className:"_2p41",key:vb}));return null;};ub.prototype.renderRecentHeader=function(){'use strict';return (oa.createElement(m,{key:hb.RECENT,direction:'right',className:"_tn0"},ib[hb.RECENT],oa.createElement('a',{href:this.props.activityLogURI,onClick:this.onEditRecentClick,className:"_2186"},ab._("Edit"))));};ub.prototype.onEditRecentClick=function(){'use strict';this.recentSearchesNeedsUpdate=true;};ub.prototype.clear=function(){'use strict';var vb=this.getInputElement(),wb='';vb.value=wb;this.setState({query:wb});this.$MGraphSearchTypeahead18('change',[wb]);this.$MGraphSearchTypeahead18('update',[wb]);};ub.prototype.cancel=function(){'use strict';var vb=this.getInputElement();vb.blur();ra.invoke('log-m-search-session-end',null,{reason:'cancel'});var wb=this.state.prefilledValue||'';this.setState({query:wb,isActive:false,isVisible:!!wb,searchMode:this.getInitialSearchMode()});this.$MGraphSearchTypeahead18('change',[wb]);this.$MGraphSearchTypeahead18('update',[wb]);};ub.prototype.getValue=function(){'use strict';return this.getInputElement().value;};ub.prototype.getDatasource=function(){'use strict';return this.$MGraphSearchTypeahead3;};ub.prototype.$MGraphSearchTypeahead19=function(vb){'use strict';this.$MGraphSearchTypeahead3=vb;this.$MGraphSearchTypeahead10=new ta();this.$MGraphSearchTypeahead10.addSubscriptions(vb.listen('req_dispatch',this.onDatasourceRequestDispatch.bind(this)),vb.listen('resultsready',this.onDatasourceResultsReady.bind(this)),vb.listen('after_complete',this.onDatasourceAfterComplete.bind(this)));vb.bindToTypeahead(this);};ub.prototype.$MGraphSearchTypeahead20=function(){'use strict';return this.props.typeaheadConfig;};ub.prototype.$MGraphSearchTypeahead21=function(){'use strict';return this.state.searchMode;};ub.prototype.configureDatasource=function(vb,wb){'use strict';if(this.$MGraphSearchTypeahead3!=null&&!wb)return;var xb=this.$MGraphSearchTypeahead3;if(xb!=null){this.$MGraphSearchTypeahead10.release();xb.unbindFromTypeahead();}var yb=this.$MGraphSearchTypeahead21(),zb=void 0;if(yb!=null)this.$MGraphSearchTypeahead6[yb];if(zb){this.$MGraphSearchTypeahead19(zb);this.$MGraphSearchTypeahead18('refresh');return;}var ac=this.$MGraphSearchTypeahead20().sources,bc=[],cc=void 0;if(ac.bootstrapped&&this.state.searchMode!==pb){cc=this.getTypeaheadTouchSource(ac.bootstrapped.src,ac.bootstrapped.source_key);cc.setShowSecondaryAction(true);cc.reactRendered=true;this.touchSource=cc;bc.push(cc);}if(ac.nullstate){this.nullstateDataSource=this.getTypeaheadNullstateSource(ac.nullstate.src);this.nullstateDataSource.setMaximumResultCount(ac.nullstate.max_results);this.nullstateDataSource.setShowSecondaryAction(true);this.nullstateDataSource.reactRendered=true;this.nullstateDataSource.setCurrentProfileID(this.props.currentProfileID);if(this.state.searchMode===pb)this.nullstateDataSource.setEnableScoped(true);bc.push(this.nullstateDataSource);}var dc=ac.online;if(dc){cc=this.getTypeaheadOnDemandSource(dc.src);cc.setMaximumResultCount(dc.max_results);cc.setEnableImmediateReturnOfCachedResults(dc.enable_caching);cc.setMaxResults(this.props.typeaheadConfig.numResultsToFetch);if(vb){if(vb.enableQueryThrottle)cc.setThrottleSendRequest(vb.queryThrottleTime);cc.setEnableEagerSendRequest(vb.enableEagerSendRequest);cc.setQueryDelay(vb.queryWaitTime);this.redirectPages=vb.redirectPages;}cc.setShowSecondaryAction(true);cc.reactRendered=true;bc.push(cc);}xb=this.getTypeaheadCompositeSource(bc);xb.reactRendered=true;xb.mergeKey='id';this.$MGraphSearchTypeahead19(xb);this.$MGraphSearchTypeahead18('start');this.$MGraphSearchTypeahead6[yb]=this.$MGraphSearchTypeahead3;};ub.prototype.getTypeaheadCompositeSource=function(vb){'use strict';var wb=new n(vb);wb.setConfig(this.props.typeaheadConfig.compositeSourceConfig);return wb;};ub.prototype.getTypeaheadOnDemandSource=function(vb){'use strict';vb=new s(vb,{disableLongerQueryCacheHit:this.props.typeaheadConfig.disableLongerQueryCacheHit,numResultsToFetch:this.props.typeaheadConfig.numResultsToFetch});if(this.state.searchMode===pb){vb.setIsScoped(true);vb.setGroupID(this.state.groupID);}return vb;};ub.prototype.getTypeaheadTouchSource=function(vb,wb){'use strict';return new u(vb,wb);};ub.prototype.getTypeaheadNullstateSource=function(vb){'use strict';return new ka(vb);};ub.prototype.getTypeaheadType=function(){'use strict';var vb='m_top_nav_gsv2';if(this.props.typeaheadConfig.hasTopNavSearch)vb+='_small_box';return vb;};ub.prototype.configureMSideNavMarauderLogger=function(){'use strict';if(!this.props.typeaheadConfig.mSideNavMarauderLogger||this.$MGraphSearchTypeahead13)return;this.props.typeaheadConfig.mSideNavMarauderLogger.setupTypeaheadListener(this);this.$MGraphSearchTypeahead13=true;};ub.prototype.configureMSearchTypeaheadLogger=function(){'use strict';if(this.$MGraphSearchTypeahead14)return;var vb=void 0;if(this.props.typeaheadLogger){vb=this.props.typeaheadLogger;vb.updateTypeahead(this);if(this.props.sessionID)this.$MGraphSearchTypeahead12=this.props.sessionID;}else vb=new fa(this,nb);this.$MGraphSearchTypeahead1.addSubscriptions(ra.listen('m-typeahead-logger:new-session-id',null,this.onMTypeaheadLoggerNewSessionId.bind(this)));this.$MGraphSearchTypeahead14=true;this.$MGraphSearchTypeahead1.addSubscriptions(ra.listen('log-m-search-session-end',null,function(wb){vb.blur(wb.getData().reason);}));};ub.prototype.configureMRecentSearchesUpdater=function(){'use strict';if(this.props.typeaheadConfig.hasRecentSearches)this.$MGraphSearchTypeahead15=new ca(this);};ub.prototype.configureMSearchTypeaheadPerfLogger=function(){'use strict';var vb=this.$MGraphSearchTypeahead21();if(vb!=null&&(!this.props.typeaheadConfig.typeaheadScubaInfo||this.$MGraphSearchTypeahead7[vb]))return;this.$MGraphSearchTypeahead16=ha.getNewMSearchTypeaheadPerfLogger(this,this.props.typeaheadConfig.typeaheadScubaInfo,this.props.typeaheadConfig.sources.online.enable_caching);this.$MGraphSearchTypeahead7[vb]=true;};ub.prototype.invokeKeypressed=function(){'use strict';var vb=this.getInputElement().value;this.$MGraphSearchTypeahead18('keypress',[vb]);};ub.prototype.invokeQueryChange=function(){'use strict';var vb=this.getInputElement().value;this.$MGraphSearchTypeahead18('update',[vb]);this.$MGraphSearchTypeahead18('change',[vb]);};ub.prototype.listen=function(vb,wb){'use strict';var xb=this.$MGraphSearchTypeahead4;!(xb!=null)?bb(0):void 0;xb[vb]=xb[vb]||[];xb[vb].push(wb);return {type:vb,callback:wb,remove:function(){!(xb!=null)?bb(0):void 0;xb[vb]=xb[vb].filter(function(yb){return yb!==wb;});}};};ub.prototype.$MGraphSearchTypeahead18=function(vb,wb){'use strict';wb=wb||[];var xb=this.$MGraphSearchTypeahead4;!(xb!=null)?bb(0):void 0;if(xb[vb])xb[vb].forEach(function(yb){yb.apply(this,wb);}.bind(this),this);};ub.prototype.onInputChange=function(){'use strict';var vb=this.getInputElement().value;this.setState({query:vb,querySource:null});this.invokeKeypressed();this.invokeQueryChangeThrottled();};ub.prototype.onInputBlur=function(){'use strict';this.setState({isInputFocused:false});};ub.prototype.onInputFocus=function(){'use strict';this.setState({isInputFocused:true});if(this.props.typeaheadConfig.isCompactSearch)la.scrollTo(0,la.getHeaderHeight());if(!aa.hasNavTabs)w.pushSoftState(z.SEARCH);var vb=this.getInputElement().value,wb=new ua(window.location),xb=new ua(this.props.activityLogURI);if(this.recentSearchesNeedsUpdate||wb.getPath()===xb.getPath()){this.recentSearchesNeedsUpdate=false;this.$MGraphSearchTypeahead18('refreshRecent',[vb]);}this.setState({isActive:true,isVisible:true,prevSearchMode:this.state.searchMode});if(this.$MGraphSearchTypeahead11){var yb=ja.hasTouchEvents()?'touchend':'click';ra.invoke(yb,'graph-search-activator');}this.$MGraphSearchTypeahead18('focus');this.$MGraphSearchTypeahead18('change',[vb]);};ub.prototype.onClearButtonEvent=function(event){'use strict';event.preventDefault();this.getInputElement().focus();this.setState({prevQuery:this.state.query});this.clear();};ub.prototype.onCancelButtonEvent=function(event){'use strict';event.preventDefault();this.setState({prevQuery:this.state.query});this.clear();this.popSoftState();};ub.prototype.onResultClick=function(event){'use strict';var vb=this.getResultLinkFromTarget(event.target),wb=this.getResultFromResultLink(vb),xb={isActive:false,isVisible:wb.type==='keyword',resultClicked:true,prefilledValue:'',query:''};xb.query=wb.type==='keyword'?wb.display:'';xb.prefilledValue=xb.query;this.setState(xb);this.$MGraphSearchTypeahead18('select',[vb]);this.$MGraphSearchTypeahead18('result-selected',[wb]);};ub.prototype.onAddToInputClick=function(event){'use strict';event.preventDefault();event.stopPropagation();var vb=this.getResultFromResultLink(this.getResultLinkFromTarget(event.target)),wb=vb.display+' ';this.$MGraphSearchTypeahead18('change',[wb]);this.setState({query:wb});};ub.prototype.onSeeMoreClick=function(){'use strict';this.handleSeeMoreClick(false);};ub.prototype.onSimpleSearchSeeMoreClick=function(){'use strict';this.handleSeeMoreClick(true);};ub.prototype.handleSeeMoreClick=function(vb){'use strict';var wb=this.getInputElement(),xb=wb.value;this.setState({resultClicked:true,prefilledValue:xb,isActive:false,isVisible:!!xb});var yb='';this.$MGraphSearchTypeahead18('query',[this.state.results,yb]);};ub.prototype.onFormSubmit=function(event){'use strict';event.preventDefault();this.setState({numFiltersApplied:0});this.loadResultsPage({});};ub.prototype.loadResultsPage=function(vb){'use strict';this.setState({showFilters:false});var wb=this.getInputElement(),xb=wb.value,yb='';if(xb==='')return;yb=this.getSubmitURI(xb);yb=yb.addQueryData('tsid',this.$MGraphSearchTypeahead12).addQueryData('source',this.getDefaultSource());for(var zb=Object.entries(vb),ac=Array.isArray(zb),bc=0,zb=ac?zb:zb[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var cc;if(ac){if(bc>=zb.length)break;cc=zb[bc++];}else{bc=zb.next();if(bc.done)break;cc=bc.value;}var dc=cc,ec=dc[0],fc=dc[1];if(fc!=='')yb=yb.addQueryData(ec,fc);}this.$MGraphSearchTypeahead18('on-enter-pressed',[yb.toString()]);ba.load(yb.toString());this.setState({prefilledValue:xb,isActive:false,isVisible:!!xb,resultClicked:true});this.$MGraphSearchTypeahead18('query',[this.state.results]);wb.blur();return;};ub.prototype.popSoftState=function(){'use strict';w.popSoftState('search');this.setState({showFilters:false,isCancelled:true});};ub.prototype.getNumFiltersApplied=function(){'use strict';if(this.state.filters.length===0)return 0;var vb=new ua(w.getPath()).getQueryData(),wb=0;for(var xb=this.state.filters.values(),yb=Array.isArray(xb),zb=0,xb=yb?xb:xb[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var ac;if(yb){if(zb>=xb.length)break;ac=xb[zb++];}else{zb=xb.next();if(zb.done)break;ac=zb.value;}var bc=ac;if(vb[bc.requestParam])wb++;}return wb;};ub.prototype.openFilters=function(vb){'use strict';this.setState({showFilters:true});if(!aa.hasNavTabs)w.pushSoftState(z.SEARCH);};ub.prototype.getGraphSearchURI=function(vb){'use strict';vb=vb.trim();if(this.state.searchMode===pb)return va.getURIBuilder().setInt('groupID',this.state.groupID).setString('query',vb).getURI();var wb=new ua(window.location),xb=wb.getPath();if(xb.indexOf(kb)===0&&xb.lastIndexOf(lb)!=-1&&this.props.vertical!==da.content_search){mb=xb.substring(xb.lastIndexOf(lb)+1);var yb=mb.indexOf('/');if(yb!==-1)mb=xb.substring(0,yb);}if(!this.props.typeaheadConfig.hasIntentFirstTA){if(mb==='keywords_top')return new ua('/search/top/').addQueryData('q',vb);}else if(mb.startsWith('keywords_'))return new ua(this.props.typeaheadConfig.MGraphSearchIntentTypes.URIForFilter[mb]).addQueryData('q',vb);return new ua('/graphsearch/str/'+encodeURIComponent(vb)+'/'+mb);};ub.prototype.getAllFriendsURI=function(vb){'use strict';return new ua('/graphsearch/str/'+vb+'/keywords_users');};ub.prototype.getSubmitURI=function(vb){'use strict';return this.getGraphSearchURI(vb).addQueryData('ref','content_filter');};ub.prototype.getSeeMoreURI=function(vb){'use strict';vb=vb.trim();if(this.state.searchMode===ob)return this.getGraphSearchURI(vb);var wb=new ua('/search/?query').addQueryData({query:vb,refid:da.refid});return wb;};ub.prototype.onResultsWrapperTouchMove=function(){'use strict';this.getInputElement().blur();};ub.prototype.onDatasourceRequestDispatch=function(){'use strict';this.setState({isWaiting:true});};ub.prototype.injectKeywordEchoQuery=function(vb){'use strict';if(this.state.query===''||this.props.vertical!==da.content_search)return vb;var wb=vb.findIndex(function(bc){return bc.id=='echo-query';});if(wb!==-1)vb.splice(wb,1);var xb=vb.some(function(bc){return bc&&bc.type==='keyword'&&bc.display&&bc.display.toLowerCase().trim()===this.state.query.toLowerCase().trim();}.bind(this));if(xb)return vb;var yb=this.getSeeMoreURI(this.state.query).toString(),zb=ab._("Tap to search Facebook"),ac={id:'echo-query',type:'keyword',display:String(this.getSeeMoreText()),uri:yb,subtext:zb,exactMatchKeyword:true};vb.push(ac);return vb;};ub.prototype.onDatasourceResultsReady=function(vb){'use strict';vb=this.injectKeywordEchoQuery(vb);if(this.props.typeaheadConfig.hasFlickerFix)vb=o.insert(this.state.query,vb,this.state.isWaiting);this.setState({results:vb});vb.forEach(function(wb){wb.uri=new ua(wb.uri).addQueryData('refid',da.refid);return wb;});};ub.prototype.onDatasourceAfterComplete=function(){'use strict';this.setState({isWaiting:false});};ub.prototype.onSetSearchText=function(event){'use strict';var vb=event.getData().title||'';this.$MGraphSearchTypeahead18('change',[vb,{preventSessionStart:true}]);this.setState({query:vb,prefilledValue:vb,isActive:false,isVisible:vb!=='',searchMode:this.getInitialSearchMode()});};ub.prototype.onMTypeaheadLoggerNewSessionId=function(vb){'use strict';if(!this.getFormElement())return;var wb=pa.findDOMNode(this.getFormElement()),xb=j.scry(wb,'input','search-typeahead-session-id')[0];if(!xb){xb=document.createElement('input');xb.type='hidden';xb.name='tsid';wb.appendChild(xb);ra.addSigil(xb,'search-typeahead-session-id');}var yb=vb.getData().sessionID;xb.value=yb;this.$MGraphSearchTypeahead12=yb;};ub.prototype.onWindowScroll=function(event){'use strict';if(this.state.isVisible)this.$MGraphSearchTypeahead18('scroll',[event]);};ub.prototype.onMPageLoad=function(){'use strict';if(!this.props.typeaheadConfig.isCompactSearch)this.$MGraphSearchTypeahead8=db(this.reset.bind(this),0);};ub.prototype.reset=function(){'use strict';var vb=this.getInputElement();if(vb!=null)vb.blur();this.setState({isVisible:false,isActive:false,showFilters:false,query:'',prefilledValue:'',searchMode:this.getInitialSearchMode(),resultClicked:false});};ub.prototype.getResultLinkFromTarget=function(vb){'use strict';var wb=na.bySelector(vb,"._1w-s");return wb.querySelector("._4rh3");};ub.prototype.getResultFromResultLink=function(vb){'use strict';var wb=this.state.results.filter(function(xb){return xb.id==vb.getAttribute('rel');})[0]||{};return wb;};ub.prototype.setResultsHeight=function(){'use strict';var vb=pa.findDOMNode(this.refs.results).offsetHeight+pa.findDOMNode(this.refs.results).offsetTop,wb=this.getFormElement().offsetHeight,xb=vb+wb,yb=la.getHeight();if(this.props.typeaheadConfig.isCompactSearch)yb+=la.getHeaderHeight();sa.set(document.getElementById('page'),'height',Math.max(xb,yb)+'px');};ub.prototype.applyPayload=function(vb){'use strict';if(vb.active)ra.listen(['m:onload','m:page:render:complete'],null,function(){ra.removeCurrentListener();rb=null;var wb=this.state.searchMode;this.setState({isActive:true,isVisible:true,searchMode:wb});}.bind(this));};ub.prototype.getInitialSearchMode=function(){'use strict';return this.props.bootload?this.props.searchMode:v.getInitialSearchMode();};ub.prototype.getInitialGroupID=function(){'use strict';if(this.props.bootload)return this.props.groupID;var vb=new ua(window.location);return vb.getQueryData().groupID;};ub.prototype.getInitialQuery=function(){'use strict';return this.props.bootload?this.props.typeaheadShim.input.value:null;};ub.prototype.onChromeTabShowOrHide=function(event){'use strict';var vb={isActive:event.getType()==='m:chrome:tab:show'};if(event.getData().open)vb.searchMode=v.getGlobalSearchMode();if(this.state.isVisible&&this.state.query===''&&this.state.prevQuery){vb.query=this.state.prevQuery;vb.searchMode=this.getInitialSearchMode();}this.setState(vb);if(vb.isActive){if(this.props.typeaheadConfig.isCompactSearch)this.setResultsHeight();document.body.offsetHeight;var wb=this.getInputElement();wb&&wb.focus();}else if(!this.state.isCancelled){this.reset();}else if(this.state.isCancelled)this.cancel();if(this.state.isCancelled){sa.set(document.getElementById('page'),'height',null);this.setState({isCancelled:false,isInputFocused:false});}if(event.getType()==='m:chrome:tab:hide')db(function(){ra.invoke('log-m-search-session-end',null,{reason:'navigated_away'});});};ub.prototype.getInputElement=function(){'use strict';return this.props.bootload?this.props.typeaheadShim.input:pa.findDOMNode(this.refs.input);};ub.prototype.getFormElement=function(){'use strict';return this.props.bootload?this.props.typeaheadShim.form:pa.findDOMNode(this.refs.form);};ub.prototype.initializeXHPElements=function(){'use strict';this.$MGraphSearchTypeahead17=new ta();var vb=this.props.typeaheadShim.input,wb=this.props.typeaheadShim.clear;this.$MGraphSearchTypeahead17.addSubscriptions(l.listen(vb,'focus',this.onInputFocus),l.listen(vb,'blur',this.onInputBlur),l.listen(vb,'keydown',this.onInputChange),l.listen(wb,'touchstart',this.onClearButtonEvent),l.listen(wb,'mousedown',this.onClearButtonEvent),l.listen(this.props.typeaheadShim.form,'submit',this.onFormSubmit));};ub.prototype.renderIntentFirstTypeahead=function(vb,wb){var xb,yb=this;'use strict';var zb=this.props.typeaheadConfig;if(zb.hasIntentFirstTA&&this.state.searchMode!==pb)(function(){var ac=yb.state.selectedIntent,bc=wb[hb.RECENT];delete wb[hb.RECENT];if(ac!==zb.MGraphSearchIntentTypes.Types.ANYTHING){delete wb[hb.TRENDING];if(ac!==zb.MGraphSearchIntentTypes.Types.POSTS||yb.state.query==='')delete wb[hb.SUGGESTED];var cc=wb[hb.TOP_MATCHES];if(cc)wb[hb.TOP_MATCHES]=cc.filter(function(ec){return zb.MGraphSearchIntentTypes.EntityTypes[ec.type.toLowerCase()]===ac;});}var dc=zb.MIntentFirstTypeahead;vb.push(oa.createElement(dc,{key:'intent_first_typeahead',isNullState:yb.state.query==='',onIntentChange:yb.onIntentChange,recentSearches:bc,renderResult:yb.renderResult,renderRecentHeader:yb.renderRecentHeader}));})();};ub.prototype.onIntentChange=function(vb,wb){'use strict';this.setState({selectedIntent:vb});mb=wb;this.getInputElement().focus();};ub.update=function(vb){'use strict';if(qb&&vb){qb.applyPayload(vb);}else rb=vb;};ub.setFilters=function(vb){'use strict';if(qb)qb.setState({filters:vb});};f.exports=ub;},null);