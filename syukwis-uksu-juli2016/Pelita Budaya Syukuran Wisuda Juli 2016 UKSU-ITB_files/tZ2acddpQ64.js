if (self.CavalryLogger) { CavalryLogger.start_js(["3tedW"]); }

__d("IrisProtocolMessageLifetime",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={TTL_OFF:0,TTL_ON_UNKNOWN:1,TTL_30SECONDS:30000,TTL_1MINUTE:60000,TTL_3MINUTES:180000,TTL_5MINUTES:300000,TTL_10MINUTES:600000,TTL_15MINUTES:900000,TTL_30MINUTES:1800000,TTL_1HOUR:3600000,TTL_2HOURS:7200000,TTL_4HOURS:14400000,TTL_8HOURS:28800000,TTL_12HOURS:43200000,TTL_24HOURS:86400000};},null);
__d("MercuryActionType",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={LOG_MESSAGE:"ma-type:log-message",USER_GENERATED_MESSAGE:"ma-type:user-generated-message",ADD_GROUP_ADMINS:"ma-type:add_group_admins",REMOVE_GROUP_ADMINS:"ma-type:remove_group_admins",CHANGE_READ_STATUS:"ma-type:change_read_status",MARK_THREAD_SEEN:"ma-type:mark_thread_seen",CHANGE_MUTE_SETTINGS:"ma-type:change-mute-settings",SEND_MESSAGE:"ma-type:send-message",DELETE_MESSAGES:"ma-type:delete-messages",DELETE_THREAD:"ma-type:delete-thread",UPDATE_SNIPPET:"ma-type:update-snippet",CHANGE_ARCHIVED_STATUS:"ma-type:change-archived-status",CHANGE_FOLDER:"ma-type:change-folder",ADD_PARTICIPANTS:"ma-type:add-participants",CANCEL_ATTACHMENT_PLACEHOLDER:"ma-type:cancel-attachment-placeholder",CONFIRM_ATTACHMENT_PLACEHOLDER:"ma-type:confirm-attachment-placeholder",UNPIN_THREAD:"ma-type:unpin-thread",CHANGE_FLAG:"ma-type:change_flag",MOVE_PENDING_TO_INBOX:"ma-type:move_pending_to_inbox",UPDATE_BLOCKER_STATUS:"ma-type:update-blocker-status",UPDATE_BLOCKEE_STATUS:"ma-type:update-blockee-status",CREATE_PAGE_ADMIN_NOTE:"ma-type:create-page-admin-note",REPLACE_MESSAGE:"ma-type:replace-message",UPDATE_CUSTOM_LIKE:"ma-type:update_custom_like",UNWRAP_MESSAGE:"ma-type:unwrap-message",JOINABLE_MODE:"ma-type:joinable-mode",APPROVAL_MODE:"ma-type:approval-mode",APPROVAL_QUEUE:"ma-type:approval-queue"};},null);
__d("MercuryAttachmentType",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={ERROR:"error",FILE:"file",PHOTO:"photo",STICKER:"sticker",SHARE:"share",UNKNOWN:"unknown",VIDEO:"video",ANIMATED_IMAGE:"animated_image",EMOJI_LIKE:"emoji_like",GIFT:"gift",THIRDPARTYSTICKER:"third_party_sticker"};},null);
__d("MercuryAudioType",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={AudioClip:"fb_voice_message",VoiceMessageWithTranscript:"fb_voice_message_with_transcript"};},null);
__d("MercuryGlobalActionType",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={MARK_ALL_READ:"mga-type:mark-all-read"};},null);
__d("MercuryTimePassed",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={TODAY:0,WEEK_AGO:1,MONTH_AGO:2,CURRENT_YEAR:3,OTHER_YEAR:4};},null);
__d("MessagingEvent",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={DELETE:"delete",DELETE_MESSAGES:"delete_messages",DELIVER:"deliver",ERROR:"error",READ:"read",REPORT_SPAM:"report_spam",REPORT_SPAM_MESSAGES:"report_spam_messages",UNMARK_SPAM:"unmark_spam",SUBSCRIBE:"subscribe",CHANGE_MUTE_SETTINGS:"change_mute_settings",TAG:"tag",UNREAD:"unread",UNSUBSCRIBE:"unsubscribe",DELIVER_LOG:"deliver_log",MORE_THREADS:"more_threads",READ_ALL:"read_all",READ_RECEIPT:"read_receipt",DELIVERY_RECEIPT:"delivery_receipt",SENT_PUSH:"sent_push",DELIVER_FAST_PAST:"deliver_fast_path",MESSENGER_STATUS:"messenger_status",UPDATE_PINNED_THREADS:"update_pinned_threads",CHANGE_PAGE_THREAD_FLAG:"change_page_thread_flag",UPDATE_BLOCKER_STATUS:"update_blocker_status",UPDATE_BLOCKEE_STATUS:"update_blockee_status",CREATE_PAGE_ADMIN_NOTE:"create_page_admin_note",NO_OP:"no_op"};},null);
__d("MessagingTag",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={GROUPS:"groups",UNREAD:"unread",FLAGGED:"flagged",ACTION_ARCHIVED:"action:archived",INBOX:"inbox",OTHER:"other",PENDING:"pending",MONTAGE:"montage",EVENT:"event",SENT:"sent",SPAM:"spam",UPDATES:"broadcasts_inbox",BCC:"header:bcc",FILTERED_CONTENT:"filtered_content",FILTERED_CONTENT_BH:"filtered_content_bh",FILTERED_CONTENT_ACCOUNT:"filtered_content_account",FILTERED_CONTENT_QUASAR:"filtered_content_quasar",FILTERED_CONTENT_INVALID_APP:"filtered_content_invalid_app",UNAVAILABLE_ATTACHMENT:"unavailable_attachment",ARCHIVED:"archived",EMAIL:"email",VOICEMAIL:"voicemail",SPAM_SPOOFING:"spam:spoofing",SPOOF_WARNING:"MTA:spoof_warning",SMS_TAG_ROOT:"SMSShortcode:",APP_ID_ROOT:"app_id:",DOMAIN_AUTH_PASS:"MTA:dmarc:pass",DOMAIN_AUTH_FAIL:"MTA:dmarc:fail",MTA_SYSTEM_MESSAGE:"MTA:system_message",EMAIL_MESSAGE:"source:email",MARKETPLACE:"marketplace"};},null);
__d("MItemConstants",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={SHORT_HEIGHT:43,TALL_HEIGHT:58};},null);
__d("MPageletTypes",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={CHROME:"chrome",CONTENT:"content"};},null);
__d("P2PPaymentRequestStatus",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={INITED:1,DECLINED:2,TRANSFER_INITED:3,TRANSFER_COMPLETED:4,TRANSFER_FAILED:5,CANCELED:6,EXPIRED:7};},null);
__d("P2PTransferStatus",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={PENDING_SENDER_MANUAL_REVIEW:1,PENDING_SENDER_VERIFICATION:2,CANCELED_SENDER_RISK:3,PENDING_RECIPIENT_NUX:4,CANCELED_DECLINED:5,PENDING_RECIPIENT_VERIFICATION:6,PENDING_RECIPIENT_MANUAL_REVIEW:7,PENDING_RECIPIENT_PROCESSING:8,PENDING_PUSH_FAIL:9,CANCELED_RECIPIENT_RISK:10,CANCELED_SYSTEM_FAIL:11,CANCELED_EXPIRED:12,COMPLETED:13,INTERMEDIATE_PROCESSING:14,PENDING_SENDER_INITED:15,CANCELED_SAME_CARD:16,PENDING_SENDER_VERIFICATION_PROCESSING:17,PENDING_RECIPIENT_VERIFICATION_PROCESSING:18};},null);
__d("PagesMessagingEventType",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={FLAG:1,CREATE_ADMIN_NOTE:2};},null);
__d("StickerConstants",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={MOBILE_LIKE_STICKER_PACK_ID:"227877430692340",GRAVEYARD_PACK_ID:"604597256247273",LIKE_STICKER_ID:"227878347358915",HOT_LIKE_SMALL_STICKER_ID:"369239263222822",HOT_LIKE_MEDIUM_STICKER_ID:"369239343222814",HOT_LIKE_LARGE_STICKER_ID:"369239383222810",MRU_STICKER_PACK:"599061016853145",SEARCH_PACK_ID:"680229632032514",OZ_PACK_ID:"1456625217993235",SPRITE_PADDING:"24",PayloadSource:{VIEW_ACTION:"view-action"},EMOTICON_PACK_ID:"1471127876485636",DEFAULT_FRAME_RATE:83,TRAY_SIZE:64,THREAD_SIZE:120};},null);
__d("StoryAttachmentStyle",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={FALLBACK:"fallback",SHARE:"share",OG_COMPOSER_SIMPLE:"og_composer_simple",SPORTS_MATCHUP:"sports_matchup",SHARE_LARGE_IMAGE:"share_large_image",PHOTO:"photo",COVER_PHOTO:"cover_photo",ALBUM:"album",NEW_ALBUM:"new_album",COUPON:"coupon",QUESTION:"question",ANSWER:"answer",OPTION:"option",GALLERY:"gallery",STREAM_PUBLISH:"stream_publish",MUSIC_AGGREGATION:"music_aggregation",ITEM_LIST:"list",HIGH_SCORE:"high_score",SCORE_LEADERBOARD:"score_leaderboard",FRIEND_LIST:"friend_list",POPULAR_OBJECTS:"popular_objects",AVATAR_LIST:"avatar_list",AVATAR:"avatar",AVATAR_WITH_VIDEO:"avatar_with_video",EVENT:"event",CANCELED_EVENT:"canceled_event",MINUTIAE_EVENT:"minutiae_event",EXPERIENCE:"experience",LIFE_EVENT:"life_event",TRAVEL_SLIDESHOW_LIFE_EVENT:"travel_slideshow_life_event",GIFT:"gift",IMAGE_SHARE:"image_share",ANIMATED_IMAGE_SHARE:"animated_image_share",ANIMATED_IMAGE_AUTOPLAY:"animated_image_autoplay",ANIMATED_IMAGE_VIDEO:"animated_image_video",ANIMATED_IMAGE_VIDEO_AUTOPLAY:"animated_image_video_autoplay",NOTE:"note",TOPIC:"topic",FILE_UPLOAD:"file_upload",NOTIFICATION_TARGET:"notification_target",UNAVAILABLE:"unavailable",PAGE_RECOMMENDATION:"page_recommendation",PAGE_VIDEO_PLAYLIST:"page_video_playlist",VIDEO:"video",VIDEO_INLINE:"video_inline",VIDEO_AUTOPLAY:"video_autoplay",VIDEO_SHARE:"video_share",VIDEO_SHARE_HIGHLIGHTED:"video_share_highlighted",VIDEO_SHARE_YOUTUBE:"video_share_youtube",VIDEO_DIRECT_RESPONSE:"video_direct_response",VIDEO_DIRECT_RESPONSE_AUTOPLAY:"video_direct_response_autoplay",VIDEO_SHOP:"video_shop",MAP:"map",OG_MAP:"og_map",PRODUCT:"product",EXTERNAL_PRODUCT:"external_product",FITNESS_COURSE:"fitness_course",APPLICATION:"application",STICKER:"sticker",EXTERNAL_OG_PRODUCT:"external_og_product",TRAVEL_LOG:"travel_log",MULTI_SHARE:"multi_share",MULTI_SHARE_NO_END_CARD:"multi_share_no_end_card",MULTI_SHARE_NON_LINK_VIDEO:"multi_share_non_link_video",MULTI_SHARE_SEARCH_END_CARD:"multi_share_search_end_card",MULTI_SHARE_FIXED_TEXT:"multi_share_fixed_text",YEAR_IN_REVIEW:"year_in_review",AVATAR_LARGE_COVER:"avatar_large_cover",COMMERCE_PRODUCT_ITEM:"commerce_product_item",COMMERCE_STORE:"commerce_store",THIRD_PARTY_PHOTO:"third_party_photo",PROMPT:"prompt",BIRTHDAY:"birthday",DONATIONS_CAMPAIGN:"donations_campaign",DONATE_PROMPT:"donate_prompt",DISCUSSION_CONVERSATION:"discussion_conversation",DISCUSSION_COMMENT:"discussion_comment",GROUP_SELL_PRODUCT_ITEM:"group_sell_product_item",GROUP_SELL_PRODUCT_ITEM_MARK_AS_SOLD:"group_sell_mark_as_sold",GAMETIME:"gametime",GAMETIME_PLAY:"gametime_play",GROUP_REPORTED_POST_QUEUE:"group_reported_post_queue",GROUP_PENDING_POST_QUEUE:"group_pending_post_queue",GROUP_JOIN_REQUEST_QUEUE:"group_join_request_queue",GREETING_CARD:"greeting_card",LEAD_GEN:"lead_gen",ATTACHED_STORY:"attached_story",POST_CHANNEL:"post_channel",TEXT_FOR_COLLAGE:"text_for_collage",SOUVENIR:"souvenir",SLIDESHOW:"slideshow",ORION:"orion",ORION_REQUEST:"orion_request",INSTANT_ARTICLE:"instant_article",MOMENTS_APP_INVITATION:"moments_app_invitation",MOMENTS_APP_PHOTO_REQUEST:"moments_app_photo_request",RIDE_ORDERED:"ride_ordered",RIDE_RECEIPT:"ride_receipt",BUSINESS_MESSAGE_ITEMS:"business_message_items",RETAIL_CANCELLATION:"retail_cancellation",RETAIL_PROMOTION:"retail_promotion",RETAIL_ITEM:"retail_item",RETAIL_NOW_IN_STOCK:"retail_now_in_stock",RETAIL_RECEIPT:"retail_receipt",RETAIL_SHIPMENT:"retail_shipment",RETAIL_SHIPMENT_FOR_SUPPORTED_CARRIER:"retail_shipment_for_supported_carrier",RETAIL_SHIPMENT_FOR_UNSUPPORTED_CARRIER:"retail_shipment_for_unsupported_carrier",RETAIL_SHIPMENT_TRACKING_EVENT:"retail_shipment_tracking_event",RETAIL_SHIPMENT_TRACKING_EVENT_ETA:"retail_shipment_tracking_event_eta",RETAIL_SHIPMENT_TRACKING_EVENT_IN_TRANSIT:"retail_shipment_tracking_event_in_transit",RETAIL_SHIPMENT_TRACKING_EVENT_OUT_FOR_DELIVERY:"retail_shipment_tracking_event_out_for_delivery",RETAIL_SHIPMENT_TRACKING_EVENT_DELAYED:"retail_shipment_tracking_event_delayed",RETAIL_SHIPMENT_TRACKING_EVENT_DELIVERED:"retail_shipment_tracking_event_delivered",SURVEY:"survey",MESSAGE_LOCATION:"message_location",JOB_OFFER:"job_offer",GROUP_ADD_MEMBERS:"group_add_memebers",RTC_CALL_LOG:"rtc_call_log",EVENTS_PENDING_POST_QUEUE:"events_pending_post_queue",EVENT_CALENDAR:"event_calendar",FACEPILE:"facepile",ATTRIBUTED_SHARE:"attributed_share",VIDEO_CINEMAGRAPH:"video_cinemagraph",LOCAL_CONTEXT_SHARE:"local_context_share",H_SCROLL:"h_scroll",EGO_HSCROLL:"ego_hscroll",MEDIA_QUESTION:"media_question",RICH_MEDIA:"rich_media",RICH_MEDIA_COLLECTION:"rich_media_collection",SQUARE_IMAGE_SHARE:"square_image_share",RETAIL_AGENT_ITEM_SUGGESTION:"retail_agent_item_suggestion",RETAIL_AGENT_ITEM_RECEIPT:"retail_agent_item_receipt",NOTE_COMPOSED:"note_composed",AVATAR_WITH_BIRTHDAY:"avatar_with_birthday",AIRLINE_FLIGHT_RESCHEDULE_UPDATE_BUBBLE:"airline_flight_reschedule_update_bubble",AIRLINE_CONFIRMATION:"airline_confirmation",AIRLINE_CHECK_IN:"airline_check_in",AIRLINE_BOARDING_PASS:"airline_boarding_pass",AIRLINE_FLIGHT_RESCHEDULE_UPDATE:"airline_flight_reschedule_update",LIGHTBOX_VIDEO:"lightbox_video",GLOBALLY_DELETED_MESSAGE_PLACEHOLDER:"globally_deleted_message_placeholder",GENIE_MESSAGE:"genie_message",MOVIE_BOT_MOVIE_LIST:"movie_bot_movie_list",MOVIE_BOT_MOVIE_SHOWTIME_LIST:"movie_bot_movie_showtime_list",AVATAR_WITH_EGO_ACTION:"avatar_with_ego_action",EVENT_TICKET_DEPRECATED:"event_ticket",VERTICAL_ATTACHMENT_LIST:"vertical_attachment_list",INSTANT_ARTICLE_LEGACY:"instant_article_legacy",FUNDRAISER_PAGE:"fundraiser_page",FINANCIAL_BILL_PAYMENT_REQUEST:"financial_bill_payment_request",GOODWILL_THROWBACK_FRIENDVERSARY_POLAROIDS_CARD:"goodwill_throwback_friendversary_polaroids_card",WELCOME_CARD_IMAGE:"welcome_card_image",LARGE_IMAGE_LIKE:"large_image_like",ASK_FRIENDS:"ask_friends",CULTURAL_MOMENT:"cultural_moment",TELEPHONE_CALL_LOG:"telephone_call_log",SUPER_EMOJI:"super_emoji",BOOK:"book",SUBTOPIC_CUSTOMIZATION_QUESTION:"subtopic_customization_question",SUBTOPIC_CUSTOMIZATION_OPTION:"subtopic_customization_option",RESTAURANT:"restaurant",CONNECTION_QUESTION:"connection_question",CONNECTION_QUESTION_OPTION:"connection_question_option",PYMI_ITEM:"pymi_item",GOODWILL_THROWBACK_FRIENDVERSARY_COLLAGE_CARD:"goodwill_throwback_friendversary_collage_card",CITY:"city",AVATAR_WITH_SHARE:"avatar_with_share",LIGHTWEIGHT_PLACE:"lightweight_place",QUOTED_SHARE:"quoted_share",SMS_LOG:"sms_log",CENTERED_TEXT:"centered_text",GOODWILL_THROWBACK_FRIENDVERSARY_DATA_CARD:"goodwill_throwback_friendversary_data_card",GOODWILL_THROWBACK_FACEVERSARY_COLLAGE_CARD:"goodwill_throwback_faceversary_collage_card",GOODWILL_THROWBACK_ANNIVERSARY_COLLAGE_CARD:"goodwill_throwback_anniversary_collage_card",MESSAGE_EVENT:"message_event",MESSAGE_THREAD:"message_thread",QUOTE:"quote",VOTER_REGISTRATION_SHARE:"voter_registration_share",AIRLINE_ITINERARY:"airline_itinerary",AIRLINE_UPDATE:"airline_update",PLACE_LIST:"place_list",AIRLINE_CHECKIN_REMINDER:"airline_checkin_reminder",MINUTIAE_UNIT:"minutiae_unit",INSTANT_ARTICLE_PHOTO:"instant_article_photo",INSTANT_ARTICLE_VIDEO:"instant_article_video",PHOTO_LINK_SHARE:"photo_link_share",BUSINESS_LOCATION:"business_location",GOODWILL_WEATHER:"goodwill_weather",TRANSACTION_INVOICE:"transaction_invoice",GROUP:"group",COMMENT_PLACE_INFO:"comment_place_info",GOODWILL_THROWBACK_FRIENDVERSARY_POLAROIDS_CARD_IPB:"goodwill_throwback_friendversary_polaroids_card_ipb",GOODWILL_THROWBACK_FRIENDVERSARY_COLLAGE_CARD_IPB:"goodwill_throwback_friendversary_collage_card_ipb",FUNDRAISER_PERSON_TO_CHARITY:"fundraiser_person_to_charity",MESSAGE_LIVE_LOCATION:"message_live_location",MESSENGER_INVITE:"messenger_invite",GAMES_INSTANT_PLAY:"games_instant_play",PROFILE_MEDIA:"profile_media",NATIVE_TEMPLATES:"native_templates",GOODWILL_THROWBACK_VIDEO_BASIC:"goodwill_throwback_video_basic",COMMERCE_PRODUCT_MINI:"commerce_product_mini",COMMERCE_PRODUCT_MINI_LIST:"commerce_product_mini_list",COMMENT:"comment",MESSENGER_TEAM_BOT_SHARE:"messenger_team_bot_share",LIVE_VIDEO_SCHEDULE:"live_video_schedule",PRODUCT_ITEM:"product_item",PLATFORM_INSTANT_APP:"platform_instant_app",YEAR_OVERVIEW:"year_overview",NATIVE_COMPONENT_FLOW_BOOKING_REQUEST:"native_component_flow_booking_request",FRIEND_REQUEST:"friend_request",MESSENGER_GROUP_JOINABLE_LINK:"messenger_group_joinable_link",SOCIAL_SEARCH_CONVERSION_PROMPT:"social_search_conversion_prompt",MDOTME_USER_LINK:"mdotme_user_link",DYNAMIC_MULTI_SHARE_ITEMS:"dynamic_multi_share_items",EVENT_REMINDER:"event_reminder",INSTANT_GAMES_SHARE_MESSAGE:"instant_games_share_message"};},null);
__d('MercuryAttachmentSnippetType',['keyMirror'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=h({PHOTO:null,GIF:null,VIDEO:null,AUDIO_CLIP:null,STICKER:null,SHARE:null,ERROR:null,MIXED:null,GIFT:null,THIRDPARTYSTICKER:null,FILE:null,LIKE_STICKER:null});f.exports=i;},null);
__d('MercuryGiftSnippetRenderer',['fbt'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={renderText:function(j,k){return j?h._("You sent a valentine."):h._("{name} sent a valentine.",[h.param('name',k)]);}};f.exports=i;},null);
__d('P2PSnippetStringUtils',['P2PPaymentRequestStatus','P2PTransferStatus','fbt'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={getRequestCanceledSnippet:function(l,m,n,o,p){if(l){return j._("Your request for {payment request amount} from {receiver's name} was canceled.",[j.param('payment request amount',p),j.param('receiver\'s name',o)]);}else if(m){return j._("{requester's name}'s request for {payment request amount} was canceled.",[j.param('requester\'s name',n),j.param('payment request amount',p)]);}else return j._("{requester's name}'s request for {payment request amount} from {receiver's name} was canceled.",[j.param('requester\'s name',n),j.param('payment request amount',p),j.param('receiver\'s name',o)]);},getRequestDeclinedSnippet:function(l,m,n,o,p){if(l){return j._("{receiver's name} declined your request for {payment request amount}.",[j.param('receiver\'s name',o),j.param('payment request amount',p)]);}else if(m){return j._("You declined {requester's name}'s request for {payment request amount}.",[j.param('requester\'s name',n),j.param('payment request amount',p)]);}else return j._("{receiver's name} declined {sender's name}'s request for {payment request amount}.",[j.param('receiver\'s name',o),j.param('sender\'s name',n),j.param('payment request amount',p)]);},getRequestSentSnippet:function(l,m,n,o,p){if(l){return j._("You requested {amount} from {requestee name}.",[j.param('amount',p),j.param('requestee name',o)]);}else if(m){return j._("{requester name} requested {amount} from you.",[j.param('requester name',n),j.param('amount',p)]);}else return j._("{name} requested {amount} from {requestee name}.",[j.param('name',n),j.param('amount',p),j.param('requestee name',o)]);},getRequestSnippetByStatus:function(l,m,n,o,p,q){var r=l||h.INITED,s=[m,n,o,p,q];switch(r){case h.DECLINED:return this.getRequestDeclinedSnippet.apply(this,s);case h.TRANSFER_FAILED:case h.CANCELED:return this.getRequestCanceledSnippet.apply(this,s);}return this.getRequestSentSnippet.apply(this,s);},getTransferCanceledSnippet:function(l,m,n,o,p){if(l){return j._("Your {amount} payment to {receiver_name} was canceled.",[j.param('amount',p),j.param('receiver_name',o)]);}else if(m){return j._("{sender name}'s {amount} payment was canceled.",[j.param('sender name',n),j.param('amount',p)]);}else return j._("{sender_name}'s {amount} payment to {receiver_name} was canceled.",[j.param('sender_name',n),j.param('amount',p),j.param('receiver_name',o)]);},getTransferDeclinedSnippet:function(l,m,n,o,p){if(l){return j._("{receiver_name} didn't accept your {amount} payment.",[j.param('receiver_name',o),j.param('amount',p)]);}else if(m){return j._("You didn't accept {sender name}'s {amount} payment.",[j.param('sender name',n),j.param('amount',p)]);}else return j._("{receiver_name} didn't accept {sender_name}'s {amount} payment.",[j.param('receiver_name',o),j.param('sender_name',n),j.param('amount',p)]);},getTransferSentSnippet:function(l,m,n,o,p){if(l){return j._("You sent {receiver name} {amount}.",[j.param('receiver name',o),j.param('amount',p)]);}else if(m){return j._("{name} sent you {amount}.",[j.param('name',n),j.param('amount',p)]);}else return j._("{sender name} sent {receiver name} {amount}.",[j.param('sender name',n),j.param('receiver name',o),j.param('amount',p)]);},getTransferSnippetByStatus:function(l,m,n,o,p,q){var r=[m,n,o,p,q],s=l||i.PENDING_SENDER_INITED;switch(s){case i.CANCELED_DECLINED:return this.getTransferDeclinedSnippet.apply(this,r);case i.CANCELED_SENDER_RISK:case i.CANCELED_RECIPIENT_RISK:case i.CANCELED_SYSTEM_FAIL:case i.CANCELED_EXPIRED:case i.CANCELED_SAME_CARD:return this.getTransferCanceledSnippet.apply(this,r);}return this.getTransferSentSnippet.apply(this,r);}};f.exports=k;},null);
__d('MercuryAttachmentSnippetRenderer',['CurrentUser','MercuryAttachmentSnippetType','MercuryAttachmentType','MercuryAudioType','MercuryGiftSnippetRenderer','P2PSnippetStringUtils','StickerConstants','StoryAttachmentStyle','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){'use strict';if(c.__markCompiled)c.__markCompiled();var q={getAttachmentSnippetType:function(r){if(this._hasOnlyPhotos(r))return i.PHOTO;if(this._hasOnlyAnimatedImages(r))return i.GIF;if(this._hasOnlyVideo(r))return i.VIDEO;if(this._hasAudioClip(r))return i.AUDIO_CLIP;if(this._hasLikeSticker(r))return i.LIKE_STICKER;if(this._hasSticker(r))return i.STICKER;if(this._hasThirdPartySticker(r))return i.THIRDPARTYSTICKER;if(this._hasShare(r))return i.SHARE;if(this._hasGift(r))return i.GIFT;if(this._hasError(r))return i.ERROR;if(this._hasFile(r))return i.FILE;return i.MIXED;},renderAttachmentSnippetText:function(r,s,t,u){switch(r){case i.PHOTO:return this._renderPhotoAttachmentSnippetText(s,t,this._getPhotoAttachments(u));case i.GIF:return this._renderAnimatedImagesAttachmentSnippetText(s,t,this._getAnimatedImageAttachments(u));case i.VIDEO:return s?p._("You sent a video."):p._("{sender name} sent a video.",[p.param('sender name',t)]);case i.AUDIO_CLIP:return s?p._("You sent a voice message."):p._("{name} sent a voice message.",[p.param('name',t)]);case i.STICKER:case i.LIKE_STICKER:case i.THIRDPARTYSTICKER:return s?p._("You sent a sticker."):p._("{name} sent a sticker.",[p.param('name',t)]);case i.SHARE:if(u&&this._hasP2PPayment(u))return this._renderP2PPaymentSnippetText(u[0]);if(u&&this._hasP2PPaymentRequest(u))return this._renderP2PPaymentRequestSnippetText(u[0]);if(u&&this._hasBusinessMessage(u))return this._renderBusinessMessageSnippetText(u[0],t);if(u&&this._hasLocation(u))return s?p._("You sent a location."):p._("{sender name} sent a location.",[p.param('sender name',t)]);return s?p._("You sent a link."):p._("{sender name} sent a link.",[p.param('sender name',t)]);case i.GIFT:return l.renderText(s,t);case i.FILE:return s?p._("You sent an attachment."):p._("{sender name} sent an attachment.",[p.param('sender name',t)]);case i.ERROR:return s?p._("You sent an attachment."):p._("{sender name} sent an attachment.",[p.param('sender name',t)]);default:return '';}},_hasOnlyPhotos:function(r){return this._getPhotoAttachments(r).length===r.length;},_hasThirdPartySticker:function(r){return (r.length===1&&r[0].attach_type===j.THIRDPARTYSTICKER);},_hasOnlyAnimatedImages:function(r){return this._getAnimatedImageAttachments(r).length===r.length;},_hasOnlyVideo:function(r){return (r.length===1&&r[0].attach_type===j.VIDEO);},_hasAudioClip:function(r){var s=r[0].metadata&&r[0].metadata.type;return (r.length===1&&(s===k.AudioClip||s===k.VoiceMessageWithTranscript));},_hasBusinessMessage:function(r){return this._hasSingleShareAttachmentOfStyle(r,o.BUSINESS_MESSAGE_ITEMS);},_hasSticker:function(r){return (r.length===1&&r[0].attach_type===j.STICKER);},_hasLikeSticker:function(r){if(r.length<1)return false;var s=r[0].metadata&&r[0].metadata.stickerID;return (r.length===1&&(s==n.LIKE_STICKER_ID||s==n.HOT_LIKE_SMALL_STICKER_ID||s==n.HOT_LIKE_MEDIUM_STICKER_ID||s==n.HOT_LIKE_LARGE_STICKER_ID));},_hasLocation:function(r){return this._hasSingleShareAttachmentOfStyle(r,o.MESSAGE_LOCATION);},_hasP2PPayment:function(r){return this._hasSingleShareAttachmentOfStyle(r,o.ORION);},_hasP2PPaymentRequest:function(r){return this._hasSingleShareAttachmentOfStyle(r,o.ORION_REQUEST);},_hasSingleShareAttachmentOfStyle:function(r,s){return (r.length===1&&r[0].attach_type===j.SHARE&&r[0].share.style_list.indexOf(s)>=0);},_hasShare:function(r){return (r.length===1&&r[0].attach_type===j.SHARE);},_hasError:function(r){return (r.length===1&&r[0].attach_type===j.ERROR);},_hasGift:function(r){return (r.length===1&&r[0].attach_type===j.GIFT);},_hasFile:function(r){return (r.length===1&&r[0].attach_type===j.FILE);},_getPhotoAttachments:function(r){if(!r)return [];return r.filter(function(s){return s.attach_type===j.PHOTO;});},_getAnimatedImageAttachments:function(r){if(!r)return [];return r.filter(function(s){return s.attach_type===j.ANIMATED_IMAGE;});},_renderPhotoAttachmentSnippetText:function(r,s,t){if(t.length===1){if(r){return p._("You sent a photo.");}else return p._("{name} sent a photo.",[p.param('name',s)]);}else if(r){return p._({"*":"You sent {num_photos} photos."},[p.param('num_photos',t.length,[0])]);}else return p._({"*":"{name} sent {num_photos} photos."},[p.param('name',s),p.param('num_photos',t.length,[0])]);},_renderAnimatedImagesAttachmentSnippetText:function(r,s,t){if(t.length===1){if(r){return p._("You sent a GIF.");}else return p._("{name} sent a GIF.",[p.param('name',s)]);}else if(r){return p._("You sent {num_animated_images} GIFs.",[p.param('num_animated_images',t.length)]);}else return p._("{name} sent {num_animated_images} GIFs.",[p.param('name',s),p.param('num_animated_images',t.length)]);},_renderBusinessMessageSnippetText:function(r,s){var t=r.share.target,u=t&&t.message||p._("{sender name} sent an attachment.",[p.param('sender name',s)]);return u;},_renderP2PPaymentSnippetText:function(r){var s=r.share.target;return this.renderP2PPaymentSnippetText(h.getID()===s.sender.id,s.sender.name,s.amountWithSymbol,s.status,h.getID()===s.receiver.id,s.receiver.name);},_renderP2PPaymentRequestSnippetText:function(r){var s=r.share.target;return this.renderP2PPaymentRequestSnippetText(h.getID()===s.requester.id,s.requester.name,s.amountWithSymbol,s.currentStatus,h.getID()===s.requestee.id,s.requestee.name);},renderP2PPaymentSnippetText:function(r,s,t,u,v,w){return m.getTransferSnippetByStatus(u,r,v||false,s||'',w||'',t);},renderP2PPaymentRequestSnippetText:function(r,s,t,u,v,w){return m.getRequestSnippetByStatus(u,r,v||false,s||'',w||'',t);}};f.exports=q;},null);
__d('DateStrings',['fbt'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i,j,k,l,m,n,o,p,q={getWeekdayName:function(r){if(!n)n=[h._("Sunday"),h._("Monday"),h._("Tuesday"),h._("Wednesday"),h._("Thursday"),h._("Friday"),h._("Saturday")];return n[r];},getUppercaseWeekdayName:function(r){if(!p)p=[h._("SUNDAY"),h._("MONDAY"),h._("TUESDAY"),h._("WEDNESDAY"),h._("THURSDAY"),h._("FRIDAY"),h._("SATURDAY")];return p[r];},getWeekdayNameShort:function(r){if(!o)o=[h._("Sun"),h._("Mon"),h._("Tue"),h._("Wed"),h._("Thu"),h._("Fri"),h._("Sat")];return o[r];},getMonthName:function(r){if(!i)i=[h._("January"),h._("February"),h._("March"),h._("April"),h._("May"),h._("June"),h._("July"),h._("August"),h._("September"),h._("October"),h._("November"),h._("December")];return i[r-1];},getUppercaseMonthName:function(r){if(!l)l=[h._("JANUARY"),h._("FEBRUARY"),h._("MARCH"),h._("APRIL"),h._("MAY"),h._("JUNE"),h._("JULY"),h._("AUGUST"),h._("SEPTEMBER"),h._("OCTOBER"),h._("NOVEMBER"),h._("DECEMBER")];return l[r-1];},getMonthNameShort:function(r){if(!j)j=[h._("Jan"),h._("Feb"),h._("Mar"),h._("Apr"),h._("May"),h._("Jun"),h._("Jul"),h._("Aug"),h._("Sep"),h._("Oct"),h._("Nov"),h._("Dec")];return j[r-1];},getUppercaseMonthNameShort:function(r){if(!k)k=[h._("JAN"),h._("FEB"),h._("MAR"),h._("APR"),h._("MAY"),h._("JUN"),h._("JUL"),h._("AUG"),h._("SEP"),h._("OCT"),h._("NOV"),h._("DEC")];return k[r-1];},getOrdinalSuffix:function(r){if(!m)m=['',h._("st"),h._("nd"),h._("rd"),h._("th"),h._("th"),h._("th"),h._("th"),h._("th"),h._("th"),h._("th"),h._("th"),h._("th"),h._("th"),h._("th"),h._("th"),h._("th"),h._("th"),h._("th"),h._("th"),h._("th"),h._("st"),h._("nd"),h._("rd"),h._("th"),h._("th"),h._("th"),h._("th"),h._("th"),h._("th"),h._("th"),h._("st")];return m[r];},getDayLabel:function(){return h._("Day:");},getMonthLabel:function(){return h._("Month:");},getYearLabel:function(){return h._("Year:");},getDayPlaceholder:function(){return h._("dd");},getMonthPlaceholder:function(){return h._("mm");},getYearPlaceholder:function(){return h._("yyyy");},get12HourClockSuffix:function(r){if(r<12)return h._("am");return h._("pm");},getUppercase12HourClockSuffix:function(r){if(r<12)return h._("AM");return h._("PM");}};f.exports=q;},null);
__d('padNumber',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i,j){var k=i.toString();if(k.length>=j)return k;return '0'.repeat(j-k.length)+k;}f.exports=h;},null);
__d('formatDate',['DateStrings','DateFormatConfig','invariant','padNumber'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();function l(o,p,q){q=q||{};if(!p||!o)return '';if(typeof o==='string')o=parseInt(o,10);if(typeof o==='number')o=new Date(o*1000);!(o instanceof Date)?j(0):void 0;!!isNaN(o.getTime())?j(0):void 0;if(typeof p!=='string'){var r=m();for(var s in r){var t=r[s];if(t.start<=o.getTime()&&p[t.name]){p=p[t.name];break;}}}var u;if(q.skipPatternLocalization||!q.formatInternal&&n()||p.length===1){u=p;}else{!i.formats[p]?j(0):void 0;u=i.formats[p];}var v=q.utc?'getUTC':'get',w=o[v+'Date'](),x=o[v+'Day'](),y=o[v+'Month'](),z=o[v+'FullYear'](),aa=o[v+'Hours'](),ba=o[v+'Minutes'](),ca=o[v+'Seconds'](),da=o[v+'Milliseconds'](),ea='';for(var fa=0;fa<u.length;fa++){var ga=u.charAt(fa);switch(ga){case '\\':fa++;ea+=u.charAt(fa);break;case 'd':ea+=k(w,2);break;case 'j':ea+=w;break;case 'S':ea+=h.getOrdinalSuffix(w);break;case 'D':ea+=h.getWeekdayNameShort(x);break;case 'l':ea+=h.getWeekdayName(x);break;case 'F':case 'f':ea+=h.getMonthName(y+1);break;case 'M':ea+=h.getMonthNameShort(y+1);break;case 'm':ea+=k(y+1,2);break;case 'n':ea+=y+1;break;case 'Y':ea+=z;break;case 'y':ea+=(''+z).slice(2);break;case 'a':if(q.skipSuffixLocalization){ea+=aa<12?'am':'pm';}else ea+=h.get12HourClockSuffix(aa);break;case 'A':if(q.skipSuffixLocalization){ea+=aa<12?'AM':'PM';}else ea+=h.getUppercase12HourClockSuffix(aa);break;case 'g':ea+=aa===0||aa===12?12:aa%12;break;case 'G':ea+=aa;break;case 'h':if(aa===0||aa===12){ea+=12;}else ea+=k(aa%12,2);break;case 'H':ea+=k(aa,2);break;case 'i':ea+=k(ba,2);break;case 's':ea+=k(ca,2);break;case 'X':ea+=k(da,3);break;default:ea+=ga;}}return ea;}function m(){var o=new Date(),p=o.getTime(),q=o.getFullYear(),r=o.getDate()-(o.getDay()-i.weekStart+6)%7,s=new Date(q,o.getMonth()+1,0).getDate(),t=new Date(q,1,29).getMonth()===1?366:365,u=1000*60*60*24;return [{name:'today',start:o.setHours(0,0,0,0)},{name:'withinDay',start:p-u},{name:'thisWeek',start:new Date(o.getTime()).setDate(r)},{name:'withinWeek',start:p-u*7},{name:'thisMonth',start:o.setDate(1)},{name:'withinMonth',start:p-u*s},{name:'thisYear',start:o.setMonth(0)},{name:'withinYear',start:p-u*t},{name:'older',start:-Infinity}];}l.periodNames=['today','thisWeek','thisMonth','thisYear','withinDay','withinWeek','withinMonth','withinYear','older'];function n(){if(typeof window==='undefined'||!window||!window.location||!window.location.pathname)return false;var o=window.location.pathname,p='/intern';return o.substr(0,p.length)===p;}f.exports=l;},null);
__d('MMessagePayload',['ChannelEventType','CurrentUser','MercuryAttachmentSnippetRenderer','fbt','formatDate'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m=25,n=1000,o='g:ia';function p(q){this.$MMessagePayload1=q;}p.prototype.isPageMessage=function(){return this.$MMessagePayload1.type===h.PAGES_MESSAGE;};p.prototype.getThreadFBID=function(){return (this.$MMessagePayload1.thread_fbid&&this.$MMessagePayload1.thread_fbid.toString());};p.prototype.getHref=function(){return this.$MMessagePayload1.href;};p.prototype.getAuthorFBID=function(){return this.$MMessagePayload1.sender_fbid.toString();};p.prototype.getAuthorName=function(){return this.$MMessagePayload1.sender_name;};p.prototype.getThreadName=function(){return this.$MMessagePayload1.thread_name;};p.prototype.getThreadUnreadCount=function(){return this.$MMessagePayload1.thread_unread_count;};p.prototype.getSnippet=function(){var q=this.$MMessagePayload1.body;if(q)if(q.length>m){return k._("{shortened body}{dot dot dot (for truncation)}",[k.param('shortened body',q.substring(0,m)),k.param('dot dot dot (for truncation)','...')]);}else return q;var r=j.getAttachmentSnippetType(this.$MMessagePayload1.attachments);return j.renderAttachmentSnippetText(r,this.getAuthorFBID()===i.getID(),this.getAuthorName(),this.$MMessagePayload1.attachments);};p.prototype.getMessage=function(){return this.$MMessagePayload1.body;};p.prototype.getTime=function(){return l(this.$MMessagePayload1.timestamp/n,o);};p.prototype.getTimestamp=function(){return this.$MMessagePayload1.timestamp.toString();};p.prototype.getUUID=function(){return this.$MMessagePayload1.message_id;};p.prototype.getFolder=function(){return this.$MMessagePayload1.folder;};p.prototype.getMessageSource=function(){return this.$MMessagePayload1.source;};p.prototype.getParticipantIDs=function(){var q=this.$MMessagePayload1.participant_ids||[];return q.map(function(r){return r.toString();});};p.prototype.hasThreadImage=function(){return this.$MMessagePayload1.has_thread_image;};p.prototype.getAttachmentCount=function(){return this.$MMessagePayload1.attachments.length;};p.prototype.getAttachments=function(){return this.$MMessagePayload1.attachments;};p.prototype.isCanonicalThread=function(){return !!this.$MMessagePayload1.is_canonical;};p.prototype.isUnread=function(){return this.$MMessagePayload1.is_unread;};p.prototype.getOtherUserFBID=function(){var q=this.$MMessagePayload1.participant_ids;if(!this.isCanonicalThread()){return null;}else if(q.length===1){return q[0].toString();}else{if(q[0].toString()===i.getID()){if(this.isPageMessage())return q[0].toString();return q[1].toString();}return q[0].toString();}};p.prototype.getThreadNameWithUnreadCount=function(){if(!this.getThreadUnreadCount())return this.getThreadName();return k._("{thread name} ({unread count})",[k.param('thread name',this.getThreadName()),k.param('unread count',this.getThreadUnreadCount())]);};f.exports=p;},null);
__d('CallbackManagerController',['ErrorUtils'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j){'use strict';this.$CallbackManagerController1=[];this.$CallbackManagerController2=[undefined];this.$CallbackManagerController3=j;}i.prototype.executeOrEnqueue=function(j,k,l){'use strict';l=l||{};var m=this.$CallbackManagerController4(k,j,l);if(m)return 0;this.$CallbackManagerController2.push({fn:k,request:j,options:l});var n=this.$CallbackManagerController2.length-1;this.$CallbackManagerController1.push(n);return n;};i.prototype.unsubscribe=function(j){'use strict';delete this.$CallbackManagerController2[j];};i.prototype.reset=function(){'use strict';this.$CallbackManagerController2=[];};i.prototype.getRequest=function(j){'use strict';return this.$CallbackManagerController2[j];};i.prototype.runPossibleCallbacks=function(){'use strict';var j=this.$CallbackManagerController1;this.$CallbackManagerController1=[];var k=[];j.forEach(function(l){var m=this.$CallbackManagerController2[l];if(!m)return;if(this.$CallbackManagerController3(m.request,m.options)){k.push(l);}else this.$CallbackManagerController1.push(l);}.bind(this));k.forEach(function(l){var m=this.$CallbackManagerController2[l];delete this.$CallbackManagerController2[l];this.$CallbackManagerController4(m.fn,m.request,m.options);}.bind(this));};i.prototype.$CallbackManagerController4=function(j,k,l){'use strict';var m=this.$CallbackManagerController3(k,l);if(m){var n={ids:k};h.applyWithGuard(j,n,m);}return !!m;};f.exports=i;},null);
__d('KeyedCallbackManager',['CallbackManagerController','ErrorUtils'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(){'use strict';this.$KeyedCallbackManager1={};this.$KeyedCallbackManager2=new h(this.$KeyedCallbackManager3.bind(this));}j.prototype.executeOrEnqueue=function(k,l){'use strict';if(!(k instanceof Array)){var m=k,n=l;k=[k];l=function(o){n(o[m]);};}k=k.filter(function(o){var p=o!==null&&o!==undefined;if(!p)i.applyWithGuard(function(){throw new Error('KeyedCallbackManager.executeOrEnqueue: key '+JSON.stringify(o)+' is invalid');});return p;});return this.$KeyedCallbackManager2.executeOrEnqueue(k,l);};j.prototype.unsubscribe=function(k){'use strict';this.$KeyedCallbackManager2.unsubscribe(k);};j.prototype.reset=function(){'use strict';this.$KeyedCallbackManager2.reset();this.$KeyedCallbackManager1={};};j.prototype.getUnavailableResources=function(k){'use strict';var l=this.$KeyedCallbackManager2.getRequest(k),m=[];if(l)m=l.request.filter(function(n){return !this.$KeyedCallbackManager1[n];}.bind(this));return m;};j.prototype.getUnavailableResourcesFromRequest=function(k){'use strict';var l=Array.isArray(k)?k:[k];return l.filter(function(m){if(m!==null&&m!==undefined)return !this.$KeyedCallbackManager1[m];},this);};j.prototype.addResourcesAndExecute=function(k){'use strict';Object.assign(this.$KeyedCallbackManager1,k);this.$KeyedCallbackManager2.runPossibleCallbacks();};j.prototype.setResource=function(k,l){'use strict';this.$KeyedCallbackManager1[k]=l;this.$KeyedCallbackManager2.runPossibleCallbacks();};j.prototype.getResource=function(k){'use strict';return this.$KeyedCallbackManager1[k];};j.prototype.getAllResources=function(){'use strict';return this.$KeyedCallbackManager1;};j.prototype.dumpResources=function(){'use strict';var k={};for(var l in this.$KeyedCallbackManager1){var m=this.$KeyedCallbackManager1[l];if(typeof m==='object')m=babelHelpers['extends']({},m);k[l]=m;}return k;};j.prototype.$KeyedCallbackManager3=function(k){'use strict';var l={};for(var m=0;m<k.length;m++){var n=k[m],o=this.$KeyedCallbackManager1[n];if(typeof o=='undefined')return false;l[n]=o;}return [l];};f.exports=j;},null);
__d('MMessageServerResourceFetcher',['KeyedCallbackManager','MRequest'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();function j(k,l){this.$MMessageServerResourceFetcher3=k;this.$MMessageServerResourceFetcher4=l;this.$MMessageServerResourceFetcher1=new h();this.$MMessageServerResourceFetcher2={};}j.prototype.get=function(k,l){this.getMulti([k],function(m){l(m[k]);});};j.prototype.getMulti=function(k,l){var m=!this.$MMessageServerResourceFetcher1.executeOrEnqueue(k,l);if(m)return;var n=k.filter(function(p){var q=!this.$MMessageServerResourceFetcher1.getResource(p)&&!this.$MMessageServerResourceFetcher2[p];if(q)this.$MMessageServerResourceFetcher2[p]=true;return q;}.bind(this));if(n.length===0)return;var o=new i(this.$MMessageServerResourceFetcher3(n)).setMethod('GET');o.listen('done',function(p){if(!p||!p.payload)return;var q=this.$MMessageServerResourceFetcher4(p.payload);if(q)this.$MMessageServerResourceFetcher1.addResourcesAndExecute(q);}.bind(this));o.listen('finally',function(p){n.forEach(function(){delete this.$MMessageServerResourceFetcher2[p];}.bind(this));}.bind(this));o.send();};j.prototype.set=function(k,l){var m={};m[k]=l;this.$MMessageServerResourceFetcher1.addResourcesAndExecute(m);};f.exports=j;},null);
__d('MercurySingletonProvider',['CurrentUser'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(j){this.$MercurySingletonProvider1={};this.$MercurySingletonProvider2=j;}i.prototype.getForFBID=function(j){if(!this.$MercurySingletonProvider1[j])this.$MercurySingletonProvider1[j]=new this.$MercurySingletonProvider2(j);return this.$MercurySingletonProvider1[j];};i.prototype.get=function(){return this.getForFBID(h.getID());};i.mock=function(j){throw new Error('MercurySingletonProvider.mock() must only be used in tests.');};f.exports=i;},null);
__d("XChatThreadInfoAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/chat\/thread_info\/",{thread_fbids:{type:"StringVector",defaultValue:[]},other_user_fbids:{type:"StringVector",defaultValue:[]}});},null);
__d('MMessagesThreadDataStore',['ActorURI','MMessageServerResourceFetcher','CurrentUser','MercurySingletonProvider','XChatThreadInfoAsyncController'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();m.getForFBID=function(o){return n.getForFBID(o);};m.get=function(){return n.get();};function m(o){this.$MMessagesThreadDataStore6=o;this.$MMessagesThreadDataStore1=new i(function(p){var q=l.getURIBuilder().setStringVector('other_user_fbids',p).getURI();if(j.getID()!==o)q=h.create(q,o);return q.toString();},function(p){return p.profiles;});this.$MMessagesThreadDataStore2=new i(function(p){var q=l.getURIBuilder().setStringVector('thread_fbids',p).getURI();if(j.getID()!==o)q=h.create(q,o);return q.toString();},function(p){return p.profiles;});this.$MMessagesThreadDataStore3={};this.$MMessagesThreadDataStore5={};this.$MMessagesThreadDataStore4={};}m.prototype.$MMessagesThreadDataStore7=function(o,p){if(o!==null){return this.$MMessagesThreadDataStore1;}else return this.$MMessagesThreadDataStore2;};m.prototype.getForNewMessage=function(o,p,q,r,s){var t=this.$MMessagesThreadDataStore7(o,p),u=o||p;t.get(u,function(v){if(this.$MMessagesThreadDataStore3[u]===undefined){this.$MMessagesThreadDataStore3[u]=v.unread_count;delete v.unread_count;this.$MMessagesThreadDataStore5[q]=true;}else if(!this.$MMessagesThreadDataStore5[q]){delete v.unread_count;this.$MMessagesThreadDataStore5[q]=true;if(r){this.$MMessagesThreadDataStore3[u]=this.$MMessagesThreadDataStore3[u]+1;}else this.$MMessagesThreadDataStore3[u]=0;}if(this.$MMessagesThreadDataStore4[u]===undefined)this.$MMessagesThreadDataStore4[u]=v.pages_is_flagged;v.thread_unread_count=this.$MMessagesThreadDataStore3[u];s(v);}.bind(this));};m.prototype.updateFlagStatus=function(o,p,q,r){var s=this.$MMessagesThreadDataStore7(o,p),t=o||p;s.get(t,function(u){this.$MMessagesThreadDataStore4[t]=q;r();}.bind(this));};m.prototype.getIsThreadFlagged=function(o,p){var q=o||p;return this.$MMessagesThreadDataStore4[q];};m.prototype.clearUnreadCount=function(o,p,q){var r=this.$MMessagesThreadDataStore7(o,p),s=o||p;r.get(s,function(t){this.$MMessagesThreadDataStore3[s]=0;q();}.bind(this));};var n=new k(m);f.exports=m;},null);
__d("XChatUserInfoAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/chat\/user_info\/",{ids:{type:"IntVector",defaultValue:[]}});},null);
__d('MShortProfiles',['MMessageServerResourceFetcher','XChatUserInfoAsyncController'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=new h(function(l){return i.getURIBuilder().setIntVector('ids',l).getURI().toString();},function(l){return l.profiles;}),k={get:function(l,m){j.get(l,m);},getMulti:function(l,m){j.getMulti(l,m);},set:function(l,m){j.set(l,m);}};f.exports=k;},null);
__d('MercuryChannelMessageTransformer',['MercuryActionType'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(j,k){var l={author:j.mercury_author_id,author_email:j.mercury_author_email,body:j.body,subject:j.subject,has_attachment:j.has_attachment,attachments:j.attachments,ephemeral_ttl_mode:j.ephemeral_ttl_mode,html_body:j.html_body,thread_id:j.tid,thread_fbid:j.thread_fbid&&j.thread_fbid.toString(),other_user_fbid:j.other_user_fbid&&j.other_user_fbid.toString(),offline_threading_id:j.offline_threading_id,message_id:j.mid,is_spoof_warning:j.is_spoof_warning,ranges:j.ranges,source:j.mercury_source,source_tags:j.mercury_source_tags,tags:j.tags&&j.tags.split(','),threading_id:j.threading_id,timestamp:j.timestamp,timestamp_absolute:j.timestamp_absolute,timestamp_relative:j.timestamp_relative,timestamp_datetime:j.timestamp_datetime,timestamp_time_passed:j.timestamp_time_passed,action_type:h.USER_GENERATED_MESSAGE,is_unread:j.is_unread,is_forward:false,forward_count:j.forward_count||j.forward,forward_message_ids:j.forward_msg_ids,folder:k,sync_id:j.sync_id};return l;}f.exports={transform:i};},null);
__d('MercuryIDs',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={isValid:function(i){if(!i||typeof i!=='string')return false;return (/^\w{3,12}:.+/.test(i));},isValidThreadID:function(i){if(!h.isValid(i))return false;var j=h.tokenize(i);switch(j.type){case 'user':case 'group':case 'thread':case 'root':case 'pending':return true;default:return false;}},tokenize:function(i){if(!i||!h.isValid(i))throw new Error('bad_id_format '+String(i));var j=i.indexOf(':');return {type:i.substr(0,j),value:i.substr(j+1)};},getUserIDFromParticipantID:function(i){if(!h.isValid(i))throw new Error('bad_id_format '+i);var j=h.tokenize(i),k=j.type,l=j.value;return k==='fbid'?l:null;},getParticipantIDFromUserID:function(i){if(isNaN(i))throw new Error('Not a user ID: '+i);return 'fbid:'+i;},getUserIDFromThreadID:function(i){if(!this.isCanonical(i))return null;return this.tokenize(i).value;},getThreadIDFromUserID:function(i){return 'user:'+i;},getThreadIDFromThreadFBID:function(i){return 'thread:'+i;},getThreadFBIDFromThreadID:function(i){return this.tokenize(i).value;},getThreadIDFromParticipantID:function(i){var j=this.getUserIDFromParticipantID(i);return j?this.getThreadIDFromUserID(j):null;},getParticipantIDFromFromThreadID:function(i){var j=this.getUserIDFromThreadID(i);return j?this.getParticipantIDFromUserID(j):null;},isCanonical:function(i){return this.isValid(i)&&this.tokenize(i).type==='user';},isGroupChat:function(i){return this.isValid(i)&&this.tokenize(i).type!=='user';},isLocalThread:function(i){return this.isValid(i)&&this.tokenize(i).type==='root';}};f.exports=h;},null);
__d('MMessagesChannelPayloadPreparer',['Promise','CurrentUser','MercuryChannelMessageTransformer','MercuryIDs','MessagingTag','MMessagePayload','MMessagesConfig','MMessagesThreadDataStore','MShortProfiles','StoryAttachmentStyle','Stratcom'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){'use strict';if(c.__markCompiled)c.__markCompiled();var s={fetchDataThenDispatch:function(t){var u=t.message.message_id!==undefined&&t.message.mid===undefined;if(!u)t.message=j.transform(t.message,l.INBOX);t.message.folder=t.folder;t.message.sender_fbid=k.getUserIDFromParticipantID(t.message.author);if(n.msite_genie_xma_rendering)this._processGenieMessage(t.message);var v=t.targetFBID?t.targetFBID:t.realtime_viewer_fbid.toString(),w=[new h(function(x,y){var z=o.getForFBID(v);z.getForNewMessage(t.message.other_user_fbid,t.message.thread_fbid,t.message.message_id,t.message.is_unread,function(aa){x(aa);});}),new h(function(x,y){p.get(t.message.sender_fbid.toString(),function(z){x(z);});})];h.all(w).done(function(x){var y=x[0],z=x[1];Object.assign(t.message,{thread_name:y.thread_name,participant_ids:y.participant_ids,has_thread_image:y.has_thread_image,is_canonical:y.is_canonical,href:y.href,thread_unread_count:y.thread_unread_count,pages_is_flagged:y.pages_is_flagged,sender_name:z.name,type:t.type});t.parsedPayload=new m(t.message);r.invoke(t.type,null,t);});},_processGenieMessage:function(t){if(!t.has_attachment||!t.attachments)return;for(var u=t.attachments.length-1;u>=0;u-=1){var v=t.attachments[u];if(!v.share||!v.share.style_list||v.share.style_list[0]!=q.GENIE_MESSAGE)continue;if(v.share.target.genie_id){t.sender_fbid=v.share.target.genie_id;t.sender='fbid:'+v.share.target.genie_id;}if(v.share.target.genie_name)t.sender_name=v.share.target.genie_name;if(v.share.target&&!v.share.target.attachment){t.attachments.splice(u,1);t.has_attachment=t.attachments.length>0;}}}};f.exports=s;},null);
__d('MMessagesReadReceipts',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=undefined,i={};function j(m,n){h=m;i=n;}function k(m,n){if(m!==h)return;for(var o in n){if(!n.hasOwnProperty(o))continue;var p=n[o],q=i[o];if(q===undefined){i[o]=p;}else i[o]=Math.max(q,p);}}function l(m,n,o){if(m!==h)return {};var p={};for(var q in i){if(!i.hasOwnProperty(q)){continue;}else if(o.indexOf(q)!==-1){continue;}else if(i[q]<n)continue;p[q]=i[q];}return p;}f.exports={init:j,update:k,getSeenBy:l};},null);
__d('MercurySyncDeltaTypes',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={AdminAddedToGroupThread:'AdminAddedToGroupThread',AdminRemovedFromGroupThread:'AdminRemovedFromGroupThread',AdminTextMessage:'AdminTextMessage',DeliveryReceipt:'DeliveryReceipt',ForcedFetch:'ForcedFetch',MarkRead:'MarkRead',MarkUnread:'MarkUnread',MessageDelete:'MessageDelete',NewMessage:'NewMessage',PagesManagerEvent:'PagesManagerEvent',ParticipantLeftGroupThread:'ParticipantLeftGroupThread',ParticipantsAddedToGroupThread:'ParticipantsAddedToGroupThread',ReadReceipt:'ReadReceipt',ReplaceMessage:'ReplaceMessage',RTCEventLog:'RTCEventLog',ThreadAction:'ThreadAction',ThreadDelete:'ThreadDelete',ThreadMuteSettings:'ThreadMuteSettings',ThreadName:'ThreadName',JoinableMode:'JoinableMode',ApprovalMode:'ApprovalMode',ApprovalQueue:'ApprovalQueue'};f.exports=h;},null);
__d('MercurySyncMarkReadTransformer',['MercuryActionType','MercuryGlobalActionType','MessagingTag'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();function k(l){if(l.folders&&l.folders.length>0)return l.folders.map(function(m){return {action_type:i.MARK_ALL_READ,action_id:null,folder:m,timestamp:parseInt(l.watermarkTimestamp,10)};});return l.threadKeys.map(function(m){return {action_type:h.CHANGE_READ_STATUS,other_user_fbid:m.otherUserFbId,thread_fbid:m.threadFbId,mark_as_read:true,timestamp:parseInt(l.watermarkTimestamp,10),folder:j.INBOX};});}f.exports={transform:k};},null);
__d('MercuryMessageCustomizations',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(j,k){var l=j.customizations;if(!l)return null;var m=l.filter(function(n){return n.customization_type===k;});return m.length>0?m[0].customization_value:null;}function i(j){var k=JSON.parse(j),l=[];Object.keys(k).forEach(function(m){l.push({customization_type:m,customization_value:k[m]});});return l;}f.exports={getCustomizationValue:h,parseCustomizations:i};},null);
__d('MercuryTimestamp',['fbt','formatDate','MercuryTimePassed'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=86400000,l=6*k,m={getFormatedTimestamp:function(n){var o=n/1000;return m.getFormattedTimestampByBucket(o,this.getTimeBucket(n));},getFormattedTimestampByBucket:function(n,o){switch(o){case j.TODAY:return {absolute:h._("Today"),relative:i(n,'g:ia')};case j.WEEK_AGO:return {absolute:i(n,'l'),relative:i(n,'D')};case j.CURRENT_YEAR:return {absolute:i(n,'F j'),relative:i(n,'M j')};default:return {absolute:i(n,'F j, Y'),relative:i(n,'n/j/y')};}},getTimeBucket:function(n){var o=new Date(n),p=new Date(),q=new Date(p.getFullYear(),p.getMonth(),p.getDate());if(q<o){return j.TODAY;}else if(q-l<o){return j.WEEK_AGO;}else if(q.getFullYear()===o.getFullYear()){return j.CURRENT_YEAR;}else return j.OTHER_YEAR;},getPreciseTimestamp:function(n){return i(new Date(n),m.getPreciseFormat(n));},getPreciseFormat:function(n){var o=m.getTimeBucket(n);switch(o){case j.TODAY:return 'g:ia';case j.WEEK_AGO:return 'l g:ia';case j.CURRENT_YEAR:return 'F jS, g:ia';case j.OTHER_YEAR:default:return 'F j, Y g:i a';}}};f.exports=m;},null);
__d('MercurySyncNewMessageTransformer',['IrisProtocolMessageLifetime','MercuryActionType','MercuryIDs','MercuryMessageCustomizations','MercuryTimestamp','MessagingTag'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();function n(o,p){var q=parseInt(p.messageMetadata.timestamp,10),r=l.getFormatedTimestamp(q),s=[];if(p.attachments)s=p.attachments.map(function(u){return u.mercury;});var t=p.messageMetadata.tags?p.messageMetadata.tags[0]:undefined;return {message_id:p.messageMetadata.messageId,threading_id:null,offline_threading_id:p.messageMetadata.offlineThreadingId,author:j.getParticipantIDFromUserID(p.messageMetadata.actorFbId),author_email:p.messageMetadata.actorFbId+'@facebook.com',ephemeral_ttl_mode:p.ttl?h[p.ttl]:0,timestamp:q,timestamp_absolute:r.absolute,timestamp_relative:r.relative,timestamp_datetime:r.relative,timestamp_time_passed:l.getTimeBucket(q),is_unread:o!==p.messageMetadata.actorFbId,is_forward:false,is_filtered_content:false,is_filtered_content_bh:false,is_filtered_content_account:false,is_filtered_content_quasar:false,is_filtered_content_invalid_app:false,forward_count:0,forward_message_ids:[],source:t,tags:p.messageMetadata.tags,is_spoof_warning:false,folder:m.INBOX,thread_fbid:p.messageMetadata.threadKey.threadFbId,other_user_fbid:p.messageMetadata.threadKey.otherUserFbId,body:p.body!==undefined?p.body:'',html_body:null,subject:null,has_attachment:s.length>0,attachments:s,ranges:undefined,thread_id:null,action_type:i.USER_GENERATED_MESSAGE,is_from_iris:true,is_sponsored:!!(p.data&&p.data.is_sponsored&&p.data.is_sponsored==='true'),commerce_message_type:p.data?p.data.commerce_message_type:null,customizations:p.data&&p.data.customization?k.parseCustomizations(p.data.customization):null,platform_xmd:p.data&&p.data.platform_xmd?p.data.platform_xmd:null,message_source:p.data&&p.data.message_source_data?p.data.message_source_data.message_source:null};}f.exports={transform:n};},null);
__d('MercurySyncPagesManagerEventTransformer',['MercuryActionType','PagesMessagingEventType'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();function j(k){var l=JSON.parse(k.jsonBlob),m=l&&l.type;if(!m)return undefined;switch(m){case i.FLAG:var n=!!(l&&l.flagData&&l.flagData.state),o={action_type:h.CHANGE_FLAG,mark_as_flag:n,other_user_fbid:k.threadKey.otherUserFbId,thread_fbid:k.threadKey.threadFbId};return o;default:return undefined;}}f.exports={transform:j};},null);
__d('MercurySyncReadReceiptTransformer',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){var j=parseInt(i.actionTimestampMs,10),k=i.threadKey.otherUserFbId||i.actorFbId,l=i.threadKey.otherUserFbId||i.threadKey.threadFbId,m={roger:{}};m.roger[l]={};m.roger[l][k]=j;return m;}f.exports={transform:h};},null);
__d('MMercurySyncDispatcher',['ChannelEventType','CurrentUser','MessagingEvent','MessagingTag','MercuryGlobalActionType','MercurySingletonProvider','MercurySyncDeltaTypes','MercurySyncMarkReadTransformer','MercurySyncNewMessageTransformer','MercurySyncPagesManagerEventTransformer','MercurySyncReadReceiptTransformer','MMessagesChannelPayloadPreparer','MMessagesReadReceipts','MMessagesThreadDataStore','Stratcom','emptyFunction'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){'use strict';if(c.__markCompiled)c.__markCompiled();x.getForFBID=function(z){return y.getForFBID(z);};x.get=function(){return y.get();};function x(z){this.$MMercurySyncDispatcher1=z;this.$MMercurySyncDispatcher2=i.getAccountID()===this.$MMercurySyncDispatcher1?h.MESSAGE:h.PAGES_MESSAGE;}x.prototype.process=function(z){var aa=void 0,ba=void 0;switch(z['class']){case n.NewMessage:aa=p.transform(this.$MMercurySyncDispatcher1,z);ba={message:aa,type:this.$MMercurySyncDispatcher2,folder:k.INBOX,targetFBID:this.$MMercurySyncDispatcher1};s.fetchDataThenDispatch(ba);break;case n.MarkRead:var ca=o.transform(z),da=false;for(var ea=0;ea<ca.length;ea++){var fa=ca[ea];if(fa.action_type===l.MARK_ALL_READ)da=true;}if(da)return;ca.map(function(ia){u.getForFBID(this.$MMercurySyncDispatcher1).clearUnreadCount(ia.other_user_fbid,ia.thread_fbid,w);ba={message:ia,type:this.$MMercurySyncDispatcher2,event:j.READ,is_sync:true,targetFBID:this.$MMercurySyncDispatcher1};v.invoke(ba.type,null,ba);}.bind(this));break;case n.ReadReceipt:aa=r.transform(z);var ga=Object.keys(aa.roger)[0],ha=aa.roger[ga];t.update(ga,ha);ba={message:aa,type:this.$MMercurySyncDispatcher2,event:j.READ_RECEIPT,is_sync:true,targetFBID:this.$MMercurySyncDispatcher1};v.invoke(ba.type,null,ba);break;case n.PagesManagerEvent:aa=q.transform(z);if(!aa)return;u.getForFBID(this.$MMercurySyncDispatcher1).updateFlagStatus(aa.other_user_fbid,null,aa.mark_as_flag,w);ba={event:h.PAGE_THREAD_FLAG_CHANGED,flagged:aa.mark_as_flag,other_user_fbid:aa.other_user_fbid,type:h.PAGES_MESSAGE};v.invoke(ba.type,null,ba);break;default:break;}};var y=new m(x);f.exports=x;},null);
__d('MTouchChannelPayloadRouter',['ChannelEventType','MessagingEvent','MMercurySyncDispatcher','Stratcom'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();function l(q){if(m(q)||o(q)||p(q)){return;}else if(n(q)){var r=q.queue.toString();j.getForFBID(r).process(q.delta);}else k.invoke(q.type,null,q);}function m(q){return (q.type===h.MESSAGE||q.type===h.PAGES_MESSAGE)&&q.message;}function n(q){return q.type===h.DELTA;}function o(q){return (q.type===h.MESSAGE||q.type===h.PAGES_MESSAGE)&&q.event===i.READ;}function p(q){return q.type===h.PAGES_MESSAGE&&q.event===h.PAGE_THREAD_FLAG_CHANGED;}g.route=l;},null);
__d('MTouchChannelManager',['MChannelManager','MTouchChannelPayloadRouter','Stratcom','emptyFunction'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=false;function m(){if(l)return;l=true;h.addListener(h.CHANNEL_MESSAGE,i.route);j.listen(['m:onload','m:jewels:init-counts'],null,h.startChannel);h.startChannel();}g.initialize=m;},null);
__d('MChat',['Bootloader','ChannelEventType','DOM','Stratcom','MChannelManager','MTouchChannelManager','$'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';if(c.__markCompiled)c.__markCompiled();var o=function(q){m.initialize();if(q.killDynatemplate){k.listen([i.MESSAGE,i.PAGES_MESSAGE],null,function(event){p(q,event);k.removeCurrentListener();});}else h.loadModules(["MMessages"],function(r){var s=new r(q),t=[k.listen([i.MESSAGE,i.PAGES_MESSAGE],null,s.handleMessageReceived.bind(s)),k.listen('typ',null,s.handleUserTyping.bind(s))];k.listen('m:page:unload',null,function(){s=null;for(var u=0;u<t.length;u++)t[u].remove();t=[];k.removeCurrentListener();});},'MChat');if(q.pageID)l.subscribeIrisQueue(q.pageID.toString(),'0');};function p(q,event){h.loadModules(["MReactComponentRenderer","MMessageThread.react"],function(r,s){var t=j.create('div'),u={downloadLink:q.downloadLink,initialEvent:event,isCanonical:q.singleUserThread,otherUserFBID:q.messageOtherUserFBID,pageID:q.pageID,shouldParseEmoticons:q.parseEmoticons,threadFBID:q.messageThreadFBID,userProfileUris:q.usersProfileUri,userShortNames:q.usersShortNames};r(s,t,u);j.appendContent(n('messageGroup'),t);},'MChat');}g.main=o;},null);
__d('MPresenceIcon',['setTimeoutAcrossTransitions','DOM','MLegacyDataStore','MRequest','MURI','Stratcom'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=0,o=1,p=2,q;function r(){var s=i.scry(document.body,'i','presence-icon'),t=[];for(var u=0,v=s.length;u<v;++u){var w=j.get(s[u]);if(w.userid&&!t[w.userid])t[w.userid]=1;}var x=new l('/chat/presence_icon.php').toString(),y=new k(x).setData({ids:Object.keys(t)}).setIgnoreErrors(true);y.listen('done',function(z){for(var aa=0,ba=s.length;aa<ba;++aa){var ca=j.get(s[aa]);if(ca&&ca.userid&&m.hasSigil(s[aa],'online-icon')&&z[ca.userid]==o||m.hasSigil(s[aa],'mobile-icon')&&z[ca.userid]==p){i.show(s[aa]);}else i.hide(s[aa]);}});y.listen('finally',function(z){clearTimeout(q);q=h(r,n);});y.send();}n=n?n*100:60000;r();},null);
__d("XFeedNewStoriesBadgeController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/feed\/badge\/",{});},null);
__d('MFeedJewel',['CSS','DOM','MHistory','MJewel','MJewels','MPageController','MRequest','MURI','Stratcom','SubscriptionsHandler','XFeedNewStoriesBadgeController','$'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){if(c.__markCompiled)c.__markCompiled();var t,u,v,w,x,y,z,aa=0,ba=9,ca=15000;function da(oa){h.conditionClass(x,'popoverOpen',true);}function ea(oa){h.conditionClass(x,'popoverOpen',false);}function fa(){if(v)return;v=new q();v.addSubscriptions(i.listen(s(k.JEWEL_NAV_NODE_ID),'click','feed',ia));if(!w)v.addSubscriptions(p.listen('m:history:change',null,ha));}function ga(){v&&v.release();v=null;}function ha(oa){var pa=oa.getData().soft;for(var qa=0,ra=Object.keys(l);qa<ra.length;qa++)if(l[ra[qa]]===pa){ea();return;}da();}function ia(oa){var pa=oa.getNode('icon').getAttribute('href');if(new o(pa).normalize().toString()===new o(j.getPath()).normalize().toString()){oa.kill();m.reload();}}function ja(oa){i.setContent(t,oa>ba?ba+'+':''+oa);h.conditionClass(x,'noCount',!oa);h.conditionClass(x,'hasCount',oa);}function ka(){if(aa>ba)return;clearTimeout(z);z=setTimeout(function(){la();},ca);}function la(){var oa=r.getURIBuilder();y=new n(oa.getURI().toString());y.listen('done',function(pa){aa=pa.payload.count;ja(pa.payload.count);});y.listen('finally',function(){y=null;ka();});y.send();}function ma(){ja();clearTimeout(z);z=null;aa=0;}function na(oa,pa,qa,ra){if(u)return;u=true;x=oa;w=qa;if(!ra)t=i.find(x,'span','count');p.listen('m:homepage:load',null,function(){da();fa();if(t)ma();});p.listen('m:homepage:unload',null,function(){ea();ga();if(t)ka();});if(pa){fa();}else if(t)ka();}f.exports={init:na};},null);
__d('MGenericJewel',['CSS','DOM','MHistory','MJewel','MViewport','MJewels','Stratcom','$'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p={};function q(r,s,t){if(p[r])return;p[r]=true;var u,v;i.listen(o(k.JEWEL_NAV_NODE_ID),'click',r,function(w){if(w.getNode('icon')){w.prevent();if(!u){j.pushSoftState(r);n.invoke('MGenericJewel::clicked',r,{open:true});}else if(r===m.SEARCH)n.invoke('m:chrome:tab:show',r,{open:true});}});n.listen('m:history:change',null,function(w){var x=w.getData().soft===r;if(!x&&(u||v))n.invoke('m:chrome:tab:hide',r);h.conditionClass(s,'popoverOpen',x);if(t){h.conditionClass(t,'popover_hidden',!x);h.conditionClass(t,'popover_visible',x);if(x)t.style.minHeight=l.getUseableHeight()+'px';}if(x&&!u)n.invoke('m:chrome:tab:show',r);v=w.getData().soft===undefined;u=x;});}f.exports={init:q};},null);
__d('MInitJewelCounts',['Stratcom'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=function(j){h.invoke('m:jewels:init-counts',null,j);};g.main=i;},null);
__d("flattenArray",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(j){var k=[];i(j,k);return k;}function i(j,k){var l=j.length,m=0;while(l--){var n=j[m++];if(Array.isArray(n)){i(n,k);}else k.push(n);}}f.exports=h;},null);
__d('JSXDOM',['DOM','FbtResult','flattenArray'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=['a','blockquote','br','button','canvas','checkbox','dd','div','dl','dt','em','form','h1','h2','h3','h4','h5','h6','hr','i','iframe','img','input','label','li','option','p','pre','select','span','strong','table','tbody','thead','td','textarea','th','tr','ul','video'],l={};k.forEach(function(m){var n=function(o,p){if(arguments.length>2)p=Array.prototype.slice.call(arguments,1);if(!p&&o){p=o.children;delete o.children;}if(p){p=Array.isArray(p)?p:[p];p=p.map(function(q){if(q instanceof i)return q.flattenToArray();return q;});p=j(p);}return h.create(m,o,p);};l[m]=n;});f.exports=l;},null);
__d("XMercuryThreadMetadataController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/mercury\/thread_info\/",{thread_fbids:{type:"StringVector",required:true}});},null);
__d('MMessagesThreadMetadataCache',['KeyedCallbackManager','MRequest','XMercuryThreadMetadataController'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=new h(),l={},m={get:function(n,o){var p=!k.executeOrEnqueue(n,o);if(p||l[n])return;l[n]=true;var q=new i(j.getURIBuilder().setStringVector('thread_fbids',[n]).getURI()).setMethod('GET');q.listen('done',function(r){if(r&&r.payload&&r.payload.threads){var s={};r.payload.threads.forEach(function(t,u,v){var w=t.thread_fbid;s[w]=t;});k.addResourcesAndExecute(s);}});q.listen('finally',function(){delete l[n];});q.send();}};f.exports=m;},null);
__d('MMessagesThreadImageRenderer',['CSS','JSXDOM','MItemConstants','MMessagesThreadImageRendererConfig','MMessagesThreadMetadataCache','MShortProfiles','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p={participantImage:function(s,t){var u=i.img({src:k.profile_pic_src,alt:o._("User Profile Picture"),className:"_33zg"}),v=t===j.TALL_HEIGHT;h.conditionClass(u,"_33zg",v);h.conditionClass(u,"_508n",!v);q(s,u,v);return u;},threadImage:function(s,t){var u=i.img({src:k.profile_pic_src,alt:o._("Thread Picture"),className:"_33zg"}),v=t===j.TALL_HEIGHT;h.conditionClass(u,"_33zg",v);h.conditionClass(u,"_508n",!v);r(s,u);return u;}};function q(s,t,u){m.get(s,function(v){var w=u?v.mThumbSrcLarge:v.mThumbSrcSmall;if(w)this.placeholder.setAttribute('src',w);}.bind({placeholder:t}));}function r(s,t){l.get(s,function(u){var v=u.image_src;if(v)this.placeholder.setAttribute('src',v);}.bind({placeholder:t}));}f.exports=p;},null);
__d("XMessagesJewelContentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/mobile\/messages\/jewel\/content\/",{spinner_id:{type:"String",required:true}});},null);
__d("XNotificationJewelContentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/mobile\/notifications\/jewel\/content\/",{spinner_id:{type:"String",required:true}});},null);
__d("XPymkImpressionLoggingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pymk\/log_impressions\/",{imp_ts:{type:"Int",required:true},query_id:{type:"Int"},candidate_id:{type:"Int",required:true},loc:{type:"String",required:true},ref:{type:"String"},action:{type:"Enum",defaultValue:"impression",enumType:1}});},null);
__d('MJewelSet',['ChannelEventType','MLegacyDataStore','DOM','HTML','MarauderLogger','MessagingEvent','MJewels','MDynaTemplate','MJewel','MLogState','MItemConstants','MMessagesThreadImageRenderer','Popover','MRequest','MViewport','Stratcom','MTouchChannelManager','MURI','XPymkImpressionLoggingController','XNotificationJewelContentController','XMessagesJewelContentController','BanzaiLogger','Banzai','fbt','isFacebookURI'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa){if(c.__markCompiled)c.__markCompiled();var ga={_viewerID:null,_requestsJewel:null,_messagesJewel:null,_notificationsJewel:null,_unseenNotificationIds:{},_jewelClickLogListener:null,_messengerCliff:false,_messengerCliffQELogged:false,_messengerCliffShouldLog:false,_haveInitializedJewels:false,_pymkAndRequestImpressionLogged:false,MSG_ID_PREFIX:'msg_',OTHER_USER_FBID_PREFIX:'other_user_fbid_',THREAD_FBID_PREFIX:'thread_fbid_',NOTIF_ID_PREFIX:'notif_',JEWEL_NAV_NODE_ID:'mJewelNav',JEWEL_NAV_CACHE_KEY:'mJewelNavKey',JEWEL_MSG_LIST:'mJewelMsgThreadContents',_lazyLoadNotificationsReq:null,_lazyLoadMessagesReq:null,createJewels:function(ha){if(ha.showRequests){ga._requestsJewel=new p('requests',{pos:q.CLICK_POSITION_REQUESTS_FLYOUT,softState:n.REQUESTS},'friends_jewel_module');ga._requestsJewel.listen('cleared',ga._markRequestsRead);ga._requestsJewel.listen('jewel_click',ga._logRequestsJewelClick);}ga._messagesJewel=new p('messages',{contentsSigil:ga.JEWEL_MSG_LIST,pos:q.CLICK_POSITION_MESSAGES_FLYOUT,softState:n.MESSAGES},'messages_jewel_module');ga._messagesJewel.listen('cleared',ga._markMessagesRead);ga._notificationsJewel=new p('notifications',{pos:q.CLICK_POSITION_NOTIFICATIONS_FLYOUT,clickCallback:ga._notificationClick,softState:n.NOTIFICATIONS},'notifications_jewel_module');ga._notificationsJewel.listen('cleared',ga._markNotificationsSeen);ga._jewelClickLogListener=ga._notificationsJewel.listen('jewel_click',ga._logNotificationJewelClick);w.listen('m:jewel:flyout:open',null,ga._onJewelOpen);},openMessageJewel:function(){ga._messagesJewel.openPopover();},setMessengerCliff:function(ha){ga._messengerCliff=ha;},setMessengerCliffShouldLog:function(ha){ga._messengerCliffShouldLog=ha;},markFriendRequestsSeen:function(event){if(ga._requestsJewel===null)return;ga._requestsJewel.setCount(0);},updateFriendRequests:function(event){if(ga._requestsJewel===null)return;if(ga._requestsJewel.isOpen())return;var ha=new u('/ajax/mobile/friends/jewel/requests_markup');ha.send();},onAfterUpdateFriendRequests:function(ha){if(ga._requestsJewel===null)return;ga._setJewelCount(ga._requestsJewel,ha,ga._markRequestsRead);t.getInstance('reqs_flyout').refreshConstraints();if(ga._requestsJewel.isOpen())ga._logPymkAndRequestImpression();},_logPymkAndRequestImpression:function(){if(ga._pymkAndRequestImpressionLogged)return;ga._pymkAndRequestImpressionLogged=true;var ha=ga._requestsJewel._getContentsElement(),ia=j.scry(ha,'div','undoable-action');for(var ja=0;ja<ia.length;ja++){var ka=ia[ja].getAttribute('data-pymk-id');if(ka){var la=z.getURIBuilder().setInt('candidate_id',ka).setInt('imp_ts',Date.now()).setEnum('action','impression').setString('loc','mobile_jewel').getURI();new u(la).setMethod('POST').send();}else{var ma=i.get(ia[ja]).userid;l.log('request_seen','friend_request_waterfall',{request_id:ma,request_location:'requests_jewel'});}}},refreshNotificationsConstraints:function(){t.getInstance('notifications_flyout').refreshConstraints();},refreshMessagesConstraints:function(){t.getInstance('messages_flyout').refreshConstraints();},updateNotification:function(event){var ha=event.getData();if(ha&&ha.data){if(ha.data.type==='friend_confirmed')return;if(!ga._notificationsJewel.isOpen()&&!ga._unseenNotificationIds[ha.data.alert_id])ga._notificationsJewel.setCount(ha.data.unread+ga._notificationsJewel.getCount());ga._notificationsJewel.removeMenuContent(ga._getNotifNodeID(ha.data.alert_id));ga._unseenNotificationIds[ha.data.alert_id]=true;if(ga._notificationsJewel.isOpen())ga._markNotificationsSeen();ga._loadNotificationJewelContent();}},updateUnseenNotificationIds:function(event){var ha=event.getData();if(!ha)return;var ia=event.getType()=='notifications_read';if(ha.alert_ids){var ja=0;for(var ka=0;ka<ha.alert_ids.length;ka++)if(ga._unseenNotificationIds[ha.alert_ids[ka]]){delete ga._unseenNotificationIds[ha.alert_ids[ka]];ia&&ga._notificationsJewel.updateMenuColor(ga._getNotifNodeID(ha.alert_ids[ka]),true,false);ja++;}var la=ga._notificationsJewel.getCount();ga._notificationsJewel.setCount(la-ja);}else{ga._notificationsJewel.setCount(0);if(ia)for(var ma in ga._unseenNotificationIds)ga._notificationsJewel.updateMenuColor(ga._getNotifNodeID(ma),true,false);ga._unseenNotificationIds={};}},updateUnreadMessageCount:function(event){var ha=event.getData();if(!ha)return;if(ha.unseen!==null&&!ga._messagesJewel.isOpen())ga._messagesJewel.setCount(ha.unseen);if(ha.unread!==null){var ia=null;if(ha.unread>0){ia=ea._("Messages ({unread_message_count})",[ea.param('unread_message_count',ha.unread)]);}else ia=ea._("Messages");ga._messagesJewel.setHeaderText('messages_jewel_header_text',ia);}},updateMessage:function(event){var ha=event.getData();if(!ha)return;if(ha.parsedPayload){var ia=ha.parsedPayload;if(ia.getFolder()!=='inbox'||!ga._viewerIsAParticipant(ga._viewerID,ia))return;if(ga._messagesJewel.isInitialized()){ga._messagesJewel.removeMenuContent(ga._getMessageNodeID(ia.getOtherUserFBID(),ia.getThreadFBID()));if(ga._messagesJewel.isOpen())ga._markMessagesRead();}ga._loadMessagesJewelContent();}else if(ha.mark_as_read){for(var ja=0;ja<ha.other_user_fbids.length;ja++){var ka=ha.other_user_fbids[ja];if(ha.folder_info[ka]!=='inbox')continue;ga._messagesJewel.updateMenuColor(ga._getMessageNodeID(ka.toString(),null),ha.event=='read',false);}for(ja=0;ja<ha.thread_fbids.length;ja++){var la=ha.thread_fbids[ja];if(ha.folder_info[la]!=='inbox')continue;ga._messagesJewel.updateMenuColor(ga._getMessageNodeID(null,la.toString()),ha.event=='read',false);}}else if(ha.event===m.READ&&ha.is_sync)ga._messagesJewel.updateMenuColor(ga._getMessageNodeID(ha.message.other_user_fbid,ha.message.thread_fbid),true,false);},_getMessageNodeID:function(ha,ia){ha=ha?ha:'';ia=ia?ia:'';return (ga.MSG_ID_PREFIX+ga.OTHER_USER_FBID_PREFIX+ha+ga.THREAD_FBID_PREFIX+ia);},_getNotifNodeID:function(ha){return ga.NOTIF_ID_PREFIX+ha;},_markRequestsRead:function(){w.invoke('m_requests_jewel_mark_read');var ha=new u(new y('/a/jewel_requests_read.php').toString());ha.send();},_markMessagesRead:function(){var ha=new u(new y('/a/jewel_messages_read.php').toString());ha.send();},_markNotificationsSeen:function(){if(ga._jewelClickLogListener){ga._jewelClickLogListener.remove();ga._jewelClickLogListener=null;}var ha=ga._unseenNotificationIds;ga._unseenNotificationIds={};var ia=[];for(var ja in ha)ia.push(ja);var ka=new u(new y('/a/jewel_notifications_read.php').toString());ka.addData({ids:ia,count:ia.length,seen:true});ka.send();},_onJewelOpen:function(event){var ha=event.getData();if(ha&&ha.jewel)if(ha.jewel==='notifications'){ga._loadNotificationJewelContent();}else if(ha.jewel==='messages'){if(ga._messengerCliff||ga._messengerCliffShouldLog){if(!ga._messengerCliffQELogged){var ia={signal:true},ja={name:'mobile_cliff_for_messenger_tab'};da.post('qe_log_exposure',ja,ia);ga._messengerCliffQELogged=true;}if(ga._messengerCliff)ca.log('XFBConfirmationCliffLoggerConfig',{event:'messenger_seen'});}ga._loadMessagesJewelContent();}},_loadNotificationJewelContent:function(){var ha=ga._notificationsJewel._getContentsElement(),ia='notifications-flyout-loading';if(w.hasSigil(ha,ia)){var ja=aa.getURIBuilder().setString('spinner_id',ha.getAttribute('id')).getURI();if(!ga._lazyLoadNotificationsReq){ga._lazyLoadNotificationsReq=new u(ja);ga._lazyLoadNotificationsReq.listen('finally',function(){ga._lazyLoadNotificationsReq=null;});ga._lazyLoadNotificationsReq.send();}}},_loadMessagesJewelContent:function(){var ha=ga._messagesJewel._getJewelElement(),ia='messages-flyout-loading',ja=j.scry(ha,'*',ia);if(ja.length>0){var ka=ba.getURIBuilder().setString('spinner_id',ja[0].getAttribute('id')).getURI();if(!ga._lazyLoadMessagesReq){ga._lazyLoadMessagesReq=new u(ka);ga._lazyLoadMessagesReq.listen('finally',function(){ga._lazyLoadMessagesReq=null;});ga._lazyLoadMessagesReq.send();}}},_logNotificationJewelClick:function(){if(ga._jewelClickLogListener){ga._jewelClickLogListener.remove();ga._jewelClickLogListener=null;}new u('/a/jewel_notifications_log.php').addData({click_type:'jewel_click',count:ga._notificationsJewel.getCount()}).send();},_logRequestsJewelClick:function(){var ha=ga._requestsJewel._getContentsElement(),ia=j.scry(ha,'div','attachment'),ja=[];for(var ka=0;ka<ia.length;ka++){var la=ia[ka].getAttribute('id');if(la&&la.startsWith('m_jewel_req_'))ja=ja.concat(la.replace('m_jewel_req_',''));}if(ja.length){var ma=new u('/friends/requests/log_impressions');ma.setMethod('POST');ma.addData({ids:ja.join(','),ref:'m_jewel'});ma.send();}if(ga._requestsJewel.isOpen())if(w.hasSigil(ha,'requests-flyout-loading')){new u('/ajax/mobile/friends/jewel/requests_markup').send();}else ga._logPymkAndRequestImpression();},_notificationClick:function(event){var ha=event.getNode('marea');if(!ha)return;var ia=ha.getAttribute('id');if(!ia)return;ga._notificationsJewel.updateMenuColor(ia,true,false);},_viewerIsAParticipant:function(ha,ia){if(!ia.getParticipantIDs())return false;if(ia.getParticipantIDs().indexOf(ha)>-1)return true;return ia.getParticipantIDs().indexOf(ha.toString())>-1;},_initJewelCount:function(ha,ia,ja){ha.setDuringInit(true);ha.reregisterListeners();ga._setJewelCount(ha,ia,ja);ha.setDuringInit(false);},_setJewelCount:function(ha,ia,ja){if(!ha.isOpen()){ha.setCount(ia);}else if(ia)ja();},_initJewelCounts:function(event){var ha=event.getData();ga.initJewels(null,null);if(ha.viewer_id)ga._viewerID=ha.viewer_id;if(ha.unread_notification_ids)ga._unseenNotificationIds=ha.unread_notification_ids||{};if(ha.request_count&&ga._requestsJewel)ga._initJewelCount(ga._requestsJewel,ha.request_count,ga._markRequestsRead);if(ha.message_count)ga._initJewelCount(ga._messagesJewel,ha.message_count,ga._markMessagesRead);if(ha.notification_count)ga._initJewelCount(ga._notificationsJewel,ha.notification_count,ga._markNotificationsSeen);},initJewels:function(ha,ia){if(ga._haveInitializedJewels)return;ga._haveInitializedJewels=true;x.initialize();ga.createJewels(ia||{});if(ga._requestsJewel){if(!ga._friendRequestAddListener)ga._friendRequestAddListener=w.listen('jewel_requests_add',null,ga.updateFriendRequests);if(!ga._friendRequestRemoveListener)ga._friendRequestRemoveListener=w.listen('jewel_requests_remove_old',null,ga.updateFriendRequests);if(!ga._friendAcceptedListener)ga._friendAcceptedListener=w.listen('jewel_friending_notifs',null,ga.updateFriendRequests);if(!ga._friendRequestSeenListener)ga._friendRequestSeenListener=w.listen('friend_requests_seen',null,ga.markFriendRequestsSeen);}if(!ga._notificationListener)ga._notificationListener=w.listen('m_notification',null,ga.updateNotification);if(!ga._notificationRefreshListener)ga._notificationRefreshListener=w.listen('m:jewel-set:notifications-jewel:refresh-flyout',null,ga.refreshNotificationsConstraints);if(!ga._messageListener)ga._messageListener=w.listen(h.MESSAGE,null,ga.updateMessage);if(!ga._messageCountListener)ga._messageCountListener=w.listen('inbox',null,ga.updateUnreadMessageCount);if(!ga._notifReadListener)ga._notifReadListener=w.listen('notifications_read',null,ga.updateUnseenNotificationIds);if(!ga._notifSeenListener)ga._notifSeenListener=w.listen('notifications_seen',null,ga.updateUnseenNotificationIds);if(!ga._friendRequestResponseListener)ga._friendRequestResponseListener=w.listen('m:requests:refresh',null,function(){t.getInstance('reqs_flyout').refreshConstraints();});if(!ga._orientationChangeListener)ga._orientationChangeListener=w.listen('m:viewport:orientation-change',null,ga._onOrientationChange);},_onOrientationChange:function(){setTimeout(function(){var ha=t._activePopover;if(!ha)return;if(v.getHeight()+'px'!==ha.flyout.style.minHeight)ha.refreshConstraints();},800);}};(function(){w.listen('m:jewels:init-counts',null,ga._initJewelCounts);})();f.exports=ga;},null);
__d("XBookmarksFlyoutBodyController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/bookmarks\/flyout\/body\/",{id:{type:"String",required:true}});},null);
__d('MChromeTabsBootloader',['MJewels','MRequest','Stratcom','XBookmarksFlyoutBodyController'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l={bootloadBookmarks:function(m){j.listen('m:chrome:tab:show',h.BOOKMARKS,function(){j.removeCurrentListener();new i(k.getURIBuilder().setString('id',m).getURI()).send();});}};f.exports=l;},null);
__d('MJewelThreads',['Bootloader','ChannelEventType','MessagingEvent','Stratcom'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();function l(m){this.$MJewelThreads1=m;this.$MJewelThreads2=[];this.$MJewelThreads3=false;this.$MJewelThreads4=false;k.listen(i.MESSAGE,null,this.onMessageEvent.bind(this));}l.prototype.getThreads=function(){return this.$MJewelThreads2;};l.prototype.registerListeners=function(){k.listen('click','live-threads',this.onThreadClick.bind(this));k.listen('m:jewel:flyout:open',null,this.onJewelOpen.bind(this));};l.prototype.onJewelOpen=function(event){var m=event.getData(),n=m&&m.jewel&&m.jewel==='messages';if(n&&this.$MJewelThreads4)this.updateUI();};l.prototype.onThreadClick=function(event){var m=event.getNode('live-thread');if(!m)return;this.setThreadReadStatus(m.getAttribute('data-fbid'),m.getAttribute('data-canonical')==='true',true);this.updateUI();};l.prototype.onMessageEvent=function(event){var m=event.getData();if(m.parsedPayload){var n=m.parsedPayload;if(n.getFolder()!=='inbox')return;if(!this.$MJewelThreads3){this.$MJewelThreads3=true;this.registerListeners();}this.addThread(n);}else if(m.hasOwnProperty('mark_as_read')){m.other_user_fbids.forEach(function(q){this.setThreadReadStatus(q.toString(),true,m.mark_as_read);}.bind(this));m.thread_fbids.forEach(function(q){this.setThreadReadStatus(q.toString(),false,m.mark_as_read);}.bind(this));this.updateUI();}else if(m.event===j.READ&&m.is_sync){var o=!!m.message.other_user_fbid,p=o?m.message.other_user_fbid:m.message.thread_fbid;this.setThreadReadStatus(p,o,true);this.updateUI();}};l.prototype.addThread=function(m){this.$MJewelThreads2=this.$MJewelThreads2.filter(function(n){var o=n.isCanonicalThread()?n.getOtherUserFBID():n.getThreadFBID();return !this.isSameThread(o,m.isCanonicalThread(),m);}.bind(this));m.unread=m.isUnread();this.$MJewelThreads2.push(m);this.$MJewelThreads4=true;this.updateThreadImage(m);};l.prototype.updateThreadImage=function(m){h.loadModules(["MMessagesThreadMetadataCache","MShortProfiles"],function(n,o){if(m.hasThreadImage()){n.get(m.getThreadFBID(),function(q){m.image_src=q.image_src;this.updateUI();}.bind(this));}else{var p=m.isCanonicalThread()?m.getOtherUserFBID():m.getAuthorFBID();o.get(p,function(q){m.image_src=q.mThumbSrcSmall;this.updateUI();}.bind(this));}}.bind(this),'MJewelThreads');};l.prototype.setThreadReadStatus=function(m,n,o){this.$MJewelThreads2.forEach(function(p){if(this.isSameThread(m,n,p)){if(p.unread==o)this.$MJewelThreads4=true;p.unread=!o;}}.bind(this));};l.prototype.isSameThread=function(m,n,o){var p=n?o.getOtherUserFBID():o.getThreadFBID();return m==p;};l.prototype.updateUI=function(){if(!this.$MJewelThreads3||!this.$MJewelThreads4)return;h.loadModules(["React","ReactDOM","MJewelThreadList.react","Popover"],function(m,n,o,p){if(!p.getInstance('messages_flyout').isOpen())return;var q={threads:this.$MJewelThreads2};n.render(m.createElement(o,q),this.$MJewelThreads1);p.getInstance('messages_flyout').refreshConstraints();this.$MJewelThreads4=false;}.bind(this),'MJewelThreads');};f.exports=l;},null);
__d('MessagesJewelNativeAppRedirect',['Stratcom','URI','MRequest','XMSiteDiodeMessengerLoggingController','MSiteMessengerDiodeTypedLogger','MSiteMessengerDiodeLoggerEvent'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n={registerOpenURIStringForIOS:function(o,p){function q(event){if(event.getData().jewel==='messages'){var r=k.getURIBuilder().setBool('log',true).getURI(),s=new j(r);s.listen('done',function(t){if(p){var u=new i(o);u.go();}});s.listen('error',function(t){if(p){var u=new i(o);u.go();}});s.send();}}h.listen('m:jewel:flyout:open',null,q);},registerRedirect:function(o,p,q,r){function s(event){if(event.getData().jewel==='messages'){var t=k.getURIBuilder().setBool('log',true).getURI();new j(t).send();if(q){new l().setEvent(m.FAST_APP_SWITCH_ATTEMPT).setMessagingEntryPoint(p).setMsiteDiodeStateFromClient(r).log();var u=new i(o);u.go();}}}h.listen('m:jewel:flyout:open',null,s);}};f.exports=n;},null);
__d("XHomeAnalyzeMScreenWidthController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/mtouchwidth\/",{height_by_wurfl:{type:"Int",required:true},width_by_wurfl:{type:"Int",required:true},width_by_js:{type:"Int",required:true}});},null);
__d('MGetWidth',['MRequest','MViewport','XHomeAnalyzeMScreenWidthController'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=false,l={widthReport:function(m,n){if(k)return;k=true;var o=i.getWidth();if(o!=m&&o!=n){var p=j.getURIBuilder().setInt('height_by_wurfl',m).setInt('width_by_wurfl',n).setInt('width_by_js',o).getURI();new h(p).send();}}};f.exports=l;},null);
__d('MMessagesReplyComposer',['MMultiPhotoUploaderAttachmentState','CSS','ChannelEventType','CurrentUser','DOM','fbt','MMessagesConfig','MRequest','Stratcom','SubscriptionsHandler','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s='m-messaging-error-message',t='m-messaging-error-resend-btn',u=1000;function v(w,x,y,z,aa){'use strict';this.form=w;this.textbox=x;this.sendButton=y;this.likeButton=z;this.userID=k.getID();this.threadID=aa;this.state={isFocused:false,isTyping:false,hasPhotos:false};this.photosState=h.getDefaultState();this.prevSendRequest=null;this.pageListeners=new q();this.pageListeners.addSubscriptions(l.listen(this.textbox,'focus',null,this.$MMessagesReplyComposer1.bind(this)),l.listen(this.textbox,'blur',null,this.$MMessagesReplyComposer2.bind(this)),l.listen(this.textbox,['keyup','keydown','change','input'],null,this.$MMessagesReplyComposer3.bind(this)),l.listen(this.sendButton,'click',null,this.$MMessagesReplyComposer4.bind(this)),l.listen(this.likeButton,'click',null,this.$MMessagesReplyComposer5.bind(this)),p.listen('click',[t],this.$MMessagesReplyComposer6.bind(this)),p.listen('MMultiPhotoUploader:attachments:change',null,this.$MMessagesReplyComposer7.bind(this)));p.listen('m:page:unload',null,function(){this.pageListeners.release();p.removeCurrentListener();}.bind(this));this.$MMessagesReplyComposer8();this.$MMessagesReplyComposer9();i.removeClass(this.form,"_3ci_");}v.prototype.$MMessagesReplyComposer7=function(event){'use strict';this.photosState=event.getData();this.$MMessagesReplyComposer10('hasPhotos',this.photosState[h.UPLOADED]>0||this.photosState[h.SENDING]>0);this.$MMessagesReplyComposer9();};v.prototype.$MMessagesReplyComposer1=function(){'use strict';this.$MMessagesReplyComposer10('isFocused',true);};v.prototype.$MMessagesReplyComposer2=function(){'use strict';this.$MMessagesReplyComposer10('isFocused',false);};v.prototype.$MMessagesReplyComposer3=function(){'use strict';this.$MMessagesReplyComposer10('isTyping',this.textbox.value!=='');this.$MMessagesReplyComposer9();};v.prototype.$MMessagesReplyComposer9=function(){'use strict';var w=this.photosState[h.SENDING]===0&&(!/^\s*$/.test(this.textbox.value)||this.photosState[h.UPLOADED]>0);if(!w){this.sendButton.setAttribute('disabled',true);}else this.sendButton.removeAttribute('disabled');};v.prototype.$MMessagesReplyComposer11=function(){'use strict';this.likeButton.setAttribute('disabled',true);setTimeout(function(){this.likeButton.removeAttribute('disabled');}.bind(this),u);};v.prototype.$MMessagesReplyComposer10=function(w,x){'use strict';this.state[w]=x;this.$MMessagesReplyComposer8();};v.prototype.$MMessagesReplyComposer8=function(){'use strict';i.conditionClass(this.form,"_3ciz",this.state.isFocused||this.state.isTyping);i.conditionClass(this.form,"_3cj0",this.state.hasPhotos);};v.prototype.$MMessagesReplyComposer6=function(){'use strict';this.sendRequest(this.prevSendRequest.url,this.prevSendRequest.data);l.hide(l.find(document,'div',s));};v.prototype.$MMessagesReplyComposer5=function(event){'use strict';this.$MMessagesReplyComposer12(event,true);};v.prototype.$MMessagesReplyComposer4=function(event){'use strict';this.$MMessagesReplyComposer12(event,false);};v.prototype.$MMessagesReplyComposer12=function(event,w){'use strict';var x=this.form,y=l.convertFormToDictionary(x),z=x.action;x.reset();this.$MMessagesReplyComposer3();if(event)event.prevent();if(w)y.sticker_id=369239263222822;this.sendRequest(z,y);this.$MMessagesReplyComposer11();};v.prototype.sendRequest=function(w,x){'use strict';var y={start:function(aa){l.hide(l.find(document,'div',s));},process:function(aa){},error:function(aa){l.show(l.find(document,'div',s));},fail:function(aa){y.error(aa);},postprocess:function(aa){p.invoke('m:ajax:complete');}};this.prevSendRequest={data:x,url:w};var z=this.$MMessagesReplyComposer13(x,w,y);z.send();};v.prototype.$MMessagesReplyComposer13=function(w,x,y){'use strict';var z=l.find(document,'*','m-messaging-composer-container'),aa='async_composer',ba=new o(x);ba.addData(w);ba.setMethod('POST');if(n.msgrRegion)ba.setRequestHeader('X-MSGR-Region',n.msgrRegion);var ca=aa+'_saving',da=function(fa){i.conditionClass(z,aa,!fa);i.conditionClass(z,ca,fa);};ba.listen('start',da.bind(null,true));ba.listen('finally',da.bind(null,false));for(var ea in y)ba.listen(ea,y[ea]);return ba;};v.handleSendError=function(){'use strict';l.show(l.find(document,'div',s));};v.handleRecipientUnavailableError=function(){'use strict';alert(m._("This person isn't receiving messages from you right now"));};f.exports=v;},null);
__d('MBeeperController',['Bootloader','CSS','DOM','MHistory','Stratcom','URI','cx','getActiveElement','setTimeoutAcrossTransitions','$'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r,s,t,u,v=[],w,x=3000;function y(ga){w=ga;p(function(){l.listen('m_notification',null,z);l.listen('blur',null,aa);l.listen('m:history:change',null,fa);},x);}function z(ga){var ha=ga.getData();if(!ha||!ha.data||w&&!ha.data.type||w&&w.indexOf(ha.data.type)===-1)return;var ia={notification:ha.data};ea(ia);if(!r&&!s){h.loadModules(["ReactComponentRenderer","MBeeper.react"],function(ja,ka){r=ja;s=ka;fa();},'MBeeperController');}else fa();}function aa(ga){var ha=ga.getTarget();if(ha&&ca(ha))setTimeout(fa,50);}function ba(){v.shift();fa();}function ca(ga){var ha=ga.tagName;return ha==='INPUT'||ha==='TEXTAREA'||ga.contentEditable==='true';}function da(){return !(ca(o())||q('root').offsetHeight===0);}function ea(ga){if(!v.find(function(ha){return ha.notification.alert_id===ga.notification.alert_id;}))v.push(ga);}function fa(){if(!da())return;var ga=new m(k.getPath());if(ga.getQueryData().soft==='notifications'){v=[];return;}var ha=v[0];if(!ha)return;if(!u){u=j.create('div');i.addClass(u,"_3hy8");q('page').appendChild(u);}if(!t){t=new r(s,u);t.setProps(babelHelpers['extends']({},ha,{onHide:ba}));}else if(t.component.isReady())t.setProps(ha);}g.init=y;},null);
__d('BrowserPushCommands',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h='browser_push_ack',i='browser_push_redirect',j='browser_push_window_visible',k={ACK:h,REDIRECT:i,WINDOW_VISIBLE:j};f.exports=k;},null);
__d('BrowserPushMessageHandler',['BrowserPushCommands','EventListener','isFacebookURI','URISchemes'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();function l(event){if(event.data.command&&event.data.command===h.REDIRECT){if(window.onbeforeunload()===undefined){event.ports[0].postMessage({command:h.ACK,success:true});}else{event.ports[0].postMessage({command:h.ACK,success:false});return;}var n=event.data.uri;if(/^([^.:/?#]+):/.test(n)&&!k.isAllowed(/^([^.:/?#]+):/.exec(n)[0])&&j(n))throw new Error('goURI: URI scheme rejected, URI: '+n);window.location.href=n;}}var m={registerRedirectHandler:function(){i.listen(window,'message',function(event){if(event.origin==='')l(event);});if(navigator.serviceWorker&&navigator.serviceWorker.addEventListener)navigator.serviceWorker.addEventListener('message',function(event){if(navigator.serviceWorker&&navigator.serviceWorker.controller&&event.target&&event.target.controller&&event.target.controller===navigator.serviceWorker.controller||new RegExp('^'+window.location.protocol+'//'+window.location.host+'$').test(event.origin))l(event);});}};f.exports=m;},null);
__d('BrowserPushVisibilityChanger',['BrowserPushCommands','ClientServiceWorkerMessage','Visibility'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(){new i(h.WINDOW_VISIBLE,null).sendViaController();}var l={listenForVisibility:function(){if(!j.isHidden())k();j.addListener(j.VISIBLE,k);}};f.exports=l;},null);
__d('PushRegistration',['Promise','BrowserPushMessageHandler','BrowserPushVisibilityChanger','Map','ServiceWorkerRegistration'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=window.Notification,n=new k();o.get=function(p,q){'use strict';if(n.has(q))return n.get(q);var r=new o(p,q);n.set(q,r);return r;};function o(p,q){'use strict';this.$PushRegistration3=p;this.appID=q;if(!o.$PushRegistration1&&!o.$PushRegistration2){o.$PushRegistration1=false;o.$PushRegistration2=false;}}o.prototype.getPushSubscription=function(){'use strict';return new h(function(p,q){if(!m||m.permission==='denied')q(new Error('No permission or not supported'));l.getWorkerRegistration(this.$PushRegistration3).then(function(r){if(!r){p(null);return;}r.pushManager.getSubscription().then(function(s){p(s);})['catch'](q);})['catch'](q);}.bind(this));};o.prototype.$PushRegistration4=function(p){'use strict';var q=p.endpoint;if('subscriptionId' in p&&!new RegExp('/'+p.subscriptionId+'$').test(q))q+='/'+p.subscriptionId;return q;};o.prototype.$PushRegistration5=function(p,q,r,s){'use strict';var t=this.$PushRegistration4(r),u=p.getURIBuilder().getURI(),v=new q(u);v.setData({app_id:this.appID,push_endpoint:t,subscription_keys:JSON.stringify(r.toJSON().keys)});v.setMethod('post');if(v.setHandler)v.setHandler(function(w){if(w.payload&&w.payload.session_change)s();});v.send();};o.prototype.getSubscription=function(){'use strict';return new h(function(p,q){this.getPushSubscription().then(function(r){if(r){p(this.$PushRegistration4(r));}else p(null);}.bind(this))['catch'](q);}.bind(this));};o.prototype.maybeRegisterPushAgain=function(p,q,r){'use strict';return new h(function(s,t){this.getPushSubscription().then(function(u){if(u){this.$PushRegistration5(p,q,u,r);s(this.$PushRegistration4(u));}else s(null);}.bind(this))['catch'](function(){s(null);});}.bind(this));};o.prototype.$PushRegistration6=function(p,q,r){'use strict';return new h(function(s,t){if(o.$PushRegistration2&&!r){t(new Error('sending disable info already'));return;}o.$PushRegistration2=true;var u=p.getURIBuilder().getURI(),v=new q(u.toString());v.setData({appid:this.appID,from_browser_settings:r});v.setMethod('post');if(v.listen){v.listen('finally',s);v.listen('fail',function(){o.$PushRegistration2=false;t();});}else if(v.setErrorHandler&&v.setHandler){v.setErrorHandler(function(){o.$PushRegistration2=false;t();});v.setHandler(s);}else s();v.send();}.bind(this));};o.prototype.isPushRegistered=function(p,q,r,s,t,u,v){'use strict';i.registerRedirectHandler();return new h(function(w,x){this.getPushSubscription().then(function(y){w(!!y||p&&!o.pushPermissionIsPending());if(y){if(t){self.$PushRegistration5(q,s,u,v);}else j.listenForVisibility();}else if(!y&&p)if(o.pushPermissionIsOn()){this.registerPush(q,s,u,v)['catch'](function(){});}else this.$PushRegistration6(r,s,false);}.bind(this))['catch'](function(){if(p){this.$PushRegistration6(r,s,false);x();}}.bind(this));}.bind(this));};o.prototype.$PushRegistration7=function(){'use strict';return new h(function(p,q){m.requestPermission(p);});};o.prototype.registerPushAndWaitForEndpoint=function(p,q,r,s){'use strict';return new h(function(t,u){this.$PushRegistration8(p,q,r,true,null,s).then(function(v){if(typeof v!=='string'){u(new Error('registerPushImpl did not return an endpoint'));return;}t(v);})['catch'](u);}.bind(this));};o.prototype.registerPush=function(p,q,r,s){'use strict';return this.registerPushWithFinishedCallBack(p,q,r,null,s);};o.prototype.registerPushWithFinishedCallBack=function(p,q,r,s,t){'use strict';return new h(function(u,v){this.$PushRegistration8(p,q,r,false,s,t).then(function(w){if(typeof w!=='boolean'){v(new Error('registerPushImpl did not return a boolean'));return;}u(w);})['catch'](v);}.bind(this));};o.prototype.$PushRegistration8=function(p,q,r,s,t,u){'use strict';if(o.$PushRegistration1)return new h(function(v,w){w(new Error('registering already'));});o.$PushRegistration1=true;return new h(function(v,w){var x=l.registerWorkerIfUnregistered(this.$PushRegistration3),y=this.$PushRegistration7();h.all([x,y]).then(function(z){var aa=z[0];if(!o.pushPermissionIsOn()){if(u)aa.unregister();throw new Error('Push permission was denied');}if(!s)v(true);aa.pushManager.subscribe({userVisibleOnly:true}).then(function(ba){if(s)v(this.$PushRegistration4(ba));this.$PushRegistration5(p,q,ba,r);if(t)t();j.listenForVisibility();}.bind(this))['catch'](function(ba){o.$PushRegistration1=false;if(u)aa.unregister();w(ba);});}.bind(this))['catch'](function(z){o.$PushRegistration1=false;w(z);});}.bind(this));};o.prototype.unregisterPushAndSW=function(p,q){'use strict';return new h(function(r,s){this.$PushRegistration6(p,q,true).then(function(){l.unregisterControllingWorker().done(r);})['catch'](s);}.bind(this));};o.prototype.unregisterPushOnly=function(p,q){'use strict';return new h(function(r,s){this.getPushSubscription().then(function(t){if(t){t.unsubscribe().then(this.$PushRegistration6(p,q,true)).then(function(){r(true);})['catch'](s);}else s();}.bind(this))['catch'](s);}.bind(this));};o.pushPermissionIsPending=function(){'use strict';return m&&m.permission==='default';};o.pushPermissionIsOn=function(){'use strict';return m&&m.permission==='granted';};f.exports=o;},null);
__d("XBrowserPushXOutController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/notifications\/client\/push\/xout\/",{});},null);
__d("XPushRegisterServiceWorkerController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/push\/register\/service_worker\/",{});},null);
__d('MNotificationsPushInstall',['Promise','BanzaiLogger','Stratcom','MRequest','PushRegistration','XBrowserPushXOutController','XPushRegisterServiceWorkerController'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();function o(event,q,r){var s={event:event,appid:q,surface:r};i.log('BrowserPushLoggerConfig',s);}var p={installHandler:function(q,r){o('turn_on',q.appID,r);if(l.pushPermissionIsPending())j.invoke('m:notifications:push:install:showCurtain');return new h(function(s,t){q.registerPush(n,k,function(){},true).then(function(){j.invoke('m:notifications:push:install:hideCurtain');o('install',q.appID,r);s(true);j.invoke('m:notifications:push:install:installed');return;})['catch'](function(u){j.invoke('m:notifications:push:install:hideCurtain');if(window.Notification&&window.Notification.permission==='denied'){o('deny',q.appID,r);}else o('install_ignore',q.appID,r);j.invoke('m:notifications:push:install:notInstalled');t(u);return;});});},xoutHandler:function(q,r){return new h(function(s,t){o('xout',q.appID,r);var u=m.getURIBuilder().getURI(),v=new k(u);v.setMethod('post');v.listen('finally',s);v.listen('fail',t);v.send();});}};f.exports=p;},null);
__d("XBrowserPushDisabledController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/notifications\/client\/push\/disabled\/",{});},null);
__d('MNotificationsDirectPrompt',['MNotificationsPushInstall','MRequest','PushRegistration','XBrowserPushDisabledController','XPushRegisterServiceWorkerController'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m={install:function(n,o,p,q,r){var s=j.get(n,o);s.isPushRegistered(p,l,k,i,r,function(){},true).then(function(t){if(!t&&!q)h.installHandler(s,'prompt')['catch'](function(){h.xoutHandler(s,'prompt');});})['catch'](function(){});}};f.exports=m;},null);
__d('MNotificationsPushInstallCurtain',['CSS','Stratcom'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j='upsell_curtain',k=null;function l(){if(!k)return;i.listen('click',j,m);h.show(k);}function m(){if(!k)return;h.hide(k);}var n={startListening:function(o){k=o;i.listen('m:notifications:push:install:showCurtain',null,l);i.listen('m:notifications:push:install:hideCurtain',null,m);}};f.exports=n;},null);
__d('MFirstPageRecorder',['DOM','MDeepCopy','MURI','MPageCache','MPageController','MPageHeaderRight','MPageTitle','MPageletTypes','MRenderingScheduler','MRequestConfig','MResponseData','Stratcom','ScriptPath','$','ge','ServerJS'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){if(c.__markCompiled)c.__markCompiled();var w,x=true,y=[];function z(){if(w)return;w=true;var aa=new j(l.getRenderedPath()),ba,ca=[];y=[p.attachListenerToSyncPageletComplete(function(){k.setCachedPage(aa,ba);k.clearCachedIUIResponses(aa);ca.forEach(function(da){k.addCachedIUIResponse(aa,da);});}),p.attachListenerToSyncPageletLoader(function(da){if(da.pageletConfig.type!==o.CONTENT)return;var ea={ajax_response_token:q.ajaxResponseToken.secret,js:da.js||[],css:da.css||[],ixData:da.ixData};ea.actions=[{cmd:'replace',target:da.id,html:da.element?v(da.element).innerHTML:da.content.__html,replaceifexists:false,allownull:false},{cmd:'append',target:'static_templates',html:da.pageletConfig.templates.__html,replaceifexists:true}];var fa=i(da.pageletConfig.serverJSData),ga=[function(){var ma=c('ServerJS');new ma().handle(i(fa));}];if(x){x=false;var ha=u('root').cloneNode(true);ba=new r({ajax_response_token:q.ajaxResponseToken.secret,js:[],css:[],ixData:[],actions:[{cmd:'script',type:'immediate',fn:function(){h.replace(u('root'),ha.cloneNode(true));}}]});var ia=m.getChromeHeaderRightContent();if(ia&&ia.length>0)ga.push(function(){var ma=document.createDocumentFragment();for(var na=0;na<ia.length;na++)ma.appendChild(ia[0]);m.setup({node:ma});});var ja=document.title;ga.push(function(){n.setTitle(ja);});var ka=t.getPageInfo();if(ka)ga.push(function(){t.set(ka.scriptPath,ka.categoryToken,ka.extraData);});}for(var la=0;la<ga.length;la++)ea.actions.push({cmd:'script',type:'onload',fn:ga[la]});ca.push(new r(ea));})];}s.listen('m:page:unload',null,function(){y.forEach(function(aa){aa&&aa.remove();aa=null;});w=true;s.removeCurrentListener();});g.startPageletCaching=z;},null);
__d("XQuickPromotionSimpleLoggingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/qp\/action\/log\/",{qp_id:{type:"Int",required:true},qp_action:{type:"Enum",enumType:1},qp_instance_log_data:{type:"StringToStringMap",defaultValue:{}},qp_event:{type:"String"}});},null);
__d('MQuickPromotionEmbeddedInterstitial',['DOM','MRequest','Stratcom','XQuickPromotionSimpleLoggingController'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=false,m=function(n,o,p){if(l)return;l=true;function q(event){j.removeCurrentListener();var s=event.getNode(n.promo);h.hide(s);var t=h.find(event.getNode(n.jewel),'div',n.sibling);h.show(t);j.invoke('m:qp:embedded-interstitial:close');}function r(event){if(event.getData().jewel==n.jewel){j.removeCurrentListener();var s=k.getURIBuilder().setInt('qp_id',o).setStringToStringMap('qp_instance_log_data',p).setString('qp_event','view').getURI(),t=new i(s);t.send();}}j.listen('click',n.close,q);j.listen('m:jewel:flyout:open',null,r);};g.main=m;},null);
__d('MQuickPromotionMMessengerBanner',['DOM','MRequest','Stratcom','XQuickPromotionSimpleLoggingController'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=false,m=null,n=function(o,p,q,r){if(l)return;l=true;function s(){var w=k.getURIBuilder().setInt('qp_id',q).setStringToStringMap('qp_instance_log_data',r).setString('qp_event','view').getURI(),x=new i(w);x.send();}function t(event){j.removeCurrentListener();var w=event.getNode(o.promo);h.hide(w);m.remove();}function u(event){if(event.getData().jewel==o.jewel)s();}function v(event){j.removeCurrentListener();s();m=j.listen('m:jewel:flyout:open',null,u);}j.listen('click',o.close,t);if(p){j.listen('m:qp:embedded-interstitial:close',null,v);}else m=j.listen('m:jewel:flyout:open',null,u);};g.main=n;},null);
__d('MHeaderSelect',['Stratcom','MViewport'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();h.listen('focus','header-select',i.scrollToHeader);},null);
__d('MSelectLink',['setTimeoutAcrossTransitions','MLegacyDataStore','Stratcom','MJSEnvironment','MPageController','MRequest'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=k.IS_APPLE_WEBKIT_IOS&&parseInt(k.OS_VERSION,10)>=6?'blur':'change';j.listen(n,'select-link',function(o){var p=o.getNode('tag:select'),q=i.get(o.getNode('select-link')),r=q.method==='POST'?'POST':'GET';h(function(){var s=p.options[p.selectedIndex].getAttribute('value'),t=p.options[p.selectedIndex].getAttribute('title');if(t==='mrequest'){var u=new m(s);u.setMethod(r).send();}else s&&l.load(s,{replace:true,method:r});},0);});},null);