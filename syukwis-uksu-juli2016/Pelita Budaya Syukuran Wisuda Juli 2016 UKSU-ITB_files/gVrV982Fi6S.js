if (self.CavalryLogger) { CavalryLogger.start_js(["nlcnC"]); }

__d("MStickersWebDriverIDs",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={STICKER_BUTTON:"MStickersWebDriverIDsStickerButton",STICKER_SELECTOR_CONTENT:"MStickersWebDriverIDsStickerSelectorContent",STICKER_NONSEARCH_PACK_BUTTON:"MStickersWebDriverIDsStickerNonsearchPackButton",STICKER_PACK_ITEM:"MStickersWebDriverIDsStickerPackItem"};},null);
__d("PUWSteps",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={CLIENT_FLOW_BEGIN:"client_flow_begin",CLIENT_SELECT_BEGIN:"client_select_begin",CLIENT_SELECT_SUCCESS:"client_select_success",CLIENT_SELECT_CANCEL:"client_select_cancel",CLIENT_SELECT_FAIL:"client_select_fail",CLIENT_FLOW_POST:"client_flow_post",CLIENT_TRANSFER_BATCH_BEGIN:"client_transfer_batch_begin",CLIENT_UPLOAD_BEGIN:"client_upload_begin",CLIENT_ATTACH_PHOTO:"client_attach_photo",CLIENT_PROCESS_BEGIN:"client_process_begin",CLIENT_PROCESS_SUCCESS:"client_process_success",CLIENT_PROCESS_CANCEL:"client_process_cancel",CLIENT_PROCESS_SKIP:"client_process_skip",CLIENT_PROCESS_FAIL:"client_process_fail",CLIENT_PROCESS_UNAVAILABLE:"client_process_unavailable",CLIENT_TRANSFER_ENQUEUE:"client_transfer_enqueue",CLIENT_TRANSFER_BEGIN:"client_transfer_begin",CLIENT_TRANSFER_SUCCESS:"client_transfer_success",CLIENT_TRANSFER_CANCEL:"client_transfer_cancel",CLIENT_TRANSFER_FAIL:"client_transfer_fail",CLIENT_TRANSFER_MANUAL_RETRY:"client_transfer_manual_retry",CLIENT_UPLOAD_SUCCESS:"client_upload_success",CLIENT_UPLOAD_FAIL:"client_upload_fail",CLIENT_UPLOAD_CANCEL:"client_upload_cancel",CLIENT_UPLOAD_REMOVE:"client_upload_remove",CLIENT_FACEREC_BEGIN:"client_facerec_begin",CLIENT_FACEREC_SUCCESS:"client_facerec_success",CLIENT_FACEREC_FAIL:"client_facerec_fail",CLIENT_PHOTO_PREVIEW_OPEN:"client_photo_preview_open",CLIENT_PHOTO_PREVIEW_CLOSE:"client_photo_preview_close",CLIENT_TRANSFER_BATCH_SUCCESS:"client_transfer_batch_success",CLIENT_TRANSFER_BATCH_CANCEL:"client_transfer_batch_cancel",CLIENT_TRANSFER_BATCH_FAIL:"client_transfer_batch_fail",CLIENT_PUBLISH_ENQUEUE:"client_publish_enqueue",CLIENT_PUBLISH_BEGIN:"client_publish_begin",CLIENT_PUBLISH_SUCCESS:"client_publish_success",CLIENT_PUBLISH_FAIL:"client_publish_fail",CLIENT_ATTEMPT_FAIL:"client_attempt_fail",CLIENT_FLOW_SUCCESS:"client_flow_success",CLIENT_FLOW_FATAL:"client_flow_fatal",CLIENT_FLOW_GIVEUP:"client_flow_giveup",CLIENT_FLOW_CANCEL:"client_flow_cancel",CLIENT_FLOW_FAIL:"client_flow_fail",CLIENT_FLOW_INCOMPLETE:"client_flow_incomplete",CLIENT_ATTEMPT_INCOMPLETE:"client_attempt_incomplete",CLIENT_FLOW_RETRY:"client_flow_retry",CLIENT_ATTEMPT_RETRY:"client_attempt_retry",CLIENT_DIAGNOSTIC:"client_diagnostic",CLIENT_QUALITY_SWITCH:"client_quality_switch",CLIENT_CANCEL_SURVEY:"client_cancel_survey",CLIENT_PHOTO_EDIT_BEGIN:"client_photo_edit_begin",CLIENT_PHOTO_EDIT_SUCCESS:"client_photo_edit_success",SERVER_UPLOAD_BEGIN:"server_upload_begin",SERVER_UPLOAD_SUCCESS:"server_upload_success",SERVER_UPLOAD_FAIL:"server_upload_fail",SERVER_PUBLISH_BEGIN:"server_publish_begin",SERVER_PUBLISH_SUCCESS:"server_publish_success",SERVER_PUBLISH_FAIL:"server_publish_fail",SERVER_RECEIVER_BEGIN:"server_receiver_begin",SERVER_RECEIVER_PUBLISH_BEGIN:"server_receiver_publish_begin",SERVER_SENTRY_RESTRICTION:"server_sentry_restriction"};},null);
__d("StickerInterfaces",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={MESSAGES:"messages",COMMENTS:"comments",STICKERED:"stickered",COMPOSER:"composer",POSTS:"posts",FRAMES:"frames",SMS:"sms",MONTAGE:"montage"};},null);
__d("URLMatcherConfig",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={tlds:"(?:\\.(com|\ud55c\uad6d|\uc0bc\uc131|\ub2f7\ucef4|\ub2f7\ub137|\u9999\u6e2f|\u9910\u5385|\u98df\u54c1|\u98de\u5229\u6d66|\u96c6\u56e2|\u8d2d\u7269|\u8c37\u6b4c|\u8bfa\u57fa\u4e9a|\u8054\u901a|\u7f51\u7edc|\u7f51\u7ad9|\u7f51\u5e97|\u7f51\u5740|\u7ec4\u7ec7\u673a\u6784|\u79fb\u52a8|\u73e0\u5b9d|\u70b9\u770b|\u6fb3\u9580|\u6e38\u620f|\u6de1\u9a6c\u9521|\u673a\u6784|\u66f8\u7c4d|\u65f6\u5c1a|\u65b0\u95fb|\u65b0\u52a0\u5761|\u653f\u5e9c|\u653f\u52a1|\u624b\u8868|\u624b\u673a|\u6211\u7231\u4f60|\u6148\u5584|\u5fae\u535a|\u5e7f\u4e1c|\u5de5\u884c|\u5bb6\u96fb|\u5a31\u4e50|\u5927\u62ff|\u5728\u7ebf|\u5609\u91cc\u5927\u9152\u5e97|\u5546\u6807|\u5546\u5e97|\u5546\u57ce|\u53f0\u7063|\u53f0\u6e7e|\u516c\u76ca|\u516c\u53f8|\u516b\u5366|\u5065\u5eb7|\u4fe1\u606f|\u4f5b\u5c71|\u4f01\u4e1a|\u4e2d\u6587\u7f51|\u4e2d\u570b|\u4e2d\u56fd|\u4e2d\u4fe1|\u4e16\u754c|\u30dd\u30a4\u30f3\u30c8|\u30d5\u30a1\u30c3\u30b7\u30e7\u30f3|\u30bb\u30fc\u30eb|\u30b9\u30c8\u30a2|\u30b3\u30e0|\u30b0\u30fc\u30b0\u30eb|\u30af\u30e9\u30a6\u30c9|\u307f\u3093\u306a|\u10d2\u10d4|\u0e44\u0e17\u0e22|\u0e04\u0e2d\u0e21|\u0dbd\u0d82\u0d9a\u0dcf|\u0c2d\u0c3e\u0c30\u0c24\u0c4d|\u0b9a\u0bbf\u0b99\u0bcd\u0b95\u0baa\u0bcd\u0baa\u0bc2\u0bb0\u0bcd|\u0b87\u0bb2\u0b99\u0bcd\u0b95\u0bc8|\u0b87\u0ba8\u0bcd\u0ba4\u0bbf\u0baf\u0bbe|\u0aad\u0abe\u0ab0\u0aa4|\u0a2d\u0a3e\u0a30\u0a24|\u09ad\u09be\u09b0\u09a4|\u0938\u0902\u0917\u0920\u0928|\u092d\u093e\u0930\u0924|\u0928\u0947\u091f|\u0915\u0949\u092e|\u0647\u0645\u0631\u0627\u0647|\u0645\u0648\u0642\u0639|\u0645\u0648\u0628\u0627\u064a\u0644\u064a|\u0645\u0644\u064a\u0633\u064a\u0627|\u0645\u0635\u0631|\u0643\u0648\u0645|\u0642\u0637\u0631|\u0641\u0644\u0633\u0637\u064a\u0646|\u0639\u0645\u0627\u0646|\u0639\u0631\u0627\u0642|\u0634\u0628\u0643\u0629|\u0633\u0648\u0631\u064a\u0629|\u0633\u0648\u062f\u0627\u0646|\u062a\u0648\u0646\u0633|\u0628\u06be\u0627\u0631\u062a|\u0628\u064a\u062a\u0643|\u0628\u0627\u0632\u0627\u0631|\u0627\u06cc\u0631\u0627\u0646|\u0627\u0645\u0627\u0631\u0627\u062a|\u0627\u0644\u0645\u063a\u0631\u0628|\u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629|\u0627\u0644\u062c\u0632\u0627\u0626\u0631|\u0627\u0644\u0627\u0631\u062f\u0646|\u0627\u0631\u0627\u0645\u0643\u0648|\u0627\u0628\u0648\u0638\u0628\u064a|\u05e7\u05d5\u05dd|\u0570\u0561\u0575|\u049b\u0430\u0437|\u0443\u043a\u0440|\u0441\u0440\u0431|\u0441\u0430\u0439\u0442|\u0440\u0444|\u0440\u0443\u0441|\u043e\u0440\u0433|\u043e\u043d\u043b\u0430\u0439\u043d|\u043c\u043e\u0441\u043a\u0432\u0430|\u043c\u043e\u043d|\u043c\u043a\u0434|\u043a\u043e\u043c|\u0435\u044e|\u0434\u0435\u0442\u0438|\u0431\u0435\u043b|\u03b5\u03bb|zw|zuerich|zone|zm|zip|zero|zara|za|yun|yt|youtube|you|yokohama|yoga|yodobashi|ye|yandex|yamaxun|yahoo|yachts|xyz|xxx|xperia|xn--zfr164b|xn--ygbi2ammx|xn--yfro4i67o|xn--y9a3aq|xn--xkc2dl3a5ee0h|xn--xkc2al3hye2a|xn--xhq521b|xn--wgbl6a|xn--wgbh1c|xn--w4r85el8fhu5dnra|xn--vuq861b|xn--vhquv|xn--vermgensberatung-pwb|xn--vermgensberater-ctb|xn--unup4y|xn--tckwe|xn--t60b56a|xn--ses554g|xn--s9brj9c|xn--rovu88b|xn--rhqv96g|xn--qxam|xn--qcka1pmc|xn--q9jyb4c|xn--pssy2u|xn--pgbs0dh|xn--pbt977c|xn--p1ai|xn--p1acf|xn--ogbpf8fl|xn--o3cw4h|xn--nyqy26a|xn--nqv7fs00ema|xn--nqv7f|xn--node|xn--ngbe9e0a|xn--ngbc5azd|xn--mxtq1m|xn--mk1bu44c|xn--mix891f|xn--mgbx4cd0ab|xn--mgbtx2b|xn--mgbt3dhd|xn--mgbpl2fh|xn--mgberp4a5d4ar|xn--mgbca7dzdo|xn--mgbc0a9azcg|xn--mgbbh1a71e|xn--mgbb9fbpob|xn--mgbayh7gpa|xn--mgbab2bd|xn--mgbaam7a8h|xn--mgba3a4f16a|xn--mgba3a3ejt|xn--mgb9awbf|xn--lgbbat1ad8j|xn--l1acc|xn--kput3i|xn--kpu716f|xn--kpry57d|xn--kprw13d|xn--kcrx77d1x4a|xn--jvr189m|xn--jlq61u9w7b|xn--j6w193g|xn--j1amh|xn--j1aef|xn--io0a7i|xn--imr513n|xn--i1b6b1a6a2e|xn--hxt814e|xn--h2brj9c|xn--gecrj9c|xn--gckr3f0f|xn--g2xx48c|xn--fzc2c9e2c|xn--fpcrj9c3d|xn--flw351e|xn--fjq720a|xn--fiqz9s|xn--fiqs8s|xn--fiq64b|xn--fiq228c5hs|xn--fhbei|xn--fct429k|xn--estv75g|xn--efvy88h|xn--eckvdtc9d|xn--e1a4c|xn--d1alf|xn--d1acj3b|xn--czru2d|xn--czrs0t|xn--czr694b|xn--clchc0ea0b2g2a9gcd|xn--cg4bki|xn--cck2b3b|xn--c2br7g|xn--c1avg|xn--bck1b9a5dre4c|xn--b4w605ferd|xn--9krt00a|xn--9et52u|xn--9dbq2a|xn--90ais|xn--90a3ac|xn--8y0a063a|xn--80aswg|xn--80asehdb|xn--80ao21a|xn--80adxhks|xn--6qq986b3xl|xn--6frz82g|xn--5tzm5g|xn--55qx5d|xn--55qw42g|xn--4gbrim|xn--45q11c|xn--45brj9c|xn--42c2d9a|xn--3pxu8k|xn--3e0b707e|xn--3ds443g|xn--3bst00m|xn--30rr7y|xn--1qqw23a|xn--1ck2e1b|xn--11b4c3d|xin|xihuan|xerox|xbox|wtf|wtc|ws|world|works|work|wolterskluwer|wme|wine|windows|win|williamhill|wiki|wien|whoswho|wf|weir|weibo|wedding|wed|website|weber|webcam|weatherchannel|weather|watches|watch|wanggou|wang|walter|wales|vuelos|vu|voyage|voto|voting|vote|volkswagen|vodka|vn|vlaanderen|viva|vistaprint|vista|vision|virgin|vip|vin|villas|viking|vig|video|viajes|vi|vg|vet|versicherung|verm\u00f6gensberatung|verm\u00f6gensberater|verisign|ventures|vegas|ve|vc|vana|vacations|va|uz|uy|us|uol|uno|university|unicom|uk|ug|ubs|ua|tz|tw|tvs|tv|tushu|tunes|tui|tube|tt|trv|trust|travelersinsurance|travelers|travel|training|trading|trade|tr|toys|toyota|town|tours|total|toshiba|toray|top|tools|tokyo|today|to|tn|tmall|tm|tl|tk|tj|tirol|tires|tips|tiffany|tienda|tickets|theatre|theater|thd|th|tg|tf|teva|tennis|temasek|telefonica|telecity|tel|technology|tech|team|td|tci|tc|taxi|tax|tattoo|tatar|tatamotors|taobao|talk|taipei|tab|sz|systems|symantec|sydney|sy|sx|swiss|swatch|sv|suzuki|surgery|surf|support|supply|supplies|sucks|su|style|study|studio|stream|store|storage|stockholm|stcgroup|stc|statoil|statefarm|statebank|starhub|star|stada|st|srl|sr|spreadbetting|spot|spiegel|space|soy|sony|song|solutions|solar|sohu|software|softbank|social|soccer|so|sncf|sn|smile|sm|sl|skype|sky|skin|ski|sk|sj|site|singles|sina|si|shriram|show|shouji|shoes|shiksha|shia|shell|shaw|sharp|sh|sg|sfr|sexy|sex|sew|seven|services|sener|select|seek|security|seat|se|sd|scot|scor|science|schwarz|schule|school|scholarships|schmidt|schaeffler|scb|sca|sc|sbs|sbi|sb|saxo|sas|sarl|sapo|sap|sanofi|sandvikcoromant|sandvik|samsung|salon|sale|sakura|safety|safe|saarland|sa|ryukyu|rwe|rw|run|ruhr|ru|rsvp|rs|room|rodeo|rocks|rocher|ro|rip|rio|ricoh|rich|rexroth|reviews|review|restaurant|rest|republican|report|repair|rentals|rent|ren|reit|reisen|reise|rehab|redumbrella|redstone|red|recipes|realty|realtor|read|re|racing|quest|quebec|qpon|qa|py|pwc|pw|pub|pt|ps|protection|property|properties|promo|prof|productions|prod|pro|press|praxi|pr|post|porn|poker|pohl|pn|pm|plus|plumbing|playstation|play|place|pl|pk|pizza|pink|ping|pin|pid|pictures|pictet|pics|piaget|physio|photos|photography|photo|philips|pharmacy|ph|pg|pf|pet|pe|passagens|party|parts|partners|pars|paris|panerai|pamperedchef|page|pa|ovh|otsuka|osaka|origins|organic|org|orange|oracle|ooo|online|onl|ong|one|omega|om|okinawa|office|obi|nz|nyc|nu|ntt|nrw|nra|nr|np|nowruz|norton|northwesternmutual|nokia|no|nl|nissay|nissan|ninja|nikon|nico|ni|nhk|ngo|ng|nf|nexus|news|new|neustar|network|netbank|net|nec|ne|nc|navy|natura|name|nagoya|nadex|na|mz|my|mx|mw|mv|mutuelle|mutual|museum|mu|mtr|mtpc|mtn|mt|ms|mr|mq|mp|movistar|movie|mov|motorcycles|moscow|mortgage|mormon|montblanc|money|monash|mom|moi|moe|moda|mobily|mobi|mo|mn|mma|mm|ml|mk|mini|mil|microsoft|miami|mh|mg|meo|menu|men|memorial|meme|melbourne|meet|media|med|me|md|mc|mba|marriott|markets|marketing|market|mango|management|man|makeup|maison|maif|madrid|ma|ly|lv|luxury|luxe|lupin|lu|ltda|ltd|lt|ls|lr|love|lotto|lotte|london|lol|locus|loans|loan|lk|lixil|living|live|link|linde|lincoln|limo|limited|like|lighting|lifestyle|lifeinsurance|life|lidl|liaison|li|lgbt|lexus|legal|leclerc|lease|lds|lc|lb|lawyer|law|latrobe|lat|lasalle|lanxess|landrover|land|lancaster|lamer|lamborghini|lacaixa|la|kz|kyoto|ky|kw|kuokgroup|kred|krd|kr|kpn|kpmg|kp|komatsu|koeln|kn|km|kiwi|kitchen|kinder|kim|kia|ki|kh|kg|kfh|kerryproperties|kerrylogistics|kerryhotels|ke|kddi|kaufen|juegos|jprs|jpmorgan|jp|joy|jot|joburg|jobs|jo|jnj|jmp|jm|jll|jlc|jewelry|jetzt|je|jcp|jcb|java|jaguar|iwc|itau|it|istanbul|ist|ismaili|iselect|is|irish|ir|iq|ipiranga|io|investments|international|int|insure|insurance|institute|ink|ing|info|infiniti|industries|in|immobilien|immo|imamat|im|il|iinet|ifm|ie|id|icu|ice|icbc|ibm|hyundai|hu|htc|ht|hsbc|hr|how|house|hotmail|hoteles|hosting|host|horse|honda|homes|homedepot|holiday|holdings|hockey|hn|hm|hk|hiv|hitachi|hiphop|hermes|here|helsinki|help|healthcare|health|hdfcbank|haus|hangout|hamburg|gy|gw|guru|guitars|guide|guge|gucci|gu|gt|gs|group|gripe|green|gratis|graphics|grainger|gr|gq|gp|gov|got|gop|google|goog|goo|golf|goldpoint|gold|gn|gmx|gmo|gmbh|gmail|gm|globo|global|gle|glass|gl|giving|gives|gifts|gift|gi|gh|ggee|gg|gf|genting|gent|gea|ge|gdn|gd|gbiz|gb|garden|game|gallup|gallo|gallery|gal|ga|fyi|futbol|furniture|fund|ftr|frontier|frogans|frl|fresenius|fr|fox|foundation|forum|forsale|forex|ford|football|foo|fo|fm|fly|flsmidth|flowers|florist|flights|flickr|fk|fj|fitness|fit|fishing|fish|firmdale|firestone|financial|finance|final|film|fi|ferrero|feedback|fast|fashion|farm|fans|fan|family|faith|fairwinds|fail|fage|extraspace|express|exposed|expert|exchange|everbank|events|eus|eurovision|eu|et|estate|esq|es|erni|er|equipment|epson|enterprises|engineering|engineer|energy|emerck|email|eg|ee|education|edu|edeka|ec|eat|earth|dz|dvag|durban|dubai|drive|download|domains|doha|dog|docs|do|dnp|dm|dk|dj|discount|directory|direct|digital|diet|diamonds|dev|design|desi|dentist|dental|democrat|delta|deloitte|dell|delivery|degree|deals|dealer|de|dclk|day|datsun|dating|date|dance|dad|dabur|cz|cyou|cymru|cy|cx|cw|cv|cuisinella|cu|csc|cruises|crs|crown|cricket|creditunion|creditcard|credit|cr|courses|coupons|coupon|country|corsica|coop|cool|cooking|contractors|contact|consulting|construction|condos|comsec|computer|compare|company|community|commbank|com|cologne|college|coffee|codes|coach|co|cn|cm|clubmed|club|cloud|clothing|clinique|clinic|click|cleaning|claims|cl|ck|cityeats|city|citic|cisco|circle|cipriani|ci|church|chrome|christmas|chloe|cheap|chat|chase|channel|chanel|ch|cg|cfd|cfa|cf|cern|ceo|center|ceb|cd|cc|cbn|cba|catering|cat|casino|cash|casa|cartier|cars|careers|career|care|cards|caravan|car|capital|capetown|canon|cancerresearch|camp|camera|call|cal|cafe|cab|ca|bzh|bz|by|bw|bv|buzz|buy|business|builders|build|bugatti|budapest|bt|bs|brussels|brother|broker|broadway|bridgestone|bradesco|br|boutique|bot|bostik|bosch|boots|book|boo|bond|bom|boehringer|boats|bo|bnpparibas|bnl|bn|bmw|bms|bm|blue|bloomberg|blackfriday|black|bj|biz|bio|bingo|bing|bike|bid|bible|bi|bharti|bh|bg|bf|bet|best|berlin|bentley|beer|beats|be|bd|bcn|bcg|bbva|bbc|bb|bayern|bauhaus|bargains|barefoot|barclays|barclaycard|barcelona|bar|bank|band|baidu|baby|ba|azure|az|axa|ax|aws|aw|avianca|autos|auto|author|audio|audi|auction|au|attorney|at|associates|asia|as|arte|arpa|army|archi|aramco|ar|aquarelle|aq|apple|app|apartments|ao|anquan|android|analytics|amsterdam|amica|am|alsace|ally|allfinanz|alipay|alibaba|al|akdn|airtel|airforce|aig|ai|agency|agakhan|ag|afl|af|aero|aeg|ae|adult|ads|adac|ad|actor|active|aco|accountants|accountant|accenture|academy|ac|abudhabi|abogado|abbvie|abbott|abb|aarp|aaa))"};},null);
__d('MCommentStatusLogger',['BanzaiLogger','ex','uuid'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k={INIT:'init',SUBMIT:'submit',RESPOND:'respond',RENDER:'render'};function l(q,r,s){this.prevEventType=q||null;this.perfLoggable=!!r;this.isEndStep=!!s;}var m={};m[k.INIT]=new l();m[k.SUBMIT]=new l(k.INIT,true);m[k.RESPOND]=new l(k.SUBMIT,true);m[k.RENDER]=new l(k.RESPOND,true,true);function n(q){this.$InteractionLog1=q;this.$InteractionLog2={};this.$InteractionLog3=0;this.$InteractionLog4=0;this.$InteractionLog5=null;}n.prototype.$InteractionLog6=function(q){return q in this.$InteractionLog2;};n.prototype.logEvent=function(q,r){if(this.$InteractionLog6(q)||!(q in m))return false;var s=m[q],t=s.prevEventType;if(t&&!this.$InteractionLog6(t))return false;this.$InteractionLog3=r&&r.hasOwnProperty('text')?r.text:this.$InteractionLog3;this.$InteractionLog4=r&&r.hasOwnProperty('photo')?r.photo:this.$InteractionLog4;this.$InteractionLog5=(r&&r.hasOwnProperty('stickerID')?r.stickerID:this.$InteractionLog5)||null;var u=Date.now(),v=Math.round(u/1000);this.$InteractionLog2[q]=u;var w={event:q,text_length:this.$InteractionLog3,num_photos:this.$InteractionLog4,sticker_id:this.$InteractionLog5,interaction_key:this.$InteractionLog1,client_time:v};if(t&&s.perfLoggable){var x=this.$InteractionLog7(t,q);w=babelHelpers['extends']({duration:x},w);}h.create({retry:true}).log('MCommentWriteWaterfallLoggerConfig',w);return true;};n.prototype.$InteractionLog7=function(q,r){var s=this.$InteractionLog2;if(!this.$InteractionLog6(q)||!this.$InteractionLog6(r))return null;var t=s[q],u=s[r];if(t>u)return null;return u-t;};var o={},p={newInteractionKey:function(){return j();},_logCommentStatus:function(q,r,s){if(!(r in m))return;var t=o[q];if(r===k.INIT)if(t){return;}else{t=new n(q);o[q]=t;}if(!t)return;var u=t.logEvent(r,s);if(u&&m[r].isEndStep)this.clear(q);},logInitText:function(q){this._logCommentStatus(q,k.INIT,{text:1});},logInitPhoto:function(q){this._logCommentStatus(q,k.INIT,{photo:1});},logSubmit:function(q,r){this._logCommentStatus(q,k.SUBMIT,{text:r.text,photo:r.photo,stickerID:null});},logReceiveResponse:function(q,r){this._logCommentStatus(q,k.RESPOND,{text:r.text,photo:r.photo,stickerID:r.stickerID});},logRender:function(q){this._logCommentStatus(q,k.RENDER);},logInitAndSubmitSticker:function(q,r){this._logCommentStatus(q,k.INIT,{text:0,photo:0,stickerID:r});this._logCommentStatus(q,k.SUBMIT,{text:0,photo:0,stickerID:r});},clear:function(q){if(q in o)delete o[q];}};f.exports=p;},null);
__d('MLoadingIndicator.react',['IndicatorType','MJSAnimator','MJSEnvironment','React','ReactDOM','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m){var n,o;if(c.__markCompiled)c.__markCompiled();var p=k.PropTypes,q=j.IS_APPLE_WEBKIT_IOS,r=j.IS_ANDROID&&j.OS_VERSION<4;n=babelHelpers.inherits(s,k.Component);o=n&&n.prototype;function s(){var t,u;'use strict';for(var v=arguments.length,w=Array(v),x=0;x<v;x++)w[x]=arguments[x];return t=(u=o.constructor).call.apply(u,[this].concat(w)),this.getClassName=function(){return (this.props.className||'')+' '+((!r?"_55on":'')+(' '+"_2so")+(this.props.background==='dark'?' '+"_2st":'')+(this.props.background==='light'?' '+"_2ss":'')+(this.props.size==='large'?' '+"_2sq":'')+(this.props.size==='small'?' '+"_2sp":'')+(!r&&!q?' '+"_50cg":'')+(q?' '+"_50ch":'')+(r?' '+"_2su":''));}.bind(this),this.renderGradientIfNeeded=function(){if(r||!q)return null;return (k.createElement('div',{className:"_2sr _55on"}));},t;}s.prototype.componentDidMount=function(){'use strict';if(r){this.$MLoadingIndicator1=new i(l.findDOMNode(this.refs.spinner),h.ANDROID_NONROTATING,false);this.$MLoadingIndicator1.start();}};s.prototype.componentWillUnmount=function(){'use strict';if(this.$MLoadingIndicator1){this.$MLoadingIndicator1.cleanup();this.$MLoadingIndicator1=null;}};s.prototype.render=function(){'use strict';return k.createElement('div',{ref:'spinner',className:this.getClassName()},this.renderGradientIfNeeded());};s.propTypes={background:p.oneOf(['light','dark']),size:p.oneOf(['small','large'])};s.defaultProps={background:'light',size:'large'};f.exports=s;},null);
__d('MProgressBar.react',['MAnimator','React','joinClasses','cx'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=i.PropTypes,m=i.createClass({displayName:'MProgressBar',propTypes:{initialValue:l.number.isRequired,min:l.number,max:l.number},getDefaultProps:function(){return {min:0,max:100};},getInitialState:function(){return {value:this.props.initialValue};},_calculatePercentage:function(n){var o=this.props,p=Math.min(Math.max((n-o.min)/(o.max-o.min)*100,0),100);return p;},_getFillArea:function(){var n=this._calculatePercentage(this.state.value),o=Math.round(n),p="fill"+(o===0?' '+"empty":'')+(o===100?' '+"full":'');return (i.createElement('div',{className:p,style:{width:n+'%'}}));},animate:function(n,o){var p=this._calculatePercentage(this.state.value),q=this._calculatePercentage(n);h.play(p,q,o,this.setValue);},setValue:function(n){if(this.isMounted())this.setState({value:n});},render:function(){return (i.createElement('div',{className:j(this.props.className,"_lbu")},this._getFillArea()));}});f.exports=m;},null);
__d('MXUILayout.react',['MXUIDiv.react','React','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k){var l,m;if(c.__markCompiled)c.__markCompiled();var n=i.PropTypes,o=function(q){return (q.align==='start'?"_52wc":'')+(q.align==='end'?' '+"_52wd":'')+(q.align==='center'?' '+"_52we":'')+(q.align==='stretch'?' '+"_52wf":'');};l=babelHelpers.inherits(p,i.Component);m=l&&l.prototype;function p(){var q,r;'use strict';for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return q=(r=m.constructor).call.apply(r,[this].concat(t)),this.state={align:this.props.align},this.hasAlignSelfChildren=function(){var v=this.props.children;for(var w=0;w<v.length;w++){var x=v[w];if(x&&x.props.hasOwnProperty('alignself'))return true;}return false;}.bind(this),q;}p.prototype.render=function(){'use strict';var q,r;if(this.hasAlignSelfChildren()){q="_4g33";r=this.props.children.map(function(s){if(s.props.hasOwnProperty('alignself'))return s;return i.cloneElement(s,{alignself:this.state.align});},this);}else{q=k(o(this.props),"_4g33");r=this.props.children;}return (i.createElement(h,babelHelpers['extends']({},this.props,{className:k(this.props.className,q)}),r));};p.defaultProps={align:'stretch'};p.propTypes={align:n.oneOf(['start','end','center','stretch'])};f.exports=p;},null);
__d('MXUILayoutColumn.react',['MXUIDiv.react','React','MJSEnvironment','joinClasses','cx'],function a(b,c,d,e,f,g,h,i,j,k,l){var m,n;if(c.__markCompiled)c.__markCompiled();var o=i.PropTypes,p=function(r){return (r.alignself==='start'?"_52wc":'')+(r.alignself==='end'?' '+"_52wd":'')+(r.alignself==='center'?' '+"_52we":'')+(r.alignself==='stretch'?' '+"_52wf":'');};m=babelHelpers.inherits(q,i.Component);n=m&&m.prototype;q.prototype.render=function(){'use strict';var r;if(this.props.hasOwnProperty('alignself')){r=k("_5i2i",p(this.props));if(j.IS_FIREFOX)return (i.createElement(h,babelHelpers['extends']({},this.props,{className:k(this.props.className,r)}),i.createElement(h,{className:"_5xu4"},this.props.children)));}return (i.createElement(h,babelHelpers['extends']({},this.props,{className:k(this.props.className,r)}),this.props.children));};function q(){'use strict';m.apply(this,arguments);}q.propTypes={alignself:o.oneOf(['start','end','center','stretch'])};f.exports=q;},null);
__d('MXUILayoutFillColumn.react',['MXUILayoutColumn.react','React','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k){var l,m;if(c.__markCompiled)c.__markCompiled();l=babelHelpers.inherits(n,i.Component);m=l&&l.prototype;n.prototype.render=function(){'use strict';var o="_4g34";return (i.createElement(h,babelHelpers['extends']({},this.props,{className:k(this.props.className,o)}),this.props.children));};function n(){'use strict';l.apply(this,arguments);}f.exports=n;},null);
__d('MUFICommentReplyLink',['DOM','MAjaxify','MParent','MRequest','MUFIInlineRepliesFunnelLogConfig','Stratcom','SubscriptionsHandler','ge'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){'use strict';if(c.__markCompiled)c.__markCompiled();var p='feed-ufi-comments',q=l.MUFIInlineReplyComposerFunnelLogger;function r(t){var u=t.composerID,v=t.placeholderID,w=t.node,x=t.loadComposerURI,y=t.loggingTargetFBID,z=new n();z.addSubscriptions(h.listen(w,'click',null,function(event){s({composerID:u,placeholderID:v,loadComposerURI:x,loggingTargetFBID:y,onPreventDefault:function(){event.prevent();}});}),m.listen('m:page:unload',null,function(){z.release();}),m.listen('m:feed-ufi-flyout:reset',null,function(){z.release();}));}function s(t){var u=t.composerID,v=t.placeholderID,w=t.loadComposerURI,x=t.loggingTargetFBID,y=t.onPreventDefault;if(x&&q)q.logReplyClicked(x);var z=o(u),aa=z&&h.scry(z,'*','mufi-composer')[0];if(aa){y();if(j.bySigil(z,p)){m.invoke('MUFICommentReplyLink:show-inline-composer',null,{composerRoot:z});}else aa.focus();return;}var ba=o(v);if(ba&&w){y();i.ajaxify(null,ba,new k(w),null);return;}}f.exports={initInlineReplies:r,focusOrLoadInlineReplyComposer:s};},null);
__d('Grid.react',['React','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j){var k,l,m,n;if(c.__markCompiled)c.__markCompiled();var o=h.PropTypes;k=babelHelpers.inherits(p,h.Component);l=k&&k.prototype;p.prototype.render=function(){'use strict';var r=this.props,s=r.alignh,t=r.alignv,u=r.children,v=r.cols,w=r.fixed,x=r.spacing,y=h.Children.count(u),z=[],aa=[],ba=0;h.Children.forEach(u,function(ca,da){if(ca===null||ca===undefined)return;var ea=ca.type===q;ba+=ea?Math.max(ca.props.colSpan||0,1):1;var fa=ba===v?"_51mw":'';if(!ea){ca=h.createElement(q,{alignh:s,alignv:t,className:j(x,fa),key:ca.key||da},ca);}else ca=h.cloneElement(ca,{key:ca.key||da,alignh:ca.props.alignh||s,alignv:ca.props.alignv||t,className:j(ca.props.className,x,fa)});aa.push(ca);if(ba%v===0||da+1===y){if(w&&ba<v){for(var ga=ba;ga<v;ga++)aa.push(h.createElement(q,{key:da+ga}));ba=v;}z.push(h.createElement('tr',{className:"_51mx",key:da},aa));aa=[];ba=0;}});return (h.createElement('table',babelHelpers['extends']({},this.props,{className:j(this.props.className,"uiGrid"+(' '+"_51mz")+(w?' '+"_5f0n":'')),cellSpacing:'0',cellPadding:'0'}),h.createElement('tbody',null,z)));};function p(){'use strict';k.apply(this,arguments);}p.propTypes={cols:o.number.isRequired,fixed:o.bool,alignv:o.oneOf(['top','middle','bottom']),alignh:o.oneOf(['left','center','right']),spacing:o.string};m=babelHelpers.inherits(q,h.Component);n=m&&m.prototype;q.prototype.render=function(){'use strict';var r=j(this.props.className,"_51m-"+(this.props.alignv==='top'?' '+"vTop":'')+(this.props.alignv==='middle'?' '+"vMid":'')+(this.props.alignv==='bottom'?' '+"vBot":'')+(this.props.alignh==='left'?' '+"hLeft":'')+(this.props.alignh==='center'?' '+"hCent":'')+(this.props.alignh==='right'?' '+"hRght":''));return (h.createElement('td',babelHelpers['extends']({},this.props,{className:r})));};function q(){'use strict';m.apply(this,arguments);}q.propTypes={alignv:o.oneOf(['top','middle','bottom']),alignh:o.oneOf(['left','center','right'])};p.GridItem=q;f.exports=p;},null);
__d("XStickerPackImagesController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/stickers\/{pack_id}\/images\/",{pack_id:{type:"Int",required:true},sticker_size:{type:"Int",defaultValue:50}});},null);
__d("XStickerQueryImagesController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/stickers\/query\/images\/",{query:{type:"String",required:true},sticker_interface:{type:"String"}});},null);
__d('MStickerPack.react',['Grid.react','MRequest','MStickersInitialData','MStickersWebDriverIDs','MURI','React','Image.react','ReactComponentWithPureRenderMixin','StickerInterfaces','XStickerPackImagesController','XStickerQueryImagesController','cx','ix','fbt','debounceCore'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){'use strict';if(c.__markCompiled)c.__markCompiled();var w=h.GridItem,x=j.MRU_STICKER_PACK,y=14,z={},aa=m.createClass({displayName:'MStickerPack',mixins:[o],getInitialState:function(){return {input:'',loading:false,searching:false,stickers:[]};},getDefaultProps:function(){return {isComments:false};},componentWillMount:function(){this.getStickers(this.props.pack.id);},componentWillReceiveProps:function(ba){this.getStickers(ba.pack.id);},updateRecentlyUsed:function(ba){var ca=z[x]||[];for(var da=0;da<ca.length;++da)if(ca[da].id===ba.id){ca.splice(da,1);break;}ca.unshift(ba);if(!z[x]){z[x]=ca;j.packs.unshift(j.mru);}},getStickers:function(ba){if(!ba||ba==j.SEARCH_PACK)return;if(ba in z){this.setState({input:'',loading:false,stickers:z[ba],searching:false});return;}var ca=q.getURIBuilder().setInt('pack_id',ba).getURI(),da=new i(new l(ca));da.listen('done',function(ea){z[ba]=ea.payload;this.isMounted()&&this.setState({input:'',loading:false,stickers:ea.payload,searching:false});}.bind(this));this.setState({loading:true});da.send();},getStickersForQuery:function(ba,ca){if(ba.length===0){this.setState({loading:false,searching:false});return;}if(ba!=this.state.input&&!ca)return;var da=r.getURIBuilder().setString('query',ba).setString('sticker_interface',this.props.isComments?p.COMMENTS:p.MESSAGES).getURI(),ea=new i(new l(da));ea.listen('done',function(fa){var ga=fa.payload||[];if(this.isMounted()&&ba==this.state.input)this.setState({loading:false,stickers:ga,searching:true});}.bind(this));this.setState({loading:true});ea.send();},selectSticker:function(ba){this.updateRecentlyUsed(ba);this.props.onSelect&&this.props.onSelect(ba.id);},renderSticker:function(ba,ca){var da=null;if(this.props.isComments&&!ba.isCommentsCapable){if(this.props.pack.id==j.MRU_STICKER_PACK)return;}else if(!this.props.isComments&&!ba.isMessengerCapable){if(this.props.pack.id==j.MRU_STICKER_PACK)return;}else da=this.selectSticker.bind(this,ba);return (m.createElement('a',{className:"_5asg",'data-testid':k.STICKER_PACK_ITEM,href:'#',key:'sticker-'+ca,onClick:da,role:'button'},m.createElement(n,{src:ba.uri,alt:u._("{pack name} {sticker name} sticker",[u.param('pack name',ba.packName),u.param('sticker name',ba.accessibilityLabel)])})));},_getRenderedFakeStickers:function(){return Array.from(new Array(y),function(ba,ca){return (m.createElement('div',{key:'fake-'+ca,className:"_u2_"}));});},_getRenderedStickerGridItems:function(){return (this.state.stickers.map(this.renderSticker).concat(this._getRenderedFakeStickers()));},render:function(){if(this.props.pack.id==j.SEARCH_PACK)return (m.createElement('div',{className:"_5ash"},m.createElement('div',{className:"_5ef_"},this._renderSearch(),this._renderTags(),this._renderStickerSearchResults()),this._renderLoading()));if(this.state.loading)return (m.createElement('div',{className:"_5ash"},this._renderLoading()));return (m.createElement('div',{className:"_5ash"+(this.props.isComments&&!this.props.pack.isCommentsCapable?' '+"_5jkg":''),onScroll:this.props.onScroll},m.createElement('div',{className:"_5ef_",onScroll:this._onScroll},this._getRenderedStickerGridItems()),this.renderMask()));},_renderLoading:function(){if(!this.state.loading)return null;return (m.createElement('span',{className:"_5asi"},u._("Loading...")));},_renderStickerSearchResults:function(){if(!this.state.searching||this.state.loading)return null;if(this.state.stickers.length===0)return (m.createElement('div',{className:"_4op9"},m.createElement(n,{src:t("/images/messaging/stickers/icons/sad_face.png")}),m.createElement('p',null,u._("No Stickers to Show"))));return (m.createElement('div',{className:"_5ash"+(this.props.isComments&&!this.props.pack.isCommentsCapable?' '+"_5jkg":''),onScroll:this.props.onScroll},m.createElement('div',{className:"_5ef_"},this._getRenderedStickerGridItems()),this.renderMask()));},renderMask:function(){if(!(this.props.isComments&&!this.props.pack.isCommentsCapable))return null;return (m.createElement('div',{className:"_5jkh"},m.createElement('div',{className:"_5jki"},u._("This pack is only available in messages"))));},_renderSearch:function(){return (m.createElement('div',{className:"_2j-l"},m.createElement('span',{className:"_2j-m"}),this._renderCloseButton(),m.createElement('div',{className:"_4opa"},m.createElement('input',{className:"_2j-n",onChange:this._inputChanged,onFocus:this.props.onInputFocus,onBlur:this.props.onInputBlur,ref:'stickerQuery',value:this.state.input,placeholder:u._("Search stickers"),type:'text'}))));},_renderCloseButton:function(){if(this.state.input.length>0)return (m.createElement('span',{className:"_4opb",onClick:this._clearInput}));},_renderTags:function(){if(this.state.searching||this.state.loading)return null;var ba=j.tags.filter(function(ca){return ca.sourceURI!==null;}).sort(function(ca,da){return ca.order-da.order;}).map(function(ca,da){return (m.createElement(w,{className:"_2j-o",key:da},m.createElement('div',{className:"_2j-p"},m.createElement('div',{className:"_2j-q",onClick:this._selectTag.bind(this,ca),style:{background:'#'+ca.color_code}},m.createElement(n,{src:ca.sourceURI}),m.createElement('span',null,ca.name)))));}.bind(this));return (m.createElement(h,{className:"_2j-r",cols:2,fixed:true,ref:'grid'},ba));},_inputChanged:function(event){this.setState({input:event.target.value});v(this.getStickersForQuery.bind(this,event.target.value,false),500)();},_clearInput:function(){this.setState({input:'',loading:false,searching:false});},_selectTag:function(ba){this.setState({input:ba.name});this.getStickersForQuery(ba.name,true);}});f.exports=aa;},null);
__d('MStickerPackButton.react',['Image.react','MStickersInitialData','MStickersWebDriverIDs','React','cx'],function a(b,c,d,e,f,g,h,i,j,k,l){var m,n;if(c.__markCompiled)c.__markCompiled();m=babelHelpers.inherits(o,k.PureComponent);n=m&&m.prototype;function o(){var p,q;'use strict';for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return p=(q=n.constructor).call.apply(q,[this].concat(s)),this.onClick=function(){this.props.onclick&&this.props.onclick(this.props.pack);}.bind(this),p;}o.prototype.render=function(){'use strict';var p="_5arz"+(' '+"_5cni")+(this.props.selected?' '+"_5ar-":'')+(this.props.disabled?' '+"_4f39":''),q=this.props.pack,r;if(q.id==i.MRU_STICKER_PACK){r=k.createElement('span',{className:"_3rsg"});}else if(q.id==i.SEARCH_PACK){r=k.createElement('span',{className:"_cmr"});}else r=k.createElement(h,{src:q.icon,alt:q.name});var s=q.id==i.SEARCH_PACK?null:j.STICKER_NONSEARCH_PACK_BUTTON;return (k.createElement('a',{className:p,onClick:this.onClick,rel:'ignore','data-testid':s},r));};f.exports=o;},null);
__d("XStickerStorePermalinkController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/stickers\/",{tab:{type:"String"},redirect_uri:{type:"String"},is_comments:{type:"Bool",defaultValue:false}});},null);
__d('MStickerSelector.react',['BanzaiLogger','DOM','MPageController','MParent','MStickerPack.react','MStickerPackButton.react','MStickersInitialData','MStickersWebDriverIDs','MViewport','React','ReactDOM','Stratcom','SubscriptionsHandler','UserAgent','XStickerStorePermalinkController','getActiveElement','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){var z,aa;if(c.__markCompiled)c.__markCompiled();var ba=q.PropTypes,ca='feed-ufi-comments',da='scroll-area';z=babelHelpers.inherits(ea,q.Component);aa=z&&z.prototype;function ea(ga){'use strict';aa.constructor.call(this,ga);fa.call(this);var ha=null;if(n.packs&&n.packs.length)for(var ia=0;ia<n.packs.length;ia++)if(!ga.isComments&&n.packs[ia].isMessengerCapable||ga.isComments&&n.packs[ia].isCommentsCapable){ha=n.packs[ia];break;}this.state={selectedPack:ha,prevDisabled:true,nextDisabled:false,scrollLeft:0};}ea.prototype.render=function(){'use strict';if(!this.props.isOpen)return null;var ga=n.packs.length===0?q.createElement('div',{className:"_5ar_"},y._("No stickers available")):q.createElement(l,{pack:this.state.selectedPack,onSelect:this.props.callback,onScroll:this.onPackScroll,onInputFocus:this.onInputFocus,onInputBlur:this.onInputBlur,isComments:this.props.isComments}),ha=n.packs,ia=[];for(var ja=0;ja<ha.length;ja++)if(ha[ja])if(this.props.isComments&&ha[ja].isCommentsCapable){ia.push(ha[ja]);}else if(ha[ja].isMessengerCapable)ia.push(ha[ja]);ha=ia;ha=ha.map(this.renderPack,this);var ka=v.getURIBuilder().setString('redirect_uri',j.getRenderedPath()).setBool('is_comments',this.props.isComments).getURI(),la=null;if(this.props.showStore)la=q.createElement('a',{className:"_5cni _5b3_",href:ka.toString()},q.createElement('span',{className:"_5b40"}),this.renderIndicator());var ma=u.isPlatform('Android <2.4');return (q.createElement('div',{className:this.props.className,'data-testid':o.STICKER_SELECTOR_CONTENT,ref:'root'},q.createElement('div',{className:"_5as0"+(ma?' '+"_2-n8":''),ref:'selector'},q.createElement('div',{className:"_5as1",onScroll:this.state.inputFocused?this.$MStickerSelector4:null},ga),q.createElement('div',{className:"_5as2",ref:'selectorRow',style:{marginLeft:-this.state.scrollLeft}},q.createElement('div',{className:"_5as5"},ha)),this.$MStickerSelector5(),this.$MStickerSelector6(),la)));};ea.prototype.componentDidMount=function(){'use strict';if(this.props.isOpen){this.$MStickerSelector8();this.$MStickerSelector7();}};ea.prototype.componentWillUnmount=function(){'use strict';this.$MStickerSelector9();};ea.prototype.componentDidUpdate=function(ga,ha){'use strict';if(this.props.isOpen){if(!ga.isOpen)this.$MStickerSelector8();if(this.state.selectedPack!=ha.selectedPack||this.props.isOpen!=ga.isOpen){var ia=r.findDOMNode(this.refs.selector);if(k.bySigil(ia,ca)){s.invoke('MStickerSelector:show-sticker-selector',null,{selectorNode:ia});}else p.scrollToNodeIfNecessary(r.findDOMNode(this.refs.selector));}if(this.props.isOpen!=ga.isOpen){this.$MStickerSelector7();h.log('MTouchStickersLoggerConfig',{event:'open_tray'});}}else if(ga.isOpen)this.$MStickerSelector9();};ea.propTypes={callback:ba.func.isRequired,isComments:ba.bool.isRequired,isOpen:ba.bool,onClose:ba.func,showStore:ba.bool.isRequired};ea.defaultProps={isComments:true,showStore:true};var fa=function(){this.$MStickerSelector1=null;this.onPackSelect=function(ga){h.log('MTouchStickersLoggerConfig',{event:'select_pack',packid:ga.id});this.setState({selectedPack:ga});}.bind(this);this.onPackScroll=function(){if(this.state.selectedPack&&this.state.selectedPack.id!=this.$MStickerSelector2){this.$MStickerSelector2=this.state.selectedPack.id;h.log('MTouchStickersLoggerConfig',{event:'scroll_pack',packid:this.state.selectedPack.id});}}.bind(this);this.onInputFocus=function(){this.setState({inputFocused:true});}.bind(this);this.onInputBlur=function(){this.setState({inputFocused:false});}.bind(this);this.scrollPrev=function(){if(!this.state.prevDisabled){var ga=Math.max(this.state.scrollLeft-200,0);this.setState({scrollLeft:ga,prevDisabled:ga===0,nextDisabled:false});}}.bind(this);this.scrollNext=function(){if(!this.state.nextDisabled){var ga=r.findDOMNode(this.refs.selectorRow),ha=ga.scrollWidth-ga.parentNode.clientWidth,ia=Math.min(this.state.scrollLeft+200,ha);this.setState({scrollLeft:ia,prevDisabled:false,nextDisabled:this.$MStickerSelector3(ia)});}}.bind(this);this.$MStickerSelector3=function(ga){var ha=r.findDOMNode(this.refs.selectorRow),ia=ha.scrollWidth-ha.parentNode.clientWidth;return ga>=ia;}.bind(this);this.renderPack=function(ga,ha){return q.createElement(m,{disabled:this.props.isComments&&!ga.isCommentsCapable||!this.props.isComments&&!ga.isMessengerCapable,key:'pack-'+ha,onclick:this.onPackSelect,pack:ga,selected:ga.id==this.state.selectedPack.id});}.bind(this);this.renderIndicator=function(){if(!n.storeIndicator)return null;return q.createElement('div',{className:"_5e-s"});};this.$MStickerSelector5=function(){return q.createElement('a',{'aria-label':y._("Previous Sticker Packs"),className:"_5cni _5abu",disabled:this.state.prevDisabled,href:'#',onClick:this.scrollPrev,ref:'prevButton',rel:'ignore',role:'button'},q.createElement('span',{className:"_5abw"}));}.bind(this);this.$MStickerSelector6=function(){return q.createElement('a',{'aria-label':y._("Next Sticker Packs"),className:"_5cni _5abx",disabled:this.state.nextDisabled,href:'#',onClick:this.scrollNext,ref:'nextButton',rel:'ignore',role:'button'},q.createElement('span',{className:"_5aby"}));}.bind(this);this.$MStickerSelector7=function(){this.setState({nextDisabled:this.$MStickerSelector3(this.state.scrollLeft)});}.bind(this);this.$MStickerSelector4=function(event){w().blur();};this.$MStickerSelector8=function(){if(this.$MStickerSelector1)return;var ga=r.findDOMNode(this.refs.root);if(!ga)return;if(k.bySigil(ga,da)){var ha=new t();ha.addSubscriptions(i.listen(ga,'touchmove',null,function(event){event.stop();}),s.listen('m:page:unload',null,function(){this.$MStickerSelector9();}.bind(this)));if(k.bySigil(ga,ca))ha.addSubscriptions(s.listen('m:feed-ufi-flyout:reset',null,function(){this.$MStickerSelector9();}.bind(this)));this.$MStickerSelector1=ha;}}.bind(this);this.$MStickerSelector9=function(){this.$MStickerSelector1&&this.$MStickerSelector1.release();this.$MStickerSelector1=null;}.bind(this);};f.exports=ea;},null);
__d('MStickerSelectorButton.react',['Image.react','React','cx','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l){var m,n;if(c.__markCompiled)c.__markCompiled();var o=i.PropTypes;m=babelHelpers.inherits(p,i.Component);n=m&&m.prototype;function p(){var q,r;'use strict';for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return q=(r=n.constructor).call.apply(r,[this].concat(t)),this.state={isSelected:this.props.isSelected},this.onClick=function(event){this.setState({isSelected:!this.state.isSelected});this.props.onClick&&this.props.onClick(event);}.bind(this),q;}p.prototype.componentWillUpdate=function(q,r){'use strict';if(q!==this.props)this.setState({isSelected:q.isSelected});if(this.props.onToggle&&r!==this.state)this.props.onToggle(r.isSelected);};p.prototype.render=function(){'use strict';var q;if(!this.state.isSelected){q=l('/images/mobile/messages/stickers/smile_icon.png');}else q=l('/images/mobile/messages/stickers/smile_icon_active.png');return (i.createElement('button',{'aria-label':k._("Add Sticker"),type:'button',className:"_5ecn _1n29",'data-sigil':'touchable',onClick:this.onClick},i.createElement(h,{src:q})));};p.propTypes={onToggle:o.func,isSelected:o.bool};p.defaultProps={isSelected:false};f.exports=p;},null);
__d('MStickerMount',['ClientIDs','DOM','MAjaxify','MCommentStatusLogger','MRequest','MStickerSelector.react','MStickerSelectorButton.react','ReactComponentRenderer','Stratcom','SubscriptionsHandler','$'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){'use strict';if(c.__markCompiled)c.__markCompiled();var s='m-textarea-input',t=function(w,x,y,z,aa,ba){var ca=void 0,da=new o(m,x);da.setProps({callback:z,isComments:aa,onClose:function(){da&&da.setProps({isOpen:false});ca&&ca.setProps({isSelected:false});},showStore:ba});ca=new o(n,w);ca.setProps({onToggle:function(fa){da.setProps({isOpen:fa});}});var ea=new q();ea.addSubscriptions(i.listen(y,'focus',null,function(){ca.setProps({isSelected:false});}),p.listen('m:ufi:sticker-comment',null,function(){ca.setProps({isSelected:false});}),p.listen('m:page:unload',null,function(){ea.release();}));};function u(w){var x=new q();x.addSubscriptions(p.listen('m:ufi:live-comments:render',null,function(event){var y=event.getData()||{},z=y.logKeys;z&&z.forEach(function(aa){if(aa===w){k.logRender(w);x.release();}});}),p.listen('m:ufi:iui:comment-added',null,function(event){var y=event.getData().loggingInteractionKey;if(y===w){k.logRender(w);x.release();}}),p.listen('m:page:unload',null,function(){x.release();}));return x;}var v={initMessages:function(w,x,y,z){var aa=r(y),ba=function(ca){var da=aa.form,ea=i.convertFormToDictionary(da);ea.sticker_id=ca;z.sendRequest(da.action,ea);};t(w,x,aa,ba,false,true);},initComments:function(w,x,y,z){var aa=arguments.length<=4||arguments[4]===undefined?false:arguments[4],ba=null;if(z)if(p.hasSigil(z,s)){ba=z;}else ba=i.scry(z,'*',s)[0];if(!ba)ba=r(y);var ca=ba.form,da=function(ea){var fa=new l(ca.action);fa.setMethod('POST');fa.addData({client_id:h.getNewClientID(),sticker_id:ea});if(aa){var ga=k.newInteractionKey();k.logInitAndSubmitSticker(ga,ea);fa.addData({logging_interaction_key:ga});u(ga);}j.ajaxify(null,ca,fa,'async_composer');p.invoke('m:ufi:sticker-comment',null,{textInput:ba});};t(w,x,ba,da,true,true);},initNewMessage:function(w,x,y,z){var aa=function(ba){z.sendSticker(ba);};t(w,x,y,aa,false,false);}};f.exports=v;},null);
__d('MMultiPhotoUploaderAttachment.react',['MMultiPhotoUploaderAttachmentState','MLoadingIndicator.react','MProgressBar.react','React','Image.react','cx','fbt','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p,q;if(c.__markCompiled)c.__markCompiled();var r=2,s=.7,t=500,u=10000,v=250;p=babelHelpers.inherits(w,k.Component);q=p&&p.prototype;function w(){var x,y;'use strict';for(var z=arguments.length,aa=Array(z),ba=0;ba<z;ba++)aa[ba]=arguments[ba];return x=(y=q.constructor).call.apply(y,[this].concat(aa)),this.state={previewLoaded:false},this.getLoadingIndicator=function(){if(this.props.loaded>0){if(!this.state.previewLoaded){return this.getProgressBar();}else return this.getSpinner();}else return this.getSpinner();}.bind(this),this.getProgressBar=function(){if(this.props.state!==h.SENDING&&this.props.state!==h.UPLOADED)return null;if(this.state.previewLoaded)return null;return (k.createElement('div',{className:"_r6h"},k.createElement(j,{initialValue:0,ref:'progressBar'})));}.bind(this),this.getSpinner=function(){if(this.props.state!==h.SENDING&&!this.props.isPollingTagSuggestions)return null;return (k.createElement('div',{className:this.props.isPollingTagSuggestions?"_2d1s":''},k.createElement(i,{className:"_5r-2"})));}.bind(this),this.loadPreview=function(){if(this.refs.progressBar)this.refs.progressBar.animate(100,u);var ca=new Image();ca.onload=function(){if(this.refs.progressBar){this.refs.progressBar.animate(100,v);setTimeout(function(){this.setState({previewLoaded:true});}.bind(this),v);}else this.setState({previewLoaded:true});}.bind(this);ca.src=this.props.imageURI;if(ca.complete||ca.width+ca.height>0){ca.onload=null;this.setState({previewLoaded:true});}}.bind(this),this.getPreview=function(ca,da){if(this.props.state!==h.UPLOADED)return null;if(!this.state.previewLoaded)return null;return (k.createElement(l,{className:"_5r-3",src:this.props.imageURI,width:ca,height:da}));}.bind(this),this.getError=function(){if(this.props.state!==h.ERROR)return null;return k.createElement('div',{className:"_5r-4"});}.bind(this),this.getAbortButton=function(){var ca=this.props.shouldShowWhiteDesign?"_3lx9":"_5r-6",da=this.props.shouldShowWhiteDesign?"_3lxa":"_5r-5";return (k.createElement('div',{'aria-label':n._("Remove photo"),className:da,'data-sigil':'touchable',onClick:this.props.onRemoveClick,role:'button',tabIndex:'0'},k.createElement('div',{className:ca})));}.bind(this),this.getTagCountIndicator=function(){if(this.props.state!==h.UPLOADED)return null;if(!this.state.previewLoaded)return null;var ca=this.props.tagCount;if(!ca)return null;var da="_5pt"+(ca===1?' '+"_5pu":'')+(ca===2?' '+"_5pv":'')+(ca>2?' '+"_5pw":'');return (k.createElement('div',{className:da}));}.bind(this),this.getPhotoBorder=function(){var ca=null;if(this.props.shouldShowWhiteDesign)ca=k.createElement('div',{className:"_23rn"});return ca;}.bind(this),x;}w.prototype.componentDidMount=function(){'use strict';if(this.props.state===h.UPLOADED&&!this.state.previewLoaded)this.loadPreview();};w.prototype.componentDidUpdate=function(x,y){'use strict';if(this.refs.progressBar)if(this.props.state===h.SENDING&&this.props.loaded&&this.props.totalSize)if(this.props.loaded===this.props.totalSize){this.refs.progressBar.animate(100,u);}else{var z=100*s*this.props.loaded/this.props.totalSize;this.refs.progressBar.animate(z,t);}if(x.state!==h.UPLOADED&&this.props.state===h.UPLOADED)this.loadPreview();if(!y.previewLoaded&&this.state.previewLoaded&&this.props.onPreviewLoaded)this.props.onPreviewLoaded();};w.prototype.render=function(){'use strict';var x;if(this.props.shouldShowWhiteDesign){x="_s50";}else if(this.props.shouldShowLargeThumbnails){x="_3vnj";}else x="_51s2";var y=this.props.previewSize-r,z=y;if(this.props.state===h.UPLOADED&&this.state.previewLoaded&&this.props.shouldShowLargeThumbnails)z=Math.floor(this.props.thumbnail_width*y/this.props.thumbnail_height);var aa={width:z};return (k.createElement('div',{className:o(this.props.className,x),style:aa},k.createElement('div',{onClick:this.props.onThumbnailClicked,'data-sigil':'touchable'},this.getLoadingIndicator(),this.getPreview(z,y),this.getError(),this.getTagCountIndicator(),this.getPhotoBorder()),this.getAbortButton()));};f.exports=w;},null);
__d("MMultiPhotoUploaderHiddenInputs.react",["React"],function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=h.PropTypes;i=babelHelpers.inherits(l,h.Component);j=i&&i.prototype;l.prototype.render=function(){"use strict";var m=null;if(this.props.waterfallSource)m=h.createElement("input",{name:"waterfall_source",type:"hidden",value:this.props.waterfallSource});return (h.createElement("div",null,m,this.props.fbids.map(function(n){return (h.createElement("input",{key:n,type:"hidden",name:'photo_ids['+n+']',value:n}));})));};function l(){"use strict";i.apply(this,arguments);}l.propTypes={fbids:k.array.isRequired,waterfallSource:k.string};f.exports=l;},null);
__d('MMultiPhotoUploaderPlusAttachment.react',['MXUILayout.react','MXUILayoutFillColumn.react','React','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l){var m,n;if(c.__markCompiled)c.__markCompiled();m=babelHelpers.inherits(o,j.Component);n=m&&m.prototype;function o(){var p,q;'use strict';for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return p=(q=n.constructor).call.apply(q,[this].concat(s)),this.getAttachmentChildContainer=function(){if(!this.props.shouldShowWhiteDesign)return null;var u=this.props.shouldShowAddPhotoLabel?j.createElement('div',{className:"_vbw"},l._("photo")):null;return (j.createElement(h,null,j.createElement(i,{alignself:'center',className:"_2-24"},j.createElement('div',{className:"_vbx"},j.createElement('div',{className:"_vby"}),u))));}.bind(this),this.getAttachmentClass=function(){var u,v=this.props.largeThumbnails;if(this.props.shouldShowWhiteDesign){u="_vbz";}else u=(v?"_3vnj":'')+(!v?' '+"_51s2":'')+(v?' '+"_14y0":'')+(!v?' '+"_5e0r":'');return u;}.bind(this),p;}o.prototype.render=function(){'use strict';var p=this.getAttachmentClass(),q=this.getAttachmentChildContainer();return (j.createElement('div',{'aria-label':l._("Add photo"),className:p,'data-sigil':'touchable',onClick:this.props.onClick,role:'button',tabIndex:'0'},q));};f.exports=o;},null);
__d('MPhotoUploadDisable',['DOM','Stratcom','fbt'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={IOS_8_PHOTO_UPLOAD_DISABLE_MESSAGE:j._("Sorry, photo uploading isn't available for Safari in iOS 8.0 and 8.0.1. Apple has fixed this in the latest version of iOS. Please upgrade to iOS 8.0.2 and try again."),alertIOS8FileUploadDisabled:function(event){alert(this.IOS_8_PHOTO_UPLOAD_DISABLE_MESSAGE);event.kill();},disableIOS8FileUpload:function(l){this._listeners=[h.listen(l,'click',null,this.alertIOS8FileUploadDisabled.bind(this)),i.listen('m:page:unload',null,this._cleanup.bind(this))];},_cleanup:function(){this._listeners.forEach(function(l){l.remove();});}};f.exports=k;},null);
__d('MPhotoUploadFileInput',['DOM','MTouchClick','Stratcom'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(l){'use strict';this.$MPhotoUploadFileInput1=l;j.listen('m:page:unload',null,function(){if(this.$MPhotoUploadFileInput2)this.$MPhotoUploadFileInput2.remove();if(this.$MPhotoUploadFileInput3)this.$MPhotoUploadFileInput3.remove();}.bind(this));}k.prototype.setChangeHandler=function(l){'use strict';if(this.$MPhotoUploadFileInput4)this.$MPhotoUploadFileInput2.remove();this.$MPhotoUploadFileInput4=l;this.$MPhotoUploadFileInput2=h.listen(this.$MPhotoUploadFileInput1,'change',null,l);};k.prototype.setClickHandler=function(l){'use strict';if(this.$MPhotoUploadFileInput5)this.$MPhotoUploadFileInput3.remove();this.$MPhotoUploadFileInput5=l;this.$MPhotoUploadFileInput3=h.listen(this.$MPhotoUploadFileInput1,'click',null,l);};k.prototype.getDOMElement=function(){'use strict';return this.$MPhotoUploadFileInput1;};k.prototype.cloneDOMNode=function(){'use strict';var l=this.$MPhotoUploadFileInput1;this.$MPhotoUploadFileInput1=l.cloneNode(true);this.$MPhotoUploadFileInput1.value='';h.replace(l,this.$MPhotoUploadFileInput1);if(this.$MPhotoUploadFileInput4){this.$MPhotoUploadFileInput2.remove();this.$MPhotoUploadFileInput2=h.listen(this.$MPhotoUploadFileInput1,'change',null,this.$MPhotoUploadFileInput4);}if(this.$MPhotoUploadFileInput5){this.$MPhotoUploadFileInput3.remove();this.$MPhotoUploadFileInput3=h.listen(this.$MPhotoUploadFileInput1,'click',null,this.$MPhotoUploadFileInput5);}return l;};k.prototype.click=function(l){'use strict';var event=l.nativeEvent,m=event.changedTouches;i.click(this.$MPhotoUploadFileInput1,{getRawEvent:function(){return event;},getTouch:function(){return m&&m[0]||{};}});};f.exports=k;},null);
/**
 * Mega pixel image rendering library for iOS6 Safari
 *
 * @providesModule MegaPixImage
 * @preserve-header
 *
 * Fixes iOS6 Safari's image file rendering issue for large size image (over mega-pixel),
 * which causes unexpected subsampling when drawing it in canvas.
 * By using this library, you can safely render the image with proper stretching.
 *
 * Copyright (c) 2012 Shinichi Tomita <shinichi.tomita@gmail.com>
 * Released under the MIT license
 */__d("MegaPixImage",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();function h(o){var p=o.naturalWidth,q=o.naturalHeight;if(p*q>1024*1024){var r=document.createElement('canvas');r.width=r.height=1;var s=r.getContext('2d');s.drawImage(o,-p+1,0);return s.getImageData(0,0,1,1).data[3]===0;}else return false;}function i(o,p,q){var r=document.createElement('canvas');r.width=1;r.height=q;var s=r.getContext('2d');s.drawImage(o,0,0);var t=s.getImageData(0,0,1,q).data,u=0,v=q,w=q;while(w>u){var x=t[(w-1)*4+3];if(x===0){v=w;}else u=w;w=(v+u)>>1;}var y=(w/q);return (y===0)?1:y;}function j(o,p,q){var r=document.createElement('canvas');k(o,r,p,q);return r.toDataURL("image/jpeg",p.quality||.8);}function k(o,p,q,r){var s=o.naturalWidth,t=o.naturalHeight,u=q.width,v=q.height,w=p.getContext('2d');w.save();l(p,u,v,q.orientation);var x=h(o);if(x){s/=2;t/=2;}var y=1024,z=document.createElement('canvas');z.width=z.height=y;var aa=z.getContext('2d'),ba=r?i(o,s,t):1,ca=Math.ceil(y*u/s),da=Math.ceil(y*v/t/ba),ea=0,fa=0;while(ea<t){var ga=0,ha=0;while(ga<s){aa.clearRect(0,0,y,y);aa.drawImage(o,-ga,-ea);w.drawImage(z,0,0,y,y,ha,fa,ca,da);ga+=y;ha+=ca;}ea+=y;fa+=da;}w.restore();z=aa=null;}function l(o,p,q,r){switch(r){case 5:case 6:case 7:case 8:o.width=q;o.height=p;break;default:o.width=p;o.height=q;}var s=o.getContext('2d');switch(r){case 2:s.translate(p,0);s.scale(-1,1);break;case 3:s.translate(p,q);s.rotate(Math.PI);break;case 4:s.translate(0,q);s.scale(1,-1);break;case 5:s.rotate(.5*Math.PI);s.scale(1,-1);break;case 6:s.rotate(.5*Math.PI);s.translate(0,-q);break;case 7:s.rotate(.5*Math.PI);s.translate(p,-q);s.scale(-1,1);break;case 8:s.rotate(-.5*Math.PI);s.translate(-p,0);break;default:break;}}var m=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;function n(o){if(o instanceof Blob){var p=new Image();if(!m)throw Error("No createObjectURL function found to create blob url");p.src=m.createObjectURL(o);this.blob=o;o=p;}if(!o.naturalWidth&&!o.naturalHeight){var q=this;o.onload=function(){var r=q.imageLoadListeners;if(r){q.imageLoadListeners=null;for(var s=0,t=r.length;s<t;s++)r[s]();}};this.imageLoadListeners=[];}this.srcImage=o;}n.isSupported=!!m;n.prototype.render=function(o,p){if(this.imageLoadListeners){var q=this;this.imageLoadListeners.push(function(){q.render(o,p);});return;}p=p||{};var r=this.srcImage.naturalWidth,s=this.srcImage.naturalHeight,t=p.width,u=p.height,v=p.maxWidth,w=p.maxHeight,x=!this.blob||this.blob.type==='image/jpeg';if(t&&!u){u=(s*t/r)<<0;}else if(u&&!t){t=(r*u/s)<<0;}else{t=r;u=s;}if(v&&t>v){t=v;u=(s*t/r)<<0;}if(w&&u>w){u=w;t=(r*u/s)<<0;}var y={width:t,height:u};for(var z in p)y[z]=p[z];var aa=o.tagName.toLowerCase();if(aa==='img'){o.src=j(this.srcImage,y,x);}else if(aa==='canvas')k(this.srcImage,o,y,x);if(typeof this.onrender==='function')this.onrender(o);};f.exports=n;},null);
__d('PhotosUploadWaterfallXMixin',['AsyncSignal','Banzai','Map','PhotosUploadWaterfallXConfig','Set','invariant','randomInt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=new j();function p(r,s){var t={};r.client_time=Math.round(Date.now()/1000);if(k.retryBanzai){t.retry=true;r.nonce=n(4294967296);}i.post(k.banzaiRoute,r,t);if(s)setTimeout(s,0);}function q(r,s){if(k.useBanzai){p(r,s);}else{var t=new h(k.loggingEndpoint,{data:JSON.stringify(r)}).setHandler(s);if(k.timeout)t.setTimeout(10*1000);t.send();}}f.exports={logStep:function(r,s,t){var u=this.getWaterfallID&&this.getWaterfallID(),v=this.getWaterfallAppName&&this.getWaterfallAppName();if(!u||!v)return;q(babelHelpers['extends']({step:r,qn:u,uploader:v,ref:this.getWaterfallSource&&this.getWaterfallSource()},s),t);},logPUWStep:function(r,s,t,u,v,w,x){if(w&&w.logOncePerSession){if(!o.has(s))o.set(s,new l());if(o.get(s).has(r))return;o.get(s).add(r);}q(Object.assign({step:r,qn:s,uploader:t,ref:u},v),x);}};},null);
__d("base64toUint8Array",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){var j=atob(i),k=j.length,l=new Uint8Array(k);for(var m=0;m<k;m++)l[m]=j.charCodeAt(m);return l;}f.exports=h;},null);
__d('DataViewPolyfill',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i,j,k){if(j===undefined){this.$DataViewPolyfill1=new Uint8Array(i);}else if(k===undefined){this.$DataViewPolyfill1=new Uint8Array(i,j);}else this.$DataViewPolyfill1=new Uint8Array(i,j,k);this.byteLength=this.$DataViewPolyfill1.byteLength;}h.prototype.getUint8=function(i){if(i>=this.$DataViewPolyfill1.length)throw new Error('Trying to read beyond bounds of DataViewPolyfill');return this.$DataViewPolyfill1[i];};h.prototype.getUint16=function(i,j){var k=this.getUint8(i),l=this.getUint8(i+1);return j?l*256+k:k*256+l;};h.prototype.getUint32=function(i,j){var k=this.getUint8(i),l=this.getUint8(i+1),m=this.getUint8(i+2),n=this.getUint8(i+3);return j?((n*256+m)*256+l)*256+k:((k*256+l)*256+m)*256+n;};h.isSupported=function(){return !!b.Uint8Array;};f.exports=h;},null);
__d("getExifOrientation",["DataViewPolyfill"],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=b.DataView||h;function j(k,l){var m=new FileReader();m.onload=function(n){var o="Exif\0\0",p=0,q,r=new i(n.target.result);for(var s=0;s<250;s++)if(r.getUint8(s)===o.charCodeAt(p)){p+=1;q=s+1;if(p===o.length)break;}else p=0;if(!p){l(null);return;}var t;if(r.getUint8(q)==77&&r.getUint8(q+1)==77){t=false;}else if(r.getUint8(q)==73&&r.getUint8(q+1)==73){t=true;}else{l(null);return;}q+=2;q+=2;var u,v,w,x;u=r.getUint32(q,t);q+=u-8+4;v=r.getUint16(q,t);q+=2;for(var y=0;y<Math.min(25,v);y++){w=r.getUint16(q,t);q+=8;if(w==274){x=r.getUint16(q,t);l(x);return;}q+=4;}l(null);};m.readAsArrayBuffer(k);}f.exports=j;},null);
__d('MPhotoResizer',['base64toUint8Array','getExifOrientation','invariant','mixin','performanceNow','requestAnimationFrame','PhotosUploadWaterfallXMixin','PUWSteps','MegaPixImage','Vector'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r,s;if(c.__markCompiled)c.__markCompiled();var t='data:image/jpeg;base64,';r=babelHelpers.inherits(u,k(n));s=r&&r.prototype;function u(){'use strict';s.constructor.call(this);this.$MPhotoResizer1=new q(960,960);this.$MPhotoResizer2=.85;}u.prototype.setFile=function(v){'use strict';this.$MPhotoResizer3=v;return this;};u.prototype.setDimensions=function(v){'use strict';this.$MPhotoResizer1=v;return this;};u.prototype.setQuality=function(v){'use strict';this.$MPhotoResizer2=v;return this;};u.prototype.setHandler=function(v){'use strict';this.$MPhotoResizer4=v;return this;};u.prototype.setWaterfall=function(v,w,x){'use strict';this.$MPhotoResizer5=v;this.$MPhotoResizer6=w;this.$MPhotoResizer7=x;return this;};u.prototype.resize=function(){'use strict';!this.$MPhotoResizer3?j(0):void 0;!this.$MPhotoResizer1?j(0):void 0;!this.$MPhotoResizer2?j(0):void 0;!this.$MPhotoResizer4?j(0):void 0;!this.$MPhotoResizer5?j(0):void 0;!this.$MPhotoResizer6?j(0):void 0;if(!p.isSupported){this.logStep(o.CLIENT_PROCESS_UNAVAILABLE,{error:'canvas_not_supported'});this.$MPhotoResizer4(this.$MPhotoResizer3);return;}if(!this.$MPhotoResizer8()){this.logStep(o.CLIENT_PROCESS_UNAVAILABLE,{error:'no_jpeg_output'});this.$MPhotoResizer4(this.$MPhotoResizer3);return;}this.logStep(o.CLIENT_PROCESS_BEGIN);var v=l();i(this.$MPhotoResizer3,function(w){m(function(){var x=document.createElement('canvas'),y=new p(this.$MPhotoResizer3);y.onrender=function(){m(function(){var z=x.toDataURL('image/jpeg',this.$MPhotoResizer2);x=null;z=z.substr(t.length);m(function(){var aa=h(z);z=null;var ba=new Blob([aa.buffer],{type:'image/jpeg'});this.logStep(o.CLIENT_PROCESS_SUCCESS,{timeResizing:l()-v,originalSize:this.$MPhotoResizer3&&this.$MPhotoResizer3.size,resizedSize:ba&&ba.size});this.$MPhotoResizer4(ba);}.bind(this));}.bind(this));}.bind(this);y.render(x,{maxWidth:this.$MPhotoResizer1.x,maxHeight:this.$MPhotoResizer1.y,orientation:w});}.bind(this));}.bind(this));};u.prototype.$MPhotoResizer8=function(){'use strict';var v=document.createElement('canvas');v.width=1;v.height=1;var w=v.toDataURL('image/jpeg');return w.substr(0,t.length)===t;};u.prototype.getWaterfallID=function(){'use strict';return this.$MPhotoResizer5;};u.prototype.getWaterfallAppName=function(){'use strict';return this.$MPhotoResizer6;};u.prototype.getWaterfallSource=function(){'use strict';return this.$MPhotoResizer7;};f.exports=u;},null);
__d("XMobilePhotosSaveUnpublishedController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/_mupload_\/photo\/x\/saveunpublished\/",{thumbnail_width:{type:"Int"},thumbnail_height:{type:"Int"},waterfall_app_name:{type:"String"},waterfall_id:{type:"String"},waterfall_source:{type:"String"},filter_type:{type:"Int"},use_autoenhance:{type:"Exists",defaultValue:false},upload_id:{type:"String"},target_id:{type:"Int"},csid:{type:"String"},js_request_module_name:{type:"String"}});},null);
__d('supportsXHR2',['memoize'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(){if(!window.FormData||!window.XMLHttpRequest)return false;var j=new XMLHttpRequest();return 'upload' in j&&'withCredentials' in j;}f.exports=h(i);},null);
__d('MPhotoUploadRequest',['ActorURI','CurrentUser','DOM','MRequest','PhotosUploadWaterfallXMixin','PUWSteps','XMobilePhotosSaveUnpublishedController','invariant','mixin','performanceNow','supportsXHR2','MPhotoResizer'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t,u;if(c.__markCompiled)c.__markCompiled();t=babelHelpers.inherits(v,p(l));u=t&&t.prototype;function v(){'use strict';u.constructor.call(this);this.$MPhotoUploadRequest1=0;}v.prototype.setClonedFileInput=function(y){'use strict';this.$MPhotoUploadRequest2=y;return this;};v.prototype.setAttachedFile=function(y){'use strict';this.$MPhotoUploadRequest3=y;return this;};v.prototype.setDTSG=function(y){'use strict';this.$MPhotoUploadRequest4=y;return this;};v.prototype.setUploadDomain=function(y){'use strict';this.$MPhotoUploadRequest5=y;return this;};v.prototype.setWaterfall=function(y,z,aa){'use strict';this.$MPhotoUploadRequest6=y;this.$MPhotoUploadRequest7=z;this.$MPhotoUploadRequest8=aa;return this;};v.prototype.setHandler=function(y){'use strict';this.$MPhotoUploadRequest9=y;return this;};v.prototype.setProgressHandler=function(y){'use strict';this.$MPhotoUploadRequest10=y;return this;};v.prototype.setErrorHandler=function(y){'use strict';this.$MPhotoUploadRequest11=y;return this;};v.prototype.setThumbnailDimensions=function(y){'use strict';this.$MPhotoUploadRequest12=y;return this;};v.prototype.setShouldResize=function(y){'use strict';this.$MPhotoUploadRequest13=y;return this;};v.prototype.setTargetID=function(y){'use strict';this.$MPhotoUploadRequest14=y;return this;};v.prototype.setActorID=function(y){'use strict';this.$MPhotoUploadRequest15=y;return this;};v.prototype.setJpegResizer=function(y){'use strict';return this;};v.prototype.send=function(){'use strict';!this.$MPhotoUploadRequest2?o(0):void 0;!this.$MPhotoUploadRequest5?o(0):void 0;!this.$MPhotoUploadRequest4?o(0):void 0;!this.$MPhotoUploadRequest6?o(0):void 0;!this.$MPhotoUploadRequest7?o(0):void 0;!this.$MPhotoUploadRequest8?o(0):void 0;!this.$MPhotoUploadRequest9?o(0):void 0;!this.$MPhotoUploadRequest12?o(0):void 0;!(!this.$MPhotoUploadRequest16&&!this.$MPhotoUploadRequest17)?o(0):void 0;if(!r()){this.$MPhotoUploadRequest18();}else this.$MPhotoUploadRequest19();return this;};v.prototype.$MPhotoUploadRequest20=function(y,z){'use strict';this.logStep(y,babelHelpers['extends']({retriesNeeded:this.$MPhotoUploadRequest1},z||{}));};v.prototype.abort=function(y){'use strict';if(!this.$MPhotoUploadRequest2)return;this.$MPhotoUploadRequest20(m.CLIENT_TRANSFER_CANCEL,{elapsed_time:q()-this.transferStartTime,bytes:this.fileSize,progress:y});if(r()){this.$MPhotoUploadRequest21();}else this.$MPhotoUploadRequest22();};v.prototype.retry=function(){'use strict';this.$MPhotoUploadRequest1++;this.abort();this.send();};v.prototype.$MPhotoUploadRequest23=function(){'use strict';var y=this.$MPhotoUploadRequest2.files;return (y&&y.item&&y.item(0)&&y.item(0).size);};v.prototype.$MPhotoUploadRequest24=function(){'use strict';var y=n.getURIBuilder().setInt('thumbnail_width',this.$MPhotoUploadRequest12.x).setInt('thumbnail_height',this.$MPhotoUploadRequest12.y).setString('waterfall_id',this.$MPhotoUploadRequest6).setString('waterfall_app_name',this.$MPhotoUploadRequest7).setString('waterfall_source',this.$MPhotoUploadRequest8).setInt('target_id',this.$MPhotoUploadRequest14).getURI().setProtocol(this.$MPhotoUploadRequest5.getProtocol()).setDomain(this.$MPhotoUploadRequest5.getDomain());return h.create(y,this.$MPhotoUploadRequest15);};v.prototype.$MPhotoUploadRequest19=function(){'use strict';var y=this.$MPhotoUploadRequest3,z=this.$MPhotoUploadRequest13||'no_resize';if(y&&z=='canvas_resize'){new s().setFile(y).setWaterfall(this.$MPhotoUploadRequest6,this.$MPhotoUploadRequest7,this.$MPhotoUploadRequest8).setHandler(function(aa){this.$MPhotoUploadRequest25(aa);}.bind(this)).resize();}else this.$MPhotoUploadRequest25(y);};v.prototype.$MPhotoUploadRequest25=function(y){'use strict';var z=new FormData();z.append(this.$MPhotoUploadRequest2.name,y);this.fileSize=y.size;this.transferStartTime=q();this.$MPhotoUploadRequest20(m.CLIENT_TRANSFER_BEGIN,{bytes:this.fileSize});var aa=this.$MPhotoUploadRequest16=new k(this.$MPhotoUploadRequest24()).setCORS(true).setData({fb_dtsg:this.$MPhotoUploadRequest4}).setRawData(z);aa.listen('open',function(ba){var ca=ba.getTransport();ca.withCredentials=true;});aa.listen('done',function(ba){this.$MPhotoUploadRequest20(m.CLIENT_TRANSFER_SUCCESS,{elapsed_time:q()-this.transferStartTime,bytes:this.fileSize,fbid:ba.fbid});this.$MPhotoUploadRequest9(ba);}.bind(this));aa.listen('error',function(ba){this.$MPhotoUploadRequest20(m.CLIENT_TRANSFER_FAIL,{error_type:'mrequest_fail',elapsed_time:q()-this.transferStartTime,bytes:this.fileSize});this.$MPhotoUploadRequest11&&this.$MPhotoUploadRequest11(ba);}.bind(this));aa.listen('uploadprogress',function(ba){this.$MPhotoUploadRequest10&&this.$MPhotoUploadRequest10(ba);}.bind(this));aa.send();};v.prototype.$MPhotoUploadRequest21=function(){'use strict';this.$MPhotoUploadRequest16&&this.$MPhotoUploadRequest16.abort();this.$MPhotoUploadRequest16=null;};v.prototype.$MPhotoUploadRequest26=function(y,z){'use strict';return j.create('input',{type:'hidden',name:y,value:z});};v.prototype.$MPhotoUploadRequest18=function(){'use strict';var y='MPhotoUpload'+w++,z=this.$MPhotoUploadRequest17=j.create('iframe',{name:y,id:y});z.style.display='none';var aa=this.$MPhotoUploadRequest27=j.create('form',{target:y,action:this.$MPhotoUploadRequest24().toString(),method:'POST',enctype:'multipart/form-data'});aa.style.display='none';var ba={fb_dtsg:this.$MPhotoUploadRequest4,__a:1,__user:i.getID(),upload_id:y};for(var ca in ba)j.appendContent(aa,this.$MPhotoUploadRequest26(ca,ba[ca]));j.appendContent(document.body,z);j.appendContent(document.body,aa);j.appendContent(aa,this.$MPhotoUploadRequest2);this.fileSize=this.$MPhotoUploadRequest23();x[y]=function(ea){if(!ea){this.$MPhotoUploadRequest28('no_payload');return;}delete x[y];this.$MPhotoUploadRequest22();this.$MPhotoUploadRequest20(m.CLIENT_TRANSFER_SUCCESS,{elapsed_time:q()-this.transferStartTime,bytes:this.fileSize,fbid:ea.fbid});this.$MPhotoUploadRequest9(ea);}.bind(this);z.onerror=this.$MPhotoUploadRequest28.bind('iframe_onerror');this.transferStartTime=q();this.$MPhotoUploadRequest20(m.CLIENT_TRANSFER_BEGIN,{bytes:this.fileSize});var da=window.location.hostname.match(/\.(facebook\.sg|facebookcorewwwi\.onion)$/);document.domain=da?da[1]:'facebook.com';aa.submit();};v.prototype.$MPhotoUploadRequest28=function(y){'use strict';this.$MPhotoUploadRequest20(m.CLIENT_TRANSFER_FAIL,{error_type:y,elapsed_time:q()-this.transferStartTime,bytes:this.fileSize});this.$MPhotoUploadRequest11&&this.$MPhotoUploadRequest11();this.$MPhotoUploadRequest22();};v.prototype.$MPhotoUploadRequest22=function(){'use strict';this.$MPhotoUploadRequest17&&j.remove(this.$MPhotoUploadRequest17);this.$MPhotoUploadRequest17=null;this.$MPhotoUploadRequest27&&j.remove(this.$MPhotoUploadRequest27);this.$MPhotoUploadRequest27=null;};v.prototype.getWaterfallID=function(){'use strict';return this.$MPhotoUploadRequest6;};v.prototype.getWaterfallAppName=function(){'use strict';return this.$MPhotoUploadRequest7;};v.prototype.getWaterfallSource=function(){'use strict';return this.$MPhotoUploadRequest8;};v.handleResponse=function(y,z){'use strict';x[y](z);};var w=0,x={};f.exports=v;},null);
__d('MMultiPhotoUploader.react',['cx','fbt','intlNumUtils','Bootloader','MPhotoUploadRequest','PhotosUploadWaterfallXMixin','PUWSteps','React','ReactDOM','Stratcom','Vector','MMultiPhotoUploaderAttachment.react','MMultiPhotoUploaderAttachmentState','MPhotoUploadDisable','MPhotoUploadFileInput','MMultiPhotoUploaderPlusAttachment.react','MMultiPhotoUploaderHiddenInputs.react','URI'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){if(c.__markCompiled)c.__markCompiled();var z=o.PropTypes,aa=0,ba=80,ca=56,da,ea=o.createClass({displayName:'MMultiPhotoUploader',propTypes:{dtsg:z.string.isRequired,fileInput:z.instanceOf(v).isRequired,formHiddenInputs:z.instanceOf(HTMLElement).isRequired,uploadDomain:z.instanceOf(y).isRequired,waterfallID:z.string.isRequired,waterfallAppName:z.string.isRequired,waterfallSource:z.string.isRequired,actorID:z.string,targetID:z.string,maxPhotosAllowed:z.number,initCollapsed:z.bool,logFlowBeginOnClick:z.bool,shouldScroll:z.bool,shouldShowLargeThumbnails:z.bool,shouldShowWhiteDesign:z.bool,shouldShowAddPhotoLabel:z.bool,showDropShadow:z.bool,disableIOS8SafariAlert:z.bool,onUploadSuccess:z.func,onRemove:z.func,onThumbnailClicked:z.func,onUploadStarted:z.func,initialPhotos:z.array},mixins:[m],setCollapsed:function(fa){this.setState({collapsed:fa});},isCollapsed:function(){return this.state.collapsed;},isSinglePhoto:function(){return +this.props.maxPhotosAllowed===1;},getAttachmentCount:function(){return this.attachments.length;},hasAttachments:function(){return this.attachments.length>0;},clearAttachments:function(){this.setAttachments(this.attachments.filter(function(fa){if(fa.state===t.SENDING)fa.request.abort();return false;}));},getInitialState:function(){var fa=this.props.initialPhotos;if(fa!==null){for(var ga=0;ga<fa.length;ga++){fa[ga].id=aa++;fa[ga].state=t.UPLOADED;}var ha={};ha[t.UPLOADED]=fa.length;q.invoke('MMultiPhotoUploader:attachments:change',null,ha);}this.attachments=fa?fa:[];return {attachments:this.attachments,collapsed:this.props.initCollapsed};},numAttachmentsWithState:function(fa){return this.attachments.filter(function(ga){return ga.state===fa;}).length;},_numPollingAttachments:function(){return this.attachments.filter(function(fa){return fa.isPollingTagSuggestions;}).length;},isMaxAttachmentReached:function(){return this.attachments.length>=this.props.maxPhotosAllowed;},setAttachments:function(fa){q.invoke('multi-photos-attachment-change',null,{attachments:fa,multiPhotoUploader:this});this.setAttachmentsSilent(fa);},setAttachmentsSilent:function(fa){this.attachments=fa;this.setState({attachments:fa});var ga=this.props.fileInput.getDOMElement();ga.disabled=this.isMaxAttachmentReached();q.invoke('multi-photos-change',null,{input_id:ga.id});var ha={input_id:ga.id};for(var ia in t){if(!t.hasOwnProperty(ia)||typeof t[ia]!=='string')continue;var ja=t[ia];ha[ja]=this.numAttachmentsWithState(ja);}ha.polling=this._numPollingAttachments();q.invoke('MMultiPhotoUploader:attachments:change',null,ha);},addAttachment:function(fa){q.invoke('MMultiPhotoUploader:attachments:add',null,{photo_count:fa.length||1});this.setAttachments(this.attachments.concat([fa]));},removeAttachment:function(fa){q.invoke('MMultiPhotoUploader:attachments:remove',null,{photo_count:1});this.setAttachments(this.attachments.filter(function(ga){if(ga.id===fa){if(ga.state===t.SENDING){var ha=0;if(ga.totalSize)ha=Math.floor(100*(ga.loaded/ga.totalSize));ga.request.abort(ha);}else this.logStep(n.CLIENT_UPLOAD_REMOVE,{fbid:ga.fbid});if(ga.fbid)this.props.onRemove&&this.props.onRemove(ga.fbid);return false;}return true;}.bind(this)));},updateAttachment:function(fa){this.setAttachments(this.attachments.map(function(ga){if(ga.id===fa.id)return fa;return ga;}));},getAttachment:function(fa){return this.attachments.filter(function(ga){return ga.id===fa;})[0];},setAttachmentProps:function(fa,ga){var ha=this.getAttachment(fa),ia={};for(var ja in ha)ia[ja]=ha[ja];for(ja in ga)ia[ja]=ga[ja];this.updateAttachment(ia);},retryAttachment:function(fa){var ga=this.getAttachment(fa);this.logStep(n.CLIENT_ATTEMPT_RETRY,{fbid:ga.fbid});ga.request.retry();this.updateAttachment({id:fa,state:'sending',request:ga.request});},setAttachmentTagCounts:function(fa){this.setAttachmentsSilent(this.attachments.map(function(ga){ga.tagCount=fa[ga.id];return ga;}));},componentDidMount:function(){this.props.fileInput.setChangeHandler(this.onFileInputChange);this.props.fileInput.setClickHandler(this.onFileInputClick);if(!this.hasAttachments()&&!this.props.logFlowBeginOnClick)this.logStep(n.CLIENT_FLOW_BEGIN);this.renderHiddenInputs();this.resizeAndScroll();},onFileInputChange:function(){var fa=this.props.fileInput.getDOMElement();q.invoke('MMultiPhotoUploader:input:change',null,{input:fa});this.uploadPhotos(fa.files);},onFileInputClick:function(event){if(this.props.disableIOS8SafariAlert===true)u.alertIOS8FileUploadDisabled(event);if(!this.hasAttachments()&&this.props.logFlowBeginOnClick)this.logStep(n.CLIENT_FLOW_BEGIN);this.logStep(n.CLIENT_SELECT_BEGIN);q.invoke('MMultiPhotoUploader:input:click',null,{input:this.props.fileInput.getDOMElement()});},uploadPhotos:function(fa){if(fa.length===0){this.logStep(n.CLIENT_SELECT_FAIL);return;}var ga=this.props.fileInput.cloneDOMNode();for(var ha=0;ha<fa.length;ha++){var ia=fa[ha];if(ia.name===''&&ia.fileName===''&&ia.size===0&&ia.fileSize===0){this.logStep(n.CLIENT_SELECT_FAIL);continue;}this.logStep(n.CLIENT_SELECT_SUCCESS);var ja=aa++,ka=this.props.shouldShowLargeThumbnails?ba:ca,la=this.props,ma=la.targetID,na=la.actorID,oa=new l().setClonedFileInput(ga).setAttachedFile(ia).setUploadDomain(this.props.uploadDomain).setThumbnailDimensions(new r(ka,ka)).setDTSG(this.props.dtsg).setWaterfall(this.props.waterfallID,this.props.waterfallAppName,this.props.waterfallSource).setHandler(this.handleUploadSuccess.bind(this,ja)).setErrorHandler(this.handleUploadError.bind(this,ja)).setProgressHandler(this.handleUploadProgress.bind(this,ja)).setTargetID(ma&&j.parseNumber(ma)).setActorID(na&&j.parseNumber(na)).send();this.props.onUploadStarted&&this.props.onUploadStarted();if(this.isSinglePhoto())this.clearAttachments();this.addAttachment({id:ja,state:'sending',request:oa});this.setCollapsed(false);}},handleUploadError:function(fa){var ga=this.getAttachment(fa);this.updateAttachment({id:fa,state:'error',request:ga.request});},handleUploadProgress:function(fa,ga){var ha=this.getAttachment(fa);this.updateAttachment({id:fa,state:ha.state,request:ha.request,loaded:ga.loaded,totalSize:ga.totalSize});},handleUploadSuccess:function(fa,ga){if(!ga.fbid){this.handleUploadError(fa);return;}var ha=this.getAttachment(fa);this.updateAttachment({id:fa,state:'uploaded',fbid:ga.fbid,imageURI:ga.thumbnail_uri,thumbnail_width:ga.thumbnail_width,thumbnail_height:ga.thumbnail_height,loaded:ha.loaded,totalSize:ha.totalSize,previewURI:ga.preview_uri});this.props.onUploadSuccess&&this.props.onUploadSuccess(ga.fbid,fa);},onPlusClick:function(event){this.props.fileInput.click(event);},onRemoveClick:function(fa){var ga=this.getAttachment(fa),ha=false;if(ga.state===t.SENDING||ga.state===t.ERROR)ha=confirm(i._("This photo didn't upload. Do you want to try again?"));if(ha){this.retryAttachment(fa);}else this.removeAttachment(fa);},componentWillUpdate:function(){if(this.props.shouldScroll&&this.refs&&this.refs.scroller)this.refs.scroller.checkShouldScrollToEnd();},componentDidUpdate:function(){this.renderHiddenInputs();this.resizeAndScroll();},renderHiddenInputs:function(){var fa=this.state.attachments.filter(function(ga){return ga.state===t.UPLOADED;}).map(function(ga){return ga.fbid;});p.render(o.createElement(x,babelHelpers['extends']({},this.props,{fbids:fa})),this.props.formHiddenInputs);},resizeAndScroll:function(){if(this.props.shouldScroll&&this.refs&&this.refs.scroller){this.refs.scroller.resizeScroller();this.refs.scroller.scrollHorizontallyToEnd();}},getPlusAttachment:function(){if(this.isSinglePhoto()&&this.state.collapsed)return null;if(this.isMaxAttachmentReached())return null;return (o.createElement(w,{onClick:this.onPlusClick,largeThumbnails:this.props.shouldShowLargeThumbnails,shouldShowWhiteDesign:this.props.shouldShowWhiteDesign,shouldShowAddPhotoLabel:this.props.shouldShowAddPhotoLabel}));},adjustScroller:function(){if(this.props.shouldScroll&&this.refs&&this.refs.scroller){this.refs.scroller.checkShouldScrollToEnd();this.refs.scroller.resizeScroller();this.refs.scroller.scrollHorizontallyToEnd();}},render:function(){if(this.state.collapsed)return o.createElement('div',null);var fa=this.state.attachments.map(function(ha){var ia=this.props.shouldShowLargeThumbnails?ba:ca;return (o.createElement(s,babelHelpers['extends']({},ha,{key:ha.id,shouldShowLargeThumbnails:this.props.shouldShowLargeThumbnails,previewSize:ia,shouldShowWhiteDesign:this.props.shouldShowWhiteDesign,onRemoveClick:function(){this.onRemoveClick(ha.id);}.bind(this),onPreviewLoaded:function(){this.adjustScroller();}.bind(this),loaded:ha.loaded,totalSize:ha.totalSize,onThumbnailClicked:function(){this.props.onThumbnailClicked&&this.props.onThumbnailClicked(ha);}.bind(this)})));}.bind(this)),ga=this.props.shouldScroll&&this.state.attachments.length>1;if(ga)if(!da){k.loadModules(["MMultiPhotoUploaderSimpleScroller"],function(ha){da=ha;this.forceUpdate();}.bind(this),'MMultiPhotoUploader.react');}else return (o.createElement(da,{options:{scrollingY:false},className:(!this.props.shouldShowLargeThumbnails?"_1upb":'')+(' '+"_xy")+(this.props.showDropShadow?' '+"_bgx":''),thumbnailSize:ba,ref:'scroller'},fa,this.getPlusAttachment()));return (o.createElement('div',{className:"_5cqb"+(ga?' '+"_2nym":'')},fa,this.getPlusAttachment()));},getWaterfallID:function(){return this.props.waterfallID;},getWaterfallAppName:function(){return this.props.waterfallAppName;},getWaterfallSource:function(){return this.props.waterfallSource;}});f.exports=ea;},null);
__d('MMultiPhotoUploaderInitReact',['$','MMultiPhotoUploaderAttachmentState','DOM','ReactComponentRenderer','Stratcom','StratcomManager','MMultiPhotoUploader.react','MPhotoUploadFileInput','URI','PUWSteps'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r='m-raw-file-input';function s(t,u){'use strict';var v=t.previewGridElem||h(t.previewGridId),w=t.targetFormElem||h(t.targetFormId),x=t.inputId,y=t.inputContainerElem,z=null;if(y){var aa=j.scry(y,'input',r)[0];if(aa&&aa.id===x)z=aa;}z=z||h(x);var ba=document.createElement('div');j.insertBefore(v,ba);var ca=document.createElement('div');j.appendContent(w,ca);this.$MMultiPhotoUploaderInitReact1=new k(n,ba);this.$MMultiPhotoUploaderInitReact1.setProps({fileInput:new o(z),formHiddenInputs:ca,uploadDomain:new p(t.uploadDomain),dtsg:t.dtsg,shouldResize:t.shouldResize,maxPhotosAllowed:t.maxPhotosAllowed,waterfallID:t.waterfallID,waterfallAppName:t.waterfallAppName,waterfallSource:t.waterfallSource,initCollapsed:t.initCollapsed,logFlowBeginOnClick:t.logFlowBeginOnClick,targetID:t.targetID,actorID:t.actorID,shouldScroll:t.horizontalScrolling,shouldShowLargeThumbnails:t.largeThumbnails,shouldShowWhiteDesign:t.useWhiteDesign,shouldShowAddPhotoLabel:t.showPhotoLabel,showDropShadow:t.composerDropShadow,disableIOS8SafariAlert:t.disableIOS8SafariAlert,initialPhotos:u});m.enableDispatch(window,'reset');l.listen('reset',['id:'+t.targetFormId],function(){this.resetState();}.bind(this));l.listen('MActorSelector-actorChange',null,function(event){if(event.getData().targetID===t.targetID){this.resetState();this.$MMultiPhotoUploaderInitReact1.setProps({actorID:event.getData().actorID,maxPhotosAllowed:event.getData().maxPhotosAllowed});}}.bind(this));l.listen('MStructuredComposer-canceled',null,function(){if(!this.$MMultiPhotoUploaderInitReact1.component.isCollapsed())this.$MMultiPhotoUploaderInitReact1.component.logStep(q.CLIENT_FLOW_CANCEL,{volume:this.$MMultiPhotoUploaderInitReact1.component.getAttachmentCount()});}.bind(this));}s.prototype.logClientPost=function(t){'use strict';this.$MMultiPhotoUploaderInitReact1.component.logStep(q.CLIENT_FLOW_POST,{volume:this.$MMultiPhotoUploaderInitReact1.component.getAttachmentCount()},t);};s.prototype.alterPreviewGrid=function(t){'use strict';return this.$MMultiPhotoUploaderInitReact1.component.setCollapsed(!t);};s.prototype.getUploader=function(){'use strict';return this.$MMultiPhotoUploaderInitReact1;};s.prototype.resetState=function(){'use strict';this.$MMultiPhotoUploaderInitReact1.component.clearAttachments();return this.alterPreviewGrid(false);};s.prototype.hasPhotos=function(){'use strict';return this.$MMultiPhotoUploaderInitReact1.component.numAttachmentsWithState(i.UPLOADED)>0;};s.prototype.getPhotosCount=function(){'use strict';return this.$MMultiPhotoUploaderInitReact1.component.numAttachmentsWithState(i.UPLOADED);};s.prototype.uploadPhotos=function(t){'use strict';this.$MMultiPhotoUploaderInitReact1.component.uploadPhotos(t);};f.exports=s;},null);
__d('MPrivacyEducation',['DOM','Stratcom'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={setUpHeader:function(k,l,m,n){var o=l,p=[h.listen(o,'click',null,function(){h.show(k);h.hide(l);}),h.listen(m,'click',null,function(){h.hide(k);h.show(l);n&&n();}),i.listen('m:page:unload',null,function(){while(p.length!==0)p.pop().remove();})];}};f.exports=j;},null);
__d("XTagExpansionEducationController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/privacy\/tag_expansion\/edu\/",{surface:{type:"Enum",required:true,enumType:1},dismissed:{type:"Exists",defaultValue:false},client_time:{type:"Int",required:true},redirect_uri:{type:"String"}});},null);
__d('MTagExpansionEducation',['MPrivacyEducation','MRequest','XTagExpansionEducationController'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={setUpHeader:function(l,m,n,o,p){var q=function(){var r=j.getURIBuilder().setEnum('surface',l).setExists('dismissed',true).setInt('client_time',Math.floor(Date.now()/1000)).getURI();new i(r).send();};h.setUpHeader(m,n,o,p?q:null);}};f.exports=k;},null);
__d('AbstractCommentLiveTypingController',['ex','destroyOnUnload'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j={START:'start',STOP:'stop'},k=10*1000;function l(m,n,o){this.$AbstractCommentLiveTypingController5=m;this.$AbstractCommentLiveTypingController6=n;this.$AbstractCommentLiveTypingController7=o;this.$AbstractCommentLiveTypingController1=null;this.$AbstractCommentLiveTypingController2=false;this.$AbstractCommentLiveTypingController3=0;this.$AbstractCommentLiveTypingController4=null;i(this.destroy.bind(this));}l.prototype.destroy=function(){this.$AbstractCommentLiveTypingController1&&this.$AbstractCommentLiveTypingController1.destroy();this.$AbstractCommentLiveTypingController1=null;this.$AbstractCommentLiveTypingController2=false;this.$AbstractCommentLiveTypingController3=0;this.$AbstractCommentLiveTypingController4=null;};l.prototype.bootloadPublisherModule=function(m){throw new Error(h('bootloadPublisherModule not implemented, '+'should be overridden by subclass'));};l.prototype.$AbstractCommentLiveTypingController8=function(m){var n=new m(this.$AbstractCommentLiveTypingController5,this.$AbstractCommentLiveTypingController6,this.$AbstractCommentLiveTypingController7),o=Date.now(),p=this.$AbstractCommentLiveTypingController3;if(p&&p+k>=o){var q=this.$AbstractCommentLiveTypingController4;if(q===j.START){n.handleStartEvent();}else if(q===j.STOP)n.handleStopEvent();}this.$AbstractCommentLiveTypingController1=n;};l.prototype.$AbstractCommentLiveTypingController9=function(){if(this.$AbstractCommentLiveTypingController2||!this.$AbstractCommentLiveTypingController5)return;this.$AbstractCommentLiveTypingController2=true;this.bootloadPublisherModule(this.$AbstractCommentLiveTypingController8.bind(this));};l.prototype.attemptPublishStartEvent=function(){this.$AbstractCommentLiveTypingController4=j.START;this.$AbstractCommentLiveTypingController3=Date.now();if(this.$AbstractCommentLiveTypingController1){this.$AbstractCommentLiveTypingController1.handleStartEvent();}else if(!this.$AbstractCommentLiveTypingController2)this.$AbstractCommentLiveTypingController9();};l.prototype.attemptPublishStopEvent=function(){this.$AbstractCommentLiveTypingController4=j.STOP;this.$AbstractCommentLiveTypingController3=Date.now();if(this.$AbstractCommentLiveTypingController1){this.$AbstractCommentLiveTypingController1.handleStopEvent();}else if(!this.$AbstractCommentLiveTypingController2)this.$AbstractCommentLiveTypingController9();};f.exports=l;},null);
__d('MComposerLiveTypingController',['AbstractCommentLiveTypingController','Bootloader'],function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();j=babelHelpers.inherits(l,h);k=j&&j.prototype;function l(m,n,o){k.constructor.call(this,m,n,o);}l.prototype.bootloadPublisherModule=function(m){i.loadModules(["MComposerLiveTypingPublisher"],m,'MComposerLiveTypingController');};l.prototype.attemptPublishStartEvent=function(){k.attemptPublishStartEvent.call(this);};l.prototype.attemptPublishStopEvent=function(){k.attemptPublishStopEvent.call(this);};f.exports=l;},null);
__d('MCommentComposer',['MMultiPhotoUploaderAttachmentState','ChannelClientID','ClientIDs','CSS','DOM','MLegacyDataStore','MComposerConfig','MComposerLiveTypingController','MParent','MUFIInlinePermalinkFixedComposer','MUFIInlineRepliesFunnelLogConfig','MViewport','Stratcom','StratcomManager','SubscriptionsHandler','TouchEventType','cancelAnimationFrame','cx','debounceCore','ge','getActiveElement','requestAnimationFrame','setTimeoutAcrossTransitions'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da){if(c.__markCompiled)c.__markCompiled();var ea=r.MUFIInlineReplyComposerFunnelLogger,fa='m-ufi',ga='feed-ufi',ha='scroll-area',ia='m-composer',ja='m-photo-composer',ka='m-inline-reply-composer',la='m-noninline-composer',ma='textarea',na='privacy-selector',oa='composer-submit',pa='inline-reply',qa='comment',ra=n.MComposerLoggingController,sa=false;function ta(){return !!n.PUBLISH_LIVE;}function ua(wa){if(wa.tagName==='FORM'){return wa;}else return l.find(wa,'form');}function va(wa,xa){'use strict';this.$MCommentComposer1=wa;this.$MCommentComposer2=xa||{};this.$MCommentComposer3=null;this.$MCommentComposer4=null;this.$MCommentComposer5=!!this.$MCommentComposer2.toggle_submit;this.$MCommentComposer10=this.$MCommentComposer15();this.$MCommentComposer11=h.getDefaultState();this.$MCommentComposer12=!!p.bySigil(wa,ga);this.$MCommentComposer13=!!(this.$MCommentComposer2.is_inline_reply&&p.bySigil(this.$MCommentComposer1,ka));this.$MCommentComposer14=null;if(this.$MCommentComposer2.log_comment&&ra)this.$MCommentComposer14=new ra();this.$MCommentComposer8=null;this.$MCommentComposer9=false;this.$MCommentComposer7=new v();this.$MCommentComposer16();if(this.$MCommentComposer2.should_focus&&this.$MCommentComposer2.composer_id)da(function(){aa(this.$MCommentComposer2.composer_id).focus();}.bind(this),0);t.invoke('marauder-fb-composer-init',null,{parent_fbid:'target_id' in this.$MCommentComposer2?this.$MCommentComposer2.target_id:-1});}va.prototype.$MCommentComposer17=function(){'use strict';this.$MCommentComposer8&&this.$MCommentComposer8.release();this.$MCommentComposer8=null;};va.prototype.destroy=function(){'use strict';this.$MCommentComposer7.release();this.$MCommentComposer17();this.$MCommentComposer14&&this.$MCommentComposer14.destroy();this.$MCommentComposer14=null;this.$MCommentComposer3&&this.$MCommentComposer3.destroy();this.$MCommentComposer3=null;};va.prototype.$MCommentComposer18=function(wa){'use strict';if(!this.$MCommentComposer5||!wa)return;if(this.$MCommentComposer6)x(this.$MCommentComposer6);this.$MCommentComposer6=ca(function(){this.$MCommentComposer6=null;var xa=l.find(wa,'*',oa),ya=this.$MCommentComposer11[h.SENDING]===0&&(!/^\s*$/.test(l.find(wa,'*',ma).value)||this.$MCommentComposer11[h.UPLOADED]>0);if(!ya){xa.setAttribute('disabled',true);}else xa.removeAttribute('disabled');k.conditionClass(xa,"_56bt",!ya);k.conditionClass(xa,"_56bv",ya);}.bind(this));};va.prototype.$MCommentComposer19=function(wa){'use strict';if(!wa||!m.get(wa).auto_collapse||!m.get(ua(wa)).expand_composer)return;var xa=l.find(wa,'*',ma),ya=ba()===xa||!/^\s*$/.test(xa.value)||this.$MCommentComposer11[h.UPLOADED]>0;k.conditionClass(wa,'composerClosed',!ya);if(q.hasFixedComposer)t.invoke('toggle','mufi-composer',{composer:wa});};va.prototype.$MCommentComposer16=function(){'use strict';var wa=ta()?this.$MCommentComposer20.bind(this):this.$MCommentComposer10.bind(this);this.$MCommentComposer7.addSubscriptions(t.listen('focus',[ia,ma],this.$MCommentComposer21.bind(this)),t.listen('focus',[ia,na],this.$MCommentComposer22.bind(this)),t.listen('keyup',[ia,ma],wa),t.listen('input',[ia,ma],wa),t.listen('paste',[ia,ma],wa),t.listen('MMultiPhotoUploader:attachments:change',null,this.$MCommentComposer23.bind(this)),t.listen('blur',[ia,ma],this.$MCommentComposer24.bind(this)),t.listen('reset',[ia],this.$MCommentComposer25.bind(this)),t.listen('touchend',[ia,oa],this.$MCommentComposer26.bind(this)),t.listen('click',oa,this.$MCommentComposer27.bind(this)),t.listen('m:page:unload',null,this.destroy.bind(this)),t.listen('m:feed-ufi-flyout:reset',null,this.$MCommentComposer28.bind(this)),this.$MCommentComposer10);if(n.CAN_TOUCH_PHOTO_INPUT_WHILE_EXPANDED)this.$MCommentComposer7.addSubscriptions(t.listen('MMultiPhotoUploader:input:click',null,this.$MCommentComposer29.bind(this)));if(!this.$MCommentComposer13)this.$MCommentComposer7.addSubscriptions(t.listen('click','m-add-comment',this.$MCommentComposer30.bind(this)));if(this.$MCommentComposer12&&p.bySigil(this.$MCommentComposer1,ha))this.$MCommentComposer7.addSubscriptions(t.listen('MScrollArea:scrollstart',null,this.$MCommentComposer31.bind(this)));if(!sa){sa=true;u.enableDispatch(window,'reset');}this.$MCommentComposer7.addSubscriptions(t.listen('submit',ia,this.$MCommentComposer32.bind(this)));if(ta())this.$MCommentComposer7.addSubscriptions(t.listen('m:feed-ufi:hide',null,this.$MCommentComposer33.bind(this)));if(this.$MCommentComposer14){this.$MCommentComposer7.addSubscriptions(t.listen('MMultiPhotoUploader:input:change',null,this.$MCommentComposer34.bind(this)),t.listen('m:ufi:iui:comment-added',null,this.$MCommentComposer35.bind(this)));if(!this.$MCommentComposer13)this.$MCommentComposer7.addSubscriptions(t.listen('m:ufi:live-comments:render',null,this.$MCommentComposer36.bind(this)));}if(this.$MCommentComposer2.is_inline_reply&&ea)this.$MCommentComposer7.addSubscriptions(t.listen('m:ufi:sticker-comment',null,this.$MCommentComposer37.bind(this)));};va.prototype.$MCommentComposer38=function(wa){'use strict';return !!wa&&l.contains(this.$MCommentComposer1,wa);};va.prototype.$MCommentComposer21=function(event){'use strict';var wa=event.getNode(ia);if(!this.$MCommentComposer38(wa))return;var xa=l.find(wa,'*',ma);this.$MCommentComposer19(wa);if(!m.get(wa).disable_auto_scroll)s.scrollToNode(xa);};va.prototype.$MCommentComposer22=function(event){'use strict';var wa=event.getNode(ia);if(!this.$MCommentComposer38(wa))return;k.removeClass(wa,'composerClosed');};va.prototype.$MCommentComposer15=function(){'use strict';return z(function(event){var wa=event.getNode(ma);if(!this.$MCommentComposer38(wa))return;t.invoke('marauder-feedback-input',null,{draft:wa.value});this.$MCommentComposer14&&this.$MCommentComposer14.logInitText();this.$MCommentComposer18(event.getNode(ia));}.bind(this),250);};va.prototype.$MCommentComposer20=function(event){'use strict';var wa=event.getNode(ma);if(!this.$MCommentComposer38(wa))return;var xa=wa.value,ya=this.$MCommentComposer4;if(xa!==ya)if(xa&&xa.trim().length){this.$MCommentComposer39();}else this.$MCommentComposer33();this.$MCommentComposer10(event);this.$MCommentComposer4=xa;};va.prototype.$MCommentComposer23=function(event){'use strict';var wa=event.getData(),xa=aa(wa.input_id);if(!xa)return;var ya=p.bySigil(xa,ja);if(!ya)return;var za=l.find(ya,'*',ia);if(!this.$MCommentComposer38(za))return;this.$MCommentComposer11=wa;this.$MCommentComposer18(za);this.$MCommentComposer19(za);};va.prototype.$MCommentComposer24=function(event){'use strict';var wa=event.getNode(ia);if(!this.$MCommentComposer38(wa))return;if(!this.$MCommentComposer9)this.$MCommentComposer19(wa);this.$MCommentComposer9=false;};va.prototype.$MCommentComposer25=function(event){'use strict';var wa=event.getNode(ia);if(!this.$MCommentComposer38(wa))return;this.$MCommentComposer18(wa);this.$MCommentComposer19(wa);this.$MCommentComposer33();};va.prototype.$MCommentComposer40=function(){'use strict';if(this.$MCommentComposer2.is_inline_reply&&ea)ea.logReplySubmitted(this.$MCommentComposer2.target_id);};va.prototype.$MCommentComposer32=function(event){'use strict';var wa=event.getTarget();if(!this.$MCommentComposer38(wa))return;var xa=l.scry(wa,'input','mcomposer-client-id');if(xa.length){xa[0].setAttribute('value',j.getNewClientID());}else{xa=l.create('input',{name:'client_id',sigil:'mcomposer-client-id',type:'hidden',value:j.getNewClientID()});wa.appendChild(xa);}var ya=l.scry(wa,'input','mcomposer-session-id');if(!ya.length){ya=l.create('input',{name:'session_id',sigil:'mcomposer-session-id',type:'hidden',value:i.getID()});wa.appendChild(ya);}if(ta())this.$MCommentComposer33();this.$MCommentComposer40();};va.prototype.$MCommentComposer37=function(event){'use strict';var wa=event.getData().textInput;if(!this.$MCommentComposer38(wa))return;this.$MCommentComposer40();};va.prototype.$MCommentComposer26=function(event){'use strict';var wa=event.getNode(oa),xa=m.get(wa);if(!xa.onclickIsSet){var ya=event.getNode(ia);if(!this.$MCommentComposer38(ya))return;var za=l.find(ya,'*',ma);wa.onclick=function(){za.blur();};xa.onclickIsSet=true;}};va.prototype.$MCommentComposer31=function(event){'use strict';var wa=event.getData().element;if(!wa||!l.contains(wa,this.$MCommentComposer1))return;var xa=l.find(this.$MCommentComposer1,'*',ia),ya=l.find(xa,'*',ma),za=l.scry(xa,'*','m-mentions-root')[0],ab=za&&m.get(za),bb=ab||{},cb=bb.mentionsInstance,db=cb&&cb.getIgnoreFocusChange();cb&&cb.setIgnoreFocusChange(true);ya.blur();cb&&cb.setIgnoreFocusChange(db);};va.prototype.$MCommentComposer27=function(event){'use strict';var wa=event.getNode(ia);if(!this.$MCommentComposer38(wa))return;var xa=l.find(wa,'*',ma);this.$MCommentComposer14&&this.$MCommentComposer14.logSubmit(xa.value.length,this.$MCommentComposer11[h.UPLOADED],xa.form);t.invoke('marauder-feedback-posted',null,{});this.$MCommentComposer33();};va.prototype.$MCommentComposer30=function(event){'use strict';var wa=event.getNode(fa);if(!wa||!l.contains(wa,this.$MCommentComposer1))return;var xa=l.find(this.$MCommentComposer1,'*',ia),ya=l.find(xa,'*',ma);ya.focus();};va.prototype.$MCommentComposer28=function(event){'use strict';var wa=event.getData(),xa=wa.target_id;if(this.$MCommentComposer12&&xa!==this.$MCommentComposer2.target_id)this.destroy();};va.prototype.$MCommentComposer41=function(wa){'use strict';if(!wa)return null;var xa=p.bySigil(wa,ja),ya=xa&&l.scry(xa,'*',ia)[0];return (ya&&this.$MCommentComposer38(ya)?ya:null);};va.prototype.$MCommentComposer29=function(event){'use strict';var wa=ba();if(t.hasSigil(wa,'textarea')&&this.$MCommentComposer38(wa)&&p.bySigil(wa,ja)){this.$MCommentComposer9=true;wa.blur();this.$MCommentComposer9=false;this.$MCommentComposer17();var xa=function(){this.$MCommentComposer17();wa.blur();var za=l.scry(this.$MCommentComposer1,'*',ia)[0];za&&this.$MCommentComposer19(za);}.bind(this),ya=new v();ya.addSubscriptions(t.listen('focus',null,xa.bind(this)),t.listen(w.START,null,xa.bind(this)));this.$MCommentComposer8=ya;}};va.prototype.$MCommentComposer34=function(event){'use strict';var wa=event.getData(),xa=wa.input,ya=this.$MCommentComposer41(xa);if(!ya)return;this.$MCommentComposer14&&this.$MCommentComposer14.logInitPhoto();};va.prototype.$MCommentComposer36=function(event){'use strict';var wa=event.getData(),xa=wa.ufi,ya=wa.logKeys;if(!xa||!ya||!l.contains(xa,this.$MCommentComposer1))return;ya.forEach(function(za){return this.$MCommentComposer14&&this.$MCommentComposer14.logRender(za);}.bind(this));};va.prototype.$MCommentComposer35=function(event){'use strict';var wa=event.getData(),xa=wa.commentNode,ya=wa.loggingInteractionKey;if(!xa||!ya)return;var za=t.hasSigil(xa,pa),ab=null;if(this.$MCommentComposer13&&za){var bb=p.bySigil(xa.parentNode,qa);ab=bb&&l.scry(bb,'*',ka)[0];}else if(!za&&!this.$MCommentComposer13){ab=p.bySigil(xa,ja);if(!ab&&this.$MCommentComposer12){var cb=p.bySigil(xa,ga);ab=l.scry(cb,'*',la)[0];}}else return;var db=ab&&l.scry(ab,'*',ia)[0];if(!this.$MCommentComposer38(db))return;this.$MCommentComposer14&&this.$MCommentComposer14.logRender(ya);};va.prototype.$MCommentComposer42=function(){'use strict';if(this.$MCommentComposer2&&this.$MCommentComposer2.target_id&&!this.$MCommentComposer3&&ta())this.$MCommentComposer3=new o(this.$MCommentComposer2.target_id,this.$MCommentComposer2.parent_comment_id,this.$MCommentComposer2.actor_id);};va.prototype.$MCommentComposer39=function(){'use strict';if(!ta())return;this.$MCommentComposer42();this.$MCommentComposer3&&this.$MCommentComposer3.attemptPublishStartEvent();};va.prototype.$MCommentComposer33=function(){'use strict';if(!ta())return;this.$MCommentComposer42();this.$MCommentComposer3&&this.$MCommentComposer3.attemptPublishStopEvent();};f.exports=va;},null);
__d('MJSPlaceholder',['DOM','Stratcom','StratcomManager','Parent'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l={init:function(m,n){var o=m.getElementsByTagName('textarea')[0];function p(event){if(!o.value){h.show(n);}else h.hide(n);}var q=i.listen('MJSPlaceholder',null,p),r='oninput' in o,s=h.listen(o,r?'input':'change',null,p),t=k.byTag(o,'form');if(t){j.enableDispatch(t,'reset');var u=h.listen(t,'reset',null,p);}var v=r?null:h.listen(o,'keyup',null,p);i.listen('m:page:unload',null,function(){i.removeCurrentListener();s.remove();u&&u.remove();v&&v.remove();q.remove();});}};f.exports=l;},null);
__d('URLMatcher',['URLMatcherConfig'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i='!"#%&\'()*,-./:;<>?@[\\]^_`{|}',j='\u2000-\u206F\u00ab\u00bb\uff08\uff09',k='(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])',l='(?:(?:ht|f)tps?)://',m='(?:(?:'+k+'[.]){3}'+k+')',n='\\[(?:(?:[A-Fa-f0-9]{1,4}::?){1,7}[A-Fa-f0-9]{1,4})\\]',o='(?:\\b)www\\d{0,3}[.]',p='[^\\s'+i+j+']',q='(?:(?:(?:[.:\\-_%@]|'+p+')*'+p+')|'+n+')',r='(?::\\d+){0,1}',s='(?=[/?#])',t=h.tlds,u='(?:'+'(?:'+l+q+r+')|'+'(?:'+m+r+')|'+'(?:'+n+r+')|'+'(?:'+o+q+t+r+')|'+'(?:'+q+t+r+s+')'+')',v='[/#?]',w='\\([^\\s()<>]+\\)',x='[^\\s()<>?#]+',y=new RegExp(u,'im'),z='^\\[[0-9]{1,4}:[0-9]{1,4}:[A-Fa-f0-9]{1,4}\\]',aa=new RegExp(z,'im'),ba='(?:'+'(?:'+v+')'+'(?:'+'(?:'+w+'|'+x+')*'+')*'+')*',ca=new RegExp('('+'(?:'+u+')'+'(?:'+ba+')'+')','im'),da=new RegExp('('+'(?:'+l+q+r+')|'+'(?:'+o+q+t+r+')'+')'),ea=/[\s'";]/,fa=new RegExp(v,'im'),ga=new RegExp('[\\s!"#%&\'()*,./:;<>?@[\\]^`{|}\u00ab\u00bb\u2000-\u206F\uff08\uff09]','im'),ha=new RegExp('[\\s()<>?#]','im'),ia=new RegExp('\\s()<>'),ja=function(qa){if(qa&&qa.indexOf('@')!=-1){return da.exec(qa)?qa:null;}else return qa;},ka=function(qa){return la(qa,ca);},la=function(qa,ra){var sa=(ra.exec(qa)||[])[1]||null;return ja(sa);},ma=function(qa){return y.exec(qa);},na=function(qa){return !ea.test(qa.charAt(qa.length-1));},oa=function(qa){do{var ra=y.exec(qa);if(!ra)return null;var sa=false;if(ra[0][0]==='['&&ra.index>0&&qa[ra.index-1]==='@'){var ta=aa.exec(ra[0]);if(ta){sa=true;qa=qa.substr(ra.index+ta[0].length);}}}while(sa);var ua=qa.substr(ra.index+ra[0].length);if(ua.length===0||!fa.test(ua[0]))return ja(ra[0]);var va=0,wa=0,xa=1,ya=0,za=wa;for(var ab=1;ab<ua.length;ab++){var bb=ua[ab];if(za===wa){if(bb==='('){ya=ya+1;za=xa;}else if(fa.test(bb)||!ga.test(bb)){va=ab;}else if(ha.test(bb))break;}else if(bb==='('){ya=ya+1;}else if(bb===')'){ya=ya-1;if(ya===0){za=wa;va=ab;}}else if(ia.test(bb))break;}return ja(ra[0]+ua.substring(0,va+1));},pa={};pa.permissiveMatch=ka;pa.matchToPattern=la;pa.matchHost=ma;pa.trigger=na;pa.match=oa;f.exports=pa;},null);
__d('getHashtagRegexString',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(){var i='\xc0-\xd6'+'\xd8-\xf6'+'\xf8-\xff'+'\u0100-\u024f'+'\u0253-\u0254'+'\u0256-\u0257'+'\u0259'+'\u025b'+'\u0263'+'\u0268'+'\u026f'+'\u0272'+'\u0289'+'\u028b'+'\u02bb'+'\u0300-\u036f'+'\u1e00-\u1eff',j='\u0400-\u04ff'+'\u0500-\u0527'+'\u2de0-\u2dff'+'\ua640-\ua69f'+'\u0591-\u05bf'+'\u05c1-\u05c2'+'\u05c4-\u05c5'+'\u05c7'+'\u05d0-\u05ea'+'\u05f0-\u05f4'+'\ufb12-\ufb28'+'\ufb2a-\ufb36'+'\ufb38-\ufb3c'+'\ufb3e'+'\ufb40-\ufb41'+'\ufb43-\ufb44'+'\ufb46-\ufb4f'+'\u0610-\u061a'+'\u0620-\u065f'+'\u066e-\u06d3'+'\u06d5-\u06dc'+'\u06de-\u06e8'+'\u06ea-\u06ef'+'\u06fa-\u06fc'+'\u06ff'+'\u0750-\u077f'+'\u08a0'+'\u08a2-\u08ac'+'\u08e4-\u08fe'+'\ufb50-\ufbb1'+'\ufbd3-\ufd3d'+'\ufd50-\ufd8f'+'\ufd92-\ufdc7'+'\ufdf0-\ufdfb'+'\ufe70-\ufe74'+'\ufe76-\ufefc'+'\u200c-\u200c'+'\u0e01-\u0e3a'+'\u0e40-\u0e4e'+'\u1100-\u11ff'+'\u3130-\u3185'+'\uA960-\uA97F'+'\uAC00-\uD7AF'+'\uD7B0-\uD7FF'+'\uFFA1-\uFFDC',k=String.fromCharCode,l='\u30A1-\u30FA\u30FC-\u30FE'+'\uFF66-\uFF9F'+'\uFF10-\uFF19\uFF21-\uFF3A'+'\uFF41-\uFF5A'+'\u3041-\u3096\u3099-\u309E'+'\u3400-\u4DBF'+'\u4E00-\u9FFF'+k(173824)+'-'+k(177983)+k(177984)+'-'+k(178207)+k(194560)+'-'+k(195103)+'\u3003\u3005\u303B',m=i+j+l,n='\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6'+'\u00F8-\u0241\u0250-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EE\u037A\u0386'+'\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03CE\u03D0-\u03F5\u03F7-\u0481'+'\u048A-\u04CE\u04D0-\u04F9\u0500-\u050F\u0531-\u0556\u0559\u0561-\u0587'+'\u05D0-\u05EA\u05F0-\u05F2\u0621-\u063A\u0640-\u064A\u066E-\u066F'+'\u0671-\u06D3\u06D5\u06E5-\u06E6\u06EE-\u06EF\u06FA-\u06FC\u06FF\u0710'+'\u0712-\u072F\u074D-\u076D\u0780-\u07A5\u07B1\u0904-\u0939\u093D\u0950'+'\u0958-\u0961\u097D\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0'+'\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC-\u09DD\u09DF-\u09E1\u09F0-\u09F1'+'\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33'+'\u0A35-\u0A36\u0A38-\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D'+'\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD'+'\u0AD0\u0AE0-\u0AE1\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30'+'\u0B32-\u0B33\u0B35-\u0B39\u0B3D\u0B5C-\u0B5D\u0B5F-\u0B61\u0B71\u0B83'+'\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F'+'\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0C05-\u0C0C\u0C0E-\u0C10'+'\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C60-\u0C61\u0C85-\u0C8C'+'\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE'+'\u0CE0-\u0CE1\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D28\u0D2A-\u0D39'+'\u0D60-\u0D61\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6'+'\u0E01-\u0E30\u0E32-\u0E33\u0E40-\u0E46\u0E81-\u0E82\u0E84\u0E87-\u0E88'+'\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7'+'\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6'+'\u0EDC-\u0EDD\u0F00\u0F40-\u0F47\u0F49-\u0F6A\u0F88-\u0F8B\u1000-\u1021'+'\u1023-\u1027\u1029-\u102A\u1050-\u1055\u10A0-\u10C5\u10D0-\u10FA\u10FC'+'\u1100-\u1159\u115F-\u11A2\u11A8-\u11F9\u1200-\u1248\u124A-\u124D'+'\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0'+'\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310'+'\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C'+'\u166F-\u1676\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711'+'\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7'+'\u17DC\u1820-\u1877\u1880-\u18A8\u1900-\u191C\u1950-\u196D\u1970-\u1974'+'\u1980-\u19A9\u19C1-\u19C7\u1A00-\u1A16\u1D00-\u1DBF\u1E00-\u1E9B'+'\u1EA0-\u1EF9\u1F00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D'+'\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC'+'\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC'+'\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u2094\u2102\u2107'+'\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D'+'\u212F-\u2131\u2133-\u2139\u213C-\u213F\u2145-\u2149\u2C00-\u2C2E'+'\u2C30-\u2C5E\u2C80-\u2CE4\u2D00-\u2D25\u2D30-\u2D65\u2D6F\u2D80-\u2D96'+'\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6'+'\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3006\u3031-\u3035'+'\u303B-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF'+'\u3105-\u312C\u3131-\u318E\u31A0-\u31B7\u31F0-\u31FF\u3400-\u4DB5'+'\u4E00-\u9FBB\uA000-\uA48C\uA800-\uA801\uA803-\uA805\uA807-\uA80A'+'\uA80C-\uA822\uAC00-\uD7A3\uF900-\uFA2D\uFA30-\uFA6A\uFA70-\uFAD9'+'\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C'+'\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F'+'\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A'+'\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7'+'\uFFDA-\uFFDC',o='\u0300-\u036F\u0483-\u0486\u0591-\u05B9\u05BB-\u05BD\u05BF'+'\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u0615\u064B-\u065E\u0670'+'\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\u0711\u0730-\u074A'+'\u07A6-\u07B0\u0901-\u0903\u093C\u093E-\u094D\u0951-\u0954\u0962-\u0963'+'\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7-\u09C8\u09CB-\u09CD\u09D7'+'\u09E2-\u09E3\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47-\u0A48\u0A4B-\u0A4D'+'\u0A70-\u0A71\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD'+'\u0AE2-\u0AE3\u0B01-\u0B03\u0B3C\u0B3E-\u0B43\u0B47-\u0B48\u0B4B-\u0B4D'+'\u0B56-\u0B57\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7'+'\u0C01-\u0C03\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55-\u0C56'+'\u0C82-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5-\u0CD6'+'\u0D02-\u0D03\u0D3E-\u0D43\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D82-\u0D83'+'\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2-\u0DF3\u0E31\u0E34-\u0E3A'+'\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB-\u0EBC\u0EC8-\u0ECD\u0F18-\u0F19'+'\u0F35\u0F37\u0F39\u0F3E-\u0F3F\u0F71-\u0F84\u0F86-\u0F87\u0F90-\u0F97'+'\u0F99-\u0FBC\u0FC6\u102C-\u1032\u1036-\u1039\u1056-\u1059\u135F'+'\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17B6-\u17D3\u17DD'+'\u180B-\u180D\u18A9\u1920-\u192B\u1930-\u193B\u19B0-\u19C0\u19C8-\u19C9'+'\u1A17-\u1A1B\u1DC0-\u1DC3\u20D0-\u20DC\u20E1\u20E5-\u20EB\u302A-\u302F'+'\u3099-\u309A\uA802\uA806\uA80B\uA823-\uA827\uFB1E\uFE00-\uFE0F'+'\uFE20-\uFE23',p='\u0030-\u0039\u0660-\u0669\u06F0-\u06F9\u0966-\u096F\u09E6-\u09EF'+'\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F'+'\u0CE6-\u0CEF\u0D66-\u0D6F\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29'+'\u1040-\u1049\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9'+'\uFF10-\uFF19',q=n+o+m,r=p+'_',s=q+r,t='['+q+']',u='['+s+']',v='^|$|[^&/'+s+']',w='[#\\uFF03]',x='('+v+')('+w+')('+u+'*'+t+u+'*)';return x;}f.exports=h;},null);
__d('getHashtagRegex',['getHashtagRegexString'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(){return new RegExp(h(),'ig');}f.exports=i;},null);
__d('HashtagParser',['URLMatcher','getHashtagRegex'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=100,k=30,l=/@\[([0-9]+):([0-9]+):((?:[^\\\]]*(?:\\.)*)*)\]/g;function m(ea){var fa=z(ea),ga=0,ha=0;return o(ea).map(function(ia){while(ga<fa.length){var ja=fa[ga],ka=ja.offset-ha;if(ka<ia.offset){ha+=ja.token.length-ja.name.length;ga++;}else break;}return {marker:ia.marker,tag:ia.hashtag,rawOffset:ia.offset+ha,offset:ia.offset};});}function n(ea){return p(ea,u(ea));}function o(ea){var fa=ba(ea);return p(fa,q(ea,fa));}function p(ea,fa){return s(ea).slice(0,k).filter(function(ga){var ha=w(ga.offset,ga.hashtag.length,fa);return !ha&&ga.hashtag.length<=j;});}function q(ea,fa){return v(t(ea),u(fa));}var r=i();function s(ea){var fa=[];ea.replace(r,function(ga,ha,ia,ja,ka){fa.push({marker:ia,hashtag:ja,offset:ka+ha.length});});return fa;}function t(ea){return ca(ea).map(function(fa){return [fa.offset,fa.name.length];});}function u(ea){var fa=[],ga,ha=0;while(ga=h.permissiveMatch(ea)){var ia=ea.indexOf(ga);fa.push([ha+ia,ga.length]);ea=ea.substring(ia+ga.length);ha+=ia+ga.length;}return fa;}function v(ea,fa){var ga=[],ha=0,ia=0,ja=0;while(ha<ea.length&&ia<fa.length)if(ea[ha][0]>fa[ia][0]){ga[ja++]=fa[ia++];}else ga[ja++]=ea[ha++];return ga.concat(ea.slice(ha),fa.slice(ia));}function w(ea,fa,ga){if(!ga)return false;var ha=y(ga,ea);return x(ea,fa,ga,ha)||x(ea,fa,ga,ha+1);}function x(ea,fa,ga,ha){if(!ga[ha])return false;var ia=ga[ha][0],ja=ga[ha][1];return !(ea+fa-1<ia||ea>ia+ja-1);}function y(ea,fa){var ga=0,ha=ea.length-1;while(ga<=ha){var ia=Math.floor((ga+ha)/2),ja=ea[ia][0];if(ja==fa){return ia;}else if(ja<fa){ga=ia+1;}else ha=ia-1;}return ha;}function z(ea){var fa=[];ea.replace(l,function(ga,ha,ia,ja,ka){fa.push({token:ga,id:ha,type:ia,name:ja,offset:ka});});return fa;}function aa(ea){return ea?ea.replace(/\\([^\\])/g,'$1').replace(/\\\\/g,'\\'):null;}function ba(ea){return ea.replace(l,function(fa,ga,ha,ia,ja){return aa(ia);});}function ca(ea){var fa=0,ga=0;return z(ea).map(function(ha){var ia=ea.indexOf(ha.token,ga);ga=ia+1;ia-=fa;var ja=aa(ha.name);fa+=ha.token.length-ja.length;if(ia>=0)return {id:ha.id,name:ja,type:ha.type,offset:ia};});}var da={};da.parse=m;da.parseWithoutMentions=n;f.exports=da;},null);
__d('MMentions',['MLegacyDataStore','DOM','HashtagParser','HTML','MJSEnvironment','MParent','MViewport','Scroll','Stratcom','StratcomManager','Style','TouchEventType','Vector','debounceCore','eventsMixinDeprecated','getActiveElement','fbt','setIntervalAcrossTransitions','setTimeoutAcrossTransitions'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){if(c.__markCompiled)c.__markCompiled();var aa={};function ba(ea){var fa=aa[ea];if(!fa){fa='<br>\n'.repeat(ea.length);aa[ea]=fa;}return fa;}function ca(ea,fa){var ga=Math.sqrt(Math.pow(ea.x-fa.x,2)+Math.pow(ea.y-fa.y,2));return ga<=5;}function da(ea,fa,ga){'use strict';this._onBeforeEdit=this._onBeforeEdit.bind(this);this._onEdit=this._onEdit.bind(this);this._onFocusChange=this._onFocusChange.bind(this);this._onQueryResult=this._onQueryResult.bind(this);this._onSuggestionClick=this._onSuggestionClick.bind(this);this._onSuggestionTouch=this._onSuggestionTouch.bind(this);this._onBodyTouchStart=this._onBodyTouchStart.bind(this);this._onBodyTouchEndOrClick=this._onBodyTouchEndOrClick.bind(this);this._processInput=this._processInput.bind(this);this._sync=this._sync.bind(this);this._syncAndParse=this._syncAndParse.bind(this);this._syncShadow=this._syncShadow.bind(this);this._updatePosition=this._updatePosition.bind(this);this._hideSuggestion=this._hideSuggestion.bind(this);this._hideSuggestionInternal=this._hideSuggestionInternal.bind(this);this._forceInputPosition=this._forceInputPosition.bind(this);this._parse=this._parse.bind(this);this._renderHashtags=this._renderHashtags.bind(this);this._mentionId=ea.id;this._bottomMargin=null;var ha=ea.getElementsByTagName('textarea')[0];this.minDistance=da._MIN_DISTANCE;this._listeners=[];this._editListeners=[];this._query=null;this._queryResult=null;this._focused=false;this._disabled=false;this._hasHashtags=false;this._ignoreFocusChange=false;this._ignoreFocusChangeTimeout=null;this.shouldShowHashtags=false;this._enforceStringMatch=true;this._typeObjects=null;this._typeObjectsOrder=null;this._uids={};this._weakReferences={};this._source=fa;this._element=ea;this._input=ha;this._queryStringMatcher=/[^\s]+$/;this._bodyTouchStartLocation=null;this._suggestionTouchStartData=null;this._suggestionTouchendSelectFallbackTimer=null;var ia=h.get(this._input);this._initialWeakReferences=ia.initial_weak_references?ia.initial_weak_references:{};this._eventData={input:this._input,hasTags:false};this._shadow=i.create('div',{className:'mentions-shadow','aria-hidden':true},'');this._measurer=i.create('div',{className:'mentions-measurer','aria-hidden':true});da._suggestion=da._suggestion||i.create('div',{className:'mentions-suggest'});da._prevInsertParent=da._prevInsertParent||null;this._hiddenInput=i.create('input',{type:'hidden',name:ha.name,sigil:'mentionsHiddenInput'});ha.removeAttribute('name');i.uniqID(ha);this._syncStyles(this._shadow);this._syncStyles(this._measurer);q.enableDispatch(ha,'cut');q.enableDispatch(ha,'paste');q.enableDispatch(ha,'scroll');this._listeners.push(i.listen(ha,'blur',null,this._onFocusChange),i.listen(ha,'focus',null,this._onFocusChange),i.listen(this._input,'scroll',null,this._syncShadow));this._listeners.push(p.listen('MMentions:update',null,this._sync),p.listen('MMentions:reset',null,this._syncAndParse),p.listen('MMentions:removeHiddenInput',null,this._removeHiddenInput.bind(this)),p.listen('MMentions:disable',null,this._disable.bind(this)),p.listen('MMentions:enable',null,this._enable.bind(this)));if(this._input.form){q.enableDispatch(this._input.form,'reset');this._onSubmit=this._onSubmit.bind(this);this._listeners.push(i.listen(this._input.form,'submit',null,this._onSubmit),i.listen(this._input.form,'reset',null,this._onEdit));}this._listeners.push(p.listen('MMentions:decorations:hide',null,function(event){i.hide(this._shadow);i.hide(this._measurer);}.bind(this)));this._listeners.push(p.listen('MMentions:decorations:show',null,function(event){i.show(this._shadow);i.show(this._measurer);}.bind(this)));var ja=document.createDocumentFragment();ja.appendChild(this._hiddenInput);ja.appendChild(this._shadow);ja.appendChild(this._measurer);ea.appendChild(ja);this._insertParent=ga||m.bySigil(ea,'m-mentions-insert-parent')||r.getScrollParent(ea);if(this._input.value)this._parse(this._input.value);}da.prototype._mountIntoInsertParent=function(){'use strict';var ea=this._insertParent;if(ea!==da._prevInsertParent)i.remove(da._suggestion);if(ea===window){n.appendNode(da._suggestion);}else i.appendContent(ea,da._suggestion);da._prevInsertParent=ea;};da.prototype.dispose=function(){'use strict';if(!this._disposed){while(this._listeners.length)this._listeners.pop().remove();while(this._editListeners.length)this._editListeners.pop().remove();clearTimeout(this._inputTimer);clearTimeout(this._hideSuggestionTimer);clearTimeout(this._forceInputPositionTimer);this._clearSuggestionTouchendSelectFallbackTimer();this._releaseSuggestion();i.remove(this._hiddenInput);i.remove(this._shadow);i.remove(this._measurer);i.remove(da._suggestion);da._prevInsertParent=null;for(var ea in this)delete this[ea];this._disposed=true;}};da.prototype.setTypeObjects=function(ea){'use strict';this._typeObjects=ea;};da.prototype.setTypeObjectsOrder=function(ea){'use strict';this._typeObjectsOrder=ea;};da.prototype.disableStringMatch=function(){'use strict';this._enforceStringMatch=false;};da.prototype.insertMention=function(ea){'use strict';var fa=ea.name+this._NAME_SUFFIX,ga=this._uids[fa],ha=this._input,ia=ha.value;if(!ga)ga=this._uids[fa]=[];if(ga.indexOf(ea.uid)===-1){ga.push(ea.uid);}else{ha.focus();return;}var ja=ha.selectionStart,ka=ha.selectionEnd,la=ia.substring(0,ja),ma=ia.substr(ka+1);ha.value=la+fa+' '+ma;var na=ha.value.length-ma.length;if(l.IS_APPLE_WEBKIT_IOS){this.setIgnoreFocusChange(true);ha.blur();ha.focus();this.setIgnoreFocusChange(false);}ha.setSelectionRange(na,na);p.invoke('MJSPlaceholder');ha.focus();this._tagsUpdated();this._sync();};da.prototype._getExpandElement=function(){'use strict';return m.bySigil(this._element,'m-mentions-expand')||this._element;};da.prototype._onSubmit=function(){'use strict';var ea=this._input.value,fa=y(function(){if(this._disposed){clearInterval(fa);}else if(this._input.value!==ea){this._sync();clearInterval(fa);}}.bind(this),100);z(function(){clearInterval(fa);},10000);};da.prototype._onFocusChange=function(ea){'use strict';if(this._suggestionShown&&this._ignoreFocusChange)return;switch(ea.getType()){case 'focus':if(ea.getTarget()===this._input){this._focus();}else this._blur();break;default:this._blur();break;}};da.prototype._focus=function(){'use strict';if(this._focused)return;this._focused=true;if(!this._editListeners.length){var ea=da._suggestion,fa=this._SUGGESTION_SIGIL,ga=this._updatePosition.bind(this);this._editListeners.push(p.listen('scroll',null,function(event){var ha=event.getTarget();ga(event);this.setIgnoreFocusChange(false);}.bind(this)),this._source.listen('waiting',this._hideSuggestion),this._source.listen('resultsready',this._onQueryResult),i.listen(this._input,'touchmove',null,this._syncShadow),i.listen(this._input,'keydown',null,this._onBeforeEdit),i.listen(this._input,'keyup',null,this._onEdit),i.listen(this._input,'input',null,this._onEdit),i.listen(this._input,'cut',null,this._onEdit),i.listen(this._input,'paste',null,this._onEdit),i.listen(document.body,s.START,null,this._onBodyTouchStart),i.listen(document.body,s.END,null,this._onBodyTouchEndOrClick),i.listen(document.body,'click',null,this._onBodyTouchEndOrClick),i.listen(this._input,s.START,null,this._hideSuggestion),i.listen(ea,s.END,fa,this._onSuggestionTouch),i.listen(ea,s.START,fa,this._onSuggestionTouch),i.listen(ea,'click',fa,this._onSuggestionClick));}if(!this._source._startedByMentions){this._source._startedByMentions=true;this._source.didChange('');this._source.didStart();}this._hideSuggestion();clearTimeout(this._forceInputPositionTimer);this._forceInputPositionTimer=z(this._forceInputPosition,100);this._sync();};da.prototype._blur=function(){'use strict';if(!this._focused||w()===this._input)return;delete this._focused;while(this._editListeners.length)this._editListeners.pop().remove();this._suggestionTouchStartData=null;this._bodyTouchStartLocation=null;clearTimeout(this._forceInputPositionTimer);clearTimeout(this._inputTimer);delete this._forceInputPositionTimer;this._clearBottomMargin();this._hideSuggestion(true);this._sync();};da.prototype._forceInputPosition=function(){'use strict';var ea=this._input.getBoundingClientRect(),fa=n.getHeight();if(ea.top<0||ea.top>fa){this._forceInputPositionTimer=z(this._forceInputPosition,16);return;}if(w()!==this._input){this._blur();return;}};da.prototype.getIgnoreFocusChange=function(){'use strict';return this._ignoreFocusChange;};da.prototype.setIgnoreFocusChange=function(ea){'use strict';this._ignoreFocusChange=ea;};da.prototype._clearSuggestionTouchendSelectFallbackTimer=function(){'use strict';if(this._suggestionTouchendSelectFallbackTimer){clearTimeout(this._suggestionTouchendSelectFallbackTimer);this._suggestionTouchendSelectFallbackTimer=null;}};da.prototype._onSuggestionTouch=function(event){'use strict';if(!this._suggestionShown){event.prevent();this._suggestionTouchStartData=null;return;}var ea=event.getType();if(ea==='touchstart'){this._clearSuggestionTouchendSelectFallbackTimer();var fa=event.getTouch(),ga=fa.clientX,ha=fa.clientY;this._suggestionTouchStartData={startItem:event.getNode(this._SUGGESTION_SIGIL),startLoc:{x:ga,y:ha}};}else if(ea==='touchend'&&this._suggestionTouchStartData){var ia=this._suggestionTouchStartData,ja=ia.startItem,ka=ia.startLoc,la=event.getNode(this._SUGGESTION_SIGIL),ma=event.getTouch(),na=ma.clientX,oa=ma.clientY,pa={x:na,y:oa};this._suggestionTouchStartData=null;if(ja===la&&ca(ka,pa)){this._clearSuggestionTouchendSelectFallbackTimer();this._suggestionTouchendSelectFallbackTimer=setTimeout(function(){this._onSuggestionItemClickedOrTapped(la);}.bind(this),350);return;}}this.setIgnoreFocusChange(true);};da.prototype._onSuggestionItemClickedOrTapped=function(ea){'use strict';this._clearSuggestionTouchendSelectFallbackTimer();this.setIgnoreFocusChange(false);this._onSuggestionSelect(this._queryResult[ea.queryIndex]);this._hideSuggestion(true);this._input.focus();};da.prototype._onSuggestionClick=function(event){'use strict';if(!this._suggestionShown){event.prevent();return;}this._onSuggestionItemClickedOrTapped(event.getNode(this._SUGGESTION_SIGIL));this._suggestionTouchStartData=null;};da.prototype._onBodyTouchStart=function(event){'use strict';var ea=event.getTouch(),fa=ea.clientX,ga=ea.clientY;this._bodyTouchStartLocation={x:fa,y:ga};};da.prototype._onBodyTouchEndOrClick=function(event){'use strict';var ea=event.getTarget();if(da._suggestion===ea||this._element===ea||this._element.contains(ea)||da._suggestion.contains(ea))return;var fa=this._bodyTouchStartLocation;if(event.getType()==='touchend'&&fa){this._bodyTouchStartLocation=null;var ga=event.getTouch(),ha=ga.clientX,ia=ga.clientY,ja={x:ha,y:ia};if(!ca(fa,ja))return;}this._blur();};da.prototype._onSuggestionSelect=function(ea){'use strict';var fa=this._input,ga=fa.selectionStart;if(ga!==fa.selectionEnd)return;var ha=fa.value,ia=this._query,ja=ea.display,ka=this._createRegex(ja,'i'),la=this._createRegex(ia,'i'),ma=ja+this._NAME_SUFFIX,na,oa,pa=ha.substring(ga-ia.length,ga);if(!la.test(pa))return;if(ka.test(ha.substring(ga-ja.length,ga))){na=ha.substring(0,ga-ja.length);}else if(la.test(ha)){var qa=pa.substr(-ia.length);if(qa===ia){na=ha.substring(0,ga-ia.length);var ra='';for(var sa=0,ta=ma.length;sa<ta;sa++){ra+=ma.charAt(sa);if(na.endsWith(ra))break;}if(na.endsWith(' '+ra)||na===ra)na=na.substr(0,na.lastIndexOf(ra));}else return;}else return;if(na&&na.charAt(na.length-1)==='@')na=na.slice(0,-1);oa=na+ma+ha.substring(ga);fa.value=oa;ga+=oa.length-ha.length;if(l.IS_APPLE_WEBKIT_IOS){this.setIgnoreFocusChange(true);fa.blur();fa.focus();this.setIgnoreFocusChange(false);}fa.setSelectionRange(ga,ga);var ua=this._uids[ma];if(!ua)ua=this._uids[ma]=[];if(ua.indexOf(ea.uid)===-1){ua.push(ea.uid);this._tagsUpdated();}if(ea.getAttribute('weak_reference'))this._weakReferences[ea.uid]=true;this._sync();};da.prototype._hideSuggestion=function(ea){'use strict';if(this._suggestionShown){delete this._suggestionShown;clearTimeout(this._hideSuggestionTimer);if(ea===true){delete this._hideSuggestionTimer;this._hideSuggestionInternal();}else this._hideSuggestionTimer=z(this._hideSuggestionInternal,350);}};da.prototype._hideSuggestionInternal=function(){'use strict';delete this._hideSuggestionTimer;if(this._isInstanceSuggestion()){this._releaseSuggestion();i.hide(da._suggestion);i.setContent(da._suggestion,'');}this._input.removeAttribute('spellcheck');this._input.removeAttribute('autocapitalize');this._input.removeAttribute('autocorrect');this._clearBottomMargin();};da.prototype._clearBottomMargin=function(){'use strict';var ea=this._getExpandElement();ea.style.marginBottom=this._bottomMargin||'';};da.prototype._assignSuggestion=function(){'use strict';h.get(da._suggestion).mentionId=this._mentionId;};da.prototype._releaseSuggestion=function(){'use strict';h.get(da._suggestion).mentionId=null;};da.prototype._isInstanceSuggestion=function(){'use strict';return h.get(da._suggestion).mentionId===this._mentionId;};da.prototype._showSuggestion=function(){'use strict';this._assignSuggestion();if(this._suggestionShown)return;this._suggestionShown=true;this._mountIntoInsertParent();var ea=this._input,fa=da._suggestion;r.apply(fa,{display:'block',width:ea.offsetWidth+'px'});ea.setAttribute('spellcheck','false');ea.setAttribute('autocapitalize','off');ea.setAttribute('autocorrect','off');if(this._bottomMargin===undefined)this._bottomMargin=this._getExpandElement().style.marginBottom;var ga=this.minDistance,ha=ea.getBoundingClientRect(),ia=document.elementFromPoint(1,ha.bottom+ga);if(!ia){var ja=this._getExpandElement();ja.style.marginBottom=ga+'px';if(!m.bySigil(ja,'scroll-area')){var ka=n.getScroll();n.scrollTo(ka.x,Math.max(ka.y,ka.y+ha.top-30));}}if(this._hideSuggestionTimer){clearTimeout(this._hideSuggestionTimer);delete this._hideSuggestionTimer;}};da.prototype._updatePosition=function(){'use strict';if(!this._suggestionShown)return;var ea=da._suggestion,fa=ea.offsetHeight,ga=this._input,ha=ga.offsetHeight,ia=t.getElementPosition(ga),ja=ga.getBoundingClientRect(),ka=ea.offsetParent,la;if(ka===document.documentElement){la=new t(0,0);}else la=t.getElementPosition(ka);var ma=ja.left-la.x,na=ia.y-la.y,oa=n.getHeight()/2,pa=ma,qa=na+ha,ra=ja.bottom+fa>oa&&ja.top-fa>=0;if(ra)qa=na-fa;r.apply(ea,{left:pa+'px',top:qa+'px'});};da.prototype._onBeforeEdit=function(event){'use strict';if(!this._focused)return;if(this._inputTimer)clearTimeout(this._inputTimer);switch(event.getRawEvent().keyCode){case 8:this._onBackSpaceKey(event);break;}};da.prototype._onEdit=function(event){'use strict';if(this._inputTimer)clearTimeout(this._inputTimer);switch(event.getRawEvent().keyCode){case 13:this._hideSuggestion();this._syncShadow();return;default:this._sync();this._inputTimer=z(this._processInput,160);}};da.prototype._onBackSpaceKey=function(event){'use strict';var ea=this._input,fa=ea.selectionStart;if(fa!==ea.selectionEnd)return;var ga=ea.value,ha=this._getTokenByCursorPosition(fa-1);if(ha){var ia=ga.substring(0,fa),ja=ha.name;if(ia.indexOf(ja)===ia.length-ja.length){var ka;if(da._CJK_ALTER_NAME.test(ja)){ka=this._trim(ja.replace(da._CJK_ALTER_NAME,''));}else if(da._LATIN_ALTER_NAME.test(ja)){ka=this._trim(ja.replace(da._LATIN_ALTER_NAME,''));}else{var la=ja.split(/\s+/g);if(la.length>1){la.pop();ka=la.join(' ');}}if(ka){ka+=this._NAME_SUFFIX;this._uids[ja].splice(this._uids[ja].indexOf(ha.uid),1);this._uids[ka]=this._uids[ka]||[];this._uids[ka].push(ha.uid);ga=ga.substr(0,fa-ja.length)+ka+ga.substr(fa);fa-=ja.length-ka.length;ea.value=ga;ea.setSelectionRange(fa,fa);event.prevent();this._sync();return;}}}var ma;while(true){var na=ga.charAt(fa-1);if(na==='\u200B'){ga=ga.substring(0,fa-2)+ga.substr(fa);fa-=1;ma=true;}else break;}if(ma){event.prevent();ga=ga.substring(0,fa-2)+ga.substr(fa);ea.value=ga;}};da.prototype._processInput=function(){'use strict';if(this._disabled)return;this._sync();this._onQueryResult(null,null);this._hideSuggestion();this._query=null;this._inputTimer=null;var ea=this._input,fa=ea.value,ga=ea.selectionStart;if(ga!==ea.selectionEnd)return;var ha=fa.charAt(ga);if(ha&&!/\s/.test(ha))return;var ia=ea.value.substr(0,ga),ja=ia.match(this._queryStringMatcher);if(!ja)return;var ka=ja[0],la;if(ka.charAt(0)==='@'){ka=ka.slice(1);la=ka.length>0;}else la=ka.length>2&&(da._EN_NAMES.test(ka)||da._JP_SYLLABARY_CHARS.test(ka)||da._CJK_CHARS.test(ka));var ma=ia.lastIndexOf('@');if(ma>-1){ka=ia.substr(ma+1);la=true;}la=la&&!this._getTokenByCursorPosition(ga);if(la){this._query=ka;this._source.didChange(ka);this._source.didStart();}};da.prototype._onQueryResult=function(ea){'use strict';var fa=ea&&ea.length>0,ga=this._query&&this._input.value.indexOf(this._query)>=0;if(!ga||!fa||this._disposed)return;this._hideSuggestion();this._queryResult=null;if(this._enforceStringMatch&&!this._createRegex(this._query,'ig').test(ea[0].display))return;var ha=[],ia=document.createDocumentFragment(),ja=0,ka={};for(var la in this._uids){var ma=this._uids[la];for(var na=0,oa=ma.length;na<oa;na++)ka[ma[na]]=true;}var pa=function(xa){if(!ka[xa.uid]){xa.htmlFor=this._input.id;p.addSigil(xa,this._SUGGESTION_SIGIL);p.addSigil(xa,'touchable');h.set(xa,{nativeClick:true});xa.queryIndex=ja;ia.appendChild(xa);ha[ja]=xa;ja++;if(ja>5)return true;}};if(this._typeObjects&&this._typeObjectsOrder){var qa={};for(var ra=0;ra<ea.length;ra++){var sa=ea[ra].getAttribute('renderType');if(!sa)continue;if(!(sa in qa))qa[sa]=[];qa[sa].push(ea[ra]);}for(var ta=0;ta<this._typeObjectsOrder.length;ta++){sa=this._typeObjectsOrder[ta];var ua=this._typeObjects[sa],va=qa[sa],wa=va?va.filter(function(xa){return !ka[xa.uid];}):[];if(wa.length>0){ia.appendChild(this._buildSectionHeader(ua));wa.some(pa,this);}else if(ua.show_always){ia.appendChild(this._buildSectionHeader(ua));ia.appendChild(this._buildNoResultEntry());}}}else ea.some(pa,this);if(ja){i.setContent(da._suggestion,'');this._queryResult=ha;da._suggestion.appendChild(ia);this._showSuggestion();this._updatePosition();}};da.prototype._buildSectionHeader=function(ea){'use strict';if(ea==null)return null;return new k(ea.xhp).getFragment().firstChild;};da.prototype._buildNoResultEntry=function(){'use strict';var ea=i.create('i',{className:'mentions-suggest-item-img noResultsIcon'}),fa=i.create('span',{className:'no-results'},x._("No Results")),ga=i.create('label',{className:'mentions-suggest-item'},ea,fa);ga.appendChild(ea);ga.appendChild(fa);return ga;};da.prototype._syncAndParse=function(){'use strict';if(!this._disposed&&!this._disabled){if(this._input&&this._input.value)this._parse(this._input.value);this._sync();}};da.prototype._sync=function(){'use strict';if(!this._disposed&&!this._disabled){this._syncMentionedUIDs();this._syncHashtags();this._syncShadow();this._syncMeasurer();this._syncValue();}};da.prototype._disable=function(ea){'use strict';this._disabled=true;};da.prototype._enable=function(){'use strict';this._disabled=false;};da.prototype._parse=function(ea){'use strict';this._uids={};var fa=/[0-9]+/,ga=/^@\[(?:[0-9]+:){2}(.+)\]/,ha=ea.match(da._MENTIONS_REGEX);if(ha){for(var ia=0;ia<ha.length;ia++){var ja=ha[ia].match(fa),ka=ha[ia].match(ga);ka=ka?ka[1].replace(/\\([^\\])/g,'$1').replace(/\\\\/g,'\\'):null;if(!ka)continue;if(!this._uids[ka])this._uids[ka]=[];this._uids[ka].push(ja);ea=ea.replace(ha[ia],ka);}this._input.value=ea;}this._sync();};da.prototype._syncMentionedUIDs=function(){'use strict';var ea=this._input.value;if(!ea){this._uids={};return;}var fa=false;for(var ga in this._uids){var ha=this._createRegex(ga,'g'),ia=ea.match(ha);if(!ia||!ia.length){delete this._uids[ga];fa=true;continue;}var ja=this._uids[ga];if(!ja.length){delete this._uids[ga];}else if(ja.length>ia.length)ja.length=ia.length;}if(fa)this._tagsUpdated();};da.prototype._syncHashtags=function(){'use strict';var ea=this._input.value;if(this.shouldShowHashtags)this._hasHashtags=da._HASHTAG_TRIGGER.test(ea);};da.prototype._renderHashtags=function(ea){'use strict';if(!this._hasHashtags)return i.htmlize(ea);var fa=j.parseWithoutMentions(ea),ga=[],ha=0;for(var ia=0;ia<fa.length;ia++){ga.push(i.htmlize(ea.substring(ha,fa[ia].offset)),'<span class="mentions-highlight">',ea.charAt(fa[ia].offset),fa[ia].hashtag,'</span>');ha=fa[ia].offset+fa[ia].hashtag.length+1;}ga.push(i.htmlize(ea.substring(ha)));return ga.join('');};da.prototype._syncShadow=function(ea){'use strict';var fa=this._input,ga=fa.value,ha=this._shadow;if(!ga){i.setContent(ha,'');return;}if(ea&&(ea.getType()==='scroll'||ea.getType()==='touchmove')){o.setTop(ha,o.getTop(fa));o.setLeft(ha,o.getLeft(fa));return;}var ia='\u200B{\u200B',ja='\u200B}',ka='\u200B{\u200B\u200B}',la,ma=function(ta,ua){var va=this._uids[ta][la],wa=this._weakReferences[va]||this._initialWeakReferences[va];la++;return ((wa?ka:ia)+ua+ia);};for(var na in this._uids){var oa=this._createRegex(na,'g');la=0;ga=ga.replace(oa,ma.bind(this,na));}var pa=ga.split(ia),qa=[],ra=false;for(var sa=0;sa<pa.length;sa++){if(ra){if(pa[sa].startsWith(ja)){qa.push('<span class="mentions-highlight-weak-reference">',i.htmlize(pa[sa].substr(ja.length)),'</span>');}else qa.push('<span class="mentions-highlight">',i.htmlize(pa[sa]),'</span>');}else qa.push(this._renderHashtags(pa[sa]));ra=!ra;}ga=qa.join('');ga=ga.replace(/\n+$/,ba);if(this._shadowHTML!==ga){this._shadowHTML=ga;ha.innerHTML=ga;}o.setTop(ha,o.getTop(fa));o.setLeft(ha,o.getLeft(fa));};da.prototype._syncMeasurer=function(){'use strict';var ea=this._input,fa=ea.value;if(!fa){i.setContent(this._measurer,'');return;}var ga=ea.selectionStart,ha=ea.selectionEnd;if(ga!==ha)return;var ia=i.create('div',{},ea.value.substr(0,ga));this._measurer.innerHTML=ia.innerHTML+'<br><div></div>';};da.prototype._syncValue=function(){'use strict';var ea=this._input.value;for(var fa in this._uids){var ga=this._createRegex(fa,'g'),ha=this._uids[fa],ia=0;ea=ea.replace(ga,function(ja){var ka=parseInt(ha[ia++],10);if(ka){return '@['+ka+':'+ja+']';}else return ja;});}ea=ea.replace(/\u200B/g,'');if(this._hiddenInput.value!==ea)this.invoke('change',ea);this._hiddenInput.value=ea;};da.prototype._syncStyles=function(ea){'use strict';var fa=getComputedStyle(this._input,null),ga=ea.style,ha=['fontSize','fontFamily','letterSpacing','lineHeight','paddingTop','paddingLeft','paddingRight','paddingBottom','textIndent','wordSpacing'];while(ha.length){var ia=ha.pop();ga[ia]=fa[ia];}};da.prototype._getTokenByCursorPosition=function(ea){'use strict';var fa=this._input.value,ga=null,ha=this._uids;for(var ia in ha){if(ga)break;var ja=fa.indexOf(ia);if(ja<0)continue;var ka=this._createRegex(ia,'g'),la=0;fa.replace(ka,function(ma,na){if(!ga&&ea>na&&ea<na+ma.length)ga={name:ia,uid:ha[ia][la]};la++;});}return ga;};da.prototype._trim=function(ea){'use strict';return ea.trim?ea.trim():ea.replace(/(^\s*)|(\s*$)/g,'');};da.prototype._createRegex=function(ea,fa){'use strict';ea=ea.replace(da._REGEX_SPECIAL_CHARS,'\\$&');return new RegExp(ea,fa);};da.prototype._tagsUpdated=function(){'use strict';this._eventData.hasTags=Object.keys(this._uids).length>0;this._eventData.numTags=Object.keys(this._uids).length;p.invoke('MMentions:change',null,this._eventData);};da.prototype._removeHiddenInput=function(){'use strict';i.remove(this._hiddenInput);};Object.assign(da,{_MENTIONS_REGEX:/@\[([0-9]+)\:(([^\\\]]*(?:\\.)*)*)\]/g,_EN_NAMES:/^[A-Z][a-z]{1}/,_CJK_ALTER_NAME:/\uff08[^\uff09]+\uff09(\u200B\u200B)?$/g,_LATIN_ALTER_NAME:/\([^\)]+\)(\u200B\u200B)?$/g,_JP_SYLLABARY_CHARS:/(^[\u3040-\u309F]{3,3})|(^[\u30A0-\u30FF]{3,3})/g,_CJK_CHARS:/^[\u4E00-\u9FFF\uF900-\uFAFF\u3400-\u4DBF]{2,2}/g,_REGEX_SPECIAL_CHARS:/[\/\.\*\+\?\}\(\)\[\]\{\}\\]/g,_HASHTAG_TRIGGER:/[#\uFF03]/,_MIN_DISTANCE:130});Object.assign(da.prototype,{_NAME_SUFFIX:'\u200B\u200B',_SUGGESTION_SIGIL:'mentionsSuggestionItem',_COMPOSER_SIGIL:'composer-textarea'});v(da,['change']);f.exports=da;},null);
__d('MMentionsRenderer',['DOM'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={createSuggestionNode:function(j){var k=h.create('img',{src:j.photo,className:'mentions-suggest-item-img'}),l=h.create('div',{className:'mentions-suggest-item-text'});l.appendChild(h.create('span',{className:'mentions-suggest-item-name'},j.display));if(j.subtext){var m=j.subtext;if(j.type&&j.type!='user')m=m?j.type+' \u00b7 '+m:j.type;l.appendChild(h.create('span',{className:'mentions-suggest-item-subtext'},m));}var n=h.create('label',{className:'mentions-suggest-item',display:j.display,uid:j.id,rel:j.id,photo:j.photo,subtext:j.subtext},k,l);n.appendChild(k);n.appendChild(l);if(j.weak_reference)n.setAttribute('weak_reference','y');if(j.renderType)n.setAttribute('renderType',j.renderType);return n;}};f.exports=i;},null);
__d('MTypeaheadTouchSourceShowOnFocus',['MRequest','MTypeaheadTouchSource','Stratcom'],function a(b,c,d,e,f,g,h,i,j){var k,l;if(c.__markCompiled)c.__markCompiled();k=babelHelpers.inherits(m,i);l=k&&k.prototype;function m(n,o,p){'use strict';l.constructor.call(this,n,o);this.uri=n;this._bootstrapData=[];this._query=null;this._isFocused=false;this.maximumResultCount=p||5;if(o==='work_position_inference'){var q=j.listen('MProfileEditWork:dataChanged',null,function(r){var s=r.getData().existing_fields;if(s)this.updateBootstrapData(s);}.bind(this));j.listen('m:page:unload',null,function(){q.remove();j.removeCurrentListener();});}}m.prototype.updateBootstrapData=function(n){'use strict';var o=new h(this.uri);o.addData({existing_fields_json:JSON.stringify(n)});o.setMethod('POST');o.listen('done',function(p){this._bootstrapData=[];if(p.payload!==undefined)this.ondata(p.payload);}.bind(this));o.send();};m.prototype.showOnFocus=function(){'use strict';if(this._isFocused&&this._query===''){var n=this.renderNodes(null,this._bootstrapData);this.invoke('resultsready',n);this.invoke('complete');}};m.prototype.ondata=function(n){'use strict';i.prototype.ondata.call(this,n);var o=Math.min(n.length,this.getMaximumResultCount());for(var p=0;p<o;++p)if(n[p].uid)this._bootstrapData.push(n[p].uid);this.showOnFocus();};m.prototype.setQuery=function(n){'use strict';this._query=n;};m.prototype.setIsFocused=function(n){'use strict';this._isFocused=n;};m.prototype.didChange=function(n){'use strict';this._query=n;};m.prototype.getMaximumResultCount=function(){'use strict';return this.maximumResultCount;};f.exports=m;},null);
__d('MMentionsBootstrapDataSource',['MMentionsRenderer','MTypeaheadTouchSourceShowOnFocus'],function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();j=babelHelpers.inherits(l,i);k=j&&j.prototype;function l(m,n){'use strict';k.constructor.call(this,m,n);}l.prototype.createNode=function(m){'use strict';return h.createSuggestionNode(m);};f.exports=l;},null);
__d('MMentionsOnDemandDataSource',['MMentionsRenderer','MTypeaheadOnDemandSource'],function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();j=babelHelpers.inherits(l,i);k=j&&j.prototype;function l(m){'use strict';k.constructor.call(this,m);}l.prototype.createNode=function(m){'use strict';return h.createSuggestionNode(m);};f.exports=l;},null);
__d('InitMMentions',['MMentions','MMentionsBootstrapDataSource','MMentionsOnDemandDataSource','Stratcom','TypeaheadCompositeSource','MLegacyDataStore'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n={},o={},p={},q={main:function(r){var s=r.element;if(!s)return;if(!s.getBoundingClientRect)return;var t=[],u=r.sources.bootstrapped||[],v=r.sources.online||[],w=r.typeObjects,x=r.typeObjectsOrder,y=null,z='|',aa='',ba=[];u.forEach(function(da){y=new i(da.src,da.source_key);var ea=da.source_key+z+da.src;if(!n[ea])n[ea]=y;t.push(n[ea]);ba.push(ea);});v.forEach(function(da){var ea=z+da.src;if(!o[ea])o[ea]=new j(da.src);t.push(o[ea]);ba.push(ea);});if(!t.length)return;aa=ba.join(z);if(!(aa in p))p[aa]=new l(t);var ca=new h(s,p[aa]);ca.setTypeObjects(w);ca.setTypeObjectsOrder(x);ca.shouldShowHashtags=r.shouldShowHashtags;if(!r.enforceStringMatch)ca.disableStringMatch();m.set(s,{mentionsInstance:ca});k.listen('m:page:unload-complete',null,function(event){if(!document.documentElement.contains(s)){k.removeCurrentListener();ca.dispose();ca=null;s=null;}});}};f.exports=q;},null);
__d('MUfiCommentScroll',['setTimeoutAcrossTransitions','$','MViewport','CSS','cx','Stratcom','SubscriptionsHandler'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();g.main=function(o,p){if(!window.FW_ENABLED){var q=i(o.toString()),r=new n();if(p){r.addSubscriptions(m.listen('scroll',null,function(){var s=q.getBoundingClientRect(),t=s.top>=0&&s.left>=0&&s.bottom<=j.getHeight();if(t){k.addClass(q,"_1vcf");m.removeCurrentListener();}}));}else r.addSubscriptions(m.listen('m:root:render',null,function(){h(function(){j.scrollToHeader();},0);}));r.addSubscriptions(m.listen('m:page:unload',null,function(){r.release();}));if(p)h(function(){j.scrollToNode(q);},0);}};},null);