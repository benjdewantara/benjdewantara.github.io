if (self.CavalryLogger) { CavalryLogger.start_js(["1csh5"]); }

__d('MVerifyCache',['MCache'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=function(j){var k=h.VIEWER_KEY,l=h.getItem(k);if(l!==j.viewer){l&&h.clear();h.setItem(k,j.viewer,true);}};g.main=i;},null);
__d('MTabbable',['MAria','MJSEnvironment','MViewport','isNodeWithinRect'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();function l(o,p){while(o&&o!==p){if(h.isHidden(o))return true;o=o.parentNode;}return false;}function m(o,p){if(o.offsetHeight===0||o.offsetWidth===0||window.getComputedStyle(o).visibility==='hidden'||parseInt(o.tabIndex,10)<0||l(o,p))return false;if(o.tabIndex>=0)return true;switch(o.tagName){case 'A':return o.href&&o.rel!='ignore';case 'INPUT':return o.type!='hidden'&&o.type!='file'&&!o.disabled;case 'BUTTON':case 'SELECT':case 'TEXTAREA':return !o.disabled;}return false;}function n(o){if(!o.getBoundingClientRect)return;var p=i.IS_APPLE_WEBKIT_IOS&&parseFloat(i.OS_VERSION)>=8||i.BROWSER_NAME==='Safari'&&!i.IS_APPLE_WEBKIT_IOS,q=p?o.querySelectorAll('a, button, select, [tabindex]'):o.querySelectorAll('a, button, input, select, textarea, [tabindex]'),r=j.getBoundingRect();for(var s=0,t;t=q[s];s++)if(m(t,o)&&k(t,r)){t.focus();return;}}g.focusTabbable=n;},null);
__d('Popover',['setTimeoutAcrossTransitions','CSS','DOM','MAria','MViewport','Stratcom','Vector','$','eventsMixinDeprecated'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q=40;function r(s){'use strict';var t=s.flyout;this.flyout=typeof t=='string'?o(t):t;this.content=j.scry(this.flyout,'div','flyout-content')[0];this.options=s;this._onOrientationChange=this._reposition.bind(this);i.conditionClass(this.flyout,'popover_flyout',true);var u=s.button;if(u){this.button=typeof u=='string'?o(u):u;this.buttonClickListener=j.listen(this.button,'click',null,this._openHandler.bind(this));this.button.setAttribute('role','button');k.setupPopup(this.button,this.flyout);}var v=s.flyoutAnchor;if(v){this.flyoutAnchor=typeof v=='string'?o(v):v;}else this.flyoutAnchor=this.button;if(this.options.flyoutFromRoot)this.flyoutClickListener=j.listen(this.flyout,'click',null,this._openHandler.bind(this));if(this.options.touchstart_callback)this.flyoutTouchStartListener=j.listen(this.flyout,'touchstart',null,this._touchStartHandler.bind(this));if(this.options.touchmove_callback)this.flyoutTouchMoveListener=j.listen(this.flyout,'touchmove',null,this._touchMoveHandler.bind(this));if(this.options.touchend_callback)this.flyoutTouchEndListener=j.listen(this.flyout,'touchend',null,this._touchEndHandler.bind(this));r._instances[this.flyout.id]=this;}r.prototype.isOpen=function(){'use strict';return !!this._isOpen;};r.prototype.open=function(){'use strict';if(this.isOpen())return;if(r._activePopover)r._activePopover.close();r._activePopover=this;this._isOpen=true;this.constraint=null;i.conditionClass(this.flyout,'popover_hidden',false);if(this.options.flyoutFromRoot)this._absolutePositionFlyout();this._position();if(!this.options.heightConstraint){i.conditionClass(document.body,'disableClicks',true);this.globalListener=m.listenCapture('click',null,this._closeHandler.bind(this));}window.addEventListener('orientationchange',this._onOrientationChange,false);k.showPopup(this.button,this.flyout);if(this.options.ensureVisible){var s=l.getScrollTop(),t=this._getElementPosition(this.flyout).y,u=t+this.flyout.offsetHeight,v=u-(s+l.getUseableHeight());if(v>0){var w=Math.min(v,Math.max(t-s-q,0));l.scrollTo(0,s+w);}}this.invoke('open');};r.prototype.close=function(s){'use strict';if(!this.isOpen())return;r._activePopover=null;this._isOpen=false;i.conditionClass(this.flyout,'popover_hidden',true);if(this.options.flyoutFromRoot){this.flyoutParent.appendChild(this.flyout);delete this.flyoutParent;}h(function(){i.conditionClass(document.body,'disableClicks',false);}.bind(this),400);this.globalListener&&this.globalListener.remove();window.removeEventListener('orientationchange',this._onOrientationChange,false);this._releaseConstraint();k.hidePopup(this.button,this.flyout);if(!s)this.invoke('close');};r.prototype.clear=function(){'use strict';this.globalListener&&this.globalListener.remove();this.buttonClickListener&&this.buttonClickListener.remove();this.flyoutClickListener&&this.flyoutClickListener.remove();this.flyoutTouchStartListener&&this.flyoutTouchStartListener.remove();this.flyoutTouchMoveListener&&this.flyoutTouchMoveListener.remove();this.flyoutTouchEndListener&&this.flyoutTouchEndListener.remove();delete r._instances[this.flyout.id];};r.prototype.refreshConstraints=function(){'use strict';if(!this._isOpen)return false;var s=this.flyout;this._releaseConstraint();if(this.options.heightConstraint){s.style.minHeight=l.getUseableHeight()+'px';this.constraint=l.addHeightConstraint(n.getDim(this.content).y+this._getElementPosition(s).y);}else this.constraint=l.addMinHeightConstraint(n.getDim(s).y+this._getElementPosition(s).y+r._MARGIN);};r.prototype._getTouchPoint=function(event){'use strict';var s=event.getRawEvent().targetTouches[0],t={x:s?s.screenX:0,y:s?s.screenY:0};return t;};r.prototype._touchStartHandler=function(event){'use strict';this.options.touchstart_callback(this._getTouchPoint(event));};r.prototype._touchMoveHandler=function(event){'use strict';if(this.isOpen())this.options.touchmove_callback(this._getTouchPoint(event));};r.prototype._touchEndHandler=function(event){'use strict';this.options.touchend_callback(this._getTouchPoint(event));};r.prototype._openHandler=function(event){'use strict';event.prevent();var s=this.isOpen();if(s&&!this.options.preventClose){this.close();}else if(!s){var t=j.scry(document,'input');for(var u=0;u<t.length;u++)t[u].blur();this.open();}};r.prototype._closeHandler=function(event){'use strict';if(!event.getNode('popover'))this.close();};r.prototype._getElementPosition=function(s){'use strict';var t=s.offsetLeft,u=s.offsetTop;s=s.offsetParent;while(s&&s!==document.documentElement){t+=s.offsetLeft;u+=s.offsetTop;var v=window.getComputedStyle(s);t+=parseInt(v.getPropertyValue('border-left-width').slice(0,-2),10);u+=parseInt(v.getPropertyValue('border-top-width').slice(0,-2),10);s=s.offsetParent;}return new n(t,u);};r.prototype._absolutePositionFlyout=function(){'use strict';this.flyoutParent=this.flyout.parentNode;o('root').appendChild(this.flyout);var s=this._getElementPosition(this.flyout.parentNode),t=this._getElementPosition(this.flyoutAnchor),u=n.getDim(this.flyoutAnchor),v=t.y-s.y+u.y;this.flyout.style.position='absolute';this.flyout.style.top=v+'px';};r.prototype._position=function(){'use strict';var s=this.flyout;if(this.flyoutAnchor&&this.options.positionNub){var t=this._getElementPosition(this.flyoutAnchor),u=j.find(this.flyout,'*','nub'),v=n.getDim(u).x,w=n.getDim(this.flyoutAnchor).x,x=this._getElementPosition(s);new n(t.x-x.x+(w-v)/2,0).setPos(u);}this.refreshConstraints();};r.prototype._reposition=function(){'use strict';h(this._position.bind(this),0);};r.prototype._releaseConstraint=function(){'use strict';if(this.constraint){this.constraint.release();this.constraint=null;}};r.getInstance=function(s){'use strict';return r._instances[s];};r.clearAll=function(){'use strict';for(var s=0;s<r._instances.length;s++)r._instances[s].clear();};p(r,['open','close']);Object.assign(r,{_activePopover:null,_MARGIN:40,_instances:{}});f.exports=r;},null);
__d('MJewel',['setTimeoutAcrossTransitions','CSS','DOM','MHistory','MJSEnvironment','MLogState','MTabbable','MViewport','Popover','Stratcom','$','eventsMixinDeprecated'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){if(c.__markCompiled)c.__markCompiled();var t=10;function u(v,w){'use strict';this._sigil=v;this.options=w||{};this._jewelNode=r(u.JEWEL_NAV_NODE_ID);this._softState=w.softState||'jewel='+u.nextID++;this._duringInit=false;this._createPopover();q.listen('m:history:change',null,function(event){if(event.getData().soft===this._softState){this._popover&&this._popover.open();}else this._popover&&this._popover.close();}.bind(this));}u.prototype.isInitialized=function(){'use strict';var v=this.options.contentsSigil||'contents';return !!j.scry(this._jewelNode,'*',v)[0];};u.prototype._getJewelElement=function(){'use strict';return j.find(this._jewelNode,'div',this._sigil);};u.prototype._getCountElement=function(){'use strict';return j.find(this._getJewelElement(),'span','count');};u.prototype._getContentsElement=function(){'use strict';var v=this.options.contentsSigil||'contents';return j.find(this._getJewelElement(),'*',v);};u.prototype._getFlyoutElement=function(){'use strict';return j.find(this._getJewelElement(),'*','flyout');};u.prototype.getCount=function(){'use strict';return this._count;};u.prototype.setDuringInit=function(v){'use strict';this._duringInit=v;};u.prototype._updateCountElement=function(){'use strict';var v=this._getJewelCount();j.setContent(this._getCountElement(),''+v);var w=this._getJewelElement(),x=this._count>0;i.conditionClass(w,'noCount',!x);i.conditionClass(w,'hasCount',x);};u.prototype.setCount=function(v){'use strict';if(v<0)return;this._count=v;this._updateCountElement();};u.prototype.setHeaderText=function(v,w){'use strict';if(!v||!w)return;var x=this._getFlyoutElement();if(!x)return;var y=j.find(x,'*',v);if(!y)return;var z=y.cloneNode(true);z.innerText=w;j.replace(y,z);};u.prototype.handleViewedContent=function(){'use strict';if(this.getCount()>0&&this.isInitialized()){this.setCount(0);this.invoke('cleared');}else this.invoke('jewel_click');};u.prototype.setMenuContent=function(v){'use strict';j.setContent(this._getFlyoutElement(),v);if(this.isOpen())this.handleViewedContent();};u.prototype.prependMenuContent=function(v){'use strict';j.prependContent(this._getContentsElement(),v);};u.prototype.removeMenuContent=function(v){'use strict';var w=document.getElementById(v);if(w)j.remove(w);};u.prototype.updateMenuColor=function(v,w,x){'use strict';x?h(this._updateMenuColor.bind(this,v,w),u.MARK_READ_DELAY):this._updateMenuColor(v,w);};u.prototype._updateMenuColor=function(v,w){'use strict';var x=document.getElementById(v);if(x){i.conditionClass(x,u.M_AREA_LIGHTBLUE,!w);i.conditionClass(x,u.M_AREA_WHITE,w);}};u.prototype._createPopover=function(){'use strict';var v=this._getJewelElement(),w=j.find(v,'div','flyout');this._popover=new p({button:j.find(v,'*','icon'),flyout:w,ensureVisible:false,heightConstraint:true,preventClose:true});this._onOpenListener=this._popover.listen('open',this._onOpen.bind(this));this._onCloseListener=this._popover.listen('close',this._onClose.bind(this));this._popoverClickListener=j.listen(w,'click',null,this._onPopoverClick.bind(this));if(l.IS_ANDROID&&l.GET_OS_VERSION>=4)this._scrollAreaNode=j.scry(w,'div','scroll-area')[0];};u.prototype.clear=function(){'use strict';this._onOpenListener&&this._onOpenListener.remove();this._onCloseListener&&this._onCloseListener.remove();this._popoverClickListener&&this._popoverClickListener.remove();this._popoverTouchStartListener&&this._popoverTouchStartListener.remove();this._touchMoveListener&&this._touchMoveListener.remove();this._touchStartListener&&this._touchStartListener.remove();this._popover&&this._popover.clear();};u.prototype._onPopoverClick=function(event){'use strict';m.updateLink(event,this.options.pos);this.options.clickCallback&&this.options.clickCallback(event);};u.prototype._onPopoverTouchStart=function(event){'use strict';event.kill();};u.prototype._getJewelCount=function(){'use strict';if(this._count>0){return this._count;}else return this._unreadCount;};u.prototype._onOpen=function(){'use strict';if(this._scrollAreaNode){o.scrollToHeader();var v=document.documentElement;i.conditionClass(v,'hide-scroll',true);this._scrollAreaNode.style.maxHeight=v.offsetHeight-200+'px';}var w=this._getJewelCount();k.pushSoftState(this._softState);this.handleViewedContent();q.invoke('m:jewel:flyout:open',null,{jewel:this._sigil});i.conditionClass(this._getJewelElement(),'popoverOpen',true);var x=j.find(this._getJewelElement(),'div','flyout');n.focusTabbable(x);};u.prototype._onClose=function(){'use strict';if(this._scrollAreaNode){this._scrollAreaNode.style.minHeight='';i.conditionClass(document.documentElement,'hide-scroll',false);}q.invoke('m:jewel:flyout:close',null,{jewel:this._sigil});i.conditionClass(this._getJewelElement(),'popoverOpen',false);k.popSoftState(this._softState);};u.prototype.isOpen=function(){'use strict';return this._popover&&this._popover.isOpen();};u.prototype.openPopover=function(){'use strict';this._popover&&!this._popover.isOpen()&&this._popover.open();};u.prototype.reregisterListeners=function(){'use strict';var v=this.isOpen();this.clear();this._createPopover();if(v)this._popover.open();};s(u,['cleared','jewel_click']);Object.assign(u,{M_AREA_WHITE:'acw',M_AREA_LIGHTBLUE:'aclb',MARK_READ_DELAY:3000,JEWEL_NAV_NODE_ID:'mJewelNav',nextID:0});Object.assign(u.prototype,{_sigil:null,_currentJewel:null,_count:0,_popover:null});f.exports=u;},null);
__d('MJewels',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports={REQUESTS:'requests',MESSAGES:'messages',NOTIFICATIONS:'notifications',SEARCH:'search',MORE:'more',NEWS_FEED:'news-feed',BOOKMARKS:'bookmarks',VIDEOS:'videos'};},null);
__d('MJewelNotifications',['Bootloader','ChannelEventType','MRequest','MURI','Stratcom','isFacebookURI'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();function n(o){this.$MJewelNotifications1=o;this.$MJewelNotifications2=[];this.$MJewelNotifications3=false;this.$MJewelNotifications4=false;l.listen(i.NOTIFICATIONS_NEW,null,this.onNotificationReceive.bind(this));}n.prototype.getNotifications=function(){return this.$MJewelNotifications2;};n.prototype.registerListeners=function(){l.listen(i.NOTIFICATIONS_READ,null,this.onNotificationRead.bind(this));l.listen('click','live-notifications',this.onNotificationClick.bind(this));l.listen('m:jewel:flyout:open',null,this.onJewelOpen.bind(this));};n.prototype.onJewelOpen=function(event){var o=event.getData(),p=o&&o.jewel&&o.jewel==='notifications';if(p&&this.$MJewelNotifications4)this.updateUI();};n.prototype.onNotificationClick=function(event){var o=event.getNode('live-notification');if(!o)return;var p=o.getAttribute('data-alertid');this.readNotification(p);this.updateUI();new j('/a/jewel_notifications_log.php').addData({click_type:'jewel_notif_click',id:p}).send();};n.prototype.onNotificationRead=function(event){var o=event.getData();if(o&&o.alert_ids){o.alert_ids.forEach(function(p){this.readNotification(p);}.bind(this));this.updateUI();}};n.prototype.readNotification=function(o){this.$MJewelNotifications2.forEach(function(p){if(p.alert_id==o){if(p.unread)this.$MJewelNotifications4=true;p.unread=false;}}.bind(this));};n.prototype.addNotification=function(o){this.$MJewelNotifications2=this.$MJewelNotifications2.filter(function(p){return p.alert_id!==o.alert_id;});o.timestamp=Date.now();this.$MJewelNotifications2.push(o);this.$MJewelNotifications4=true;};n.prototype.onNotificationReceive=function(event){var o=event.getData();if(o&&o.data){if(o.data.type==='friend_confirmed')return;if(!this.$MJewelNotifications3){this.$MJewelNotifications3=true;this.registerListeners();}this.addNotification(o.data);this.updateUI();}};n.prototype.updateUI=function(){if(!this.$MJewelNotifications3||!this.$MJewelNotifications4)return;h.loadModules(["React","ReactDOM","MJewelNotificationList.react","Popover"],function(o,p,q,r){if(!r.getInstance('notifications_flyout').isOpen())return;var s={notifications:this.$MJewelNotifications2};p.render(o.createElement(q,s),this.$MJewelNotifications1);r.getInstance('notifications_flyout').refreshConstraints();this.$MJewelNotifications4=false;}.bind(this),'MJewelNotifications');};f.exports=n;},null);
__d('MPlaces',['$','DOM','MLegacyDataStore','LoadingIndicator','MRequest','Stratcom','MPageController','MURI','URI','XPlacesUpdateLocationController','ViewerLocationSource','FWLoader'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s=c('FWLoader').FW,t={LINK_SIGIL:'gps-link',FORM_SIGIL:'gps-form',UPDATE_LOCATION_INTERVAL:60000,desiredProperties:['latitude','longitude','accuracy','altitude','altitudeAccuracy','heading','speed'],locationOptions:{enableHighAccuracy:true,timeout:60000,maximumAge:300000},watchID:null,pendingHref:'',pendingForm:null,_JSONLocation:'',_currentSearchMode:null,_lastUpdateTime:0,enableFWGeolocation:true,locationSearchModes:{SEARCH_MODE:'m',MODE_COMPOSER:'cp',MODE_CHECKIN:'ci'},setCurrentJSONLocation:function(u){t._JSONLocation=u;},getCurrentJSONLocation:function(){return t._JSONLocation;},setLocationSearchMode:function(u){t._currentSearchMode=u;},getLocationSearchMode:function(){return t._currentSearchMode;},shouldUseFWGeolocation:function(){return window.FW_ENABLED&&s.isIOS()&&t.enableFWGeolocation;},updateLocation:function(u){if(u){if(t.shouldUseFWGeolocation())u={coords:u};var v={},w;for(var x=0;x<t.desiredProperties.length;x++){w=t.desiredProperties[x];if(u.coords[w])v[w]=u.coords[w];}if(u.timestamp)v.timestamp=u.timestamp/1000;t._JSONLocation=JSON.stringify(v);t.sendCurrentLocationToServer();if(t.pendingForm){t.submitForm(t.pendingForm);}else if(t.pendingHref)t.gotoPage(t.pendingHref);t.pendingForm=null;t.pendingHref='';m.invoke('location-update',null,{position:u});}},handleError:function(u){t.clearWatch();m.invoke('location-error',null,{error:u});if(t.pendingForm){t.submitForm(t.pendingForm);t.pendingForm=null;}else if(t.pendingHref){t.gotoPage(t.pendingHref);t.pendingHref='';}},sendCurrentLocationToServer:function(){var u=Date.now();if(u-t._lastUpdateTime>t.UPDATE_LOCATION_INTERVAL){t._lastUpdateTime=u;var v=q.getURIBuilder().setString('json_location',t._JSONLocation).setEnum('source',r.MSITE_PLACES).getURI();new l(v).setMethod('POST').send();}},gotoPage:function(u){var v=new p(u);v.addQueryData('json_location',t._JSONLocation);n.load(v);},submitForm:function(u){u.appendChild(i.create('input',{name:'json_location',type:'hidden',value:t._JSONLocation}));if(!u.onsubmit||u.onsubmit())u.submit();},clearWatch:function(){if(!t.watchID)return;if(t.shouldUseFWGeolocation()){s.geolocation.clearWatch();}else navigator.geolocation.clearWatch(t.watchID);t.watchID=null;},watchPosition:function(){if(t.shouldUseFWGeolocation()){t.watchID=1;s.geolocation.watchPosition(t.updateLocation,t.handleError);s.geolocation.getCurrentPosition(t.updateLocation);}else{var u=setTimeout(t.handleError,t.locationOptions.timeout);t.watchID=navigator.geolocation.watchPosition(function(v){clearTimeout(u);t.updateLocation(v);},function(v){clearTimeout(u);t.handleError(v);},t.locationOptions);}},monitorLocation:function(){t.clearWatch();t.watchPosition();l.listen('postprocess',function(){if(!document.getElementById('place_update')&&t.watchID)t.clearWatch();});},submitFormWithLocation:function(u){if(typeof u=='string')u=h(u);var v=t;k.show();if(v.watchID&&v._JSONLocation){v.submitForm(u);return;}v.pendingHref='';v.pendingForm=u;v.monitorLocation();return false;},gotoPageWithLocation:function(u){var v=t;k.show();if(v.watchID&&v._JSONLocation){v.gotoPage(u);return;}v.pendingForm=null;v.pendingHref=u;v.monitorLocation();return false;},onClick:function(event){event.kill();var u=j.get(event.getNode(t.LINK_SIGIL));t.gotoPageWithLocation(u.href);},onSubmit:function(event){event.kill();var u=i.find(event.getNode(t.FORM_SIGIL),'form');t.submitFormWithLocation(u);}};f.exports=t;},null);
__d('MExceptionHandler',['ex','ErrorUtils','MLogger'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();if(window.onerror!==i.onerror)j.mustfix('ErrorUtils failed to assign window.onerror handler');function k(l,m){i.reportError(new Error(h('fwHandleException: %s, context: %s',l,m)));}b.fwHandleException=k;},null);
__d('MExceptionReportingMarauderLogger',['ErrorUtils'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(k){e(['MarauderLogger'],function(l){l.log('js_exception',undefined,k);k=null;});}function j(k,l,m){i({message:k,context:l,stack_trace:m});}h.addListener(function(k){i(k);});f.exports.log=j;},null);
__d('MSideNavMarauderLogger',['MLegacyDataStore','Stratcom','MarauderLogger','MTouchClick'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l='';function m(event){j.toggleModule('sidebar_menu',true);}function n(event){j.toggleModule('sidebar_menu',false);}function o(event){var x=event.getNode('tag:a'),y=event.getNode('tag:div');j.log('open_application','sidebar_menu',{application_link_type:'local_module',display_name:y?y.innerText:'unknown',url:x&&x.href});j.setNavigationModule('sidebar_menu');}function p(){u('session_start');}function q(){u('cancel');}function r(x){var y=x.getData();if(y.node.rel<=0)return;var z=0,aa='',ba=h.get(y.node);if(ba){z=ba.bootstrap?1:0;aa=ba.type;}var ca=0,da=null;for(var ea=0;ea<y.results.length;ea++){var fa=y.results[ea];if(fa.rel>0){if(fa.rel==y.node.rel){da=ca;break;}ca++;}}u('click',{query:y.query,is_bootstrapped:z,display_position:da},aa,y.node.rel);}function s(x){var y=x.getData();u('click',{query:y.query,is_bootstrapped:y.node.bootstrap?1:0,display_position:y.position},y.node.type,y.node.id);}function t(x){if(l!==x)u('search_keystroke',{prev_query:l,new_query:x});l=x;}function u(x,y,z,aa){j.log(x,'search_typeahead',y,z,aa);}function v(x){x.listen('change',t);}i.listen('m:side-area:show',null,m);i.listen('m:side-area:hide',null,n);i.listen('click','side-menu-item',o);var w=k.hasTouchEvents()?'touchend':'click';i.listen(w,'search-activator',p);i.listen(w,'graph-search-activator',p);i.listen('click','graph-search-entry-point',p);i.listen('m:search-overlay:cancel',null,q);i.listen('m:search-overlay:cancel-react',null,q);i.listen('m:search-typeahead:select',null,r);i.listen('m:search-typeahead:select-react',null,s);f.exports={setupTypeaheadListener:v};},null);
__d('MNotificationClick',['MLegacyDataStore','Stratcom','MRequest'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k='notification',l=false;function m(){if(l)return;i.listen('click',k,n);l=true;}function n(event){var o=event.getNode('touchable');if(!o)return;var p=h.get(o).notif_id;if(!p)return;new j('/a/jewel_notifications_log.php').addData({click_type:'notification_click',id:p}).send();}f.exports={init:m};},null);
__d('PerfXFlusher',['Banzai','invariant'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j='perfx_custom_logger_endpoint',k=['perfx_page','perfx_page_type','lid'];function l(n){k.forEach(function(o){return i(o in n);});}var m={flush:function(n){l(n);h.post(j,n,{signal:true});},registerToSendWithBeacon:function(n){h.registerToSendWithBeacon(j,n);}};f.exports=m;},null);
__d('PerfXLogger',['performance','performanceNow'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={},k={pageletRendered:function(l,m){if(j[l]==undefined)j[l]={};var n=i();if(m||j[l].ttiTimestamp===undefined)j[l].ttiTimestamp=n;j[l].e2eTimestamp=n;},flush:function(l,m,n){if(j[l]===undefined)return;var o=j[l],p=o.ttiTimestamp,q=o.e2eTimestamp;delete j[l];if(h.timing===undefined)return;var r={perfx_page_type:m,perfx_page:n,tti:p,e2e:q,lid:l};e(['PerfXFlusher'],function(s){s.flush(r);});}};f.exports=k;},null);
__d('MSearchConst',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports={refid:46,news_search:'news',video_search:'video',content_search:'content',msite_news_null_state:'mnns',msite_news_non_gs_null_state:'mnngns',event_click:'click',event_impression:'imp'};},null);
__d("XMobileSearchTrendingLoggingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/graphsearch\/trending\/logging\/",{topic_ids:{type:"IntVector",required:true},source:{type:"String",required:true},positions:{type:"IntVector",required:true},query_id:{type:"Int",required:true},event:{type:"String",required:true}});},null);
__d('MSearchTrendingLogger',['XMobileSearchTrendingLoggingController','MRequest','MSearchConst','Stratcom'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=null,m={registerTrendingTopicListeners:function(n,o,p,q){if(!l)l={};for(var r=0;r<n.length;r++){var s=n[r];if(s==null||l[s])continue;l[s]=k.listen('click',s,this._logTrendingTopicClick(s,o,p[r],q));}},logTrendingTopicImpressions:function(n,o,p,q){if(!n||n.length===0)return;for(var r=0;r<n.length;r++)if(n[r]==null){n.splice(r,1);p.splice(r,1);r--;}var s=h.getURIBuilder().setIntVector('topic_ids',n).setString('source',o).setIntVector('positions',p).setInt('query_id',q).setString('event',j.event_impression).getURI(),t=new i(s);t.send();},_logTrendingTopicClick:function(n,o,p,q){if(!n)return;return function(){var r=h.getURIBuilder().setIntVector('topic_ids',[n]).setString('source',o).setIntVector('positions',[p]).setInt('query_id',q).setString('event',j.event_click).getURI(),s=new i(r);s.send();};}};f.exports=m;},null);
__d('MSearchTypeaheadPerfLogger',['BanzaiScuba','CurrentUser','performanceNow'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(l,m,n){'use strict';this._searchType=m.type;this._sampleRate=m.sample_rate;this._siteType=m.site;this._cacheEnable=n?1:0;this.init(l);this.initEvents();this._reset();}k.prototype.init=function(l){'use strict';this._data=l.getDatasource();this._typeahead=l;if(this._typeahead.props&&this._typeahead.props.vertical)this._vertical=this._typeahead.props.vertical;};k.prototype.initEvents=function(){'use strict';this._data.listen('initial_render',this.initialRender.bind(this));this._data.listen('after_complete',this.complete.bind(this));this._data.listen('req_dispatch',this.remoteRequestDispatch.bind(this));this._data.listen('req_sent',this.remoteRequestSent.bind(this));this._data.listen('req_recv',this.remoteRequestReceived.bind(this));this._typeahead.listen('update',this.queryStart.bind(this));this._typeahead.listen('render_start',this.renderStart.bind(this));this._typeahead.listen('rendered',this.rendered.bind(this));};k.prototype._reset=function(){'use strict';this._startTime=null;this._intialRenderTime=null;this._remoteRequestDispatchTime=null;this._remoteRequestSentTime=null;this._remoteRequestReceivedTime=null;this._renderStart=null;this._rendered=null;this._endTime=null;this._cacheOnly=1;this._resultLength=0;this._originQuery=null;this._query=null;};k.prototype.initialRender=function(){'use strict';this._intialRenderTime=Date.now();};k.prototype.complete=function(){'use strict';this._endTime=Date.now();this._query=this._typeahead.getValue();this.logToScuba();this._reset();};k.prototype.queryStart=function(l){'use strict';this._reset();this._originQuery=l;this._startTime=Date.now();};k.prototype.renderStart=function(){'use strict';this._renderStart=j();};k.prototype.rendered=function(){'use strict';this._rendered=j()-this._renderStart;};k.prototype.remoteRequestDispatch=function(l){'use strict';this._remoteRequestDispatchTime=Date.now();this._sid=l;};k.prototype.remoteRequestSent=function(){'use strict';this._remoteRequestSentTime=Date.now();};k.prototype.remoteRequestReceived=function(l){'use strict';this._remoteRequestReceivedTime=Date.now();this._resultLength=l;this._cacheOnly=0;};k.prototype.logToScuba=function(){'use strict';if(this._startTime===null)return;if(this._originQuery!==this._query)return;var l=new h('mobile_search_facebar_js',null,{addBrowserFields:true,addPredictedGeographyFields:true,addUser:true,addSearchVersion:true,addGatekeepers:{mtouchGKs:true}});l.addInteger('sample_rate',this._sampleRate);l.addNormal('typeahead_type',this._searchType);l.addNormal('site',this._siteType);if(this._vertical){l.addNormal('vertical',this._vertical);l.addNormal('search_mode',this._typeahead.state.searchMode);}l.addNormal('session_id',this._sid);l.addNormal('user_id',i.getID());l.addNormal('query',this._query);l.addInteger('cache_keypress_render',Math.max(this._intialRenderTime-this._startTime,0));if(this._rendered)l.addInteger('rendered',this._rendered);if(this._cacheOnly===0){l.addInteger('remote_keypress_query_dispatch',Math.max(this._remoteRequestDispatchTime-this._startTime,0));l.addInteger('remote_keypress_query_start',Math.max(this._remoteRequestSentTime-this._startTime,0));l.addInteger('remote_keypress_query_end',Math.max(this._remoteRequestReceivedTime-this._startTime,0));l.addInteger('remote_keypress_render',Math.max(this._endTime-this._startTime,0));l.addInteger('remote_render',Math.max(this._endTime-this._remoteRequestReceivedTime,0));l.addInteger('time_js_async',Math.max(this._remoteRequestReceivedTime-this._remoteRequestSentTime,0));}l.addInteger('end_to_end',Math.max(this._endTime-this._startTime,0));l.addInteger('num_result',this._resultLength);l.addNormal('is_cache_only',this._cacheOnly);l.addNormal('is_cache_enable',this._cacheEnable);l.post();};f.exports=k;},null);
__d('MSearchTypeaheadPerfLoggerV2',['Banzai','Stratcom','URI'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(l,m,n,o){'use strict';this.$MSearchTypeaheadPerfLoggerV211=3;this.$MSearchTypeaheadPerfLoggerV212=3;this.$MSearchTypeaheadPerfLoggerV22=m;this.$MSearchTypeaheadPerfLoggerV21=l;this.$MSearchTypeaheadPerfLoggerV24='mtouch_typeahead_log_perf';this.$MSearchTypeaheadPerfLoggerV25='mtouch_serp_log_perf';this.$MSearchTypeaheadPerfLoggerV28=o;this.$MSearchTypeaheadPerfLoggerV29='';this.$MSearchTypeaheadPerfLoggerV23={query:null,latencyData:[],typeaheadType:this.$MSearchTypeaheadPerfLoggerV22,sessionID:null,sessionStartTime:null,click:false,isBootstrapClick:false,isExactMatchKeywordClick:false,isNullStateClick:false,isSeeMoreClick:false};this.$MSearchTypeaheadPerfLoggerV213();this.$MSearchTypeaheadPerfLoggerV214();}k.prototype.$MSearchTypeaheadPerfLoggerV213=function(){'use strict';i.listen('m-typeahead-logger:new-session-id',null,function(l){this.$MSearchTypeaheadPerfLoggerV215(l.getData().sessionID,l.getData().query);}.bind(this));i.listen('log-m-search-session-end',null,function(l){this.$MSearchTypeaheadPerfLoggerV216();this.$MSearchTypeaheadPerfLoggerV214();}.bind(this));this.$MSearchTypeaheadPerfLoggerV21.listen('update',this.onQueryUpdated.bind(this));this.$MSearchTypeaheadPerfLoggerV21.listen('show',this.onResultsRendered.bind(this));this.$MSearchTypeaheadPerfLoggerV21.listen('select',this.onResultLinkReady.bind(this));this.$MSearchTypeaheadPerfLoggerV21.listen('on-enter-pressed',this.onEnterPressed.bind(this));this.$MSearchTypeaheadPerfLoggerV21.listen('result-selected',this.onResultSelected.bind(this));i.listen('m:page:render:complete',null,function(l){var m=new j(this.$MSearchTypeaheadPerfLoggerV29),n=new j(l.getData().path),o=Date.now()-this.$MSearchTypeaheadPerfLoggerV210;if(m.getPath()===n.getPath()&&o>=0){var p={tti:o,typeaheadType:this.$MSearchTypeaheadPerfLoggerV22,uriPath:m.getPath()};h.post(this.$MSearchTypeaheadPerfLoggerV25,p,{delay:this.$MSearchTypeaheadPerfLoggerV211,retry:true});this.$MSearchTypeaheadPerfLoggerV29='';}}.bind(this));};k.prototype.onEnterPressed=function(l){'use strict';this.$MSearchTypeaheadPerfLoggerV29=l;this.$MSearchTypeaheadPerfLoggerV210=Date.now();};k.prototype.onResultLinkReady=function(l){'use strict';this.$MSearchTypeaheadPerfLoggerV29=l.href;this.$MSearchTypeaheadPerfLoggerV210=Date.now();};k.prototype.onResultsRendered=function(l,m){'use strict';var n=this.$MSearchTypeaheadPerfLoggerV217(),o=this.$MSearchTypeaheadPerfLoggerV218(n);if(o==null)return;if(!this.$MSearchTypeaheadPerfLoggerV219())return;var p=Array.isArray(l)?this.$MSearchTypeaheadPerfLoggerV220(l):this.$MSearchTypeaheadPerfLoggerV220(l.show);if(this.$MSearchTypeaheadPerfLoggerV221(p))return;var q=l.show?p.map(function(u){return {isNullStateSuggestion:n==='',isFromCache:u.isFromCache,isSeeMore:u.isSeeMore};}):p,r=q.every(function(u){return (u.isNullStateSuggestion||u.isSeeMore||u.exactMatchKeyword);})&&q.some(function(u){return u.isNullStateSuggestion;}),s=q.every(function(u){return u.exactMatchKeyword||u.isSeeMore;}),t=q.every(function(u){return (u.isFromCache||u.isSeeMore||u.exactMatchKeyword);})&&q.some(function(u){return u.isFromCache;})&&!s;this.$MSearchTypeaheadPerfLoggerV23.latencyData.push({query:n,allFromNullState:r,allFromCache:t,allFromEcho:s||p.length===0,latency:Date.now()-o});this.$MSearchTypeaheadPerfLoggerV27=p;};k.prototype.onQueryUpdated=function(l){'use strict';if(this.$MSearchTypeaheadPerfLoggerV219()){this.$MSearchTypeaheadPerfLoggerV23.query=l;this.$MSearchTypeaheadPerfLoggerV26[l]=Date.now();}};k.prototype.onResultSelected=function(l){'use strict';if(l.id){if(l.bootstrapped){this.$MSearchTypeaheadPerfLoggerV23.isBootstrapClick=true;}else if(l.exactMatchKeyword){this.$MSearchTypeaheadPerfLoggerV23.isExactMatchKeywordClick=true;}else if(l.isSeeMore){this.$MSearchTypeaheadPerfLoggerV23.isSeeMoreClick=true;}else if(l.isNullStateSuggestion)this.$MSearchTypeaheadPerfLoggerV23.isNullStateClick=true;}else if(l.rel>0){var m=this.$MSearchTypeaheadPerfLoggerV28.get(l);if(m)this.$MSearchTypeaheadPerfLoggerV23.isBootstrapClick=m.bootstrap==1;this.$MSearchTypeaheadPerfLoggerV23.isNullStateClick=this.$MSearchTypeaheadPerfLoggerV217()==='';}else this.$MSearchTypeaheadPerfLoggerV23.isSeeMoreClick=true;this.$MSearchTypeaheadPerfLoggerV23.click=true;};k.prototype.$MSearchTypeaheadPerfLoggerV214=function(){'use strict';this.$MSearchTypeaheadPerfLoggerV26={};this.$MSearchTypeaheadPerfLoggerV27=[];this.$MSearchTypeaheadPerfLoggerV23.query=null;this.$MSearchTypeaheadPerfLoggerV23.latencyData=[];this.$MSearchTypeaheadPerfLoggerV23.sessionID=null;this.$MSearchTypeaheadPerfLoggerV23.sessionStartTime=null;this.$MSearchTypeaheadPerfLoggerV23.click=false;this.$MSearchTypeaheadPerfLoggerV23.isBootstrapClick=false;this.$MSearchTypeaheadPerfLoggerV23.isExactMatchKeywordClick=false;this.$MSearchTypeaheadPerfLoggerV23.isNullStateClick=false;this.$MSearchTypeaheadPerfLoggerV23.isSeeMoreClick=false;};k.prototype.$MSearchTypeaheadPerfLoggerV217=function(){'use strict';return this.$MSearchTypeaheadPerfLoggerV21.getValue()||'';};k.prototype.$MSearchTypeaheadPerfLoggerV219=function(){'use strict';return this.$MSearchTypeaheadPerfLoggerV23.sessionID!=null;};k.prototype.$MSearchTypeaheadPerfLoggerV215=function(l,m){'use strict';this.$MSearchTypeaheadPerfLoggerV214();this.$MSearchTypeaheadPerfLoggerV23.sessionID=l;this.$MSearchTypeaheadPerfLoggerV23.sessionStartTime=Date.now();this.$MSearchTypeaheadPerfLoggerV23.query=m;this.$MSearchTypeaheadPerfLoggerV23.typeaheadType=this.$MSearchTypeaheadPerfLoggerV22;};k.prototype.$MSearchTypeaheadPerfLoggerV218=function(l){'use strict';if(this.$MSearchTypeaheadPerfLoggerV26[l]!=null){return this.$MSearchTypeaheadPerfLoggerV26[l];}else return this.$MSearchTypeaheadPerfLoggerV23.sessionStartTime;};k.prototype.$MSearchTypeaheadPerfLoggerV221=function(l){'use strict';var m=this.$MSearchTypeaheadPerfLoggerV27.filter(function(o){return o.id!='seeMore';}).map(function(o){return o.display;}),n=l.filter(function(o){return o.id!='seeMore';}).map(function(o){return o.display;});return m.length==n.length&&m.every(function(o,p){return o==n[p];});};k.prototype.$MSearchTypeaheadPerfLoggerV220=function(l){'use strict';var m=this.$MSearchTypeaheadPerfLoggerV21;return l.filter(function(n){return !n.isInvalidated&&n!==m.loadingIndicator;});};k.prototype.$MSearchTypeaheadPerfLoggerV216=function(){'use strict';var l={query:this.$MSearchTypeaheadPerfLoggerV23.query,latencyData:this.$MSearchTypeaheadPerfLoggerV23.latencyData,typeaheadType:this.$MSearchTypeaheadPerfLoggerV22,sessionID:this.$MSearchTypeaheadPerfLoggerV23.sessionID,sessionStartTime:this.$MSearchTypeaheadPerfLoggerV23.sessionStartTime,click:this.$MSearchTypeaheadPerfLoggerV23.click,isBootstrapClick:this.$MSearchTypeaheadPerfLoggerV23.isBootstrapClick,isExactMatchKeywordClick:this.$MSearchTypeaheadPerfLoggerV23.isExactMatchKeywordClick,isNullStateClick:this.$MSearchTypeaheadPerfLoggerV23.isNullStateClick,isSeeMoreClick:this.$MSearchTypeaheadPerfLoggerV23.isSeeMoreClick};h.post(this.$MSearchTypeaheadPerfLoggerV24,l,{delay:this.$MSearchTypeaheadPerfLoggerV212,retry:true});i.invoke('typeahead-perf-logger-did-log',null,l);};f.exports=k;},null);
__d('MSearchTypeaheadPerfLoggerUtil',['MLegacyDataStore','MSearchTypeaheadPerfLogger','MSearchTypeaheadPerfLoggerV2','SearchMTouchGlobalOptions'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l={getNewMSearchTypeaheadPerfLogger:function(m,n,o){if(k.useNewTypeaheadPerfLogger){return new j(m,n.type,o,h);}else return new i(m,n,o);}};f.exports=l;},null);
__d("XSICopyPasteController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/si\/content-matcher\/",{text:{type:"String",required:true}});},null);
__d('SICopyPasteUtility',['EventListener','XSICopyPasteController'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={getSelectedText:function(){var k=null;if(window.getSelection){k=window.getSelection().toString();}else if(document.selection)k=document.selection.createRange().text;return String(k);},setBodyCopyCallback:function(k){h.listen(document.body,'copy',k);},getLoggingURI:function(){return i.getURIBuilder().setString('text',j.getSelectedText()).getURI().toString();}};f.exports=j;},null);
__d('SICopyPaste',['MRequest','SICopyPasteUtility'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();f.exports={init:function(){i.setBodyCopyCallback(function(){new h(i.getLoggingURI()).setMethod('GET').send();});}};},null);
__d('TimeSpentArray',['Banzai','pageID','setTimeoutAcrossTransitions'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=2,l=k*32,m,n,o,p,q,r,s,t,u,v={},w;function x(){return {timeoutDelayMap:v,nextDelay:w,timeoutInSeconds:o};}function y(){if(m){var ga=Date.now();if(ga>q)s=Math.min(l,Math.ceil(ga/1000-p));var ha=da();if(ha)m(ha,w);}ca();}function z(){aa();n=j(y,o*1000);}function aa(){if(n){clearTimeout(n);n=null;}}function ba(ga){p=ga;q=p*1000;r=[1];for(var ha=1;ha<k;ha++)r.push(0);s=1;t+=1;u+=1;var ia=u.toString()+'_delay';w=v[ia];if(w===undefined)w=v.delay;var ja=u.toString()+'_timeout',ka=v[ja];if(ka===undefined)ka=v.timeout;ka=Math.min(ka,l);o=ka||l;z();}function ca(){aa();r=null;}function da(){if(!r)return null;return {tos_id:i,start_time:p,tos_array:r.slice(0),tos_len:s,tos_seq:u,tos_cum:t};}function ea(ga){if(ga>=q&&ga-q<1000)return;fa(Math.floor(ga/1000));}function fa(ga){var ha=ga-p;if(ha<0||ha>=l)y();if(!r){ba(ga);}else{r[ha>>5]|=1<<(ha&31);s=ha+1;t+=1;q=ga*1000;}}f.exports={init:function(ga,ha,ia){t=0;u=-1;m=ga;if(typeof ha=='object'&&ha!==null){v=ha;}else v={};if(!ia)ia=Date.now();ba(Math.floor(ia/1000));h.subscribe(h.SHUTDOWN,y);},update:function(ga){ea(ga);},get:function(){return da();},ship:function(){y();},reset:function(){ca();},testState:function(){return x();}};},null);
__d('MTimeSpentBitArrayLogger',['Banzai','BanzaiODS','Stratcom','MarauderLogger','TimeSpentArray','TimeSpentImmediateActiveSecondsLogger','Visibility','isInIframe'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();function p(){l.ship();}function q(){var u=Date.now();l.update(u);m.maybeReportActiveSecond(u);}function r(u){if(h.isEnabled('vital_navigations'))h.post('time_spent_mtouch_data_loss_isolation','',{delay:0,retry:true});k.log('time_spent_bit_array',undefined,u,undefined,undefined,undefined,Date.now());}function s(){return ['gesturestart','mousedown','touchstart','scroll','keydown'];}function t(){var u=s();j.listen(u,null,q);var v='onpagehide' in window?['pagehide','blur']:['blur'];j.listen(v,null,p);n.addListener('hidden',p);}f.exports={init:function(u){if(o())return;var v=Date.now();l.init(r,null,v);t();m.maybeReportActiveSecond(v);i.bumpEntityKey('ms.time_spent.qa.'+u,'time_spent.bits.js_initialized');},getMonitoredEvents:s};},null);
__d('MLink',['DOM','MLegacyDataStore','ErrorUtils','MLinkHack','MLogger','MPageCache','MPageController','Stratcom','URI'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q='standalone' in window.navigator&&window.navigator.standalone,r=false;function s(){if(r)return;r=true;h.listen(document.documentElement,'click',null,function(event){if(event.getPrevented())return;j.applyWithGuard(function(){var t=event.getNode('tag:a');if(!t)return;var u=event.getRawEvent();if(t.getAttribute('onclick')||(u.which||u.button)>=2)return;k.remove(t);var v=t.getAttribute('href'),w=new p(v),x=w.getProtocol();if(x&&x!='http'&&x!='https')return;var y=w.getDomain(),z=v&&v.charAt(0),aa=!z||/[\/#]/.test(z),ba=w.getPort()?[y,w.getPort()].join(':'):y,ca=aa||location.host===ba,da=y&&!/\.facebook.com$/i.test(y);if(da&&!o.hasSigil(t,'MLinkshim'))l.mustfix('Loading an external URL without shimming: %s',v);var ea=t.getAttribute('target');if((ea=='_blank'||da)&&q)return;if(ea=='_blank'){window.open(v,'_blank');}else if(w.getPath().toLowerCase().indexOf('/dialog/oauth')>-1){return;}else if(ea||x&&x+':'!==location.protocol||o.hasSigil(t,'no_mpc')||da){window.location=v;}else if(v){if(v.indexOf('#')===0){var fa=document.getElementById(v.substr(1));fa&&fa.scrollIntoView();}else{var ga=i.get(t);if(ga.fromCache)m.setScrollHistory(v,0);n.load(v,{replace:ga.behavior==='replace-state',expiration:ga.fromCache?n.HISTORY_EXPIRE_MS:null});}}else{if(t.hasAttribute('data-sigil'))return;var ha='',ia=event.getTarget();while(ia&&ia!=document.body){ha=ha+' <'+ia.nodeName;if(ia.id)ha=ha+' id='+ia.id;if(ia.className)ha=ha+' class='+ia.className;ha=ha+' >';ia=ia.parentNode;}l.warn('handleClick: unknown link action: '+'<a id="%s" class="%s" /> Path: %s',t.id,t.className,ha);return;}event.prevent();},null,[],null,'LinkController');});}g.setupListener=s;},null);
__d('MModalDialogInit',['MModalDialog'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();if(!b.FW_ENABLED)h.init();},null);
__d('MPopoverClose',['Popover'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=function(){if(h._activePopover)h._activePopover.close();};g.main=i;},null);
__d('MRecentSearchesUpdater',['Stratcom'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i='search-recent-queries';function j(k){'use strict';k.listen('change',this.changeQuery.bind(this));k.listen('select',this.addRecentSearchWithSelection.bind(this));k.listen('show',this.changeResults.bind(this));k.listen('query',this.addRecentSearchWithQuery.bind(this));k.listen('refreshRecent',this.refreshRecent.bind(this));}j.prototype.refreshRecent=function(){'use strict';h.invoke('refreshRecent',i,{});};j.prototype.changeQuery=function(k){'use strict';this.currentQuery=k;};j.prototype.changeResults=function(k){'use strict';if(k.show){this.results=k.show.slice();}else this.results=k.slice();};j.prototype.addRecentSearchWithQuery=function(){'use strict';h.invoke('addRecentQuery',i,{query:this.currentQuery});};j.prototype.addRecentSearchWithSelection=function(k){'use strict';var l=k&&(k.rel||k.getAttribute('rel'));if(!l){this.addRecentSearchWithQuery();return;}for(var m=0;m<this.results.length;m++)if(this.results[m].id===l)h.invoke('addRecentSearch',i,{result:this.results[m]});};f.exports=j;},null);
__d('MSearchTypeaheadLogger',['setTimeoutAcrossTransitions','MLegacyDataStore','DOM','MTouchClick','MRequest','SubscriptionsHandler','Stratcom'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=1000;function p(r){var s=[];for(var t=0,u=r.length;t<u;t++){var v=r[t];if(v.rel>0){var w={id:v.rel};w.type=v.type;w.renderType=v.renderType;try{var y=j.find(v,'a','typeahead-result');if(i.get(y).bootstrap)w.bootstrap=1;}catch(x){}s.push(w);}}return s;}function q(r,s){'use strict';this.typeahead=r;this.uri=s;this.initialize();this.emptyQueryResults=[];this.addSubscriptions();}q.prototype.addSubscriptions=function(){'use strict';var r=k.hasTouchEvents()?'touchend':'click';if(this.subscriptions)this.subscriptions.release();this.subscriptions=new m();this.subscriptions.addSubscriptions(this.typeahead.listen('focus',function(){this.startSession(this.typeahead.getValue(),{force:true});}.bind(this)),this.typeahead.listen('change',function(s){var t=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];if(!t.preventSessionStart)this.startSession(s);if(this.sessionInProgress())this.data.query=s;}.bind(this)),this.typeahead.listen('keypress',function(s){this.keypressed+=1;}.bind(this)),this.typeahead.listen('select',function(s){var t=s&&(s.rel||s.getAttribute('rel'));if(!this.data.query)this.data.null_state=1;this.data.click_event=Date.now();if(t){this.data.selected_id=t;}else this.data.selected_search=1;if(this.results&&this.results.length&&this.data.query&&this.data.query.length)n.invoke('m:search-typeahead:select',null,{node:s,results:this.results.slice(),query:this.data.query.slice()});this.logToServer();}.bind(this)),this.typeahead.listen('show',function(s){var t=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];if(!t.preventSessionStart)this.startSession(this.typeahead.getValue());if(this.sessionInProgress())if(s.show){this.results=p(s.show);if(!this.typeahead.getValue())this.emptyQueryResults=this.results;}else{this.data.candidate_results=s.slice().filter(function(u){return !u.isInvalidated;});if(!this.typeahead.getValue())this.emptyQueryResults=this.data.candidate_results;}}.bind(this)),this.typeahead.listen('query',function(s,t){this.data.selected_search=1;this.data.selected_type=t;this.logToServer();}.bind(this)),n.listen(r,'search-activator',function(){this.startSession('',{force:true});}.bind(this)),n.listen(r,'graph-search-activator',function(){this.startSession('',{force:true});}.bind(this)),this.typeahead.listen('scroll',function(event){this.data.scrolled=1;}.bind(this)));};q.prototype.updateTypeahead=function(r){'use strict';this.typeahead=r;this.addSubscriptions();};q.prototype.blur=function(r){'use strict';this.blurInProgress=true;this.blurTimeout=h(function(){this.data.session_end_reason=r;if(!this.data.query)this.data.null_state=1;this.logToServer();}.bind(this),o);};q.prototype.startSession=function(r,s){'use strict';s=s||{};if(this.sessionID==null&&(r||s.force)){this.data={};this.keypressed=0;this.sessionID=Math.random().toString();this.data.query=r;this.data.session_start=Date.now();n.invoke('m-typeahead-logger:new-session-id',null,{sessionID:this.sessionID,query:r});}};q.prototype.sessionInProgress=function(){'use strict';if(this.sessionID!==null&&!this.blurInProgress)return true;return false;};q.prototype.logToServer=function(){'use strict';clearTimeout(this.blurTimeout);if(this.sessionID!=null){this.data.sid=this.sessionID;this.data.count_keys_pressed=this.keypressed;this.data.typeahead_type=this.typeahead.getTypeaheadType&&this.typeahead.getTypeaheadType();this.data.candidate_results=this.data.candidate_results||[];if(this.data.candidate_results.length===0)this.data.candidate_results=this.results;this.data.null_state_candidate_results=this.emptyQueryResults;var r=new l(this.uri);r.setMethod('POST').setData({stats:JSON.stringify(this.data)}).send();}this.initialize();};q.prototype.initialize=function(){'use strict';this.data={};this.sessionID=null;this.keypressed=0;this.results=[];this.blurInProgress=false;};f.exports=q;},null);
__d("XLiveController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/sports\/{?query}\/",{date:{type:"Int"},ref:{type:"String"},source:{type:"String"},region_id:{type:"Int"},season:{type:"String"},year:{type:"Int"},fref:{type:"String"},query:{type:"String"},name:{type:"String"},cursor:{type:"String"}});},null);
__d('MTypeaheadNullstateSource',['URI','Stratcom','MTypeaheadTouchSource','XLiveController'],function a(b,c,d,e,f,g,h,i,j,k){var l,m;if(c.__markCompiled)c.__markCompiled();var n='graph-search-entry-point',o='search-recent-queries';l=babelHelpers.inherits(p,j);m=l&&l.prototype;function p(q,r){'use strict';m.constructor.call(this,q,r);i.listen('setCurrentProfileID',n,function(event){if(event.getData().profileID!==this.profileID){this.profileID=event.getData().profileID;this.refresh();}}.bind(this));i.listen('addRecentSearch',o,function(event){var s=event.getData().result;if(s)this.addRecentResult(s);}.bind(this));i.listen('addRecentQuery',o,function(event){var s=event.getData().query;if(s){var t=this.makeRecentResultWithQuery(s);this.addRecentResult(t);}}.bind(this));i.listen('refreshRecent',o,function(){this.refresh();}.bind(this));i.listen('searchRefreshNullstate',null,function(){return this.refresh();}.bind(this));}p.prototype.makeRecentResultWithQuery=function(q){'use strict';return {display:q,name:q,id:q,uri:'/search/top/?q='+q};};p.prototype.addRecentResult=function(q){'use strict';if(q.isTrending)return;q.isRecentSearch=true;var r={},s=0;q.idx=s;r[q.id]=q;for(var t in this._raw)if(t!=q.id){s++;this._raw[t].idx=s;r[t]=this._raw[t];}this._raw=r;};p.prototype.refresh=function(){'use strict';this._raw={};this.sendRequest();};p.prototype.getAuxiliaryData=function(){'use strict';return {profile_id:this.profileID?this.profileID:this.groupID?this.groupID:null,disable_single_state:this.singleStateDisabled===true,enable_scoped:this.scopedEnabled===true};};p.prototype.ondata=function(q){'use strict';m.ondata.call(this,q.nullstate);};p.prototype.matchResults=function(q){'use strict';var r=[];if(q==='')r=Object.keys(this._raw);this.sortHits(q,r);var s=this.renderNodes(q,r);this.invoke('resultsready',s);this.invoke('complete');};p.prototype.setCurrentProfileID=function(q){'use strict';this.profileID=q;};p.prototype.setForceDisableSingleState=function(q){'use strict';this.singleStateDisabled=q;};p.prototype.setEnableScoped=function(q){'use strict';this.scopedEnabled=q;};p.prototype.sortHits=function(q,r){'use strict';r.sort(this.sortingFunction.bind(this));};p.prototype.sortingFunction=function(q,r){'use strict';var s=this._raw[q],t=isNaN(s.idx)?Number.MAX_VALUE:s.idx,u=this._raw[r],v=isNaN(u.idx)?Number.MAX_VALUE:u.idx;return t-v;};p.prototype.getTransformer=function(){'use strict';return function(q){if(q.keyword_type==='trending'){var r=new h('/topic/'+q.id);if(q.isSport)r=k.getURIBuilder().setString('query',String(q.id)).setString('ref','m_search_null_state').getURI();return {id:q.name,display:q.name,name:q.name,uri:r.toString(),topicID:q.id,trendingQueryID:q.trendingQueryID,subtext:q.articleTitle,type:'trending',photo:q.articleImageURI,actionTime:0,isTrending:true,isNullStateSuggestion:true};}if(q.type==='keyword'||q.type==='grammar'){r=new h(q.path||q.uri);return {cost:q.cost,idx:q.idx,display:q.text,name:q.text,type:'keyword',id:q.uid,uri:r.toString(),actionTime:q.action_time,isPYMK:q.pymk,isRecentSearch:q.recent_search,subtext:q.subtext,logInfo:q.logInfo,isNullStateSuggestion:true,isScoped:q.is_scoped};}return {actionTime:q.action_time,name:q.text,uri:q.path||q.uri,id:q.uid||q.id,display:q.name||q.text,photo:q.photo,category:q.category,cost:q.cost,idx:q.idx,tokens:q.tokens,type:q.type[0].toUpperCase()+q.type.slice(1),verticalType:q.vertical_type,is_verified:q.is_verified,subtext:q.subtext,isPYMK:q.pymk,isRecentSearch:q.recent_search,logInfo:q.logInfo,isNullStateSuggestion:true,isScoped:q.is_scoped};};};f.exports=p;},null);
__d('ArtillerySegment',['invariant','performanceAbsoluteNow'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=0;function k(l){'use strict';!l?h(0):void 0;!('category' in l&&'description' in l)?h(0):void 0;this.$ArtillerySegment1=false;this.$ArtillerySegment2=babelHelpers['extends']({},l,{id:(j++).toString(36)});this.$ArtillerySegment3=[];}k.prototype.getID=function(){'use strict';return this.$ArtillerySegment2.id;};k.prototype.begin=function(){'use strict';this.$ArtillerySegment2.begin=i();return this;};k.prototype.end=function(){'use strict';this.$ArtillerySegment2.end=i();return this;};k.prototype.appendChild=function(){'use strict';!!this.$ArtillerySegment1?h(0):void 0;for(var l=arguments.length,m=Array(l),n=0;n<l;n++)m[n]=arguments[n];m.forEach(function(o){this.$ArtillerySegment3.push(o.getID());}.bind(this));return this;};k.prototype.setPosted=function(){'use strict';this.$ArtillerySegment1=true;return this;};k.prototype.getPostData=function(){'use strict';return babelHelpers['extends']({},this.$ArtillerySegment2,{id:this.$ArtillerySegment2.id,children:this.$ArtillerySegment3.slice()});};f.exports=k;},null);
__d('ArtillerySequence',['invariant'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=0;function j(k){'use strict';!k?h(0):void 0;!('description' in k)?h(0):void 0;this.$ArtillerySequence1=false;this.$ArtillerySequence2=babelHelpers['extends']({},k,{id:(i++).toString(36)});this.$ArtillerySequence3=[];}j.prototype.getID=function(){'use strict';return this.$ArtillerySequence2.id;};j.prototype.addSegment=function(){'use strict';!!this.$ArtillerySequence1?h(0):void 0;for(var k=arguments.length,l=Array(k),m=0;m<k;m++)l[m]=arguments[m];l.forEach(function(n){this.$ArtillerySequence3.push(n.getID());}.bind(this));return this;};j.prototype.setPosted=function(){'use strict';this.$ArtillerySequence1=true;return this;};j.prototype.getPostData=function(){'use strict';return babelHelpers['extends']({},this.$ArtillerySequence2,{id:this.$ArtillerySequence2.id,segments:this.$ArtillerySequence3.slice()});};f.exports=j;},null);
__d('ArtilleryTrace',['ArtillerySegment','ArtillerySequence','invariant'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(){'use strict';this.$ArtilleryTrace1=false;this.$ArtilleryTrace3=undefined;this.$ArtilleryTrace4={};this.$ArtilleryTrace5={};this.$ArtilleryTrace6=[];this.$ArtilleryTrace7=[];this.$ArtilleryTrace8={};this.$ArtilleryTrace9=[];this.$ArtilleryTrace10=null;}k.prototype.createSequence=function(l){'use strict';!!this.$ArtilleryTrace1?j(0):void 0;var m=new i(l);this.$ArtilleryTrace6.push(m);return m;};k.prototype.createSegment=function(l){'use strict';!!this.$ArtilleryTrace1?j(0):void 0;var m=new h(l);this.$ArtilleryTrace7.push(m);return m;};k.prototype.markSegment=function(l,m){'use strict';!!this.$ArtilleryTrace1?j(0):void 0;this.$ArtilleryTrace8[m]=l.getID();return this;};k.prototype.connectTrace=function(l,m){'use strict';!!this.$ArtilleryTrace1?j(0):void 0;m=m||this.$ArtilleryTrace2;!m?j(0):void 0;this.$ArtilleryTrace9.push({segment:l.getID(),trace:m});return this;};k.prototype.setID=function(l,m){'use strict';!(!this.$ArtilleryTrace2&&!this.$ArtilleryTrace3)?j(0):void 0;this.$ArtilleryTrace2=l;this.$ArtilleryTrace3=m;return this;};k.prototype.getID=function(){'use strict';return this.$ArtilleryTrace2;};k.prototype.getArtillery2ID=function(){'use strict';return this.$ArtilleryTrace3;};k.prototype.addProperty=function(l,m){'use strict';this.$ArtilleryTrace4[l]=m;return this;};k.prototype.addTagset=function(l,m){'use strict';this.$ArtilleryTrace5[l]=m;return this;};k.prototype.addActivePolicies=function(l){'use strict';this.addTagset('active_policies',l);this.addTagset('policy',l);return this;};k.prototype.getProperty=function(l){'use strict';return this.$ArtilleryTrace4[l];};k.prototype.getTagset=function(l){'use strict';return this.$ArtilleryTrace5[l];};k.prototype.getActivePolicies=function(){'use strict';return this.getTagset('active_policies');};k.prototype.post=function(){'use strict';!!this.$ArtilleryTrace1?j(0):void 0;this.$ArtilleryTrace1=true;var l=this.$ArtilleryTrace10;if(l)l({id:this.$ArtilleryTrace2,artillery2Id:this.$ArtilleryTrace3,properties:this.$ArtilleryTrace4,tagsets:this.$ArtilleryTrace5,sequences:this.$ArtilleryTrace6.map(function(m){return m.setPosted().getPostData();}),segments:this.$ArtilleryTrace7.map(function(m){return m.setPosted().getPostData();}),marks:Object.assign({},this.$ArtilleryTrace8),connections:this.$ArtilleryTrace9.slice()});};k.prototype.setOnPost=function(l){'use strict';!!this.$ArtilleryTrace10?j(0):void 0;this.$ArtilleryTrace10=l;return this;};k.prototype.isPosted=function(){'use strict';return this.$ArtilleryTrace1;};f.exports=k;},null);
__d('ServiceWorkerRegistration',['Promise','ClientServiceWorkerMessage'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j='serviceWorker' in navigator;function k(){var m=navigator.serviceWorker;if(!j||!m)throw new Error('serviceWorker is not supported in this browser');return m;}var l={isSupported:function(){return j;},registerWorkerIfUnregistered:function(m){var n=k();return new h(function(o,p){this.getWorkerRegistration(m).then(function(q){if(!q){n.register(m).then(function(){n.ready.then(o);});}else o(q);});}.bind(this));},unregisterControllingWorker:function(){return new h(function(m,n){var o=new i('unregister',{},m);o.sendViaController();});},getWorkerRegistration:function(m){var n=k();return n.getRegistration(m);}};f.exports=l;},null);
__d('Artillery',['ArtilleryTrace','Banzai','ClientServiceWorkerMessage','Run','ServiceWorkerRegistration','forEachObject','invariant','mixInEventEmitter','performance'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q=false,r=false,s=[],t,u,v,w={},x={},y=false,z=false;function aa(){if(q)return;q=true;i.subscribe(i.SHUTDOWN,function(){ca._postAll();});}function ba(){u=null;t=null;x={};w={};v=null;z=false;}var ca={isEnabled:function(){return r;},createTrace:function(){aa();var da=new h();da.setOnPost(function(ea){ca.emitAndHold('posttrace',ea);});s.push(da);return da;},getPageTrace:function(){!t?n(0):void 0;if(v)return v;var da=ca.createTrace().setID(t,u);m(w,function(ea,fa,ga){da.addProperty(fa,ea);});m(x,function(ea,fa,ga){da.addTagset(fa,ea);});v=da;return da;},setPageProperties:function(da){w=da;},addPageTagset:function(da,ea){if(v==null){x[da]=ea;}else v.addTagset(da,ea);},setActivePolicies:function(da){this.addPageTagset('active_policies',da);this.addPageTagset('policy',da);},getPageActivePolicies:function(){return this.getPageTagset('active_policies');},enableLogServiceWorker:function(){if(l.isSupported())y=true;},getPageProperty:function(da){if(v==null){return w[da];}else return v.getProperty(da);},getPageTagset:function(da){if(v==null){return x[da];}else return v.getTagset(da);},enable:function(){r=true;if(!z){k.onLeave(ba);z=true;}},disable:function(){r=false;},setPageTraceID:function(da,ea){!(!t&&!u)?n(0):void 0;t=da;u=ea;if(y&&p&&p.timing&&p.timing.navigationStart){var fa=new j('asw-sendStartupData',{traceID:u,windowStart:p.timing.navigationStart},null);fa.sendViaController();}},addPiggyback:function(da,ea){if(window.CavalryLogger)window.CavalryLogger.getInstance().addPiggyback(da,ea);},_postAll:function(){s.forEach(function(da){return !da.isPosted()&&da.post();});}};o(ca,{posttrace:true});f.exports=ca;},null);
__d('isEmpty',['invariant'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(k){if(Array.isArray(k)){return k.length===0;}else if(typeof k==='object'){if(k){!(!j(k)||k.size===undefined)?h(0):void 0;for(var l in k)return false;}return true;}else return !k;}function j(k){if(typeof Symbol==='undefined')return false;return k[typeof Symbol==='function'?Symbol.iterator:'@@iterator'];}f.exports=i;},null);
__d('LogHistoryListeners',['Clock','ErrorUtils','LogHistory'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('LogHistory').getInstance('sys');h.addListener(h.ANOMALY,function(k){j.warn('clock_anomaly',h.getSamples());});i.addListener(function(k){j.error('error',JSON.stringify({guard:k.guard,line:k.line,message:k.message,script:k.script,stack:k.stack}));});},null);
__d('ScriptPathLogger',['Banzai','ScriptPath','TimeSpentPageTransitionCause','URI','isInIframe'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m='script_path_change',n={scriptPath:null,categoryToken:null,extraData:{}},o=false,p='imp_id';function q(aa){var ba=k.getNextURI?k.getNextURI():new k(window.location.href),ca=ba.getQueryData(),da=ba.getPath();if(da.endsWith('/'))da=da.substr(0,da.length-1);var ea=r(da,ca);if(ea){aa.content_id=ea;return;}var fa=s(da);if(fa!==''){aa.dest_topic_feed=fa;return;}if(t(da)){var ga=ca.queue_id;if(ga)aa.dest_srt_queue_id=ga;return;}}function r(aa,ba){if(ba.story_fbid)return ba.story_fbid;if(ba.fbid)return ba.fbid;if(ba.view==='permalink'&&ba.id)return ba.id;var ca=/\/(posts|notes|groups\/.*\/permalink)\//,da=/^[0-9]+$/;if(ca.test(aa)){var ea=aa.split('/'),fa=ea[ea.length-1];if(da.test(fa))return fa;}return '';}function s(aa){if(!aa||aa.search('/feed/topics/')==-1)return '';var ba=aa.split('/');return ba[ba.length-1];}function t(aa){return !!aa&&aa.search('/intern/review/')!==-1;}function u(aa,ba,ca,da){if(!o||l())return;var ea=h.isEnabled('vital_navigations'),fa=ea?h.VITAL:h.BASIC;if(ea){da=da||{};da.via_banzai_vital='1';}var ga={source_path:aa.scriptPath,source_token:aa.categoryToken,dest_path:ba.scriptPath,dest_token:ba.categoryToken,impression_id:ba.extraData?ba.extraData.imp_id:null,cause:ca};q(ga);if(da){if(da.snowlift_photo_id){ga.content_id=da.snowlift_photo_id;delete da.snowlift_photo_id;}ga.extra_data=da;}if(aa.scriptPath===null)ga.referrer=document.referrer;var ha=i.getClickPointInfo();if(ha)ga.click_point_info=ha;if(aa.extraData)for(var ia in aa.extraData)if(ia!=p)ga['source_'+ia]=aa.extraData[ia];if(ba.extraData)for(var ja in ba.extraData)if(ja!=p)ga['dest_'+ja]=ba.extraData[ja];if(aa.topViewEndpoint)ga.source_endpoint=aa.topViewEndpoint;if(ba.topViewEndpoint)ga.dest_endpoint=ba.topViewEndpoint;if(aa.restored)ga.source_restored=true;h.post(m,ga,fa);i.setClickPointInfo(null);}function v(){u(i.getSourcePageInfo()||n,i.getPageInfo()||n,j.PAGE_LOAD);}function w(aa,ba,ca){u(aa,ba,j.TRANSITION,ca);}function x(){u(i.getPageInfo()||n,n,j.PAGE_UNLOAD);i.shutdown();}var y=i.subscribe(function(aa){if(o){var ba=aa.source,ca=aa.dest,da=aa.cause,ea=aa.extraData;if(da){u(ba||n,ca||n,da,ea);}else if(ba){w(ba,ca||n,ea);}else v();}});h.subscribe(h.SHUTDOWN,x);var z={startLogging:function(){o=true;if(i.getPageInfo())v();},stopLogging:function(){o=false;y.remove();},BANZAI_LOGGING_ROUTE:m};f.exports=z;},null);