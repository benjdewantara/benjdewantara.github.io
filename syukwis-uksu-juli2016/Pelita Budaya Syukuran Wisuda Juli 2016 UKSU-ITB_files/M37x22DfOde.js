if (self.CavalryLogger) { CavalryLogger.start_js(["9FdZ3"]); }

__d("GroupSellSurface",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={POPOVER_PERMALINK:"popover_permalink",EMAIL:"email",GROUP_MEGAPHONE:"group_megaphone",QUICK_PROMOTION:"quick_promotion",GROUP_MODAL_NUX:"group_modal_nux",GROUP_MALL_YOUR_RECENT_ACTIVITY:"group_mall_your_recent_activity",GROUP_MALL_YOUR_RECENT_ACTIVITY_RHC:"group_mall_your_recent_activity_rhc",GROUP_MALL_YOUR_RECENT_ACTIVITY_FILTER:"group_mall_your_recent_activity_filter",YOUR_POSTS:"your_posts",YOUR_POSTS_RHC:"your_posts_rhc",YOUR_POSTS_PAGE:"your_posts_page",YOUR_POSTS_PAGE_OTHER_GROUPS:"your_posts_page_other_groups",FOR_SALE_HOVERCARD:"for_sale_hovercard",FOR_SALE_CONTEXT_ITEM:"for_sale_context_item",RECOMMENDATION_BADGE:"recommendation_badge",TARGET_USER_FOR_SALE_POSTS:"target_user_for_sale_posts",SELLER_PROFILE:"seller_profile",GROUP_POST_CHEVRON:"group_post_chevron",FEED_POST_CHEVRON:"feed_post_chevron",ADMIN_SETTING_PAGE:"admin_setting_page",SCRIPTS:"scripts",CRT_SCRIPTS:"crt_scripts",TESTS:"tests",DELETE_INTERCEPT:"delete_intercept",INTERN_CONSOLE:"intern_console",GROUP_MALL:"group_mall",BROWSE_CATEGORIES:"browse_categories",CATEGORY_MALL:"category_mall",GROUP_SEARCH:"group_search",GROUP_MALL_SELL_COMPOSER:"group_mall_sell_composer",FORSALE_ISLAND:"forsale_island",CROSS_GROUP_FORSALE_ISLAND:"cross_group_forsale_island",PRODUCT_MALL:"product_mall",MESSAGE_PERMALINK:"permalink",FEED_STORY:"feed_story",GROUP_COMPOSER:"group_composer",UNKNOWN:"unknown",DIRECT_LINK:"direct_link",GROUP_MALL_HEADER_NAV:"group_mall_header_nav",GROUP_MALL_ISLAND_NAV:"island_nav",YOUR_POSTS_ISLAND_NAV:"your_posts_island_nav",MARK_AS_SOLD_REMINDER:"mas_reminder",RIGHT_HAND_COLUMN_CATEGORY_SHOWALL:"rhc_category_showall",YOUR_POSTS_UNSOLD_NOTIFICATION:"your_posts_unsold_notif",RIGHT_HAND_COLUMN:"right_hand_column",SAVED_SEARCH_NOTIF:"saved_search_notif",CLEANER:"group_sell_cleaner",PURPOSE_TRIGGER:"group_sell_purpose_trigger",PURPOSE_BACKFILL:"group_sell_purpose_backfill",HIGH_CONFIDENCE_SALE_SCRIPT:"high_confidence_sale_script",EDIT_GROUP_SETTINGS_DESKTOP:"edit_group_settings_desktop",EDIT_GROUP_SETTINGS_MOBILE:"edit_group_settings_mobile",MAYBE_FOR_SALE_SCRIPT:"maybe_for_sale_script",LANDING_PAGE_BOOKMARK:"landing_page_bookmark",LANDING_PAGE_SUGGESTED_GROUPS:"landing_page_suggested_groups",LANDING_PAGE_SUGGESTED_GROUPS_CARD:"landing_page_suggested_groups_card",LANDING_PAGE_SUGGESTED_GROUPS_MAP:"landing_page_suggested_groups_map",LANDING_PAGE_YOUR_POSTS:"landing_page_your_posts",LANDING_PAGE_YOUR_GROUPS:"landing_page_your_groups",LANDING_PAGE_YOUR_SALES_RHC:"landing_page_your_sales_rhc",LANDING_PAGE_AD:"lp_ad",LANDING_PAGE_MOBILE:"landing_page_mobile",EGO_SGNY:"ego_sgny",GROUPS_BROWSER:"groups_browser",LOW_QUALITY_GROUP_SELL_CLEAN_SCRIPT:"low_quality_group_sell_clean_script",GROUPS_YOU_SHOULD_JOIN:"groups_you_should_join",PRODUCT_DETAIL:"product_detail",MARKETPLACE_YOUR_POSTS:"marketplace_your_posts",MARKETPLACE_UPSELL_DIALOG:"marketplace_upsell_dialog",MARKETPLACE_CROSS_POST_UNSOLD_GROUP:"marketplace_cross_post_unsold_group",AUTO_STRUCTURE_SCRIPT:"auto_structure_script",MARKETPLACE_GALLERY:"marketplace_gallery",MARKETPLACE_GYSJ:"marketplace_gysj",CROSS_GROUP_FEED:"cross_group_feed",BUY_AND_SELL_SEARCH_RESULTS:"buy_and_sell_search_results",XGROUP_ITEMS_FOR_SALE_NOTIFICATION:"xgroup_fs_notif",GROUP_COMMERCE_RN_PDP:"group_commerce_rn_pdp",GROUP_COMMERCE_RN_BOOKMARK:"group_commerce_rn_bookmark",CITY_COMMUNITY:"city_community"};},null);
__d("GroupSellUserActionEvents",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={MARK_AS_SOLD:"mark_as_sold",MARK_AS_AVAILABLE:"mark_as_available",MARK_AS_ARCHIVE:"mark_as_archive",MARK_AS_UNARCHIVE:"mark_as_unarchive",NON_FOR_SALE_MARK_AS_SOLD:"non_for_sale_mark_as_sold",GROUP_POST:"group_post",MARKETPLACE_POST:"marketplace_post",PROFILE_POST:"profile_post",LAUNCH_EDIT:"launch_edit",GROUP_POST_EDIT:"group_post_edit",ADMIN_OPT_IN:"admin_opt_in",ADMIN_OPT_OUT:"admin_opt_out",ADMIN_NOT_FOR_SALE:"admin_not_for_sale",ADMIN_DO_NOT_WANT:"admin_do_not_want",GROUP_CURRENCY_CHANGE:"group_currency_change",OPT_IN_MEGAPHONE_SEEN:"opt_in_megaphone_seen",OPT_IN_NOTIFICATION_SENT:"opt_in_notification_sent",AUTO_OPT_IN_MEGAPHONE_SEEN:"auto_opt_in_megaphone_seen",AUTO_OPTED_IN_MEGAPHONE_SEEN:"auto_opted_in_megaphone_seen",GROUP_PURPOSES_NUX_SEEN:"group_purposes_nux_seen",GROUP_PURPOSE_SELECTED:"group_purpose_selected",GROUP_NON_FOR_SALE_POST:"group_non_for_sale_post",GROUP_MARKED_AS_MAY_BE_FOR_SALE:"group_marked_as_may_be_for_sale",GROUP_CRT_CATEGORIZED_FOR_SALE:"group_crt_categorized_for_sale",GROUP_CRT_CATEGORIZED_FOR_SALE_FAIL:"group_crt_categorized_for_sale_fail",GROUP_ENABLED:"group_enabled",GROUP_DISABLED:"group_disabled",GROUP_NON_FOR_SALE_POST_INTERCEPT_WORDS:"group_non_for_sale_post_intercept_words",GROUP_NON_FOR_SALE_POST_NLU_INTERCEPT:"group_non_for_sale_post_nlu_intercept",GROUP_NON_FOR_SALE_POST_NLU_ATTEMPT:"group_non_for_sale_post_nlu_attempt",GROUP_NON_FOR_SALE_POST_NLU_ERROR:"group_non_for_sale_post_nlu_error",GROUP_NON_FOR_SALE_POST_NLU_TIMEOUT:"group_non_for_sale_post_nlu_timeout",ADMIN_GROUP_PURPOSE_EDIT_DISALLOWED:"admin_group_purpose_edit_disallowed",ADMIN_GROUP_REQUEST_PURPOSE_CHANGE:"admin_group_request_purpose_change",FOR_SALE_POST_APPROVE:"for_sale_post_approve",NON_FOR_SALE_POST_APPROVE:"non_for_sale_post_approve",FOR_SALE_POST_DELETED:"for_sale_post_deleted",NON_FOR_SALE_POST_DELETED:"non_for_sale_post_deleted",GROUP_NON_FOR_SALE_POST_INTERCEPT_CREATED:"group_non_for_sale_post_intercept_created",LAUNCH_MESSAGE_SELLER_DIALOG:"launch_message_seller_dialog",MESSAGE_SELLER:"message_seller",SHARED_TO_GROUP:"shared_to_group",RECENT_ACTIVITY_PAGE_CONTENT:"recent_activity_page_content",RECENT_ACTIVITY_DELETE_ITEM:"recent_activity_delete_item",SAVED_SEARCH_CREATED:"saved_search_created",SAVED_SEARCH_DELETED:"saved_search_deleted",SAVED_SEARCH_NOTIFICATION_SENT:"saved_search_notification_sent",P2P_PLATFORM_CONTEXT_CREATED:"p2p_platform_context_created",INCOMPLETE_POST_SAVED_AS_NON_FOR_SALE:"incomplete_post_saved_as_non_for_sale",GROUP_CROSS_POST_ATTEMPTED:"group_cross_post_attempted",COMPOSER_TOOLTIP_NUX_SEEN:"composer_tooltip_nux_seen",AUTHOR_COMMENT:"author_comment",GROUP_NON_FOR_SALE_POST_INTERCEPT_ATTEMPTED:"group_non_for_sale_post_intercept_attempted",GROUP_NON_FOR_SALE_POST_INTERCEPT_DETECTED:"group_non_for_sale_post_intercept_detected",GROUP_NON_FOR_SALE_POST_INTERCEPT_DECLINED:"group_non_for_sale_post_intercept_declined",GROUP_NON_FOR_SALE_POST_INTERCEPT_ACCEPTED:"group_non_for_sale_post_intercept_accepted",COMPOSER_INTERCEPT_BACKOFF_DECLINE:"composer_intercept_backoff_decline",COMPOSER_INTERCEPT_BACKOFF_ACCEPT:"composer_intercept_backoff_accept",H_SCROLL_STORY_CLICKED:"h_scroll_story_clicked",XGROUP_ITEMS_FOR_SALE_NOTIF_OPT_OUT:"xgroup_fs_notif_opt_out",XGROUP_ITEMS_FOR_SALE_NOTIF_OPT_IN:"xgroup_fs_notif_opt_in",CLIENT_LIKE:"client_like",CLIENT_COMMENT:"client_comment",MARKETPLACE_POST_CREATION_FAIL_SIMILAR_POST:"MARKETPLACE_POST_CREATION_FAIL_SIMILAR_POST",MARKETPLACE_POST_CREATION_FAIL_NO_MARKETPLACE_ID:"marketplace_post_creation_fail_no_marketplace_id",THEME_CARD_SELL_CLICK:"theme_card_sell_click",COMPOSER_ZIP_CODE_AUTO_FILL_SUCCESS:"composer_zip_code_auto_fill_success",COMPOSER_ZIP_CODE_AUTO_FILL_FAILURE:"composer_zip_code_auto_fill_failure",COMPOSER_ZIP_CODE_INVALID_ENTRY:"composer_zip_code_invalid_entry",COMPOSER_ZIP_CODE_NO_INFERRED_COUNTRY:"composer_zip_code_no_inferred_country",COMPOSER_ZIP_CODE_LAT_LONG_NOT_FOUND:"composer_zip_code_lat_long_not_found",COMPOSER_ZIP_CODE_SAVED:"composer_zip_code_saved",COMPOSER_NEIGHBORHOOD_AUTO_FILL_SUCCESS:"composer_neighborhood_auto_fill_success",COMPOSER_NEIGHBORHOOD_AUTO_FILL_FAILURE:"composer_neighborhood_auto_fill_failure",LOCATION_NO_PREDICTED_HOME_CITY:"location_no_predicted_home_city",LOCATION_NO_PREDICTED_ZIPCODE:"location_no_predicted_zipcode",LOCATION_NO_BUY_LOCATION:"location_no_buy_location",LOCATION_NO_SELL_LOCATION:"location_no_sell_location"};},null);
__d("MComposerStoreToInputMap",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={CONFIG:{csid:"csid"},SHARE:{ID:"sid",SHARE_URI:"linkUrl",FEEDBACK_SOURCE:"fs",APP_ID:"appid",INTERNAL_EXTRA:"internal_extra",LINK_NO_CHANGE:"link_no_change"}};},null);
__d("MCompositionFormatFields",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={FORMAT_ID:"format_id",PREVIOUS_FORMAT_ID:"prev_format_id"};},null);
__d("MCompositionFormatID",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={PHOTO:"photo",SLIDESHOW:"slideshow"};},null);
__d("MCompositionMinutiaeFields",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={ACTION_TYPE_ID:"action_type",CUSTOM_ICON_ID:"custom_icon",FBT_PHRASE:"fbt_phrase",ICON:"icon_src",ICON_LEGACY:"icon",OBJECT_ID:"object",OBJECT_NAME:"object_str",SHOW_ATTACHMENT:"show_attachment",SUGGESTION_MECHANISM:"suggestion_mechanism",TRIGGERS_EVENT_TAG_EXPANSION:"triggers_event_tag_expansion",USE_DEFAULT_ICON:"use_default_icon"};},null);
__d("MCompositionPhotoFields",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={PHOTO_INFO_LIST:"photo_info_list"};},null);
__d("MCompositionPlaceFields",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={ADDRESS:"address",FREEFORM_NAME:"FREEFORM_NAME",ID:"id",IS_CURRENT:"is_current",IS_EVENT:"isEventResult",IS_NEW:"new_place",IS_NON_SPECIFIC:"isNonSpecific",JSON_LOCATION:"JSON_LOCATION",LATITUDE:"latitude",LONGITUDE:"longitude",NAME:"name",PHONE:"phone",SUGGESTION_MECHANISM:"suggestion_mechanism",SUGGESTED_OG_ACTION_TYPE_ID:"og_action_type_id",TOPIC_TOKENS:"topic_tokens",WEBSITE:"website",ZIP:"zip"};},null);
__d("MCompositionSlideshowFields",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={IS_VALID:"is_valid"};},null);
__d("MCompositionStatusFields",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={TEXT:"TEXT",LONGEST_LENGTH:"LONGEST_LENGTH"};},null);
__d("MCompositionWithFields",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={TOKENS:"TOKENS"};},null);
__d("PrivacyRemindersLoggingTypes",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={ONLY_ME_IMPRESSION:"only_me_impression",ONLY_ME_CONVERSION:"only_me_conversion",EVERYONE_IMPRESSION:"everyone_impression",EVERYONE_CONVERSION:"everyone_conversion",EVERYONE_TESTS_IMPRESSION:"everyone_tests_impression",EVERYONE_TESTS_CONVERSION:"everyone_tests_conversion",PUBLIC_POSTING_FILTER_NUX_IMPRESSION:"public_posting_filter_nux_impression",PUBLIC_POSTING_FILTER_NUX_CONVERSION:"public_posting_filter_nux_conversion",DELTA_EVERYONE_IMPRESSION:"delta_everyone_impression",DELTA_EVERYONE_CONVERSION:"delta_everyone_conversion",DELTA_EVERYONE_OK_BUTTON_CLICKED:"delta_everyone_ok_button_clicked",DELTA_EVERYONE_CHANGE_BUTTON_CLICKED:"delta_everyone_change_button_clicked"};},null);
__d("UnpublishedContentTypeJSConstants",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={PUBLISHED:0,SCHEDULED:1,DRAFT:2,ADS_POST:3,GLOBAL_CONTENT:4,PREVIEW:5,INLINE_CREATED:6,VALIDATION:7,LOCATION:8,INSTANT_ARTICLE:9};},null);
__d('MReactTypeaheadView',['React'],function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,h.Component);j=i&&i.prototype;k.prototype.render=function(){var l=this.props.Renderer;return (h.createElement(l,{data:this.props.data,query:this.props.query,waiting:this.props.waiting,loaderMarkup:this.props.loaderMarkup,onTouchStart:this.props.onTouchStart,onClickItem:this.props.onClickItem,simpleSearch:this.props.simpleSearch,excludedEntries:this.props.excludedEntries}));};function k(){i.apply(this,arguments);}f.exports=k;},null);
__d('MLoadingSpinner.react',['MLoadingIndicator.react','React'],function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();j=babelHelpers.inherits(l,i.Component);k=j&&j.prototype;l.prototype.render=function(){'use strict';return (i.createElement('div',{className:this.props.className},i.createElement(h,{background:'light',size:'large'})));};function l(){'use strict';j.apply(this,arguments);}f.exports=l;},null);
__d('MTouchableArea.react',['MJSEnvironment','React','joinClasses','cx'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=i.PropTypes,m=h.IS_ANDROID&&h.OS_VERSION<4.1,n=3,o=i.createClass({displayName:'MTouchableArea',propTypes:{onTouchEnd:l.func,onTouchMove:l.func,onTouchStart:l.func},getInitialState:function(){return {touchStartX:0,touchStartY:0,isTouched:false};},handleTouchEnd:function(event){this.setState(this.getInitialState());if(this.props.onTouchEnd)this.props.onTouchEnd(event);},handleTouchMove:function(event){var p=event.nativeEvent.touches[0].screenX-this.state.touchStartX,q=event.nativeEvent.touches[0].screenY-this.state.touchStartY;if(p>n||q>n)this.setState(this.getInitialState());if(this.props.onTouchMove)this.props.onTouchMove(event);},handleTouchStart:function(event){if(m){this.setState({isTouched:true,touchStartX:event.nativeEvent.touches[0].screenX,touchStartY:event.nativeEvent.touches[0].screenY});}else this.setState({isTouched:true});if(this.props.onTouchStart)this.props.onTouchStart(event);},render:function(){var p=i.Children.only(this.props.children);return i.cloneElement(p,{className:j(p.props.className,this.state.isTouched?"touched":''),onTouchEnd:this.handleTouchEnd,onTouchMove:m?this.handleTouchMove:this.props.onTouchMove,onTouchStart:this.handleTouchStart});}});f.exports=o;},null);
__d('MTokenCollection.react',['React'],function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=h.PropTypes;i=babelHelpers.inherits(l,h.Component);j=i&&i.prototype;l.prototype.render=function(){'use strict';var m=this.props.renderer,n=this.props.collection.entries.map(function(o,p){var q=null;return (h.createElement(m,{collectionKey:this.props.collectionKey,entry:o,index:p,key:o.id,label:o.display,onRemove:this.props.onRemove,testid:q,truncate:this.props.truncateTokens}));},this);return (h.createElement('span',{className:this.props.className,onClick:this.props.onClick},n));};function l(){'use strict';i.apply(this,arguments);}l.propTypes={className:k.string,collection:k.object.isRequired,collectionKey:k.string,onClick:k.func,onRemove:k.func,renderer:k.func.isRequired,tokenTestIDGenerator:k.func,truncateTokens:k.bool};f.exports=l;},null);
__d('MTokenRenderer.react',['React','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j){var k,l;if(c.__markCompiled)c.__markCompiled();var m=h.PropTypes;k=babelHelpers.inherits(n,h.Component);l=k&&k.prototype;function n(){var o,p;'use strict';for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return o=(p=l.constructor).call.apply(p,[this].concat(r)),this.$MTokenRenderer1=function(t){t.stopPropagation();t.preventDefault();this.props.onRemove&&this.props.onRemove(this.props.entry);}.bind(this),o;}n.prototype.render=function(){'use strict';if(this.props.onRemove)var o="_5snx"+(this.props.truncate?' '+"_p9m":''),p=h.createElement('a',{href:'#',className:o,'data-sigil':'touchable'},h.createElement('span',{className:"_1xe9",onClick:this.$MTokenRenderer1},'\u00a0\u00d7\u00a0'));var q="_1xea"+(this.props.truncate?' '+"_p9n":''),r=h.createElement('span',{className:q},this.props.label),s="_5snw"+(this.props.truncate?' '+"_p9o":''),t=h.createElement('input',{type:'hidden',value:this.props.entry.id,name:this.props.collectionKey+'['+this.props.index+']'});return h.createElement('span',babelHelpers['extends']({},this.props,{className:j(this.props.className,s)}),r,p,t);};n.propTypes={collectionKey:m.string,entry:m.object,index:m.number,label:m.string.isRequired,onRemove:m.func,testid:m.string,truncate:m.bool};f.exports=n;},null);
__d('MReactTypeahead',['DOM','EventEmitter','MPageController','MReactTypeaheadView','MRecentSearchesUpdater','MSearchConst','MSearchTypeaheadLogger','MSearchTypeaheadPerfLoggerUtil','MTypeaheadNullstateSource','MTypeaheadOnDemandSource','MTypeaheadTouchSource','MTypeaheadTouchSourceWithSuggestions','Parent','React','ReactDOM','Stratcom','TypeaheadCompositeSource','URI','Vector','csx','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba){'use strict';var ca,da;if(c.__markCompiled)c.__markCompiled();var ea=u.PropTypes,fa=10;ca=babelHelpers.inherits(ga,u.Component);da=ca&&ca.prototype;function ga(){var ia,ja;for(var ka=arguments.length,la=Array(ka),ma=0;ma<ka;ma++)la[ma]=arguments[ma];return ia=(ja=da.constructor).call.apply(ja,[this].concat(la)),ha.call(this),ia;}ga.prototype.shouldComponentUpdate=function(ia,ja){if(this.state.resultData!==ja.resultData||this.state.waiting!==ja.waiting)return true;var ka=ia.excludedEntries,la=this.props.excludedEntries;for(var ma in ka)if(ka[ma]!==la[ma])return true;for(var na in la)if(la[na]!==ka[na])return true;return false;};ga.prototype.componentDidMount=function(){this.refs.input.type="search";};ga.prototype.componentWillUpdate=function(){this.$MReactTypeahead4('render_start');};ga.prototype.componentDidUpdate=function(ia,ja){this.props.onUpdate&&this.props.onUpdate();this.$MReactTypeahead4('rendered');};ga.prototype.render=function(){var ia=this.props.showClearButton&&this.state.query,ja=this.props.typeaheadRootClassName||"_5fn4",ka=u.createElement('input',{type:'search',ref:'input',className:'input',autoCorrect:'off',autoComplete:'off',autoCapitalize:'off',name:'query',placeholder:this.props.placeholder,onBlur:this.props.onBlur,onKeyUp:this.onKeyUp,onKeyDown:this.props.onKeyDown,onFocus:this.$MReactTypeahead7,onChange:this.inputChanged});if(this.props.typeaheadConfig.submitOnEnter)ka=u.createElement('form',{ref:'searchForm',action:'/search',className:"_4e7a",onSubmit:this.onSearchFormSubmit},ka,u.createElement('input',{type:'hidden',name:'source',value:'typeahead'}));var la="_5fn6 touchable";if(this.props.useStandardClearButton)la="_5fn6 touchable mClearButton";var ma=this.props.hideSelected?this.$MReactTypeahead5(this.state.resultData):this.state.resultData;return (u.createElement('div',{className:this.props.className},u.createElement('div',{className:ja},u.createElement('div',{className:"_5fn5"},ka,u.createElement('div',{className:la,'data-sigil':'touchable',style:{display:ia?'':'none'},onMouseDown:this.onClearButtonEvent,onTouchStart:this.onClearButtonEvent},u.createElement('div',null,'Ã—')))),u.createElement(k,{ref:'results',Renderer:this.props.presenter.ViewRenderer,data:ma,excludedEntries:this.props.excludedEntries,query:this.state.query,waiting:this.state.waiting,loaderMarkup:this.props.typeaheadConfig.loaderMarkup,onTouchStart:this.props.onTouchStart,simpleSearch:this.props.simpleSearch,onClickItem:this.$MReactTypeahead8})));};ga.prototype.componentWillUnmount=function(){for(var ia=0;ia<this.$MReactTypeahead2.length;++ia)this.$MReactTypeahead2[ia].remove();this.$MReactTypeahead2=null;};ga.propTypes={onClickItem:ea.func,onBlur:ea.func,onKeyUp:ea.func,onKeyDown:ea.func,onTouchStart:ea.func,placeholder:ea.string,presenter:ea.object.isRequired,showClearButton:ea.bool,typeaheadConfig:ea.object.isRequired,excludedEntries:ea.object,getTypeaheadOnDemandSource:ea.func,getTypeaheadTouchSource:ea.func,getTypeaheadCompositeSource:ea.func,getTypeaheadNullstateSource:ea.func,onFocus:ea.func,simpleSearch:ea.bool,suggestions:ea.array,hideSelected:ea.bool,maxSuggestionCount:ea.number};var ha=function(){this.state={resultData:[],query:null,waiting:false};this.$MReactTypeahead1=null;this.$MReactTypeahead2=null;this.$MReactTypeahead3=null;this.listen=function(ia,ja){this.$MReactTypeahead3=this.$MReactTypeahead3||new i();return this.$MReactTypeahead3.addListener(ia,ja.bind(this));}.bind(this);this.$MReactTypeahead4=function(ia,ja){this.$MReactTypeahead3&&this.$MReactTypeahead3.emit.apply(this.$MReactTypeahead3,[ia].concat(ja));}.bind(this);this.waitForResults=function(){this.setState({waiting:true});}.bind(this);this.showResults=function(ia){if(this.props.hideSelected)ia=this.$MReactTypeahead5(ia);ia.forEach(function(ja){ja.uri=new y(ja.uri).addQueryData('refid',m.refid);return ja;});this.setState({resultData:ia,waiting:true},this.$MReactTypeahead6);this.$MReactTypeahead4('show',[ia]);}.bind(this);this.$MReactTypeahead5=function(ia){var ja=this.props.excludedEntries;if(ja)return ia.filter(function(ka){return !ja[ka.id];});return ia;}.bind(this);this.$MReactTypeahead6=function(){if(this.state.query==null)this.setState({waiting:false});}.bind(this);this.complete=function(){this.setState({waiting:false});}.bind(this);this.reset=function(){v.findDOMNode(this.refs.input).value='';this.query('',true);}.bind(this);this.query=function(ia,ja){ja=ja||false;if(ja||this.state.query!==ia){this.$MReactTypeahead4('update',[ia]);this.$MReactTypeahead4('change',[ia]);this.setState({query:ia});}}.bind(this);this.inputChanged=function(){if(v.findDOMNode(this.refs.input).value==='')this.query('');}.bind(this);this.onSearchFormSubmit=function(event){event.preventDefault();var ia=v.findDOMNode(this.refs.input),ja=ia.value;this.$MReactTypeahead4('query',[this.state.resultData]);var ka=new y('/search/?query').addQueryData('query',ja).toString();j.load(ka);}.bind(this);this.setInputValue=function(ia){if(ia)v.findDOMNode(this.refs.input).value=ia;}.bind(this);this.onKeyUp=function(event){var ia=this.getInputValue();this.query(ia);this.props.onKeyUp&&this.props.onKeyUp(event);}.bind(this);this.onClearButtonEvent=function(event){event.preventDefault();this.reset();this.focusInput();}.bind(this);this.getInputValue=function(){return v.findDOMNode(this.refs.input).value;}.bind(this);this.getInputNode=function(){return v.findDOMNode(this.refs.input);}.bind(this);this.getValue=function(){return this.getInputValue();}.bind(this);this.focusInput=function(){v.findDOMNode(this.refs.input).focus();}.bind(this);this.blurInput=function(){v.findDOMNode(this.refs.input).blur();}.bind(this);this.$MReactTypeahead8=function(event,ia,ja){this.reset();this.props.onClickItem&&this.props.onClickItem(event,ia,ja);this.$MReactTypeahead4('select',[t.bySelector(event.target,"._5fna")]);this.$MReactTypeahead4('result-selected',[ia]);this.forceUpdate();}.bind(this);this.getDisplayedHeight=function(){var ia=v.findDOMNode(this.refs.results),ja=z.getPos(ia).y;return z.getDim(ia).y+ja;}.bind(this);this.getDatasource=function(){return this.$MReactTypeahead1;}.bind(this);this.$MReactTypeahead9=function(ia){if(this.$MReactTypeahead1)this.$MReactTypeahead1.unbindFromTypeahead(this);this.$MReactTypeahead1=ia;if(!this.$MReactTypeahead1)return;this.$MReactTypeahead2=[ia.listen('waiting',this.waitForResults),ia.listen('resultsready',this.showResults),ia.listen('complete',this.complete)];ia.bindToTypeahead(this);}.bind(this);this.configureDatasource=function(ia){if(this.$MReactTypeahead1)return;var ja=this.props.typeaheadConfig.sources,ka=[],la=new y(ja.bootstrapped.src);if(this.props.includeFamilyTags){var ma=la.getQueryData();ma.filter.push('family_tags');la.setQueryData(ma);}var na=this.getTypeaheadTouchSource(la.toString(),ja.bootstrapped.source_key,this.props.suggestions);na.setShowSecondaryAction(true);na.reactRendered=true;this.touchSource=na;ka.push(na);if(ja.nullstate){this.nullstateDataSource=this.getTypeaheadNullstateSource(ja.nullstate.src);this.nullstateDataSource.setMaximumResultCount(ja.nullstate.max_results);this.nullstateDataSource.setShowSecondaryAction(true);this.nullstateDataSource.reactRendered=true;ka.push(this.nullstateDataSource);}na=this.getTypeaheadOnDemandSource(ja.online.src);na.setMaximumResultCount(ja.online.max_results);na.setEnableImmediateReturnOfCachedResults(ja.online.enable_caching);if(ia){if(ia.enableQueryThrottle)na.setThrottleSendRequest(ia.queryThrottleTime);na.setMaxResults(ia.maxResults);na.setEnableEagerSendRequest(ia.enableEagerSendRequest);na.setQueryDelay(ia.queryWaitTime);}na.setShowSecondaryAction(true);na.reactRendered=true;ka.push(na);var oa=this.getTypeaheadCompositeSource(ka);if(this.props.typeaheadConfig.excludeids)this.props.typeaheadConfig.excludeids.forEach(function(pa){oa.addExcludeID(pa);});oa.reactRendered=true;oa.mergeKey='id';this.$MReactTypeahead9(oa);this.$MReactTypeahead4('start');}.bind(this);this.cleanup=function(){this.$MReactTypeahead9(null);}.bind(this);this.configureMSideNavMarauderLogger=function(){if(!this.props.typeaheadConfig.mSideNavMarauderLogger||this.$MReactTypeahead10)return;this.props.typeaheadConfig.mSideNavMarauderLogger.setupTypeaheadListener(this);this.$MReactTypeahead10=true;}.bind(this);this.configureMRecentSearchesUpdater=function(){if(this.props.typeaheadConfig.hasRecentSearches)new l(this);}.bind(this);this.configureMSearchTypeaheadLogger=function(){if(this.$MReactTypeahead11)return;w.listen('m-typeahead-logger:new-session-id',null,this.addSessionIDToSearch);var ia='/search/metrics.php',ja=new n(this,ia);this.$MReactTypeahead11=true;w.listen('log-m-search-session-end',null,function(ka){ja.blur(ka.getData().reason);});}.bind(this);this.configureMSearchTypeaheadPerfLogger=function(){if(!this.props.typeaheadConfig.typeaheadScubaInfo||this.$MReactTypeahead12)return;o.getNewMSearchTypeaheadPerfLogger(this,this.props.typeaheadConfig.typeaheadScubaInfo,this.props.typeaheadConfig.sources.online.enable_caching);this.$MReactTypeahead12=true;}.bind(this);this.addSessionIDToSearch=function(ia){if(!this.refs||!this.refs.searchForm)return;var ja=v.findDOMNode(this.refs.searchForm),ka=h.scry(ja,'input','search-typeahead-session-id')[0];if(!ka){ka=document.createElement('input');ka.type='hidden';ka.name='tsid';ja.appendChild(ka);w.addSigil(ka,'search-typeahead-session-id');}ka.value=ia.getData().sessionID;}.bind(this);this.getTypeaheadCompositeSource=function(ia){if(this.props.getTypeaheadCompositeSource)return this.props.getTypeaheadCompositeSource(ia);return new x(ia);}.bind(this);this.getTypeaheadOnDemandSource=function(ia){if(this.props.getTypeaheadOnDemandSource)return this.props.getTypeaheadOnDemandSource(ia);return new q(ia);}.bind(this);this.getTypeaheadTouchSource=function(ia,ja,ka){if(this.props.getTypeaheadTouchSource)return this.props.getTypeaheadTouchSource(ia,ja);if(ka){var la=new s(ia,ja,ka);if(this.props.maxSuggestionCount){la.setMaximumResultCount(this.props.maxSuggestionCount);}else la.setMaximumResultCount(fa);return la;}return new r(ia,ja);}.bind(this);this.getTypeaheadNullstateSource=function(ia){if(this.props.getTypeaheadNullstateSource)return this.props.getTypeaheadNullstateSource(ia);return new p(ia);}.bind(this);this.getTypeaheadType=function(){var ia='m_side_nav';if(this.props.simpleSearch){ia+='_simple';}else ia+='_gsv2';return ia;}.bind(this);this.updateSuggestionsIds=function(ia){if(this.touchSource)this.touchSource.setSuggestionsIds(ia);if(v.findDOMNode(this.refs.input).value==='')this.reset();}.bind(this);this.$MReactTypeahead7=function(){this.props.onFocus&&this.props.onFocus();this.query(this.getInputValue());}.bind(this);};f.exports=ga;},null);
__d('MTaggerResultsRow.react',['React','cx','MXUILayout.react','MXUIDiv.react','MXUILayoutColumn.react','MXUILayoutFillColumn.react'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';var n,o;if(c.__markCompiled)c.__markCompiled();var p=h.PropTypes;n=babelHelpers.inherits(q,h.Component);o=n&&n.prototype;function q(){var r,s;for(var t=arguments.length,u=Array(t),v=0;v<t;v++)u[v]=arguments[v];return r=(s=o.constructor).call.apply(s,[this].concat(u)),this.state={checked:false},this.$MTaggerResultsRow1=function(){return (h.createElement('div',{className:"_5rmb",style:{backgroundImage:'url('+this.props.data.photo+')'}}));}.bind(this),this.$MTaggerResultsRow2=function(){var w=this.props.data,x=w.subtext;if(!x)return null;return (h.createElement('span',{className:"_5rmc"},x));}.bind(this),this.$MTaggerResultsRow3=function(event){this.setState({checked:!this.state.checked});this.props.onClickItem&&this.props.onClickItem(event,this.props.data,this.props.checked);}.bind(this),r;}q.prototype.render=function(){var r=this.props.data,s=this.props.checked?"_5tbv":'';return h.createElement(k,{'aria-checked':this.state.checked,className:"_5rmd",onClick:this.$MTaggerResultsRow3,role:'checkbox'},h.createElement(j,null,h.createElement(l,{key:'profile_image'},this.$MTaggerResultsRow1()),h.createElement(m,{alignself:'center',className:"_5rme",key:'display_name'},h.createElement('div',null,h.createElement('div',{className:"_5rmf"},r.display||r.name),this.$MTaggerResultsRow2())),h.createElement(l,{key:'check_mark'},h.createElement('div',{className:"_5tbx"},h.createElement('div',{className:s})))));};q.propTypes={data:p.object,onClickItem:p.func};f.exports=q;},null);
__d('MTaggerTypeaheadPresenter.react',['MTaggerResultsRow.react','React','cx'],function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;if(c.__markCompiled)c.__markCompiled();var m=i.PropTypes,n=30;k=babelHelpers.inherits(o,i.Component);l=k&&k.prototype;o.prototype.render=function(){var q=this.props.data.slice(0,n).map(function(r){var s=false;if(this.props.excludedEntries)s=!!this.props.excludedEntries[r.id];return (i.createElement(h,{key:r.id,data:r,onClickItem:this.props.onClickItem,checked:s}));},this);return (i.createElement('div',{className:"_53na",onTouchStart:this.props.onTouchStart},q));};function o(){k.apply(this,arguments);}o.propTypes={query:m.string,data:m.array,onClickItem:m.func,onTouchStart:m.func,excludedEntries:m.object};var p={ViewRenderer:o};f.exports=p;},null);
__d("TokenCollection",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(){"use strict";this.entries=[];}h.prototype.addEntry=function(i){"use strict";if(!this.hasEntry(i))this.entries.push(i);return this;};h.prototype.removeEntry=function(i){"use strict";if(this.hasEntry(i)){var j=0;while(j<this.entries.length){if(this.entries[j].id===i.id)break;j++;}this.entries.splice(j,1);}return this;};h.prototype.hasEntry=function(i){"use strict";var j=i.id;return this.entries.some(function(k){return k.id===j;});};h.prototype.shallowClone=function(){"use strict";var i=new h();i.entries=this.entries.slice(0);return i;};f.exports=h;},null);
__d('MTokenizer.react',['React','ReactComponentRenderer','MReactTypeahead','MTaggerTypeaheadPresenter.react','MTokenCollection.react','MTokenRenderer.react','TokenCollection','MViewport','Vector','Keys','MLegacyDataStore','cx','fbt','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){var v,w;if(c.__markCompiled)c.__markCompiled();var x=h.PropTypes;v=babelHelpers.inherits(y,h.Component);w=v&&v.prototype;function y(){var z,aa;'use strict';for(var ba=arguments.length,ca=Array(ba),da=0;da<ba;da++)ca[da]=arguments[da];return z=(aa=w.constructor).call.apply(aa,[this].concat(ca)),this.state={focus:false},this.init=function(){this.initWithoutFocus();this.refs.typeahead.focusInput();}.bind(this),this.initWithoutFocus=function(){this.refs.typeahead.configureDatasource();this.forceUpdate();this.refs.typeahead.reset();}.bind(this),this.cleanup=function(){this.refs.typeahead.cleanup();}.bind(this),this.updateTypeahead=function(){this.forceUpdate();}.bind(this),this.onRemoveFromCollection=function(ea){this.$MTokenizer1.removeEntry(ea);this.props.onRemove&&this.props.onRemove(ea);this.forceUpdate();}.bind(this),this.$MTokenizer3=function(ea){if(!this.state.focus){ea.preventDefault();this.refs.typeahead.focusInput();this.setState({focus:true});}}.bind(this),this.$MTokenizer7=function(){if(this.$MTokenizer2===null)this.$MTokenizer2=o.getScrollTop();}.bind(this),this.$MTokenizer8=function(){if(this.$MTokenizer2!==null)o.scrollTo(0,this.$MTokenizer2);this.$MTokenizer2=null;}.bind(this),this.$MTokenizer5=function(event){if(this.props.scrollToTypeahead){this.$MTokenizer7();var ea=this.refs.typeahead.getInputNode(),fa=p.getPos(ea).y;o.scrollTo(0,fa);}if(event.nativeEvent.keyCode===q.BACKSPACE)this.$MTokenizer9();}.bind(this),this.$MTokenizer4=function(){if(this.props.scrollToTypeahead)this.$MTokenizer8();this.props.onInputBlur&&this.props.onInputBlur();if(this.state.focus)this.setState({focus:false});}.bind(this),this.$MTokenizer6=function(event,ea,fa){if(fa){this.onRemoveFromCollection(ea);}else{this.$MTokenizer1.addEntry(ea);this.props.onAdd&&this.props.onAdd(ea);}if(this.props.hideSelected)setTimeout(function(){this.refs.typeahead.focusInput();}.bind(this),0);event.stopPropagation();this.forceUpdate();}.bind(this),this.getEntries=function(){return this.$MTokenizer1.entries;}.bind(this),this.setEntries=function(ea){this.$MTokenizer1.entries=ea;}.bind(this),this.$MTokenizer9=function(){var ea=this.getEntries();if(ea&&ea.length&&!this.refs.typeahead.getInputValue())this.$MTokenizer1.removeEntry(ea[ea.length-1]);this.forceUpdate();}.bind(this),this.updateSuggestionsIds=function(ea){this.init();this.updateTypeaheadWithSuggestions(ea);}.bind(this),this.updateTypeaheadWithSuggestions=function(ea){this.refs.typeahead.updateSuggestionsIds(ea);}.bind(this),this.focusAndUpdateSuggestionsIDs=function(ea){this.refs.typeahead.updateSuggestionsIds(ea);this.refs.typeahead.focusInput();}.bind(this),z;}y.prototype.componentWillMount=function(){'use strict';this.$MTokenizer1=new n();this.$MTokenizer2=null;};y.prototype.render=function(){'use strict';var z=this.$MTokenizer1.entries||[],aa={},ba=z&&z.length>0;if(ba)for(var ca=0;ca<z.length;++ca)aa[z[ca].id]=true;if(this.props.excludedEntries)for(var da in this.props.excludedEntries)aa[da]=this.props.excludedEntries[da];var ea=ba?null:this.props.placeholder;return h.createElement('div',babelHelpers['extends']({},this.props,{className:u(this.props.className,"_5snt"),onClick:this.$MTokenizer3}),h.createElement(l,{ref:'collection',collection:this.$MTokenizer1,collectionKey:this.props.collectionKey,renderer:m,onRemove:this.onRemoveFromCollection}),h.createElement(j,{ref:'typeahead',className:"_5snu",typeaheadRootClassName:"_5snv",excludedEntries:aa,placeholder:ea,presenter:this.props.presenter,typeaheadConfig:this.props.typeaheadConfig,includeFamilyTags:this.props.includeFamilyTags,onBlur:this.$MTokenizer4,onKeyDown:this.$MTokenizer5,onClickItem:this.$MTokenizer6,suggestions:this.props.suggestions,hideSelected:this.props.hideSelected,maxSuggestionCount:this.props.maxSuggestionCount}));};y.propTypes={placeholder:x.string,typeaheadConfig:x.object.isRequired,presenter:x.object.isRequired,excludedEntries:x.object,collectionKey:x.string,onInputBlur:x.func,includeFamilyTags:x.bool,hideSelected:x.bool,onAdd:x.func,onRemove:x.func,maxSuggestionCount:x.number,scrollToTypeahead:x.bool};y.init=function(z){var aa=t._("Start typing a name..."),ba=r.get(z.container);ba.tokenizer=new i(y,z.container);ba.tokenizer.setProps({placeholder:aa,presenter:k,typeaheadConfig:z.typeaheadConfig,suggestions:z.suggestions,hideSelected:z.hideselected,collectionKey:z.collectionKey});ba.tokenizer.component.init();};f.exports=y;},null);
__d('MCompositionFormatStore',['MCompositionStore','MCompositionFormatFields','MCompositionFormatID','MCompositionStoreID','emptyFunction','invariant','MCompositionConstants'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=c('MCompositionConstants').ActionTypes;function o(q){if(q){var r=q[i.FORMAT_ID];!(Object.values(j).indexOf(r)!==-1)?m(0):void 0;var s=p.get(i.FORMAT_ID,null);q[i.PREVIOUS_FORMAT_ID]=s;}return q;}var p=new h(k.FORMAT,i).setRequiredFields(i.FORMAT_ID).setHandlerFor(n.COMPOSITION_FINALIZE,l.thatReturnsNull).setHandlerFor(n.COMPOSITION_INITIALIZE,o).setHandlerFor(n.FORMAT_CHANGE,o).register();f.exports=p;},null);
__d('MCompositionMinutiaeStore',['MCompositionStore','MCompositionMinutiaeFields','MCompositionStoreID','emptyFunction','MCompositionConstants'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=c('MCompositionConstants').ActionTypes,m=new h(j.MINUTIAE,i).setRequiredFields(i.ACTION_TYPE_ID,i.ICON,i.ICON_LEGACY,i.OBJECT_ID,i.OBJECT_NAME).setHandlerFor(l.COMPOSITION_FINALIZE,k.thatReturnsNull).setHandlerFor(l.COMPOSITION_INITIALIZE,k.thatReturnsArgument).setHandlerFor(l.MINUTIAE_REMOVE,k.thatReturnsNull).setHandlerFor(l.MINUTIAE_SET,k.thatReturnsArgument).register();f.exports=m;},null);
__d('MCompositionPhotoStore',['MCompositionStore','MCompositionPhotoFields','MCompositionStoreID','emptyFunction','MCompositionConstants'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=c('MCompositionConstants').ActionTypes,m=new h(j.PHOTO,i).setMutable(true).setHandlerFor(l.COMPOSITION_FINALIZE,k.thatReturnsNull).setHandlerFor(l.COMPOSITION_INITIALIZE,k.thatReturnsArgument).setHandlerFor(l.PHOTO_CHANGE,k.thatReturnsArgument).register();f.exports=m;},null);
__d('MCompositionPlaceStore',['FBJSON','MCompositionStore','MCompositionConfigStore','MCompositionDispatcher','MCompositionPlaceFields','MCompositionStoreID','MPlaces','emptyFunction','MCompositionConstants'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p=c('MCompositionConstants').ActionTypes,q=new i(m.PLACE,l).setRequiredFields(l.NAME).setHandlerFor(p.COMPOSITION_INITIALIZE,function(r){k.waitFor([j.toUpdate()]);return r;}).setHandlerFor(p.PLACE_REMOVE,o.thatReturnsNull).setHandlerFor(p.PLACE_SET,function(r){var s=r[l.LATITUDE],t=r[l.LONGITUDE];if(s&&t){r[l.JSON_LOCATION]=h.stringify({latitude:s,longitude:t});}else r[l.JSON_LOCATION]=n.getCurrentJSONLocation();return r;}).register();f.exports=q;},null);
__d('MCompositionShareStore',['MCompositionStore','MCompositionShareFields','MCompositionStoreID','emptyFunction','MCompositionConstants'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=c('MCompositionConstants').ActionTypes,m=new h(j.SHARE,i).setHandlerFor(l.COMPOSITION_FINALIZE,k.thatReturnsNull).setHandlerFor(l.COMPOSITION_INITIALIZE,k.thatReturnsArgument).setHandlerFor(l.SHARE_LINK_UPDATE,function(n){return babelHelpers['extends']({},m.getAll(),n);}).setHandlerFor(l.SHARE_REMOVE_PREVIEW,function(n){n=n||{};var o=i.DISABLED_LINKS,p=m.getAll(),q={};q[o]=babelHelpers['extends']({},p[o],n[o]);q[i.SHARE_URI]=null;q[i.LINK_NO_CHANGE]=false;return babelHelpers['extends']({},p,q);}).register();f.exports=m;},null);
__d('MCompositionSlideshowStore',['MMultiPhotoUploaderAttachmentState','MCompositionDispatcher','MCompositionStore','MCompositionSlideshowFields','MCompositionPhotoStore','MCompositionPhotoFields','MCompositionStoreID','SlideshowConstants','emptyFunction','MCompositionConstants'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q=c('MCompositionConstants').ActionTypes;function r(t){i.waitFor([l.toUpdate()]);var u=l.get(m.PHOTO_INFO_LIST,null),v=s.getAll(),w={};w[k.IS_VALID]=Boolean(u&&u.length>=o.min_photo_num&&u.length<=o.max_photo_num&&u.filter(function(x){return x.state!==h.UPLOADED;}).length===0);return babelHelpers['extends']({},v,w);}var s=new j(n.SLIDESHOW,k).setRequiredFields(k.IS_VALID).setHandlerFor(q.COMPOSITION_FINALIZE,p.thatReturnsNull).setHandlerFor(q.COMPOSITION_INITIALIZE,r).setHandlerFor(q.PHOTO_CHANGE,r).register();f.exports=s;},null);
__d('MCompositionStatusStore',['MCompositionStore','MCompositionStatusFields','MCompositionStoreID','emptyFunction','MCompositionConstants'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=c('MCompositionConstants').ActionTypes;function m(o){o=o||{};if(!o.hasOwnProperty(i.TEXT))o[i.TEXT]='';o[i.LONGEST_LENGTH]=Math.max(n.get(i.LONGEST_LENGTH,0),o[i.TEXT].length);return o;}var n=new h(j.STATUS,i).setRequiredFields(i.LONGEST_LENGTH,i.TEXT).setHandlerFor(l.COMPOSITION_FINALIZE,k.thatReturnsNull).setHandlerFor(l.COMPOSITION_INITIALIZE,m).setHandlerFor(l.STATUS_CHANGE,m).register();f.exports=n;},null);
__d('MCompositionWithStore',['MCompositionStore','MCompositionWithFields','MCompositionStoreID','emptyFunction','MCompositionConstants'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=c('MCompositionConstants').ActionTypes,m=new h(j.WITH_TAGS,i).setMutable(true).setHandlerFor(l.COMPOSITION_FINALIZE,k.thatReturnsNull).setHandlerFor(l.COMPOSITION_INITIALIZE,k.thatReturnsArgument).setHandlerFor(l.WITH_CHANGE,k.thatReturnsArgument).register();f.exports=m;},null);
__d('MTaggableActivityPreviewTemplate',['invariant'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j,k){'use strict';this.$MTaggableActivityPreviewTemplate1=j;this.$MTaggableActivityPreviewTemplate2=k;}i.prototype.getTemplateArray=function(){'use strict';var j=0,k=this.$MTaggableActivityPreviewTemplate2.length,l,m=[];for(var n=0;n<=this.$MTaggableActivityPreviewTemplate2.length;n++){l=n!==k?this.$MTaggableActivityPreviewTemplate2[n].position:this.$MTaggableActivityPreviewTemplate1.length;m.push(this.$MTaggableActivityPreviewTemplate1.slice(j,l));j=l;}return m;};i.prototype.getTokens=function(){'use strict';return this.$MTaggableActivityPreviewTemplate2;};i.prototype.renderArray=function(j){'use strict';!(this.$MTaggableActivityPreviewTemplate2.length===j.length)?h(0):void 0;var k=this.getTemplateArray().concat();for(var l=j.length;l>0;l--)k.splice(l,0,j[l-1]);return k;};f.exports=i;},null);
__d("XTaggableActivityPreviewTemplateQueryController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/composer\/intl\/preview_template\/",{action_type_id:{type:"Int",required:true}});},null);
__d('MTaggableActivityPreviewTemplateQuery',['Promise','MTaggableActivityPreviewTemplateConstants','ErrorUtils','MCache','MTaggableActivityPreviewTemplate','MRequest','XTaggableActivityPreviewTemplateQueryController','invariant'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p=i.TOKEN_TYPES,q=1209600000,r='__created_at';function s(u){return j.applyWithGuard(u,null,null,null,'MTaggableActivityPreviewTemplate');}function t(u){'use strict';this.$MTaggableActivityPreviewTemplateQuery1=u;this.$MTaggableActivityPreviewTemplateQuery2={has_place_type:'',has_users_type:''};}t.prototype.$MTaggableActivityPreviewTemplateQuery3=function(u){'use strict';u[r]=Date.now();s(function(){return k.setItem(this.getCacheKey(),u);}.bind(this));return this.$MTaggableActivityPreviewTemplateQuery4(u);};t.prototype.$MTaggableActivityPreviewTemplateQuery4=function(u){'use strict';var v=u[this.$MTaggableActivityPreviewTemplateQuery5()];!v?o(0):void 0;return new l(v.string,v.tokens);};t.prototype.getCacheKey=function(){'use strict';return [i.CACHE_PREFIX,i.VERSION,this.$MTaggableActivityPreviewTemplateQuery1,i.LOCALE,i.GENDER].join('_');};t.prototype.$MTaggableActivityPreviewTemplateQuery6=function(){'use strict';var u=this.getCacheKey(),v=s(function(){return k.getItem(u);});if(!v)return null;if(Date.now()-v[r]>q){s(function(){return k.removeItem(u);});return null;}return this.$MTaggableActivityPreviewTemplateQuery4(v);};t.prototype.$MTaggableActivityPreviewTemplateQuery5=function(){'use strict';return i.KEY_PREFIX+'_'+Object.keys(this.$MTaggableActivityPreviewTemplateQuery2).sort().map(function(u){return this.$MTaggableActivityPreviewTemplateQuery2[u];}.bind(this)).join('_');};t.prototype.getURI=function(){'use strict';return n.getURIBuilder().setInt('action_type_id',this.$MTaggableActivityPreviewTemplateQuery1).getURI();};t.prototype.fetch=function(){'use strict';var u=this.$MTaggableActivityPreviewTemplateQuery6();return u?h.resolve(u):this.$MTaggableActivityPreviewTemplateQuery7();};t.prototype.$MTaggableActivityPreviewTemplateQuery7=function(){'use strict';return new h(function(u){var v=new m(this.getURI()).setMethod('GET');v.listen('done',function(w){u(this.$MTaggableActivityPreviewTemplateQuery3(w.payload.templates));}.bind(this));v.send();}.bind(this));};t.prototype.setHasPeople=function(){'use strict';this.$MTaggableActivityPreviewTemplateQuery2.has_users_type=p.PEOPLE.MULTIPLE;return this;};t.prototype.setHasPerson=function(){'use strict';this.$MTaggableActivityPreviewTemplateQuery2.has_users_type=p.PEOPLE.SINGLE;return this;};t.prototype.setHasPlace=function(){'use strict';this.$MTaggableActivityPreviewTemplateQuery2.has_place_type=p.PLACE.SPECIFIC;return this;};f.exports=t;},null);
__d('MComposerLoggerPublishingListeners',['MComposerLogger','MComposerWaterfallEvent'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(k,l){'use strict';this.error=this.fail=function(){h.logWithSessionID(i.COMPOSER_POST_FAILURE,k,l);};this.done=function(){h.logWithSessionID(i.COMPOSER_POST_SUCCESS,k,l);};}f.exports=j;},null);
__d('MComposerNavigationMixin',['MComposerNavigation','invariant'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={__navigationPolicy:null,currentNavigationPolicy:function(){!this.hasNavigationPolicy()?i(0):void 0;return this.__navigationPolicy;},hasNavigationPolicy:function(){return !!this.__navigationPolicy;},newNavigationPolicy:function(){!!this.hasNavigationPolicy()?i(0):void 0;this.__navigationPolicy=h.newPolicy().addOnClose(function(){return this.__navigationPolicy=null;}.bind(this));return this.__navigationPolicy;},cleanupSoftState:function(){h.cleanupSoftState();}};f.exports=j;},null);
__d('MAlbumPicker',['CSS','MLegacyDataStore','DOM','MComposerNavigationMixin','Stratcom','$','eventsMixinDeprecated','mixin'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p,q;if(c.__markCompiled)c.__markCompiled();p=babelHelpers.inherits(r,o(k));q=p&&p.prototype;function r(s){'use strict';q.constructor.call(this);this._root=s;this._albumList=j.scry(this._root,'div','album-list')[0];this._createAlbumRoot=j.scry(this._root,'div','create-album')[0];this._albumListInputs=this._getAlbumListInputs();for(var t=0;t<this._albumListInputs.length;t++){var u=this._albumListInputs[t];if(u.checked){var v=i.get(u);this._currentSelectedAlbumID=v.album_id;break;}}this._listeners=[l.listen('click','cancel_album_picker',function(){this._navigateAwayAndCancel();}.bind(this)),l.listen('click','album-input',this._onAlbumSelected.bind(this))];if(this._albumList&&this._createAlbumRoot){this._listeners.push(l.listen('click','create-album-item',this._openCreateAlbum.bind(this)));this._listeners.push(l.listen('click','cancel_create_album',this._cancelCreateAlbum.bind(this)));this._listeners.push(l.listen('MPhotosCreateAlbum:created',null,this._onCreateAlbum.bind(this)));}}r.prototype._getAlbumListInputs=function(){'use strict';return j.scry(this._albumList,'input').filter(function(s){return s.type==='radio';});};r.prototype._navigateAway=function(){'use strict';if(!this.hasNavigationPolicy())return;this.currentNavigationPolicy().addOnClose(function(){return j.hide(this._root);}.bind(this)).close();};r.prototype._navigateAwayAndCancel=function(){'use strict';if(!this.hasNavigationPolicy())return;this.currentNavigationPolicy().addOnClose(function(){return this._cancel();}.bind(this)).close();};r.prototype.hide=function(){'use strict';this._navigateAway();};r.prototype.show=function(){'use strict';this.newNavigationPolicy().addOnCloseByBrowser(function(){return this._cancel();}.bind(this)).addOnOpen(function(){return j.show(this._root);}.bind(this)).open();if(this._albumListInputs.length===0)this._albumListInputs=this._getAlbumListInputs();};r.prototype.resetAlbumSelection=function(){'use strict';this._currentSelectedAlbumID=null;for(var s=0;s<this._albumListInputs.length;s++){var t=this._albumListInputs[s],u=i.get(t);if(u.is_mobile_uploads_album){t.checked=true;this._currentSelectedAlbumID=u.album_id;}else t.checked=false;}};r.prototype._openCreateAlbum=function(event){'use strict';l.invoke('MAlbumPicker:createalbum:open');j.hide(this._albumList);j.show(this._createAlbumRoot);};r.prototype._closeCreateAlbum=function(){'use strict';l.invoke('MAlbumPicker:createalbum:close');j.hide(this._createAlbumRoot);j.show(this._albumList);};r.prototype._cancelCreateAlbum=function(){'use strict';this._albumListInputs.forEach(function(s){var t=i.get(s);if(t.album_id===this._currentSelectedAlbumID)s.checked=true;}.bind(this));this._closeCreateAlbum();};r.prototype._onCreateAlbum=function(event){'use strict';var s=event.getData();this._closeCreateAlbum();this._chooseAlbum(false,s.album_id,s.privacy_id);};r.prototype._onAlbumSelected=function(event){'use strict';var s=event.getNode('album-input'),t=i.get(s),u=t.is_mobile_uploads_album,v=t.album_id,w=t.privacy_id;this._currentSelectedAlbumID=v;this._chooseAlbum(u,v,w);};r.prototype._chooseAlbum=function(s,t,u){'use strict';h.conditionClass(m('album-button'),'active',!s);this._navigateAway();this.invoke('choose-album',{is_mobile_uploads_album:s,album_id:t,privacy_id:u});};r.prototype._cancel=function(){'use strict';j.hide(this._root);this.invoke('cancel');};r.fromID=function(s){'use strict';var t=m(s),u=i.get(t);if(!u._albumPicker)u._albumPicker=new r(t);return u._albumPicker;};n(r,['cancel','choose-album']);Object.assign(r.prototype,{_root:null,_listeners:null});f.exports=r;},null);
__d('MComposerOGStrings',['OGComposerJSConstants','fbt'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={getFBTPhrase:function(k,l,m,n){var o='';switch(k){case h.ActionTypeIDs.COMPOSER_FEELS:o=i._("{icon}feeling {object}",[i.param('icon',l),i.param('object',m)]);break;case h.ActionTypeIDs.COMPOSER_WATCHES:o=i._("{icon}watching {object}",[i.param('icon',l),i.param('object',m)]);break;case h.ActionTypeIDs.COMPOSER_READS:o=i._("{icon}reading {object}",[i.param('icon',l),i.param('object',m)]);break;case h.ActionTypeIDs.COMPOSER_LISTENS:o=i._("{icon}listening to {object}",[i.param('icon',l),i.param('object',m)]);break;case h.ActionTypeIDs.COMPOSER_DRINKS:o=i._("{icon}drinking {object}",[i.param('icon',l),i.param('object',m)]);break;case h.ActionTypeIDs.COMPOSER_EATS:o=i._("{icon}eating {object}",[i.param('icon',l),i.param('object',m)]);break;case h.ActionTypeIDs.COMPOSER_PLAYS:o=i._("{icon}playing {object}",[i.param('icon',l),i.param('object',m)]);break;case h.ActionTypeIDs.COMPOSER_TRAVELS:o=i._("{icon}traveling to {object}",[i.param('icon',l),i.param('object',m)]);break;case h.ActionTypeIDs.COMPOSER_LOOKS_FOR:o=i._("{icon}looking for {object}",[i.param('icon',l),i.param('object',m)]);break;case h.ActionTypeIDs.COMPOSER_SUPPORTS:o=i._("{icon}supporting {object}",[i.param('icon',l),i.param('object',m)]);break;case h.ActionTypeIDs.COMPOSER_CELEBRATES:o=i._("{icon}celebrating {object}",[i.param('icon',l),i.param('object',m)]);break;case h.ActionTypeIDs.COMPOSER_MEETS:o=i._("{icon}meeting {object}",[i.param('icon',l),i.param('object',m)]);break;case h.ActionTypeIDs.COMPOSER_GETS:o=i._("{icon}getting {object}",[i.param('icon',l),i.param('object',m)]);break;case h.ActionTypeIDs.COMPOSER_MAKES:o=i._("{icon}making {object}",[i.param('icon',l),i.param('object',m)]);break;case h.ActionTypeIDs.COMPOSER_GOES_TO:o=i._("{icon}going to {object}",[i.param('icon',l),i.param('object',m)]);break;case h.ActionTypeIDs.COMPOSER_THINKS_ABOUT:o=i._("{icon}thinking about {object}",[i.param('icon',l),i.param('object',m)]);break;case h.ActionTypeIDs.COMPOSER_REMEMBERS:o=i._("{icon}remembering {object}",[i.param('icon',l),i.param('object',m)]);break;case h.ActionTypeIDs.COMPOSER_WRITES_A_NOVEL_ABOUT:o=i._("{icon}writing a novel about {object}",[i.param('icon',l),i.param('object',m)]);break;case h.ActionTypeIDs.COMPOSER_SELECTS_VERB:o=i._("{icon}{verb}",[i.param('icon',l),i.param('verb',m)]);break;case h.ActionTypeIDs.COMPOSER_OTHER:o=i._("{icon}{object}",[i.param('icon',l),i.param('object',m)]);break;case h.ActionTypeIDs.COMPOSER_VOTES:o=i._("{icon}voting in {object}",[i.param('icon',l),i.param('object',m)]);break;case h.ActionTypeIDs.COMPOSER_ATTENDS:o=i._("{icon}attending {object}",[i.param('icon',l),i.param('object',m)]);break;case h.ExercisesTypeID:o=i._("{icon}{object}",[i.param('icon',l),i.param('object',m)]);break;}return o;}};f.exports=j;},null);
__d('MOpenGraphTagger',['CSS','MLegacyDataStore','DOM','MarauderLogger','MComposerOGStrings','MCompositionShareStore','MRequest','Stratcom','$','cx','eventsMixinDeprecated','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){if(c.__markCompiled)c.__markCompiled();function t(u){'use strict';this.setRoot(u);this._prompt=j.find(u,'span','og-composer-prompt');this._defaultPrompt=this._prompt.firstChild;this._defaultIconSelector=j.find(u,'div','og-icon-selector');this._iconSelector=this._defaultIconSelector;this._cancelButton=j.find(u,'button','cancel-og-tagger');this._defaultCancelButtonText=this._cancelButton.firstChild;this._isFromActivityLink=false;j.listen(this.getRoot(),'click',null,this._handleClick.bind(this));this._listeners=[o.listen('click','object_result',function(event){event.prevent();var v=event.getNode('object_result'),w=i.get(v);this._objectID=w.id;this._objectStr=w.name;this._icon=w.icon;this._iconSrc=w.icon_src;this._selectedScore=w.score;this._selectedOriginalID=w.original_id;this._clientTime=w.client_time;this._requestID=w.request_id;this._triggersEventTagExpansion=w.triggers_event_tag_expansion;this._addLoggingDataForNodes(v.parentNode.childNodes);this._showAttachment=m.isEmpty()&&w.show_attachment;this._customIconID=w.custom_icon;this._submit();}.bind(this)),o.listen('click','at_result',function(event){event.prevent();this._selectActionType(i.get(event.getNode('at_result')));k.log('og_composer_verb_selected',undefined,{at_id:this._actionType.id,place_id:this._placeID});}.bind(this)),o.listen('click','quicksearch-input',function(event){if(event.getNode('og-object-search')){var v={at_id:this._actionType.id,place_id:this._placeID};k.log('og_composer_object_search_clicked',undefined,v);}}.bind(this)),o.listen('keyup','quicksearch-input',function(event){var v=event.getNode('quicksearch-input');if(v){this._query=v.value;this._keystrokeCount++;if(this._lastNotBackspacedQuery.indexOf(this._query)!==0)this._lastNotBackspacedQuery=this._query;}}.bind(this)),o.listen('composerReset',null,function(event){this._reset();this._placeID=0;}.bind(this))];o.listen('MStructuredComposer:cleanup',null,function(event){for(var v=0;v<this._listeners.length;v++)this._listeners[v].remove();this._listeners=[];}.bind(this));o.listen('MStructuredComposer-opened',null,function(event){this._compositionID=event.getData().session_id;}.bind(this));}t.prototype.getRoot=function(){'use strict';return this.root;};t.prototype.setRoot=function(u){'use strict';this.root=u;};t.prototype.hide=function(){'use strict';j.hide(this.getRoot());this.toggleIncludedPlaceSelector(false);};t.prototype.show=function(){'use strict';j.show(this.getRoot());};t.prototype.updatePrompt=function(u){'use strict';j.setContent(this._prompt,u);};t.prototype.setPlaceID=function(u){'use strict';this._placeID=u;};t.prototype.setSuggestionMechanism=function(u){'use strict';this._suggestionMechanism=u;};t.prototype.toggleIncludedPlaceSelector=function(u){'use strict';var v=j.scry(this.getRoot(),'div','og_included_place');if(v.length){this._isFromActivityLink=u;if(u){j.show(v[0]);}else j.hide(v[0]);}};t.prototype._handleClick=function(event){'use strict';if(event.getNode('cancel-og-tagger'))this.cancel();};t.prototype._reset=function(){'use strict';var u=j.scry(this.getRoot(),'div','og-object-search');if(u.length!==0){j.hide(u[0]);this._showActionTypeSelector();}this._hideIconSelector();this._actionType=null;this._suggestionMechanism=null;this._typeaheadSessionID=null;this._candidateResults=null;this._query=null;this._selectedScore=null;this._selectedOriginalID=null;this._clientTime=null;this._requestID=null;this._lastNotBackspacedQuery=null;this._keystrokeCount=null;this.updatePrompt(this._defaultPrompt);this.setCancelButtonText(this._defaultCancelButtonText);o.invoke('m:quicksearch:clear');};t.prototype._addLoggingDataForNodes=function(u){'use strict';this._candidateResults=[];this._numResults=u.length;for(var v=0;v<this._numResults;++v){var w=i.get(u[v]);if(this._objectID==w.id)this._selectedPos=v;this._candidateResults[v]=w.id?w.id:0;}};t.prototype._cancelTypeaheadSession=function(){'use strict';if(!this._typeaheadSessionID)return;this._triggersEventTagExpansion=false;this._objectID=null;var u=j.scry(this.getRoot(),'div','object_result');this._addLoggingDataForNodes(u);k.log('og_composer_session_abandoned',undefined,{action_type_id:String(this._actionType.id),place_id:this._placeID,typeahead_session_id:this._typeaheadSessionID,composer_session_id:this._compositionID,request_id:this._requestID,candidate_results:this._candidateResults,num_results:this._numResults,last_not_backspaced_query:this._lastNotBackspacedQuery,keystroke_count:this._keystrokeCount});};t.prototype.cancel=function(){'use strict';k.log('og_composer_cancel_tagger',undefined,{suggestion_mechanism:this._suggestionMechanism});var u=this._isFromActivityLink;if(this._isFromIconSelector)this.invoke('cancelIconSelection',{action_type_id:this._actionTypeId,query:this._iconSearchInput?this._iconSearchInput.value:''});this._cancelTypeaheadSession();this._reset();this.hide();this.invoke('cancel');if(u)this.invoke('cancelFromActivity');};t.prototype.setCancelButtonText=function(u){'use strict';j.setContent(this._cancelButton,u);};t.prototype._showObjectSearch=function(){'use strict';this._hideActionTypeSelector();j.show(j.find(this.getRoot(),'div','og-object-search'));};t.prototype.selectActionTypeImplicitly=function(u){'use strict';var v=j.scry(this.getRoot(),'div','at_result'),w=false;for(var x=0;x<v.length;x++){var y=i.get(v[x]);if(y.id==u){w=true;break;}}if(!w)return false;this._selectActionType(y);return true;};t.prototype.showIconSelector=function(u,v,w,x){'use strict';this.show();this._hideActionTypeSelector();this.updatePrompt(s._("Select an icon"));this._actionTypeId=u;var y='/platform/og/composer/icon_selector/',z=new n(y).setData({actionTypeID:u,objectID:v,objectStr:w,iconID:x});z.listen('postprocess',this._setUpIconSelector.bind(this));z.send();j.replace(this._iconSelector,this._defaultIconSelector);j.show(this._iconSelector);k.log('og_composer_show_icon_selector');};t.prototype._setUpIconSelector=function(){'use strict';this._iconSelector=j.find(this.getRoot(),'div','og-icon-selector');var u=j.scry(this._iconSelector,'a','remove-token');if(u.length!==0)j.listen(u[0],'click',null,this._cancelIconSelection.bind(this));this._iconSearchInput=j.scry(this._iconSelector,'input','icon-search-input')[0];j.listen(this._iconSelector,'click','og-icon-area',this._selectIcon.bind(this));j.listen(this._iconSelector,'click','original-og-icon',function(){return this.cancel();}.bind(this));this._isFromIconSelector=true;};t.prototype._cancelIconSelection=function(){'use strict';this._reset();this.invoke('clear');};t.prototype._selectIcon=function(event){'use strict';var u=event.getNode('og-icon-area'),v=u.lastChild.cloneNode();j.show(v);var w=j.find(this.getRoot(),'i','token-icon');o.addSigil(v,'token-icon');j.replace(w,v);this._icon=v;this._iconSrc=i.get(v).icon_src;this._customIconID=this._icon.getAttribute('data-icon');var x=this._iconSearchInput?this._iconSearchInput.value:'',y=this._actionTypeId;this._reset();this.invoke('iconChanged',{icon:this._icon,icon_src:this._iconSrc,custom_icon_id:this._customIconID,action_type_id:y,query:x});};t.prototype._selectActionType=function(u){'use strict';this._typeaheadSessionID=String(Math.floor(Date.now()*Math.random()));this._lastNotBackspacedQuery='';this._keystrokeCount=0;this._actionType=u;var v={at_id:this._actionType.id,place_id:this._placeID,sid:this._typeaheadSessionID};o.invoke('m:quicksearch:actionSelected',null,v);this._showObjectSearch();this.updatePrompt(this._actionType.prompt);};t.prototype._hideActionTypeSelector=function(){'use strict';var u=j.scry(this.getRoot(),'div','og_ats');if(u.length!==0)h.conditionClass(u[0],"_51xt",true);};t.prototype._showActionTypeSelector=function(){'use strict';var u=j.scry(this.getRoot(),'div','og_ats');if(u.length!==0)h.conditionClass(u[0],"_51xt",false);};t.prototype._hideIconSelector=function(event){'use strict';this._isFromIconSelector=false;this._actionTypeId=null;j.hide(this._iconSelector);this._showActionTypeSelector();};t.prototype._submit=function(){'use strict';var u={action_type:this._actionType.id,action_type_str:this._actionType.name,object:this._objectID,object_str:this._objectStr,show_attachment:this._showAttachment,icon:this._icon,icon_src:this._iconSrc,fbt_phrase:this._getTagPhrase(this._actionType.id,this._icon,this._objectStr,this._objectID),triggers_event_tag_expansion:this._triggersEventTagExpansion,suggestion_mechanism:this._suggestionMechanism,custom_icon:this._customIconID,typeahead_session_id:this._typeaheadSessionID,composer_session_id:this._compositionID,selected_original_id:this._selectedOriginalID,selected_score:this._selectedScore,place_id:this._placeID,client_time:this._clientTime,request_id:this._requestID,display_position:this._selectedPos,num_results:this._numResults,results:this._candidateResults,search_term:this._query,last_not_backspaced_query:this._lastNotBackspacedQuery,keystroke_count:this._keystrokeCount};this._reset();this.invoke('submit',u);delete u.icon;delete u.fbt_phrase;k.log('og_composer_object_selected',undefined,u);};t.prototype._getTagPhrase=function(u,v,w,x){'use strict';return l.getFBTPhrase(u,v,w,x);};t.fromID=function(u){'use strict';var v=p(u),w=i.get(v);if(!w._ogTagger)w._ogTagger=new t(v);return w._ogTagger;};r(t,['submit','cancel','clear','iconChanged','cancelFromActivity','cancelIconSelection']);Object.assign(t.prototype,{root:null,_prompt:null,_defaultPrompt:null,_actionType:null,_objectID:null,_objectStr:null,_triggersEventTagExpansion:null,_icon:null,_iconSelector:null,_defaultIconSelector:null,_showAttachment:null,_customIconID:null,_placeID:0,_listeners:null,_suggestionMechanism:null,_typeaheadSessionID:null,_compositionID:null,_selectedOriginalID:null,_selectedScore:null,_clientTime:null,_requestID:null,_selectedPos:null,_numResults:null,_candidateResults:null,_query:null,_lastNotBackspacedQuery:null,_keystrokeCount:null});f.exports=t;},null);
__d('GroupSellLogger',['BanzaiLogger','GroupSellUserActionEvents','GroupSellSurface'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k={logComposerTooltipNUXSeen:function(l){h.log('GroupSellUserActionsLoggerConfig',{event:i.COMPOSER_TOOLTIP_NUX_SEEN,group_id:l});},_formatComposerInterceptWords:function(l,m){var n=[];if(m)n=m.slice();if(l&&l>0)n.push(l.toString()+' prices count');return n.join(',');},logComposerInterceptAttempted:function(l){h.log('GroupSellUserActionsLoggerConfig',{event:i.GROUP_NON_FOR_SALE_POST_INTERCEPT_ATTEMPTED,group_id:l});},logComposerInterceptDetected:function(l,m,n){h.log('GroupSellUserActionsLoggerConfig',{event:i.GROUP_NON_FOR_SALE_POST_INTERCEPT_DETECTED,group_id:l,intercept_words:k._formatComposerInterceptWords(m,n)});},logComposerInterceptCreated:function(l,m,n){h.log('GroupSellUserActionsLoggerConfig',{event:i.GROUP_NON_FOR_SALE_POST_INTERCEPT_CREATED,group_id:l,intercept_words:k._formatComposerInterceptWords(m,n)});},logComposerInterceptAccepted:function(l,m,n){h.log('GroupSellUserActionsLoggerConfig',{event:i.GROUP_NON_FOR_SALE_POST_INTERCEPT_ACCEPTED,group_id:l,intercept_words:k._formatComposerInterceptWords(m,n)});},logComposerInterceptDeclined:function(l,m,n){h.log('GroupSellUserActionsLoggerConfig',{event:i.GROUP_NON_FOR_SALE_POST_INTERCEPT_DECLINED,group_id:l,intercept_words:k._formatComposerInterceptWords(m,n)});},logHScrollViewPermalink:function(l,m){h.log('GroupSellUserActionsLoggerConfig',{event:i.H_SCROLL_STORY_CLICKED,group_id:l,group_message_id:m});},logNLUTimeout:function(l){h.log('GroupSellUserActionsLoggerConfig',{event:i.GROUP_NON_FOR_SALE_POST_NLU_TIMEOUT,group_id:l});},logNLUError:function(l){h.log('GroupSellUserActionsLoggerConfig',{event:i.GROUP_NON_FOR_SALE_POST_NLU_ERROR,group_id:l});},logNonForSaleMarkAsSold:function(l,m,n){h.log('GroupSellUserActionsLoggerConfig',{event:i.NON_FOR_SALE_MARK_AS_SOLD,group_id:l,group_message_id:m,description:n,surface:j.DELETE_INTERCEPT});}};f.exports=k;},null);
__d('MGroupSellInterceptUtil',['escapeRegex'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={parseInterceptedPrices:function(j,k){var l=[];if(!k)return l;var m=new RegExp('\\d+','ig'),n=new RegExp(h(k)+'\\s*\\d+','ig'),o=new RegExp('\\d+(?=\\s*'+h(k)+')','ig'),p=j.match(n);if(p)p.forEach(function(q){return l=l.concat(q.match(m));});p=j.match(o);if(p)l=l.concat(p);return l;}};f.exports=i;},null);
__d('MSubscriptionsHandlerMixin',['SubscriptionsHandler','destroyOnUnload'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={__subscriptionsHandler:null,addSubscriptions:function(){if(!this.__subscriptionsHandler){this.__subscriptionsHandler=new h();i(function(){this.__subscriptionsHandler.release();this.__subscriptionsHandler=null;}.bind(this));}for(var k=arguments.length,l=Array(k),m=0;m<k;m++)l[m]=arguments[m];this.__subscriptionsHandler.addSubscriptions.apply(this.__subscriptionsHandler,l);}};f.exports=j;},null);
__d('MStructuredComposerOGInput',['CSS','DOM','MAjaxify','MarauderLogger','MComposerLogger','MComposerOGStrings','MComposerNavigationMixin','MComposerWaterfallEvent','MCompositionMinutiaeStore','MCompositionMinutiaeFields','MCompositionUserActions','MRequest','MSubscriptionsHandlerMixin','MUnifiedTaggerConstants','MViewport','Stratcom','cx','mixin'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){var z,aa;if(c.__markCompiled)c.__markCompiled();var ba=u.SHOW_UNIFIED_TAGGER,ca=55;z=babelHelpers.inherits(da,y(n,t));aa=z&&z.prototype;function da(ea,fa,ga,ha,ia){'use strict';aa.constructor.call(this);this.$MStructuredComposerOGInput1=ea;this.$MStructuredComposerOGInput2=true;this.$MStructuredComposerOGInput3=true;this.$MStructuredComposerOGInput4=null;this.$MStructuredComposerOGInput5=fa;this.$MStructuredComposerOGInput6=ga;this.$MStructuredComposerOGInput7=ga.parentNode;this.$MStructuredComposerOGInput8=ia;this.$MStructuredComposerOGInput9=i.find(this.$MStructuredComposerOGInput1,'input','og-action-input');this.$MStructuredComposerOGInput10=i.find(this.$MStructuredComposerOGInput1,'input','og-object-input');this.$MStructuredComposerOGInput11=i.find(this.$MStructuredComposerOGInput1,'input','og-phrase-input');this.$MStructuredComposerOGInput12=i.find(this.$MStructuredComposerOGInput1,'input','og-icon-input');this.$MStructuredComposerOGInput13=i.find(this.$MStructuredComposerOGInput1,'input','og-suggestion-mechanism');this.$MStructuredComposerOGInput14=i.find(this.$MStructuredComposerOGInput1,'input','og-hide-attachment');this.$MStructuredComposerOGInput15=false;this.$MStructuredComposerOGInput16=null;this.$MStructuredComposerOGInput17=i.find(this.$MStructuredComposerOGInput1,'ul','og-tag');this.$MStructuredComposerOGInput18=ha;if(this.$MStructuredComposerOGInput8)this.addSubscriptions(this.$MStructuredComposerOGInput18.listen('clear',function(){this.$MStructuredComposerOGInput8.clear();this.$MStructuredComposerOGInput19();}.bind(this)),this.$MStructuredComposerOGInput8.addListener('clear',function(){return this.$MStructuredComposerOGInput19();}.bind(this)));this.addSubscriptions(this.$MStructuredComposerOGInput18.listen('submit',this.$MStructuredComposerOGInput20.bind(this)),p.addChangeListener(function(){return this.$MStructuredComposerOGInput21();}.bind(this)),this.$MStructuredComposerOGInput18.listen('iconChanged',function(event){if(ba){w.invoke('MComposer:tagger:update:og-icon',null,{icon:event.icon_src});}else{var ja=i.find(this.$MStructuredComposerOGInput17,'li','token'),ka=i.find(ja,'i');i.replace(ka,event.icon);}this.$MStructuredComposerOGInput12.value=event.custom_icon_id;this.$MStructuredComposerOGInput22();if(this.$MStructuredComposerOGInput8){this.$MStructuredComposerOGInput4['{icon}']=i.create('i',{className:event.icon.className,style:event.icon.style});this.$MStructuredComposerOGInput8.setValue(this.$MStructuredComposerOGInput4);}w.invoke('MStructuredComposerOGInput-done',null,{icon_changed:true});l.log(o.MINUTIAE_CHANGE_ICON,{action_type_id:event.action_type_id,query:event.query});}.bind(this)),this.$MStructuredComposerOGInput18.listen('cancel',function(){w.invoke('MStructuredComposerOGInput-done',null,{cancel:true});l.log(o.MINUTIAE_CANCEL);this.$MStructuredComposerOGInput22();}.bind(this)),this.$MStructuredComposerOGInput18.listen('cancelIconSelection',function(event){l.log(o.MINUTIAE_CHANGE_ICON_CANCEL,{action_type_id:event.action_type_id,query:event.query});}));if(ba){this.addSubscriptions(w.listen('MComposer:tagger:click',u.TOKEN_TYPES.OBJECT,this.$MStructuredComposerOGInput23.bind(this)),w.listen('MComposer:tagger:click',u.TOKEN_TYPES.ICON,function(){return this.$MStructuredComposerOGInput24();}.bind(this)));}else this.addSubscriptions(i.listen(this.$MStructuredComposerOGInput1,'click','og-tags',this.$MStructuredComposerOGInput25.bind(this)),i.listen(this.$MStructuredComposerOGInput1,'click','remove-token',this.$MStructuredComposerOGInput26.bind(this)));this.addSubscriptions(w.listen('MComposer:open:activity',null,function(){this.$MStructuredComposerOGInput3=false;this.$MStructuredComposerOGInput27();}.bind(this)),w.listen('click','og_included_place_checkin',this.$MStructuredComposerOGInput28.bind(this)),i.listen(this.$MStructuredComposerOGInput5,'click',null,this.$MStructuredComposerOGInput23.bind(this)),i.listen(this.$MStructuredComposerOGInput7,'click','close-composer-attachment',this.$MStructuredComposerOGInput29.bind(this)));}da.prototype.$MStructuredComposerOGInput19=function(){'use strict';this.reset();this.$MStructuredComposerOGInput30();w.invoke('MStructuredComposerOGInput-done',null,{remove:true});l.log(o.MINUTIAE_REMOVE);};da.prototype.$MStructuredComposerOGInput29=function(){'use strict';var ea={};ea[q.SHOW_ATTACHMENT]=false;r.minutiaeSet(babelHelpers['extends']({},p.getAll(),ea));};da.prototype.$MStructuredComposerOGInput20=function(event){'use strict';var ea={};for(var fa in q){var ga=q[fa];ea[ga]=event[ga];}r.minutiaeSet(ea);};da.prototype.$MStructuredComposerOGInput21=function(){'use strict';var ea=i.find(this.$MStructuredComposerOGInput17,'li','token');this.$MStructuredComposerOGInput31();var fa=p.get(q.ACTION_TYPE_ID);if(!fa)return;var ga=p.get(q.CUSTOM_ICON_ID),ha=p.get(q.ICON_LEGACY),ia=p.get(q.ICON),ja=p.get(q.OBJECT_NAME),ka=p.get(q.OBJECT_ID),la=!this.$MStructuredComposerOGInput15&&p.get(q.SHOW_ATTACHMENT),ma=p.get(q.SUGGESTION_MECHANISM),na=p.get(q.USE_DEFAULT_ICON,false),oa=p.get(q.FBT_PHRASE);this.$MStructuredComposerOGInput16=p.get(q.TRIGGERS_EVENT_TAG_EXPANSION)?String(ka):null;if(!oa)oa=m.getFBTPhrase(fa,ha,ja,ka);if(ja&&!ka){this.$MStructuredComposerOGInput11.value=ja;}else{this.$MStructuredComposerOGInput11.value='';if(la){this.$MStructuredComposerOGInput32(ka,ja);this.$MStructuredComposerOGInput14.value=false;}else{this.$MStructuredComposerOGInput31();this.$MStructuredComposerOGInput14.value=true;}}if(ba){w.invoke('MComposer:tagger:update',null,{ogActivity:{id:fa,icon:ia,object:ja}});}else{i.remove(ea.firstChild);var pa={'max-width':v.getUseableWidth()-ca+'px'},qa=i.create('span',{className:"_52x0",style:pa},oa);i.prependContent(ea,qa);}if(this.$MStructuredComposerOGInput8){this.$MStructuredComposerOGInput4=oa;this.$MStructuredComposerOGInput8.setValue(this.$MStructuredComposerOGInput4);}this.$MStructuredComposerOGInput10.value=ka;this.$MStructuredComposerOGInput9.value=fa;this.$MStructuredComposerOGInput12.value=ga;this.$MStructuredComposerOGInput18.hide();this.$MStructuredComposerOGInput33();this.$MStructuredComposerOGInput13.value=ma;if(!ka&&!na){if(this.$MStructuredComposerOGInput8)this.$MStructuredComposerOGInput8.hide();this.$MStructuredComposerOGInput18.showIconSelector(fa,ka,ja,ha);}else{this.$MStructuredComposerOGInput22();w.invoke('MStructuredComposerOGInput-done',null,{add:true});l.log(o.MINUTIAE_ADD);}w.invoke('MStructuredComposerOGInput:update');};da.prototype.$MStructuredComposerOGInput22=function(){'use strict';if(this.$MStructuredComposerOGInput3&&this.hasNavigationPolicy()){this.$MStructuredComposerOGInput30();}else{this.$MStructuredComposerOGInput28();w.invoke('MComposer:close:activity','og-tagger');}};da.prototype.reset=function(){'use strict';this.$MStructuredComposerOGInput4=null;this.$MStructuredComposerOGInput9.value='';this.$MStructuredComposerOGInput10.value='';this.$MStructuredComposerOGInput11.value='';this.$MStructuredComposerOGInput12.value='';this.$MStructuredComposerOGInput14.value=false;this.$MStructuredComposerOGInput15=false;this.$MStructuredComposerOGInput16=null;if(ba)w.invoke('MComposer:tagger:update',null,{ogActivity:null});this.$MStructuredComposerOGInput31();if(this.$MStructuredComposerOGInput8)this.$MStructuredComposerOGInput8.clear();this.$MStructuredComposerOGInput33();w.invoke('MStructuredComposerOGInput:update');};da.prototype.getEventIDForExpansion=function(){'use strict';return this.$MStructuredComposerOGInput16;};da.prototype.setVisible=function(ea){'use strict';this.$MStructuredComposerOGInput2=ea;this.$MStructuredComposerOGInput33();};da.prototype.setDisableOgTagPreview=function(ea){'use strict';this.$MStructuredComposerOGInput15=ea;};da.prototype.hasValue=function(){'use strict';return !!this.$MStructuredComposerOGInput9.value;};da.prototype.getLoggingData=function(){'use strict';if(this.$MStructuredComposerOGInput9.value)return {action_type:this.$MStructuredComposerOGInput9.value,object:this.$MStructuredComposerOGInput10.value,object_str:this.$MStructuredComposerOGInput11.value};return null;};da.prototype.$MStructuredComposerOGInput33=function(){'use strict';var ea=!!this.$MStructuredComposerOGInput9.value;if(!ba)(ea&&this.$MStructuredComposerOGInput2?i.show:i.hide)(this.$MStructuredComposerOGInput1);(this.$MStructuredComposerOGInput2?i.show:i.hide)(this.$MStructuredComposerOGInput5);h.conditionClass(this.$MStructuredComposerOGInput5,'active',ea);};da.prototype.$MStructuredComposerOGInput32=function(ea,fa){'use strict';this.$MStructuredComposerOGInput31();i.show(this.$MStructuredComposerOGInput6);var ga='/platform/og/composer/attachment',ha=new s(ga).setData({object_id:ea});j.ajaxify(null,null,ha,null);};da.prototype.$MStructuredComposerOGInput31=function(){'use strict';i.replace(i.find(this.$MStructuredComposerOGInput7,'div','og-object-attachment'),this.$MStructuredComposerOGInput6);i.hide(this.$MStructuredComposerOGInput6);};da.prototype.$MStructuredComposerOGInput25=function(){'use strict';l.log(o.MINUTIAE_CHANGE_ICON_INTENT);if(this.$MStructuredComposerOGInput8)this.$MStructuredComposerOGInput8.hide();this.$MStructuredComposerOGInput24();};da.prototype.$MStructuredComposerOGInput23=function(){'use strict';l.log(o.MINUTIAE_INTENT);k.log('og_composer_icon_clicked');this.$MStructuredComposerOGInput34();};da.prototype.$MStructuredComposerOGInput26=function(event){'use strict';event.kill();this.reset();r.minutiaeRemove();w.invoke('MStructuredComposerOGInput-done',null,{remove:true});l.log(o.MINUTIAE_REMOVE);};da.prototype.$MStructuredComposerOGInput35=function(){'use strict';this.$MStructuredComposerOGInput3=false;this.$MStructuredComposerOGInput18.cancel();};da.prototype.$MStructuredComposerOGInput28=function(){'use strict';if(!this.$MStructuredComposerOGInput3)this.$MStructuredComposerOGInput3=true;this.$MStructuredComposerOGInput18.hide();};da.prototype.$MStructuredComposerOGInput27=function(){'use strict';if(this.$MStructuredComposerOGInput8)this.$MStructuredComposerOGInput8.showIfHasValue();this.$MStructuredComposerOGInput18.show();};da.prototype.$MStructuredComposerOGInput36=function(){'use strict';if(this.$MStructuredComposerOGInput8)this.$MStructuredComposerOGInput8.hide();l.log(o.MINUTIAE_CHANGE_ICON_INTENT);this.$MStructuredComposerOGInput18.showIconSelector(this.$MStructuredComposerOGInput9.value,this.$MStructuredComposerOGInput10.value,this.$MStructuredComposerOGInput11.value,this.$MStructuredComposerOGInput12.value);};da.prototype.$MStructuredComposerOGInput30=function(){'use strict';this.currentNavigationPolicy().addOnClose(function(){return this.$MStructuredComposerOGInput18.hide();}.bind(this)).close();};da.prototype.$MStructuredComposerOGInput37=function(){'use strict';this.currentNavigationPolicy().addOnClose(function(){return this.$MStructuredComposerOGInput35();}.bind(this)).close();};da.prototype.$MStructuredComposerOGInput34=function(){'use strict';this.newNavigationPolicy().addOnCloseByBrowser(function(){return this.$MStructuredComposerOGInput35();}.bind(this)).addOnOpen(function(){return this.$MStructuredComposerOGInput27();}.bind(this)).open();};da.prototype.$MStructuredComposerOGInput24=function(){'use strict';this.newNavigationPolicy().addOnCloseByBrowser(function(){return this.$MStructuredComposerOGInput35();}.bind(this)).addOnOpen(function(){return this.$MStructuredComposerOGInput36();}.bind(this)).open();};f.exports=da;},null);
__d('DeferredComponent.react',['React','createCancelableFunction'],function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();var l=h.PropTypes;j=babelHelpers.inherits(m,h.Component);k=j&&j.prototype;function m(n,o){'use strict';k.constructor.call(this,n,o);this.$DeferredComponent1=this.$DeferredComponent1.bind(this);this.state={ComponentClass:null,cancelableModulesLoaded:i(this.$DeferredComponent1)};}m.prototype.componentWillMount=function(){'use strict';this.props.deferredComponent(this.state.cancelableModulesLoaded);};m.prototype.componentWillUnmount=function(){'use strict';this.state.cancelableModulesLoaded.cancel();};m.prototype.render=function(){'use strict';var n=this.state.ComponentClass;if(!n||this.props.deferredForcePlaceholder)return this.props.deferredPlaceholder;var o=this.props,p=o.deferredPlaceholder,q=o.deferredComponent,r=o.onComponentLoad,s=o.deferredForcePlaceholder,t=babelHelpers.objectWithoutProperties(o,['deferredPlaceholder','deferredComponent','onComponentLoad','deferredForcePlaceholder']);return h.createElement(n,t);};m.prototype.$DeferredComponent1=function(n){'use strict';this.setState({ComponentClass:n},function(){this.props.onComponentLoad&&this.props.onComponentLoad(n);}.bind(this));};m.propTypes={deferredPlaceholder:l.element.isRequired,deferredComponent:l.func.isRequired,onComponentLoad:l.func,deferredForcePlaceholder:l.bool};f.exports=m;},null);
__d('JSResourceReference',['Promise','Bootloader'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(k){'use strict';this.$JSResourceReference1=k;}j.prototype.getModuleId=function(){'use strict';return this.$JSResourceReference1;};j.prototype.load=function(){'use strict';return new h(function(k){i.loadModules.call(i,[this.$JSResourceReference1],k,this.$JSResourceReference2||'JSResource: unknown caller');}.bind(this));};j.prototype.equals=function(k){'use strict';return this===k||this.$JSResourceReference1==k.$JSResourceReference1;};j.prototype.__setRef=function(k){'use strict';this.$JSResourceReference2=k;return this;};j.loadAll=function(k,l){'use strict';var m={},n=false;for(var o=k,p=Array.isArray(o),q=0,o=p?o:o[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var r;if(p){if(q>=o.length)break;r=o[q++];}else{q=o.next();if(q.done)break;r=q.value;}var s=r,t=s.$JSResourceReference2;if(t){n=true;m[t]=true;}}i.loadModules.call(i,k.map(function(u){return u.getModuleId();}),l,n?Object.keys(m).join(':'):'JSResource: unknown caller');};f.exports=j;},null);
__d('JSResource',['JSResourceReference'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=function(j){return new h(j);};i.Reference=h;i.loadAll=h.loadAll;f.exports=i;},null);
__d('BootloadedComponent.react',['DeferredComponent.react','JSResource','React'],function a(b,c,d,e,f,g,h,i,j){var k,l;if(c.__markCompiled)c.__markCompiled();var m=j.PropTypes;k=babelHelpers.inherits(n,j.Component);l=k&&k.prototype;function n(o,p){'use strict';l.constructor.call(this,o,p);this.$BootloadedComponent1=this.$BootloadedComponent1.bind(this);}n.prototype.render=function(){'use strict';var o=this.props,p=o.bootloadLoader,q=o.bootloadPlaceholder,r=o.bootloadForcePlaceholder,s=babelHelpers.objectWithoutProperties(o,['bootloadLoader','bootloadPlaceholder','bootloadForcePlaceholder']);return (j.createElement(h,babelHelpers['extends']({deferredPlaceholder:q,deferredComponent:this.$BootloadedComponent1,deferredForcePlaceholder:r},s)));};n.prototype.$BootloadedComponent1=function(o){'use strict';i.loadAll([this.props.bootloadLoader],o);};f.exports=Object.assign(n,{propTypes:{bootloadPlaceholder:m.element.isRequired,bootloadLoader:m.instanceOf(i.Reference).isRequired,bootloadForcePlaceholder:m.bool},create:function(o){var p,q;p=babelHelpers.inherits(r,j.Component);q=p&&p.prototype;r.prototype.render=function(){'use strict';var s=this.props,t=s.bootloadLoader,u=babelHelpers.objectWithoutProperties(s,['bootloadLoader']);return (j.createElement(n,babelHelpers['extends']({bootloadLoader:o},u)));};function r(){'use strict';p.apply(this,arguments);}r.displayName='BootloadedComponent('+o.getModuleId()+')';return r;}});},null);
__d('MStructuredComposerPhotoPreviewBootloader',['BootloadedComponent.react','DOM','JSResource','MComposerNavigationMixin','MLoadingSpinner.react','PhotosUploadWaterfallXMixin','PUWSteps','React','ReactDOM','cx','fbt','mixin','performanceNow'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u,v;if(c.__markCompiled)c.__markCompiled();u=babelHelpers.inherits(w,s(m,k));v=u&&u.prototype;function w(x){'use strict';v.constructor.call(this);this.$MStructuredComposerPhotoPreviewBootloader1=x.root;this.$MStructuredComposerPhotoPreviewBootloader2=x.typeaheadConfig;this.$MStructuredComposerPhotoPreviewBootloader3=x.suggestions;this.$MStructuredComposerPhotoPreviewBootloader4=null;this.$MStructuredComposerPhotoPreviewBootloader5=null;this.$MStructuredComposerPhotoPreviewBootloader6=i.find(this.$MStructuredComposerPhotoPreviewBootloader1,'div','structured-composer-photo-preview-card');}w.prototype.$MStructuredComposerPhotoPreviewBootloader7=function(x,y){'use strict';p.render(o.createElement(h,babelHelpers['extends']({},this.props,{bootloadLoader:j('MStructuredComposerPhotoPreviewBootloadable.react').__setRef('MStructuredComposerPhotoPreviewBootloader'),bootloadPlaceholder:o.createElement('div',{className:"_4ldw"},o.createElement(l,null),r._("Loading...")),imageSrc:x,initialFaceboxes:y,onTagAdd:this.$MStructuredComposerPhotoPreviewBootloader4,onTagDelete:this.$MStructuredComposerPhotoPreviewBootloader5,typeaheadConfig:this.$MStructuredComposerPhotoPreviewBootloader2,typeaheadSuggestions:this.$MStructuredComposerPhotoPreviewBootloader3})),this.$MStructuredComposerPhotoPreviewBootloader6);i.show(this.$MStructuredComposerPhotoPreviewBootloader1);};w.prototype.$MStructuredComposerPhotoPreviewBootloader8=function(){'use strict';i.hide(this.$MStructuredComposerPhotoPreviewBootloader1);p.unmountComponentAtNode(this.$MStructuredComposerPhotoPreviewBootloader6);};w.prototype.show=function(x,y){'use strict';if(this.hasNavigationPolicy())return;this.newNavigationPolicy().addOnOpen(function(){this.$MStructuredComposerPhotoPreviewBootloader7(x.previewURI,y);this.$MStructuredComposerPhotoPreviewBootloader9=t();this.logStep(n.CLIENT_PHOTO_PREVIEW_OPEN,{});}.bind(this)).addOnClose(function(){i.hide(this.$MStructuredComposerPhotoPreviewBootloader1);this.logStep(n.CLIENT_PHOTO_PREVIEW_CLOSE,{elapsed_time:t()-this.$MStructuredComposerPhotoPreviewBootloader9});}.bind(this)).open();};w.prototype.setOnDeleteXYTag=function(x){'use strict';this.$MStructuredComposerPhotoPreviewBootloader5=x;};w.prototype.setOnAddXYTag=function(x){'use strict';this.$MStructuredComposerPhotoPreviewBootloader4=x;};w.prototype.hide=function(){'use strict';if(!this.hasNavigationPolicy())return;this.currentNavigationPolicy().close();};w.prototype.setWaterfall=function(x,y,z){'use strict';this.$MStructuredComposerPhotoPreviewBootloader10=x;this.$MStructuredComposerPhotoPreviewBootloader11=y;this.$MStructuredComposerPhotoPreviewBootloader12=z;return this;};w.prototype.getWaterfallID=function(){'use strict';return this.$MStructuredComposerPhotoPreviewBootloader10;};w.prototype.getWaterfallAppName=function(){'use strict';return this.$MStructuredComposerPhotoPreviewBootloader11;};w.prototype.getWaterfallSource=function(){'use strict';return this.$MStructuredComposerPhotoPreviewBootloader12;};f.exports=w;},null);
__d('MImageFetchNotifier',['DOM'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(){'use strict';this.$MImageFetchNotifier1={};this.$MImageFetchNotifier2={};this.$MImageFetchNotifier3={};}i.prototype.registerLoadNotificationForURL=function(j,k){'use strict';this.$MImageFetchNotifier3[j]=k;};i.prototype.listenForID=function(j,k){'use strict';if(this.$MImageFetchNotifier2[j]){this.$MImageFetchNotifier4(k);}else{this.$MImageFetchNotifier1[j]=this.$MImageFetchNotifier1[j]||[];this.$MImageFetchNotifier1[j].push(k);if(j in this.$MImageFetchNotifier3){var l=this.$MImageFetchNotifier3[j];this.fetchAndNotify(l,function(){return this.$MImageFetchNotifier5(j);}.bind(this));delete this.$MImageFetchNotifier3[j];}}};i.prototype.fetchAndNotify=function(j,k){'use strict';var l=h.create('img');l.src=j;if(l.complete){this.$MImageFetchNotifier4(k);}else{var m=function(){k();l.removeEventListener('load',m);};l.addEventListener('load',m);}};i.prototype.$MImageFetchNotifier5=function(j){'use strict';if(j in this.$MImageFetchNotifier1){this.$MImageFetchNotifier1[j].forEach(function(k){return k();});delete this.$MImageFetchNotifier1[j];}this.$MImageFetchNotifier2[j]=true;};i.prototype.$MImageFetchNotifier4=function(j){'use strict';setTimeout(function(){return j();},0);};f.exports=new i();},null);
__d('SlideshowFrameImage.react',['Image.react','React'],function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();j=babelHelpers.inherits(l,i.Component);k=j&&j.prototype;l.prototype.$SlideshowFrameImage5=function(){if(this.props.croppingSpec){this.$SlideshowFrameImage3={width:this.props.imageWidth,height:this.props.imageHeight};this.$SlideshowFrameImage4={x:-this.props.croppingSpec.topLeft[0],y:-this.props.croppingSpec.topLeft[1]};this.$SlideshowFrameImage1={width:this.props.croppingSpec.bottomRight[0]+this.$SlideshowFrameImage4.x,height:this.props.croppingSpec.bottomRight[1]+this.$SlideshowFrameImage4.y};}else{this.$SlideshowFrameImage3={width:this.props.imageWidth,height:this.props.imageHeight};this.$SlideshowFrameImage4={x:0,y:0};this.$SlideshowFrameImage1={width:this.props.imageWidth,height:this.props.imageHeight};}var m=Math.min(this.props.maxWidth/this.$SlideshowFrameImage1.width,this.props.maxHeight/this.$SlideshowFrameImage1.height);this.$SlideshowFrameImage3.width*=m;this.$SlideshowFrameImage3.height*=m;this.$SlideshowFrameImage4.x*=m;this.$SlideshowFrameImage4.y*=m;this.$SlideshowFrameImage1.width*=m;this.$SlideshowFrameImage1.height*=m;this.$SlideshowFrameImage2={x:(this.props.maxWidth-this.$SlideshowFrameImage1.width)/2,y:(this.props.maxHeight-this.$SlideshowFrameImage1.height)/2};};l.prototype.render=function(){this.$SlideshowFrameImage5();return (i.createElement('div',{className:this.props.className,style:{position:this.props.positionStyle,width:this.$SlideshowFrameImage1.width,height:this.$SlideshowFrameImage1.height,left:this.$SlideshowFrameImage2.x,top:this.$SlideshowFrameImage2.y,overflow:'hidden'}},i.createElement(h,{src:this.props.imageSrc,width:this.$SlideshowFrameImage3.width,height:this.$SlideshowFrameImage3.height,style:{position:'absolute',left:this.$SlideshowFrameImage4.x,top:this.$SlideshowFrameImage4.y}})));};function l(){j.apply(this,arguments);}l.defaultProps={className:null,croppingSpec:null,positionStyle:'absolute'};f.exports=l;},null);
__d('SlideshowImageUtil',['SlideshowConstants','invariant'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j='x',k={shouldCropImages:function(l){var m=l[0].width,n=l[0].height;for(var o=l,p=Array.isArray(o),q=0,o=p?o:o[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var r;if(p){if(q>=o.length)break;r=o[q++];}else{q=o.next();if(q.done)break;r=q.value;}var s=r;if(s.width!==m||s.height!==n)return true;}return false;},calculateDefaultCoordinates:function(l,m){var n=void 0,o=void 0;if(l.width/m>l.height){n=l.height;o=l.height*m;}else{o=l.width;n=l.width/m;}var p=(l.width-o)/2,q=(l.height-n)/2,r=Math.floor(p)-p,s=Math.floor(q)-q;return [[p+r,q+s],[Math.round(p+o+r),Math.round(q+n+s)]];},getPreviewBoxDimensions:function(l,m,n){var o=m,p=m;if(l.length>0){var q=l[0],r=Object.keys(q)[0];switch(r){case h.formats.Wide:o=m/n;break;case h.formats.Square:break;default:var s=r.split(j),t=Number(s[0]),u=Number(s[1]);if(t>u){o=Math.floor(p*u/t);}else p=Math.floor(o*t/u);break;}}return {width:p,height:o};},getFullSizeImageBoxCroppingSpec:function(l,m){var n=m.width/m.height,o=this.calculateDefaultCoordinates(l,n);!(o.length===2)?i(0):void 0;return {format:h.formats.Original,topLeft:o[0],bottomRight:o[1]};},getDefaultCroppingSpec:function(l){var m=this.calculateDefaultCoordinates(l,1);!(m.length===2)?i(0):void 0;return {format:h.formats.Square,topLeft:m[0],bottomRight:m[1]};}};f.exports=k;},null);
__d('MSlideshowPlayer.react',['DOM','MImageFetchNotifier','React','ReactDOM','SlideshowFrameImage.react','SlideshowImageUtil','Style','cx','cancelAnimationFrame','requestAnimationFrame'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){'use strict';if(c.__markCompiled)c.__markCompiled();var r=j.PropTypes,s=300,t=1.7143,u=j.createClass({displayName:'MSlideshowPlayer',_animationID:0,_loadingImages:{},_timeout:0,_currIndex:0,propTypes:{durationInMS:r.number.isRequired,transitionInMS:r.number.isRequired},getInitialState:function(){return {imagesAllLoaded:false,playing:false};},componentWillMount:function(){this.props.children.forEach(function(v){var w=v.props.src;i.registerLoadNotificationForURL(w,w);this._loadingImages[w]=true;}.bind(this));this.props.children.forEach(function(v){var w=v.props.src;i.listenForID(w,function(){delete this._loadingImages[w];if(Object.keys(this._loadingImages).length===0)this.setState({imagesAllLoaded:true});}.bind(this));}.bind(this));},componentDidMount:function(){this._timeout=0;},componentWillUnmount:function(){this._clearTimeout();},shouldComponentUpdate:function(v,w){return (w.imagesAllLoaded!==this.state.imagesAllLoaded||w.playing!==this.state.playing);},_clearTimeout:function(){if(this._timeout){clearTimeout(this._timeout);this._timeout=0;}if(this._animationID){p(this._animationID);this._animationID=0;}},_getItemCount:function(){return j.Children.count(this.props.children);},_moveNext:function(){this._currIndex++;if(this._currIndex>=this._getItemCount()){this._stopPlaying();}else this._fadeImage();},_setTimeout:function(){this._timeout=setTimeout(this._moveNext,this.props.durationInMS);},_fadeImage:function(){var v=k.findDOMNode(this.refs[this._currIndex-1]),w=0,x=function(y){w=w===0?y:w;var z=Math.max(1-(y-w)/this.props.transitionInMS,0);n.set(v,'opacity',z);if(z===0){this._setTimeout();}else this._animationID=q(x);}.bind(this);this._animationID=q(x);},_resetImages:function(){this._currIndex=0;for(var v=0;v<this._getItemCount();v++)n.set(k.findDOMNode(this.refs[v]),'opacity',1);},_startPlaying:function(){if(this._timeout)return;this.setState({playing:true},this._setTimeout);},_stopPlaying:function(){if(this._timeout){this.setState({playing:false});this._clearTimeout();this._resetImages();}},_getImageDimensions:function(v){if(this.refs[v]){var w=h.find(k.findDOMNode(this.refs[v]),'img');return {width:w.naturalWidth,height:w.naturalHeight};}return {width:0,height:0};},_getCurrentImages:function(v,w,x){return this.props.children.map(function(y,z){var aa=this._getImageDimensions(z),ba=x?m.getDefaultCroppingSpec(aa):null;return (j.createElement(l,{imageSrc:y.props.src,imageWidth:aa.width,imageHeight:aa.height,croppingSpec:ba,maxWidth:v,maxHeight:w,ref:z,key:z}));}.bind(this)).reverse();},render:function(){if(this._getItemCount()===0)return j.createElement('div',null);var v=this.props.children.map(function(z,aa){return this._getImageDimensions(aa);}.bind(this)),w=m.shouldCropImages(v),x=w||!this.state.imagesAllLoaded?1:v[0].width/v[0].height,y=s/Math.max(x,t);return (j.createElement('div',{className:"_1k7"},j.createElement('div',{className:"_1k8",style:{width:s,height:y}},this._getCurrentImages(s,y,w)),j.createElement('div',{className:"_1k9"+(this.state.playing||!this.state.imagesAllLoaded?' '+"_1ka":'')},j.createElement('div',{onClick:this._startPlaying,className:"_1o0y"}))));}});f.exports=u;},null);
__d('MStructuredComposerSlideshowPreview',['CSS','DOM','Image.react','React','ReactDOM','MComposerLogger','MComposerNavigationMixin','MComposerWaterfallEvent','MCompositionPhotoStore','MCompositionPhotoFields','MSubscriptionsHandlerMixin','MSlideshowPlayer.react','SlideshowConstants','Stratcom','mixin'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){var w,x;if(c.__markCompiled)c.__markCompiled();var y='cancel_slideshow_preview',z='show_slideshow_preview',aa='submit_slideshow';w=babelHelpers.inherits(ba,v(n,r));x=w&&w.prototype;function ba(ca,da){'use strict';x.constructor.call(this);this.$MStructuredComposerSlideshowPreview1=ca;this.$MStructuredComposerSlideshowPreview2=da;this.$MStructuredComposerSlideshowPreview3=null;this.addSubscriptions(i.listen(this.$MStructuredComposerSlideshowPreview2,'click',z,this.$MStructuredComposerSlideshowPreview4.bind(this)),i.listen(this.$MStructuredComposerSlideshowPreview1,'click',y,this.$MStructuredComposerSlideshowPreview5.bind(this)),i.listen(this.$MStructuredComposerSlideshowPreview1,'click',aa,this.$MStructuredComposerSlideshowPreview6.bind(this)));}ba.prototype.$MStructuredComposerSlideshowPreview7=function(ca){'use strict';var da=p.get(q.PHOTO_INFO_LIST,[]).map(function(ea,fa){return (k.createElement(j,{src:ea.previewURI,key:fa}));});return l.render(k.createElement(s,{durationInMS:t.photo_duration,transitionInMS:t.photo_transition_duration},da),ca);};ba.prototype.$MStructuredComposerSlideshowPreview4=function(){'use strict';this.newNavigationPolicy().addOnOpen(function(){this.$MStructuredComposerSlideshowPreview3=this.$MStructuredComposerSlideshowPreview7(i.find(this.$MStructuredComposerSlideshowPreview1,'div','slideshow_preview_placeholder'));h.show(this.$MStructuredComposerSlideshowPreview1);m.log(o.SLIDESHOW_PREVIEW_INTENT);}.bind(this)).addOnClose(function(){l.unmountComponentAtNode(i.find(this.$MStructuredComposerSlideshowPreview1,'div','slideshow_preview_placeholder'));h.hide(this.$MStructuredComposerSlideshowPreview1);m.log(o.SLIDESHOW_PREVIEW_CANCEL);}.bind(this)).addOnCloseByBrowser(function(){return h.hide(this.$MStructuredComposerSlideshowPreview1);}.bind(this)).open();};ba.prototype.$MStructuredComposerSlideshowPreview5=function(){'use strict';if(!this.hasNavigationPolicy())return;this.currentNavigationPolicy().close();};ba.prototype.$MStructuredComposerSlideshowPreview6=function(){'use strict';[i.find(this.$MStructuredComposerSlideshowPreview1,'button',aa),i.find(this.$MStructuredComposerSlideshowPreview1,'button',y)].forEach(function(ca){ca.disabled=true;});u.invoke('MStructuredComposerSlideshowPreview-submit');};ba.prototype.setSubmitButtonText=function(ca){'use strict';i.setContent(i.find(this.$MStructuredComposerSlideshowPreview1,'button',aa),ca);};f.exports=ba;},null);
__d('MStructuredComposerTaggingInputReact',['React'],function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k="xy_tags",l='failed_suggestions';i=babelHelpers.inherits(m,h.Component);j=i&&i.prototype;function m(){var n,o;'use strict';for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return n=(o=j.constructor).call.apply(o,[this].concat(q)),this.$MStructuredComposerTaggingInputReact1=function(s,t,u,v){var w=k+"["+v+"]";return (h.createElement('div',{key:"tag"+s.fbid},h.createElement('input',{type:'hidden',name:w+"[x]",value:s.x}),h.createElement('input',{type:'hidden',name:w+"[y]",value:s.y}),h.createElement('input',{type:'hidden',name:w+"[fbid]",value:s.photoID}),h.createElement('input',{type:'hidden',name:w+"[name]",value:u}),h.createElement('input',{type:'hidden',name:w+"[subject]",value:t}),h.createElement('input',{type:'hidden',name:w+"[facebox]",value:s.fbid}),h.createElement('input',{type:'hidden',name:w+"[source]",value:'photos_touch_composer'})));},this.$MStructuredComposerTaggingInputReact2=function(){var s=this.props.tokenCollection,t=this.props.tagSuggestions,u=[],v=0;s.map(function(w){var x=t[w.id];if(x)u=u.concat(Object.keys(x).map(function(y){var z=this.$MStructuredComposerTaggingInputReact1(x[y],w.id,w.name,v);v++;return z;}.bind(this)));}.bind(this));return u;}.bind(this),this.$MStructuredComposerTaggingInputReact3=function(s,t){var u=l+"["+t+"]";return (h.createElement('div',{key:"failed"+s.fbid},h.createElement('input',{type:'hidden',name:u+"[fbid]",value:s.fbid}),h.createElement('input',{type:'hidden',name:u+"[tagee]",value:s.recognitions[0].user.fbid})));},n;}m.prototype.render=function(){'use strict';return (h.createElement('div',null,this.$MStructuredComposerTaggingInputReact2(),this.props.failedSuggestions.map(this.$MStructuredComposerTaggingInputReact3)));};f.exports=m;},null);
__d("XPhotosGetRecognitionController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/photos\/tagging\/recognition\/",{photos:{type:"IntVector"},recognition_project:{type:"String",defaultValue:"default"},include_unrecognized_faceboxes:{type:"Bool",defaultValue:false},is_page:{type:"Bool",defaultValue:false},target:{type:"Int"},include_face_crop_src:{type:"Bool",defaultValue:false},include_recognized_user_profile_picture:{type:"Bool",defaultValue:false},include_low_confidence_recognitions:{type:"Bool",defaultValue:false},face_crop_width:{type:"Int",defaultValue:32},face_crop_height:{type:"Int",defaultValue:32}});},null);
__d('MTagSuggestionsPoller',['MRequest','XPhotosGetRecognitionController','PhotosUploadWaterfallXMixin','mixin','performanceNow','PUWSteps'],function a(b,c,d,e,f,g,h,i,j,k,l,m){var n,o;if(c.__markCompiled)c.__markCompiled();var p=4,q=2000,r=8000;n=babelHelpers.inherits(s,k(j));o=n&&n.prototype;function s(){'use strict';o.constructor.call(this);this.$MTagSuggestionsPoller1=q;this.$MTagSuggestionsPoller2=0;this.$MTagSuggestionsPoller3={};this.$MTagSuggestionsPoller4=false;this.$MTagSuggestionsPoller5=null;}s.prototype.setRecognitionProject=function(t){'use strict';this.$MTagSuggestionsPoller6=t;return this;};s.prototype.setIncludeUnrecognized=function(t){'use strict';this.$MTagSuggestionsPoller7=t;return this;};s.prototype.setTargetIsPage=function(t){'use strict';this.$MTagSuggestionsPoller8=t;return this;};s.prototype.setTargetId=function(t){'use strict';this.$MTagSuggestionsPoller9=t;return this;};s.prototype.setHandler=function(t){'use strict';this.$MTagSuggestionsPoller10=t;return this;};s.prototype.setTimeoutHandler=function(t){'use strict';this.$MTagSuggestionsPoller11=t;return this;};s.prototype.isPolling=function(){'use strict';return this.$MTagSuggestionsPoller4;};s.prototype.setWaterfall=function(t,u,v){'use strict';this.$MTagSuggestionsPoller12=t;this.$MTagSuggestionsPoller13=u;this.$MTagSuggestionsPoller14=v;return this;};s.prototype.addPhotoIDAndLog=function(t,u){'use strict';this.$MTagSuggestionsPoller3[t]=u;this.logStep(m.CLIENT_FACEREC_BEGIN,{fbid:t});this.invalidateTimeout();this.startMasterTimerIfNeeded();};s.prototype.removePhotoID=function(t){'use strict';delete this.$MTagSuggestionsPoller3[t];};s.prototype.hasPhotoID=function(t){'use strict';return this.$MTagSuggestionsPoller3.hasOwnProperty(t);};s.prototype.$MTagSuggestionsPoller15=function(t){'use strict';return this.$MTagSuggestionsPoller3[t];};s.prototype.startMasterTimerIfNeeded=function(){'use strict';if(!this.$MTagSuggestionsPoller5){this.$MTagSuggestionsPoller16=l();this.$MTagSuggestionsPoller5=setTimeout(this.$MTagSuggestionsPoller17.bind(this),r);}};s.prototype.invalidateTimeout=function(){'use strict';this.$MTagSuggestionsPoller2=0;if(this.$MTagSuggestionsPoller5){clearTimeout(this.$MTagSuggestionsPoller5);this.$MTagSuggestionsPoller5=null;}};s.prototype.start=function(){'use strict';var t=this.$MTagSuggestionsPoller18();if(t.length>0){this.$MTagSuggestionsPoller4=true;this.$MTagSuggestionsPoller2++;this.startMasterTimerIfNeeded();var u=new h(this.$MTagSuggestionsPoller19(t));this.$MTagSuggestionsPoller20=u;u.listen('done',function(v){this.$MTagSuggestionsPoller21(v);}.bind(this));u.listen('error',function(v){this.$MTagSuggestionsPoller22(v);}.bind(this));u.setTimeout(r);u.send();}};s.prototype.$MTagSuggestionsPoller17=function(){'use strict';this.$MTagSuggestionsPoller11&&this.$MTagSuggestionsPoller11(this.$MTagSuggestionsPoller23());this.abort();};s.prototype.abort=function(){'use strict';this.$MTagSuggestionsPoller4=false;for(var t in this.$MTagSuggestionsPoller3)this.logStep(m.CLIENT_FACEREC_FAIL,{attempt_number:this.$MTagSuggestionsPoller2,elapsed_time:l()-this.$MTagSuggestionsPoller16,fbid:t});this.$MTagSuggestionsPoller3={};this.invalidateTimeout();if(this.$MTagSuggestionsPoller20){this.$MTagSuggestionsPoller20&&this.$MTagSuggestionsPoller20.abort();this.$MTagSuggestionsPoller20=null;}};s.prototype.$MTagSuggestionsPoller21=function(t){'use strict';if(t.payload){var u=t.payload.filter(function(v){var w=v.fbid,x=this.hasPhotoID(w);if(x){v.attachmentID=this.$MTagSuggestionsPoller15(w);this.removePhotoID(w);this.logStep(m.CLIENT_FACEREC_SUCCESS,{attempt_number:this.$MTagSuggestionsPoller2,elapsed_time:l()-this.$MTagSuggestionsPoller16,xy_tag_count:v.faceboxes.length,fbid:w});}return x;}.bind(this));if(u.length>0)this.$MTagSuggestionsPoller10(u);}this.restart();};s.prototype.$MTagSuggestionsPoller22=function(t){'use strict';this.restart();};s.prototype.restart=function(){'use strict';if(this.$MTagSuggestionsPoller2<p){setTimeout(this.start.bind(this),this.$MTagSuggestionsPoller1);}else this.$MTagSuggestionsPoller17();};s.prototype.$MTagSuggestionsPoller18=function(){'use strict';var t=[];for(var u in this.$MTagSuggestionsPoller3)t.push(u);return t;};s.prototype.$MTagSuggestionsPoller23=function(){'use strict';var t=[];for(var u in this.$MTagSuggestionsPoller3)t.push(this.$MTagSuggestionsPoller3[u]);return t;};s.prototype.$MTagSuggestionsPoller19=function(t){'use strict';var u=i.getURIBuilder().setIntVector('photos',t).setString('recognition_project',this.$MTagSuggestionsPoller6).setBool('include_unrecognized_faceboxes',this.$MTagSuggestionsPoller7).setBool('is_page',this.$MTagSuggestionsPoller8).setInt('target',this.$MTagSuggestionsPoller9).getURI();return u;};s.prototype.getWaterfallID=function(){'use strict';return this.$MTagSuggestionsPoller12;};s.prototype.getWaterfallAppName=function(){'use strict';return this.$MTagSuggestionsPoller13;};s.prototype.getWaterfallSource=function(){'use strict';return this.$MTagSuggestionsPoller14;};f.exports=s;},null);
__d('MTagSuggestionsController',['MTagSuggestionsPoller','React','ReactDOM','MStructuredComposerTaggingInputReact','DOM','BanzaiODS'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n='mtouch_composer_facerec_suggestions';function o(p,q,r,s,t,u){'use strict';this.$MTagSuggestionsController1=p;this.$MTagSuggestionsController1.setOnShow(this.onTokenizerInit.bind(this));this.$MTagSuggestionsController1.setOnClear(this.reset.bind(this));this.$MTagSuggestionsController2=q.getUploader();this.$MTagSuggestionsController3=t;this.$MTagSuggestionsController3.setOnEntriesChangedHandler(this.$MTagSuggestionsController4.bind(this));this.$MTagSuggestionsController5=0;this.$MTagSuggestionsController2.setProps({onUploadSuccess:this.onPhotoUploadSuccess.bind(this),onRemove:this.removeFaceboxesByPhotoID.bind(this)});this.$MTagSuggestionsController6=new h().setRecognitionProject('composer_facerec').setIncludeUnrecognized(true).setTargetIsPage(r==='page').setTargetId(s).setHandler(function(v){this.handleFaceboxResponse(v);}.bind(this)).setTimeoutHandler(function(v){this.onPollerTimeout(v);}.bind(this)).setWaterfall(this.$MTagSuggestionsController2.component.getWaterfallID(),this.$MTagSuggestionsController2.component.getWaterfallAppName(),this.$MTagSuggestionsController2.component.getWaterfallSource());this.$MTagSuggestionsController7={};this.$MTagSuggestionsController8={};this.$MTagSuggestionsController9={};this.$MTagSuggestionsController10=false;this.$MTagSuggestionsController11={};this.$MTagSuggestionsController12=!!u;}o.prototype.onTokenizerInit=function(){'use strict';if(Object.keys(this.$MTagSuggestionsController9).length>0)this.updateTypeaheadWithFaceboxSuggestions();if(!this.$MTagSuggestionsController10){this.$MTagSuggestionsController10=true;this.$MTagSuggestionsController1.getTokenizer().setProps({onAdd:this.$MTagSuggestionsController13.bind(this),onRemove:this.$MTagSuggestionsController14.bind(this)});}};o.prototype.$MTagSuggestionsController13=function(p){'use strict';this.$MTagSuggestionsController11[p.id]=true;};o.prototype.$MTagSuggestionsController14=function(p){'use strict';delete this.$MTagSuggestionsController11[p.id];if(p.autoTag)m.bumpEntityKey(n,'remove_auto_tag');};o.prototype.$MTagSuggestionsController15=function(p){'use strict';var q={};p.forEach(function(w){q[w.id]=true;});for(var r in this.$MTagSuggestionsController7)for(var s in this.$MTagSuggestionsController7[r]){var t=this.$MTagSuggestionsController7[r][s];if(!t.tagUserID){if(!t.ignoreRecognition){var u=t.recognitions[0].user.fbid,v=t.recognitions[0].user.name;if(q[u]){t.tagUserID=u;t.tagName=v;}}}else if(!q[t.tagUserID]){if(this.$MTagSuggestionsController8[t.tagUserID]&&t.ignoreRecognition)delete this.$MTagSuggestionsController8[t.tagUserID][s];delete t.tagUserID;delete t.tagName;}}};o.prototype.$MTagSuggestionsController4=function(p){'use strict';this.$MTagSuggestionsController15(p);this.$MTagSuggestionsController16(p);};o.prototype.$MTagSuggestionsController16=function(p){'use strict';var q={};p.forEach(function(r){var s=this.$MTagSuggestionsController8[r.id];for(var t in s){var u=s[t].attachmentID;if(!q[u])q[u]=0;q[u]++;}}.bind(this));this.$MTagSuggestionsController2.component.setAttachmentTagCounts(q);};o.prototype.onPhotoUploadSuccess=function(p,q){'use strict';this.$MTagSuggestionsController6.addPhotoIDAndLog(p,q);this.$MTagSuggestionsController2.component.setAttachmentProps(q,{isPollingTagSuggestions:true});if(!this.$MTagSuggestionsController6.isPolling())this.$MTagSuggestionsController6.start();};o.prototype.$MTagSuggestionsController17=function(p){'use strict';return {name:p.tagName,display:p.tagName,id:p.tagUserID,autoTag:true};};o.prototype.handleFaceboxResponse=function(p){'use strict';p.forEach(function(r){var s=r.fbid,t=r.faceboxes;this.$MTagSuggestionsController2.component.setAttachmentProps(r.attachmentID,{isPollingTagSuggestions:false});t.forEach(function(u){u.photoID=s;u.attachmentID=r.attachmentID;if(!this.$MTagSuggestionsController7[s])this.$MTagSuggestionsController7[s]={};this.$MTagSuggestionsController7[s][u.fbid]=u;if(u.recognitions.length>0){u.ignoreRecognition=false;var v=u.recognitions[0].user.fbid;if(!this.$MTagSuggestionsController8[v])this.$MTagSuggestionsController8[v]={};this.$MTagSuggestionsController8[v][u.fbid]=u;if(!this.$MTagSuggestionsController9[v])this.$MTagSuggestionsController9[v]=0;this.$MTagSuggestionsController9[v]++;if(!this.$MTagSuggestionsController10&&this.$MTagSuggestionsController12){u.tagName=u.recognitions[0].user.name;u.tagUserID=v;var w=this.$MTagSuggestionsController17(u);this.$MTagSuggestionsController3.addAutoToken(w);}}else u.ignoreRecognition=true;}.bind(this));}.bind(this));var q=this.$MTagSuggestionsController3.getEntries();this.$MTagSuggestionsController15(q);this.$MTagSuggestionsController16(q);};o.prototype.removeFaceboxesByPhotoID=function(p){'use strict';if(this.$MTagSuggestionsController6.hasPhotoID(p)){this.$MTagSuggestionsController6.removePhotoID(p);}else if(this.$MTagSuggestionsController7[p]){var q=this.$MTagSuggestionsController7[p];for(var r in q){var s=q[r];if(s.recognitions.length>0)this.$MTagSuggestionsController18(s);}this.$MTagSuggestionsController7[p]=null;}};o.prototype.$MTagSuggestionsController18=function(p){'use strict';var q=p.tagUserID||p.recognitions[0].user.fbid;if(p.recognitions.length>0){this.$MTagSuggestionsController9[q]--;if(this.$MTagSuggestionsController9[q]===0)delete this.$MTagSuggestionsController9[q];}if(this.$MTagSuggestionsController8[q]){delete this.$MTagSuggestionsController8[q][p.fbid];if(Object.keys(this.$MTagSuggestionsController8[q]).length<=0&&!this.$MTagSuggestionsController11[q]&&this.$MTagSuggestionsController12){var r=this.$MTagSuggestionsController17(p);this.$MTagSuggestionsController3.onRemove(r);}else this.$MTagSuggestionsController16(this.$MTagSuggestionsController3.getEntries());}};o.prototype.updateTypeaheadWithFaceboxSuggestions=function(){'use strict';var p=Object.keys(this.$MTagSuggestionsController9);p=p.map(function(s){return +s;});var q=this.$MTagSuggestionsController1.getTokenizer(),r=q.component.props.suggestions.map(function(s){return s.uid;});r.forEach(function(s){if(p.indexOf(s)<0)p.push(s);});q.updateTypeaheadWithSuggestions(p);};o.prototype.$MTagSuggestionsController19=function(){'use strict';var p=this.$MTagSuggestionsController1.getTokenizer();p.component.updateTypeaheadWithSuggestions([]);};o.prototype.generateHiddenInput=function(p){'use strict';var q=[];for(var r in this.$MTagSuggestionsController7)for(var s in this.$MTagSuggestionsController7[r]){var t=this.$MTagSuggestionsController7[r][s];if(t.recognitions.length>0&&t.ignoreRecognition&&t.tagUserID!==t.recognitions[0].user.fbid)q.push(t);}var u=l.create('div',{});l.appendContent(p,u);j.render(i.createElement(k,{tokenCollection:this.$MTagSuggestionsController3.getEntries(),tagSuggestions:this.$MTagSuggestionsController8,failedSuggestions:q}),u);};o.prototype.onPollerTimeout=function(p){'use strict';p.forEach(function(q){this.$MTagSuggestionsController2.component.setAttachmentProps(q,{isPollingTagSuggestions:false});}.bind(this));};o.prototype.addXYTag=function(p){'use strict';var q=this.$MTagSuggestionsController7[p.photoID][p.fbid];if(q.recognitions.length>0)this.$MTagSuggestionsController18(q);o.addFaceboxData(q,p.tagName,p.tagUserID);if(!this.$MTagSuggestionsController8[q.tagUserID])this.$MTagSuggestionsController8[q.tagUserID]={};this.$MTagSuggestionsController8[q.tagUserID][q.fbid]=q;var r=this.$MTagSuggestionsController17(q);this.$MTagSuggestionsController3.addManualXYTag(r);this.$MTagSuggestionsController5+=1;};o.prototype.deleteXYTag=function(p){'use strict';var q=this.$MTagSuggestionsController7[p.photoID][p.fbid];q.ignoreRecognition=true;delete q.tagUserID;delete q.tagName;this.$MTagSuggestionsController18(p);this.$MTagSuggestionsController5-=1;};o.prototype.getNumXYTags=function(){'use strict';return this.$MTagSuggestionsController5;};o.prototype.getFaceboxesCopyForPhoto=function(p){'use strict';var q={};for(var r in this.$MTagSuggestionsController7[p])q[r]=babelHelpers['extends']({},this.$MTagSuggestionsController7[p][r]);return q;};o.prototype.reset=function(){'use strict';this.$MTagSuggestionsController6.abort();this.$MTagSuggestionsController9={};this.$MTagSuggestionsController7={};this.$MTagSuggestionsController8={};this.$MTagSuggestionsController19();this.$MTagSuggestionsController10=false;this.$MTagSuggestionsController11={};this.$MTagSuggestionsController5=0;};o.addFaceboxData=function(p,q,r){'use strict';p.tagName=q;p.tagUserID=r;p.ignoreRecognition=true;};o.deleteFaceboxData=function(p){'use strict';delete p.tagUserID;delete p.tagName;p.ignoreRecognition=true;};f.exports=o;},null);
__d("XPhotosIncrementThumbnailPreviewNUXImpressionsController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/photos\/tagging\/increment_thumbnail_preview_nux_impressions\/",{});},null);
__d("XPrivacyRemindersImpressionLoggingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/privacy\/reminders\/log_imp\/",{type:{type:"String",required:true}});},null);
__d('whitelistObjectKeys',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j){var k={},l=Array.isArray(j)?j:Object.keys(j);for(var m=0;m<l.length;m++)if(typeof i[l[m]]!=='undefined')k[l[m]]=i[l[m]];return k;}f.exports=h;},null);
__d('MStructuredComposer',['ActorURI','BanzaiLogger','CSS','CurrentUser','MLegacyDataStore','DOM','GroupSellLogger','MAjaxify','MAjaxifyFormTypes','MarauderLogger','MMultiPhotoUploaderAttachmentState','MComposerConfig','MComposerDataStoreKeys','MComposerEntry','MComposerLogger','MComposerLoggerPublishingListeners','MComposerNavigationMixin','MComposerPresence','MComposerSigils','MComposerTypes','MComposition','MCompositionConfigFields','MCompositionConfigStore','MCompositionMinutiaeFields','MCompositionMinutiaeStore','MCompositionPhotoFields','MCompositionPhotoStore','MCompositionPlaceFields','MCompositionPlaceStore','MCompositionPrivacyStore','MCompositionShareFields','MCompositionShareStore','MCompositionStatusStore','MCompositionStatusFields','MCompositionSlideshowFields','MCompositionSlideshowStore','MCompositionFormatFields','MCompositionFormatID','MCompositionFormatStore','MCompositionWithStore','MCompositionWithFields','MCompositionStoreID','MCompositionUserActions','MComposerWaterfallEvent','MGroupSellInterceptUtil','MInputFocus','MJSEnvironment','MPrivacyComposerSelector','MRequest','MRequestTypes','MStructuredComposerOGInput','MStructuredComposerPhotoPreviewBootloader','MStructuredComposerSlideshowPreview','MTagSuggestionsController','MTouchClick','MViewport','PrivacyConst','PrivacyRemindersLoggingTypes','SlideshowConstants','Stratcom','XPhotosIncrementThumbnailPreviewNUXImpressionsController','XPrivacyRemindersImpressionLoggingController','UnpublishedContentTypeJSConstants','URI','URLMatcher','UserAgent','Vector','areEqual','$','fbt','ge','getObjectValues','mixin','setTimeoutAcrossTransitions','whitelistObjectKeys','createDeprecatedProperties','cx','WildeLoader'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb,ub,vb,wb,xb,yb,zb,ac,bc,cc,dc,ec,fc){var gc,hc;if(c.__markCompiled)c.__markCompiled();var ic=c('WildeLoader').MWildeTimelinePublisherBar,jc,kc=5,lc=6*3600*1000,mc=100;gc=babelHelpers.inherits(nc,bc(x));hc=gc&&gc.prototype;function nc(pc,qc,rc,sc,tc,uc,vc,wc,xc,yc,zc,ad,bd,cd,dd,ed,fd,gd){'use strict';hc.constructor.call(this);jc=ad;this._ogClearablePreview=cd;this._albumPicker=sc;this._ogTagger=tc;this._multiPhotoUploader=uc;this._pageInfo=vc;this._createLabel=wc;this._updateLabel=xc;this._photosPreviewConfig=fd;this._photoPreview=null;this._photosPreviewNux=gd;this._numMentions=0;this._hasMentions=!!this._numMentions;this._defaultHideConfig={};this._targetType=yc;this._entryPointRef=zc;this._stayHiddenUntilOGTaggerCloses=false;this._logWrittenListener=null;this._onComposerCancel=null;this._onComposerSubmit=null;this._root=pc;this._isCreateAlbumDialogOpen=false;this._mentionsEnabled=true;this._albumID=xb('album_fbid').value;var hd=xb('attach_photo'),id=da.get(ca.DISABLE_ALBUM,this._defaultHideConfig[ca.DISABLE_ALBUM]);if(!id&&(this._albumPicker||this._multiPhotoUploader)){j.conditionClass(hd,"_6-k",true);}else m.hide(hd);this._mainPage=xb('viewport');this._composer=m.find(this._root,'div','composer-main-view');this._composerTitle=m.find(this._composer,'div','composer-title');this._submitButtonNode=m.find(this._composer,'button','submit_composer');this._staticTemplates=xb('static_templates');this._error_btn=m.find(this._composer,'div','m-status-empty-error');this._forsaleIntercept=m.scry(this._composer,'div','m-forsale-intercept')[0];if(this._forsaleIntercept){this._forsaleInterceptForsale=m.find(this._forsaleIntercept,'button','forsale_intercept_forsale');this._forsaleInterceptNonForsale=m.find(this._forsaleIntercept,'button','forsale_intercept_nonforsale');this._groupID=m.find(this._forsaleIntercept,'input','sell-composer-group-id').value;}this._forsaleInterceptShown=false;this._forsaleInterceptDeclinedTimestamp=0;this._form=m.find(this._composer,'form');this._starsRatableInput=m.find(this._form,'div','composer-stars-ratable-input');this._ratingTextContainer=m.scry(this._form,'div','composer-stars-rating-text')[0];this._friendsInputController=new jc(qc,m.find(this._form,'div','with-tags'),m.find(this._form,'button','with-button'));if(this._multiPhotoUploader&&dd){this._tagSuggestionsController=new ib(qc,this._multiPhotoUploader,this._targetType,this._form.target.value,this._friendsInputController,ed);if(this._photosPreviewConfig)this._multiPhotoUploader.getUploader().setProps({onUploadStarted:this._initPhotoPreview.bind(this)});}this._slideshowToggle=m.scry(this._form,'div','slideshow-toggle')[0];this._slideshowToggleOptions=this._slideshowToggle?m.scry(this._slideshowToggle,'input','slideshow-option'):null;this._slideshowInput=m.scry(this._form,'input','slideshow-input')[0];this._slideshowNoticePhotoMin=m.scry(this._composer,'div','slideshow-photo-min-msg')[0];this._slideshowNoticePhotoMax=m.scry(this._composer,'div','slideshow-photo-max-msg')[0];this._contextualMessage=m.scry(this._form,'div','contextual_message')[0];var jd=m.scry(this._form,'div','js_placeholder');this._placeholder=jd.length>0?jd[0]:null;this._textarea=m.find(this._form,'textarea','composer-textarea');this._postTypeInput=m.scry(this._form,'input','unpublished_content_type_input')[0];this._defaultAction=this._form.action;if(tc)this._ogInputController=new fb(m.find(this._form,'div','og-tags'),m.find(this._form,'button','og-button'),m.find(this._form,'div','og-object-attachment'),tc,this._ogClearablePreview);this._buttonbar=m.find(this._root,'div','composer-buttons');this._listeners=[];this._editChangesProducers=[fa,ja,ka,na,ua];this._saveConfig();}nc.prototype._getNavigationPolicy=function(pc,qc){'use strict';var rc=this.newNavigationPolicy().addOnOpen(function(){return this._showComposer(pc,qc||{});}.bind(this)).addOnOpenChild(function(){return this._hideForInterstitial();}.bind(this)).addOnReturnFromChild(function(){j.conditionShow(this._composer,!this._stayHiddenUntilOGTaggerCloses&&!this._defaultPrivacyTransitionNux);this._focusOnTextarea();}.bind(this)).addOnCloseByBrowser(function(){return this._cancelComposer();}.bind(this));if(this._onComposerCancel)rc.addOnCloseByBrowser(this._onComposerCancel);return rc;};nc.prototype._getDefaultCancelConfirmMessage=function(){'use strict';if(this._composerType===aa.EDIT){return yb._("Are you sure you want to discard your changes?");}else return yb._("Are you sure you want to discard this post?");};nc.prototype._navigateAwayFromComposerAndCancel=function(){'use strict';if(!this.hasNavigationPolicy())return;if(this._composerType===aa.RECOMMENDATION)i.log('ReviewProductionLoggerConfig',{event:'composer_discard_dialog_shown',page_id:this._recommendationData.pageid,surface:this._getRecommendationSurface()});v.log(ya.COMPOSER_CANCEL_INTENT);var pc;if(this._composerType===aa.EDIT){pc=this._shouldEditStatus();}else if(this._composerType===aa.GROUP_SELL){pc=this._isValidForSalePost();}else pc=this._shouldPostStatus();pc=ub.isBrowser('Mobile Safari 9')?false:pc;if(pc){var qc=da.get(ca.CANCEL_CONFIRMATION_MESSAGE)||this._getDefaultCancelConfirmMessage();if(!b.confirm(qc)){if(this._composerType===aa.RECOMMENDATION)i.log('ReviewProductionLoggerConfig',{event:'composer_discard_dialog_cancel',page_id:this._recommendationData.pageid,surface:this._getRecommendationSurface()});return;}if(this._composerType===aa.RECOMMENDATION)i.log('ReviewProductionLoggerConfig',{event:'composer_discard_dialog_confirm',page_id:this._recommendationData.pageid,surface:this._getRecommendationSurface()});}if(this._composerType===aa.RECOMMENDATION)i.log('ReviewProductionLoggerConfig',{event:'composer_cancel',page_id:this._recommendationData.page_id,surface:this._getRecommendationSurface()});var rc=this.currentNavigationPolicy().addOnClose(function(){return this._cancelComposer();}.bind(this));if(this._onComposerCancel)rc.addOnClose(this._onComposerCancel);rc.close();};nc.prototype._navigateAwayFromComposer=function(pc){'use strict';if(!this.hasNavigationPolicy())return;var qc=this.currentNavigationPolicy().addOnClose(function(){return this._resetComposer();}.bind(this));qc.setIsOnSubmit();if(this._onComposerSubmit)qc.addOnClose(this._onComposerSubmit.bind(null,pc));qc.close();};nc.prototype._navigateToComposer=function(pc,qc){'use strict';this._getNavigationPolicy(pc,qc).open();};nc.prototype._navigateToComposerAndCheckin=function(){'use strict';this._getNavigationPolicy(aa.CHECKIN).addOnOpen(function(){m.hide(this._composer);this._startCheckin();}.bind(this)).addOnCloseByBrowser(function(){ob.invoke('back','MComposer:dialog:place');}).open();};nc.prototype._focusOnTextarea=function(){'use strict';if(!this._skipFocus())this._textarea.focus();};nc.prototype._initializeComposition=function(pc){'use strict';pc[wa.CONFIG]=babelHelpers['extends']({},this._defaultConfig,pc[wa.CONFIG]);xa.initialize(pc);};nc.prototype._setPlaceholder=function(pc){'use strict';if(this._placeholder){this._textarea.placeholder="";m.setContent(this._placeholder,pc);}else this._textarea.placeholder=pc;};nc.prototype._showComposer=function(pc,qc){'use strict';if(qc.targetid)this._form.target.value=qc.targetid;ob.invoke('MPrivacyDeferredSelector::init');ob.listen('MPrivacyDeferredSelector-loaded',null,function(){this._privacyDeferredSelectorHasLoaded=true;}.bind(this));var rc=qc[t.COMPOSITION]||{};if(!rc.hasOwnProperty(wa.CONFIG))rc[wa.CONFIG]=dc(qc,ac(ca));var sc=m.scry(this._form,"input","mentionsHiddenInput")[0]||this._textarea;if(sc.value){if(!rc.hasOwnProperty(wa.STATUS))rc[wa.STATUS]={};rc[wa.STATUS][oa.TEXT]=sc.value;}this._initializeComposition(rc);ob.invoke('MMentions:reset');this._composerType=da.get(ca.COMPOSER_TYPE,pc);if(qc&&qc.og_activity){var tc={};for(var uc in ea){var vc=ea[uc];tc[vc]=qc.og_activity[vc];}xa.minutiaeSet(tc);}this._logWrittenListener=m.listen(this._textarea,'keyup',null,function(){return this._logWritten();}.bind(this));var wc=da.get(ca.PLACEHOLDER);if(wc)this._setPlaceholder(wc);var xc=da.get(ca.CONTEXTUAL_MESSAGE);this._syncSubmit=da.get(ca.SYNC_SUBMIT);if(this._contextualMessage){this._contextualMessage.textContent=xc||'';j.conditionShow(this._contextualMessage,!!xc);}if(this._ogTagger){q.log('og_composer_show_composer');if(!this._ogTaggerLoaded){var yc='/platform/og/composer/tagger',zc=new db(yc).setData({entry_ref:this._entryPointRef}).setType(eb.DEPENDENT);zc.listen('postprocess',function(){if(this._composerType===aa.ACTIVITY)this._ogTagger.toggleIncludedPlaceSelector(true);q.log('og_composer_async_loaded');}.bind(this));o.ajaxify(null,null,zc,null);this._ogTaggerLoaded=true;}}if(this._multiPhotoUploader&&pc===aa.PHOTO){this._showMultiPhotoUploader();}else if(this._ogTagger&&pc===aa.ACTIVITY)this._ogTagger.toggleIncludedPlaceSelector(true);if(this._composerType===aa.EDIT)this._observeEditChanges();m.hide(this._mainPage);m.show(this._composer);kb.scrollTo(0,0);if(this._specificAudienceTooltip&&!this._specificAudienceTooltipShown){this._specificAudienceTooltip.show();this._specificAudienceTooltipShown=true;var ad=new db('/a/composer/nux/write/').setMethod('POST').setData({cns:1});o.ajaxify(null,null,ad);}if(this._forsaleInterceptShown){m.hide(this._forsaleIntercept);this._forsaleInterceptShown=false;}ob.invoke('MStructuredComposer-opened',null,{session_id:this._getSessionID(),composer_type:pc,target_type:this._targetType,entry_point_ref:this._entryPointRef,opened_time:da.get(ca.OPENED_AT)});v.log(ya.COMPOSER_ENTRY,{composer_type:pc,ref:this._entryPointRef,target_type:this._targetType});var bd=da.get(ca.DISABLE_VOICE_SELECTOR),cd=m.scry(this._form,'div','composer-actor-selector')[0];if(cd)if(bd){m.hide(cd);}else m.show(cd);var dd=ma.get(la.LINK_NO_CHANGE);if(this._sharePreview&&this._shouldShowLinkPreview()&&this._composerType===aa.EDIT&&dd)this._sharePreview.init();return true;};nc.prototype._observeEditChanges=function(){'use strict';this._hasEditChanges=false;this._editChangesProducers.forEach(function(pc){this._listeners.push(pc.once('change',this._handleEditChange,this));}.bind(this));};nc.prototype._navigateToComposerAndShowActivitySelector=function(pc){'use strict';this._getNavigationPolicy(aa.ACTIVITY,pc).addOnOpen(function(){m.hide(this._composer);ob.invoke('MComposer:open:activity');}.bind(this)).open();};nc.prototype._navigateToComposerAndShowFileDialog=function(pc,event){'use strict';this._getNavigationPolicy(aa.PHOTO,pc).addOnOpen(function(){if(bb.IS_ANDROID)this._form.offsetHeight;jb.click(xb('photo_input'),event);}.bind(this)).open();};nc.prototype._navigateToComposerAndFocus=function(pc,qc){'use strict';this._getNavigationPolicy(pc,qc).addOnOpen(function(){var rc=bb.IS_APPLE_WEBKIT_IOS&&bb.OS_VERSION>=7;if(!this._skipFocus()&&!this._specificAudienceTooltip&&rc&&!this._audienceAlignmentFlyout&&!this._newcomerAudienceNux&&!this._showStickyGuardrailFlyout&&!this._defaultPrivacyTransitionNux){this._textarea.focus();var sc=this._getStatusText().length;this._textarea.setSelectionRange(sc,sc);}}.bind(this)).open();};nc.prototype._showPrivacyEducationOnComposerOpen=function(){'use strict';if(this._showStickyGuardrailFlyout){ob.invoke('show_sticky_guardrail_flyout',null,{textarea:this._textarea});}else if(this._newcomerAudienceNux){this._showNewcomerAudienceNux();}else if(this._audienceAlignmentFlyout)this._showAudienceAlignmentTux();};nc.prototype._showNewcomerAudienceNux=function(){'use strict';this._textarea.blur();this._newcomerAudienceNux.registerComposer(this._composer);this._newcomerAudienceNux.handleVerticalPadding();this._newcomerAudienceNux.registerPrivacySelector(this._privacySelector);this._newcomerAudienceNux.show();this._addNewcomerAudienceNuxListeners();};nc.prototype._showAudienceAlignmentTux=function(){'use strict';if(this._inAudienceAlignmentPublicExp){if(!this._composerEligibleForInterstitial(lb.PostParam.EVERYONE))return;}else if(this._inAudienceAlignmentOnlyMeExp)if(!this._composerEligibleForInterstitial(lb.PostParam.ONLY_ME))return;ob.invoke('MMentions:decorations:hide',null,{});kb.scrollTo(0,0);this._textarea.blur();this._audienceAlignmentFlyout.registerComposer(this._composer);this._audienceAlignmentFlyout.registerPrivacySelector(this._privacySelector);this._audienceAlignmentFlyout.show();this._addAudienceAlignmentNuxListeners();};nc.prototype._showDefaultPrivacyTransitionNux=function(){'use strict';this._textarea.blur();this._defaultPrivacyTransitionNux.registerComposer(this._composer);this._defaultPrivacyTransitionNux.show();};nc.prototype._addNewcomerAudienceNuxListeners=function(){'use strict';this._listeners.push(ob.listen('MNewcomerAudienceNux:public',null,function(){this.capturePublicPrivacyRow();}.bind(this)));};nc.prototype._addAudienceAlignmentNuxListeners=function(){'use strict';this._listeners.push(ob.listen('MPrivacyAudienceAlignment:friends',null,function(){this._friendsPrivacyRow=this._getPrivacyRow('value',lb.PostParam.FRIENDS);ob.invoke('MPrivacyComposerMenu:updatePrivacy',null,{row:this._friendsPrivacyRow});}.bind(this)));};nc.prototype.setDefaultHideConfig=function(pc){'use strict';this._defaultHideConfig=pc;};nc.prototype._closePrivacy=function(){'use strict';var pc=this._getPrivacySelector();pc&&pc.hideMenu();};nc.prototype._openPrivacy=function(){'use strict';var pc=this._getPrivacySelector();pc&&pc.showMenu();};nc.prototype._removeAlbumAndPhoto=function(){'use strict';var pc=zb('default-album');if(pc)jb.click(pc);if(!this._multiPhotoUploader)m.hide(xb('photo_display'));if(!this._getIsAlbumDisabled())m.hide(xb('album-button'));};nc.prototype._updateSubmitButtonState=function(){'use strict';var pc=true;if(this._composerType===aa.RECOMMENDATION){if(this._shortReviewsDisableDone){var qc=l.get(this._longReviewTips).threshold,rc=this._textarea.value.length,sc=l.get(this._longReviewTips).force_length;if(sc&&rc!==0&&rc<qc)pc=false;}if(this._starsRatableInput){var tc=m.find(this._starsRatableInput,'input','stars-ratable-input');if(!tc.value||tc.value==="0")pc=false;}}if(this._photosUploading)pc=false;if(ta.get(ra.FORMAT_ID)===sa.SLIDESHOW&&!qa.get(pa.IS_VALID))pc=false;this._toggleSubmitButtonState(pc);};nc.prototype._writeRecommendation=function(pc){'use strict';var qc=l.get(pc);this.captureFriendsPrivacyRow.bind(this);this._changeConfig(qc[t.COMPOSITION][wa.CONFIG]);this._composerType=aa.RECOMMENDATION;this._recommendationData=babelHelpers['extends']({},qc);u.invoke(new ba(qc[t.COMPOSITION]));};nc.prototype._changeSettingsAfterOpen=function(){'use strict';if(this._composerType===aa.RECOMMENDATION)this._setupRecommendationAfterOpen();};nc.prototype._getRecommendationSurface=function(){'use strict';var pc=da.get(ca.LOGGING_SURFACE);if(!pc)return 'none';return pc;};nc.prototype._setupRecommendationAfterOpen=function(){'use strict';var pc=this._recommendationData;i.log('ReviewProductionLoggerConfig',{event:'composer_open',page_id:pc.pageid,surface:this._getRecommendationSurface()});this._friendsInputController.setVisible(false);m.show(this._starsRatableInput);if(this._pageInfo)if(pc.pageinfo){m.show(this._pageInfo);m.setContent(this._pageInfo,pc.pageinfo);}else m.hide(this._pageInfo);if(this._ratingTextContainer&&pc.zeroratingtext)this._ratingTextContainer.textContent=pc.zeroratingtext;this._reviewLength=-1;if(this._longReviewTips&&this._longReviewTips.children.length){m.show(this._longReviewTips);this._updateLongReviewTipText();}pc.viewerrating=pc.viewerrating||0;ob.invoke('MPagesStarsRatableBase-setStars',null,{rating:pc.viewerrating});if(this._starPicker&&!pc.viewerrating){m.hide(this._starsRatableInput);this._starPicker.setTitle(pc.starpickertitle);}this._updateSubmitButtonState();this._hasStartedTyping=false;this._listeners.push(ob._listen('keyup','composer-textarea',function(event){if(!this._hasStartedTyping)i.log('ReviewProductionLoggerConfig',{event:'review_composer_started_typing',page_id:pc.pageid,surface:this._getRecommendationSurface()});this._hasStartedTyping=true;}.bind(this)),ob.listen('click','privacy-button',function(event){i.log('ReviewProductionLoggerConfig',{event:'review_composer_privacy_selector_click',page_id:this._recommendationData.pageid,surface:this._getRecommendationSurface()});}.bind(this)),ob.listen('click','submit_composer',function(event){i.log('ReviewProductionLoggerConfig',{event:'composer_done_button_click',page_id:this._recommendationData.pageid,surface:this._getRecommendationSurface()});}.bind(this)));this.currentNavigationPolicy().addOnCloseByBrowser(function(qc){i.log('ReviewProductionLoggerConfig',{event:'composer_cancel',page_id:pc.page_id,surface:qc});}.bind(this,this._getRecommendationSurface()));};nc.prototype._updateLongReviewTipText=function(){'use strict';if(this._longReviewTips&&this._longReviewTips.children.length){var pc=this._textarea.value.length;if(this._reviewLength===pc)return;this._reviewLength=pc;var qc=l.get(this._longReviewTips).threshold,rc=l.get(this._longReviewTips).force_length;if(rc){var sc=m.find(this._longReviewTips,'span','composer-review-length-count'),tc=yb._("{character_count}\/{minimum_length} \u00b7",[yb.param('character_count',pc),yb.param('minimum_length',qc)]);m.setContent(sc,tc+' ');this._updateSubmitButtonState();}var uc=m.find(this._longReviewTips,'span','composer-short-review');j.conditionShow(uc,pc>0&&pc<qc);var vc=m.find(this._longReviewTips,'span','composer-long-review');j.conditionShow(vc,pc>=qc);}};nc.prototype._resetAlbumSelection=function(){'use strict';if(!this._getIsAlbumDisabled())j.conditionClass(xb('album-button'),'active',false);this._privacySelector&&m.show(this._privacySelector);xb('album_fbid').value='0';xb('album_privacy').value='';this._albumChosen=false;this._albumPicker.resetAlbumSelection();};nc.prototype._resetComposer=function(){'use strict';this._onComposerCancel=null;this._onComposerSubmit=null;if(this._isPageCheckin){this._isPageCheckin=false;this._changeConfig(this._defaultConfig);}this._toggleSubmitButtonState(true);m.hide(this._error_btn);this._hasMentions=false;this._numMentions=0;this._friendsInputController.reset();if(this._ogTagger){this._ogInputController.reset();ob.invoke('composerReset');this._ogTagger.hide();}if(this._photoAction){m.find(this._attachPhoto,'input','photo-input').value='';this._hasPhoto=false;if(!this._getIsAlbumDisabled()){this._removeAlbumAndPhoto();this._albumPicker.hide();}else{m.hide(this._attachPhoto);this._photoOpen=false;}j.conditionClass(this._photoButton,'active',false);m.show(this._photoButton);}!this._slideshowToggle||j.hide(this._slideshowToggle);if(this._slideshowNUX&&this._slideshowNUX.hasShown()){this._slideshowNUX.dismiss();this._slideshowNUX=null;}if(this._pageInfo)m.hide(this._pageInfo);if(this._longReviewTips)m.hide(this._longReviewTips);if(this._starsRatableInput)m.hide(this._starsRatableInput);this._newcomerAudienceNux=null;this._audienceAlignmentFlyout=null;this._showStickyGuardrailFlyout=false;this._photoButton&&m.show(this._photoButton);var pc=this._getPrivacySelector();if(pc&&pc.isOpen())pc.hideMenu();this._privacySelector&&m.show(this._privacySelector);this._updateTagExpansion();this._defaultPrivacyTransitionNux&&this._defaultPrivacyTransitionNux.dismiss();this._onlyMeFlyoutShown=false;this._mentionsEnabled=true;ob.invoke('MComposer:tagger:clear');this._resetPosition();this._determineFormAction();this._closeComposer();this._cleanupLogWritten();ob.invoke('MMentions:enable');ob.invoke('MStructuredComposer:reset');if(this._multiPhotoUploader)this._multiPhotoUploader.resetState();xa.finalize();};nc.prototype._resetPosition=function(){'use strict';if(this.getScrollToElem()&&this.getShouldScroll())cc(function(){var pc=zb(this.getScrollToElem());if(pc)kb.scrollToNodeWithOffset(pc,-5);}.bind(this),0);};nc.prototype._shouldSubmit=function(){'use strict';if(!ca.DISABLE_SUBMIT_REQUEST)return true;return !da.get(ca.DISABLE_SUBMIT_REQUEST,false);};nc.prototype._shouldSyncSubmit=function(){'use strict';if(this._forceAsync)return false;if(this._syncSubmit)return true;return this._isPageCheckin||this._hasPhotos()||this._isUnpublishedPost;};nc.prototype._shouldShowLinkPreview=function(){'use strict';var pc=da.get(ca.DISABLE_LINK);return !pc&&this._composerType!==aa.SHARE&&(this._composerType===aa.ACTIVITY||this._composerType===aa.PHOTO||this._composerType===aa.CHECKIN||this._composerType===aa.STATUS||this._composerType===aa.EDIT)&&!this._hasPhoto;};nc.prototype._shouldPostStatus=function(){'use strict';if(!ma.isEmpty())return true;var pc=m.convertFormToDictionary(this._form),qc=oc(pc.status)!=='',rc=oc(pc.message)!=='',sc=oc(pc.recommendation)!=='',tc=qc||rc||sc,uc=pc.rating!=="0",vc=this._friendsInputController.hasTokens(),wc=this._ogInputController&&this._ogInputController.hasValue(),xc=this._hasPhotos()||wc,yc=!ja.isEmpty()||this._isPageCheckin||this._pinPlace;if(tc||xc||yc||vc||uc)return true;return false;};nc.prototype._scheduledInFuture=function(){'use strict';var pc=this._schedulePostAMPM.value=='PM'||this._schedulePostAMPM.value==1?12:0,qc=new Date(this._schedulePostYear.value,this._schedulePostMonth.value-1,this._schedulePostDay.value,parseInt(this._schedulePostHour.value,10)+pc,this._schedulePostMinute.value,0,0),rc=qc-Date.now(),sc=10*60*1000,tc=6*31*24*60*60*1000;return rc>=sc&&rc<=tc;};nc.prototype._shouldEditStatus=function(){'use strict';return this._hasEditChanges;};nc.prototype._cleanupForsaleIntercept=function(){'use strict';var pc=m.scry(this._form,'input','composer_attachment_sell_currency')[0];if(pc)this._form.removeChild(pc);var qc=m.scry(this._form,'input','composer_attachment_sell_price')[0];if(qc)this._form.removeChild(qc);var rc=m.scry(this._form,'input','composer_attachment_sell_title')[0];if(rc)this._form.removeChild(rc);};nc.prototype._validateNonEmpty=function(pc){'use strict';if(this._composerType===aa.GROUP_SELL)return this._isValidForSalePost();if(!this._shouldPostStatus()){if(pc==='')this._setStatusText('');this._showError(yb._("Please add content to your status before posting"));return false;}return true;};nc.prototype._isValidForSalePost=function(){'use strict';if(this._composerType!==aa.GROUP_SELL)return true;var pc=m.convertFormToDictionary(this._form),qc=pc.composer_attachment_sell_price,rc=pc.composer_attachment_sell_title,sc=pc.has_categories_enabled==='true',tc=pc.composer_attachment_sell_category,uc=pc.location_type==='inline',vc=pc.composer_attachment_sell_pickup_note;if(oc(rc)===''){this._showError(yb._("Please add a title to your product"));return false;}if(oc(rc).length>mc){this._showError(yb._("Your title must be shorter than 100 characters"));return false;}if(oc(qc)===''){this._showError(yb._("Please add a price to your product"));return false;}if(uc&&vc.length<5){this._showError(yb._("Please enter a valid location to your product"));return false;}if(sc&&oc(tc)===''){this._showError(yb._("Please select a category for your product"));return false;}return true;};nc.prototype._postForSale=function(){'use strict';var pc=oc(this._getStatusText()),qc=m.scry(this._forsaleIntercept,'input','sell-composer-currency-symbol')[0];if(!this._validateNonEmpty(pc)||!qc)return;var rc=za.parseInterceptedPrices(pc,qc.value);if(rc===null||rc.length!==1)return;var sc=document.createElement('input');sc.type='hidden';sc.name='composer_attachment_sell_currency';sc.setAttribute('data-sigil','composer_attachment_sell_currency');sc.value=m.find(this._forsaleIntercept,'input','sell-composer-currency').value;this._form.appendChild(sc);var tc=document.createElement('input');tc.type='hidden';tc.name='composer_attachment_sell_price';tc.setAttribute('data-sigil','composer_attachment_sell_price');tc.value=rc[0];this._form.appendChild(tc);var uc=document.createElement('input');uc.type='hidden';uc.name='composer_attachment_sell_title';uc.setAttribute('data-sigil','composer_attachment_sell_title');uc.value=oc(this._getStatusText());this._form.appendChild(uc);this._toggleSubmitButtonState(false);n.logComposerInterceptAccepted(this._groupID,1);if(this._multiPhotoUploader&&this._multiPhotoUploader.hasPhotos()){this._multiPhotoUploader.logClientPost(this._submit.bind(this));}else this._submit();};nc.prototype._showForsaleIntercept=function(pc){'use strict';if(!this._forsaleIntercept)return false;if(this._forsaleInterceptShown){this._forsaleInterceptDeclinedTimestamp=Date.now();this._cleanupForsaleIntercept();n.logComposerInterceptDeclined(this._groupID,1);return false;}if(this._forsaleInterceptDeclinedTimestamp>0&&Date.now()-this._forsaleInterceptDeclinedTimestamp<lc){return false;}else this._forsaleInterceptDeclinedTimestamp=0;var qc=m.scry(this._forsaleIntercept,'input','sell-composer-currency-symbol')[0];if(!qc)return false;var rc=za.parseInterceptedPrices(pc,qc.value);if(rc!==null&&rc.length===1){m.show(this._forsaleIntercept);this._forsaleInterceptShown=true;n.logComposerInterceptCreated(this._groupID,1);return true;}else{this._cleanupForsaleIntercept();return false;}};nc.prototype._showError=function(pc){'use strict';m.show(this._error_btn);m.setContent(this._error_btn,pc);};nc.prototype._confirmClicked=function(){'use strict';var pc=oc(this._getStatusText());if(!this._validateNonEmpty(pc))return;if(this._showForsaleIntercept(pc))return;if(this._postTypeInput.value==rb.SCHEDULED&&!this._scheduledInFuture()){this._showError(yb._("Scheduled posts need to be shared between 10 minutes and 6 months from when you create them."));return;}if(this._tagSuggestionsController)this._tagSuggestionsController.generateHiddenInput(this._form);if(!this._mentionsEnabled)ob.invoke('MComposerStatusTextarea:flush',null,{value:this._textarea.value,hasMentions:this._mentionsEnabled});if(!this._albumChosen){var qc=this._getPrivacySelector(),rc;if(qc&&qc.getSelectedValue()==lb.PostParam.SELF){rc=qb.getURIBuilder().setString('type',mb.ONLY_ME_IMPRESSION).getURI();o.ajaxify(null,null,new db(rc));var sc=this._friendsInputController.hasTokens()||this._hasMentions;if(!sc&&!window.confirm(yb._("Only you will be able to see this post. Click 'Cancel' to change your audience."))){this._onlyMeFlyoutShown=true;return;}}else if(this._onlyMeFlyoutShown){rc=qb.getURIBuilder().setString('type',mb.ONLY_ME_CONVERSION).getURI();o.ajaxify(null,null,new db(rc));}}this._onlyMeFlyoutShown=false;var tc=this._ogInputController&&this._ogInputController.getLoggingData();if(tc)q.log('og_composer_action_created',undefined,tc);this._toggleSubmitButtonState(false);if(this._composerType===aa.RECOMMENDATION)if(this._longReviewTips&&this._longReviewTips.children.length){var uc=l.get(this._longReviewTips).threshold,vc=this._textarea.value.length,wc=l.get(this._longReviewTips).force_length;if(wc&&vc!==0&&vc<uc){if(this._shortReviewsDisableDone)return;var xc=yb._("Your review must be at least {min_length} characters. Do you want to submit your star rating without your review?",[yb.param('min_length',uc)]);if(!b.confirm(xc)){this._toggleSubmitButtonState(true);return;}ob.invoke('MComposerStatusTextarea:flush',null,{value:'',hasMentions:this._mentionsEnabled});}}v.log(ya.COMPOSER_POST,{loaded_time:da.get(ca.OPENED_AT),targetId:this._form.target.value||k.getID()});if(ta.get(ra.FORMAT_ID)===sa.SLIDESHOW)v.log(ya.SLIDESHOW_POST,{photo_count:ha.get(ga.PHOTO_INFO_LIST,[]).length});if(this._multiPhotoUploader&&this._multiPhotoUploader.hasPhotos()){this._multiPhotoUploader.logClientPost(this._submit.bind(this));}else this._submit();};nc.prototype._getAsyncContainer=function(){'use strict';return (document.getElementById('structured_composer_async_container')||(this._clickedButton?this._clickedButton.parentNode:null));};nc.prototype._getSessionID=function(){'use strict';return da.get(ca.SESSION_ID,null);};nc.prototype._getStatusText=function(){'use strict';return na.get(oa.TEXT,'');};nc.prototype._setStatusText=function(pc){'use strict';var qc={};qc[oa.TEXT]=pc;xa.statusUpdate(qc);};nc.prototype._submit=function(){'use strict';if(!this._shouldSubmit()){this._submitNoRequest();return;}ob.invoke('MComposer:submit');if(this._shouldSyncSubmit()){this._submitSyncRequest();this._cleanupForsaleIntercept();return;}this._submitAsyncRequest();this._cleanupForsaleIntercept();};nc.prototype._getWithTagCount=function(){'use strict';var pc=ua.get(va.TOKENS);return pc?pc.length:0;};nc.prototype._getXYTagCount=function(){'use strict';if(!this._tagSuggestionsController)return 0;return this._tagSuggestionsController.getNumXYTags();};nc.prototype._getTagsUser=function(){'use strict';return this._numMentions;};nc.prototype._submitAsyncRequest=function(){'use strict';var pc=m.convertFormToDictionary(this._form),qc={};qc.hasPhoto=this._hasPhotos();qc.hasVideo=this._hasVideos();qc.xy_tag_count=this._getXYTagCount();qc.with_tag_count=this._getWithTagCount();qc.tags_user=this._getTagsUser();var rc=Object.assign(new w(this._getSessionID(),qc),{postprocess:this.cleanupSoftState.bind(this)});o.form(null,this._form,'async_composer',p.CACHE,this._getAsyncContainer(),false,[rc]);this._staticTemplates.style.height='';this._navigateAwayFromComposer(pc);this._resetPosition();};nc.prototype._submitNoRequest=function(){'use strict';this._staticTemplates.style.height='';this._navigateAwayFromComposer(m.convertFormToDictionary(this._form));};nc.prototype._submitSyncRequest=function(){'use strict';this._form.submit();this._resetPosition();};nc.prototype._getIsAlbumDisabled=function(){'use strict';return !this._albumPicker||da.get(ca.DISABLE_ALBUM,this._defaultHideConfig[ca.DISABLE_ALBUM]);};nc.prototype._getIsSlideshowDisabled=function(){'use strict';return (!this._slideshowToggle||da.get(ca.DISABLE_SLIDESHOW,this._defaultHideConfig[ca.DISABLE_SLIDESHOW]));};nc.prototype._updateButtonVisibility=function(pc,qc,rc){'use strict';var sc=m.scry(this._form,'button',pc)[0];if(sc){var tc=!!da.get(qc,this._defaultHideConfig[qc]);j.conditionShow(sc,rc?!tc:tc);}};nc.prototype._handlePhotoUpdate=function(){'use strict';var pc=ha.get(ga.PHOTO_INFO_LIST,null);if(this._multiPhotoUploader&&pc&&pc.length>0){this._multiPhotoUploader.getUploader().component.setAttachmentsSilent(pc);this._showMultiPhotoUploader();}};nc.prototype._updateSlideshowUIState=function(){'use strict';var pc=ta.get(ra.FORMAT_ID,null),qc=qa.get(pa.IS_VALID,false),rc=ha.get(ga.PHOTO_INFO_LIST,[]).length;if(this._slideshowInput)this._slideshowInput.value=!this._getIsSlideshowDisabled()&&qc&&pc===sa.SLIDESHOW?'1':'0';if(this._slideshowNoticePhotoMax)j.conditionShow(this._slideshowNoticePhotoMax,pc===sa.SLIDESHOW&&rc>nb.max_photo_num);if(this._slideshowNoticePhotoMin)j.conditionShow(this._slideshowNoticePhotoMin,pc===sa.SLIDESHOW&&rc<nb.min_photo_num);if(this._getIsSlideshowDisabled()){!this._slideshowToggle||j.hide(this._slideshowToggle);}else if(rc>=nb.min_photo_num){!this._slideshowToggle||j.show(this._slideshowToggle);!this._slideshowNUX||this._slideshowNUX.showIfNotShown();}};nc.prototype._handleFormatUpdate=function(){'use strict';var pc=ta.get(ra.FORMAT_ID,null),qc=ta.get(ra.PREVIOUS_FORMAT_ID,null);this._updateSlideshowUIState();this._updateSubmitButtonState();!this._slideshowPreviewButton||j.conditionShow(this._slideshowPreviewButton,pc===sa.SLIDESHOW);j.conditionShow(m.find(this._composer,'button','submit_composer'),pc!==sa.SLIDESHOW);if(this._slideshowToggleOptions!==null)this._slideshowToggleOptions.find(function(sc){return sc.value===(pc||sa.PHOTO);}).checked=true;if(!pc||pc===qc)return;var rc=ha.get(ga.PHOTO_INFO_LIST,[]).length;if(pc===sa.SLIDESHOW){v.log(ya.SLIDESHOW_INTENT,{photo_count:rc});}else if(qc===sa.SLIDESHOW)v.log(ya.SLIDESHOW_CANCEL,{photo_count:rc});};nc.prototype._handleSlideshowUpdate=function(){'use strict';this._updateSlideshowUIState();};nc.prototype._handleSlideshowToggleUpdate=function(pc){var qc;'use strict';if(this._getIsSlideshowDisabled())return;var rc=this._slideshowToggleOptions.find(function(sc){return sc.checked;}).value;xa.formatUpdate((qc={},qc[ra.FORMAT_ID]=rc,qc));};nc.prototype._handleConfigUpdate=function(){'use strict';this._form.action=da.get(ca.ACTION);this._composerTitle.textContent=da.get(ca.COMPOSER_TITLE);if(this._photoAction)this._photoAction=h.create(this._photoAction,da.get(ca.ACTOR_ID)).toString();this._updateButtonVisibility('photo-button',ca.DISABLE_PHOTOS,true);this._updateButtonVisibility('with-button',ca.DISABLE_PEOPLE_TAGS,true);this._updateButtonVisibility('og-button',ca.DISABLE_OG_TAG,true);this._updateButtonVisibility('privacy-button',ca.DISABLE_PRIVACY,true);this._updateButtonVisibility('post-type-button',ca.SHOW_POST_TYPE_SELECTOR,false);if(!da.get(ca.SHOW_POST_TYPE_SELECTOR)){ob.invoke('MStructuredComposerPostTypeInput::setPublishNow');this._updatePostType(rb.PUBLISHED,false);}this._updateHiddenForm('target',ca.TARGET_ID);if(da.get(ca.DISABLE_MENTIONS,false)){ob.invoke('MMentions:disable');this._mentionsEnabled=false;}else{ob.invoke('MMentions:enable');this._mentionsEnabled=true;}var pc=this._ogInputController&&this._ogInputController.hasValue();if(pc)this._ogInputController.setDisableOgTagPreview(da.get(ca.DISABLE_OG_TAG_PREVIEW,false));var qc=da.get(ca.PLACEHOLDER);if(qc)this._setPlaceholder(qc);var rc=document.getElementById('composer_album_info');if(rc){var sc=da.get(ca.DISABLE_ALBUM_INFO,this._defaultHideConfig[ca.DISABLE_ALBUM_INFO]);if(sc){j.hide(rc);xb('album_fbid').value='0';}else{j.show(rc);xb('album_fbid').value=this._albumID;}}this._updateSlideshowUIState();};nc.prototype._updateHiddenForm=function(pc,qc){'use strict';var rc=m.scry(this._form,'input',pc)[0];if(rc)rc.value=da.get(qc);};nc.prototype._handleStatusUpdate=function(){'use strict';this._updateLongReviewTipText();this._updateShareScraper();};nc.prototype._handleEditChange=function(){'use strict';this._hasEditChanges=true;};nc.prototype._logWritten=function(){'use strict';if(this._getStatusText().trim()<kc)return;v.log(ya.COMPOSER_WRITTEN,{publish_target:this._form.target.value||k.getID(),loaded_time:da.get(ca.OPENED_AT),written_time:Date.now()});this._cleanupLogWritten();};nc.prototype._cleanupLogWritten=function(){'use strict';if(!this._logWrittenListener)return;this._logWrittenListener.remove();this._logWrittenListener=null;};nc.prototype._saveConfig=function(){'use strict';var pc=m.scry(this._form,"input","mentionsHiddenInput")[0]||this._textarea;this._defaultConfig={action:this._form.action,targetid:this._form.target.value,inputname:pc.name,placeholder:this._placeholder?this._placeholder.textContent:this._textarea.placeholder,composertitle:this._composerTitle.textContent,pinplace:this._pinPlace,forceasync:this._forceAsync};this._defaultConfig[ca.BUTTON_TEXT_SUBMIT]=this._submitButtonNode.textContent;};nc.prototype._changeConfig=function(pc){'use strict';var qc=m.scry(this._form,"input","mentionsHiddenInput")[0]||this._textarea;this._form.action=pc.action;if(this._form.target)this._form.target.value=pc.targetid;this._setPlaceholder(pc.placeholder);this._composerTitle.textContent=pc.composertitle;this._pinPlace=pc.pinplace;this._forceAsync=pc.forceasync;qc.name=pc.inputname;this._showPostTypeSelectionFlow=pc.showposttypeselector;};nc.prototype._extendComposerHeight=function(){'use strict';if(this._composer.style.display!=='none')this._staticTemplates.style.height=b.innerHeight+'px';};nc.prototype.setPrivacySelector=function(pc){'use strict';this._privacySelector=pc;};nc.prototype._getPrivacySelector=function(){'use strict';return this._privacySelector&&cb.getInstance(this._privacySelector);};nc.prototype._updateShareScraper=function(){'use strict';if(!s.SHOW_LINK_PREVIEW||!this._shouldShowLinkPreview())return;if(ma.get(la.LINK_NO_CHANGE))return;var pc=tb.permissiveMatch(this._getStatusText()),qc=ma.get(la.DISABLED_LINKS),rc=ma.get(la.SHARE_URI);if(pc!==rc&&(!qc||!qc[pc])){if(this._multiPhotoUploader)if(this._multiPhotoUploader.getUploader().component.getAttachmentCount()===0){this._multiPhotoUploader.resetState();}else return;if(pc&&rc&&rc.indexOf(pc)!=-1||!pc)return;setTimeout(function(){xa.shareLinkUpdate(pc);xa.configDisablePhotosUpdate(!!pc);},0);}};nc.prototype._updatePostType=function(pc,qc){'use strict';this._postTypeInput.value=pc;var rc=null;if(pc===rb.DRAFT){this._isUnpublishedPost=true;rc=yb._("Save");}else if(pc===rb.PUBLISHED){this._isUnpublishedPost=false;rc=qc?yb._("Backdate"):yb._("Post");}else if(pc===rb.SCHEDULED){this._isUnpublishedPost=true;rc=yb._("Schedule");}if(rc){m.setContent(m.find(this._composer,'button','submit_composer'),rc);if(this._slideshowPreviewController)this._slideshowPreviewController.setSubmitButtonText(rc);}};nc.prototype._updateSchedulePostTime=function(pc){'use strict';this._schedulePostYear=m.find(this._form,'input','scheduled_post_year');this._schedulePostMonth=m.find(this._form,'input','scheduled_post_month');this._schedulePostDay=m.find(this._form,'input','scheduled_post_day');this._schedulePostHour=m.find(this._form,'input','scheduled_post_hour');this._schedulePostMinute=m.find(this._form,'input','scheduled_post_minute');this._schedulePostAMPM=m.find(this._form,'input','scheduled_post_ampm');this._schedulePostYear.value=pc.year;this._schedulePostMonth.value=pc.month;this._schedulePostDay.value=pc.day;this._schedulePostHour.value=pc.hour;this._schedulePostMinute.value=pc.minute;this._schedulePostAMPM.value=pc.ampm;};nc.prototype._updateBackdatedPostTime=function(pc){'use strict';this._backdatedPostYear=m.find(this._form,'input','backdated_post_year');this._backdatedPostMonth=m.find(this._form,'input','backdated_post_month');this._backdatedPostDay=m.find(this._form,'input','backdated_post_day');this._backdatedPostYear.value=pc.year;this._backdatedPostMonth.value=pc.month;this._backdatedPostDay.value=pc.day;};nc.prototype.setPhotoAction=function(pc){'use strict';if(pc){this._attachPhoto=xb('attach_photo');this._photoButton=m.find(this._form,'button','photo-button');}this._photoAction=pc;return this;};nc.prototype.setKeyboardStateDown=function(){'use strict';};nc.prototype.setLongReviewTips=function(pc){'use strict';this._longReviewTips=pc;};nc.prototype.setShortReviewsDisableDone=function(pc){'use strict';this._shortReviewsDisableDone=pc;};nc.prototype.setSlideshowPreview=function(pc){'use strict';this._slideshowPreview=pc;this._slideshowPreviewButton=m.find(this._composer,'button','show_slideshow_preview');this._slideshowPreviewController=new hb(this._slideshowPreview,this._slideshowPreviewButton);};nc.prototype.setSlideshowNUX=function(pc){'use strict';this._slideshowNUX=pc;};nc.prototype._determineFormAction=function(){'use strict';if(this._hasPhotos()&&this._photoAction!==''){this._form.action=this._photoAction;}else this._form.action=da.get(ca.ACTION)||this._defaultAction;};nc.prototype._determineMultiPhotoComposerState=function(){'use strict';if(!this._multiPhotoUploader)return;if(this._photoButton)j.conditionClass(this._photoButton,'active',this._hasPhotos());if(!this._getIsAlbumDisabled()){var pc=ta.get(ra.FORMAT_ID,null);j.conditionShow(xb('album-button'),this._hasPhotos()&&pc!==sa.SLIDESHOW);if(!this._hasPhotos()&&this._albumChosen)this._resetAlbumSelection();}};nc.prototype._showMultiPhotoUploader=function(){'use strict';if(this._multiPhotoUploader){this._determineMultiPhotoComposerState();this._multiPhotoUploader.alterPreviewGrid(true);}if(!this._getIsSlideshowDisabled())this._multiPhotoUploader.getUploader().setProps({showDropShadow:false});};nc.prototype._hasVideos=function(){'use strict';return false;};nc.prototype._hasPhotos=function(){'use strict';if(this._multiPhotoUploader){return this._multiPhotoUploader.hasPhotos();}else if(!this._getIsAlbumDisabled()){return this._hasPhoto;}else return this._photoOpen&&this._hasPhoto;};nc.prototype._pagePostClicked=function(pc){'use strict';if(!pc)return;var qc=l.get(pc);this._changeConfig(qc);this._privacySelector&&m.hide(this._privacySelector);};nc.prototype.start=function(){'use strict';this._form.addEventListener('reset',this._resetComposer.bind(this));this._listeners.push(ob.listen('MComposer:entry:js',null,function(event){var qc=event.getData();this._onComposerCancel=qc[t.ON_CANCEL];this._onComposerSubmit=qc[t.ON_SUBMIT];this._navigateToComposerAndFocus(aa.STATUS,qc);this._changeSettingsAfterOpen();this._showPrivacyEducationOnComposerOpen();}.bind(this)));if(this._starsRatableInput){this._listeners.push(ob.listen('MPagesStarsRatableBase-starsSet',null,this._updateSubmitButtonState.bind(this)));this._listeners.push(ob.listen('MPagesStarsRatableBase-starTapped',null,function(qc){i.log('ReviewProductionLoggerConfig',{event:'composer_star_click',page_id:this._recommendationData.pageid,star_clicked:qc.getData().rating,surface:this._getRecommendationSurface()});}.bind(this)));}this._listeners.push(ob.listen('MDefaultPrivacyEducationNux:selected',null,function(){this._defaultPrivacyTransitionNux=null;}.bind(this)));this._listen('click',z.ENTRY_TRIGGER_LEGACY,function(event){if(ic&&ic.listenersRegistered())return;var qc=event.getNode(z.ENTRY_TRIGGER_LEGACY),rc=l.get(qc);if(rc&&rc.og_activity&&!rc.og_activity.fbt_phrase)rc.og_activity.fbt_phrase=this._ogTagger._getTagPhrase(rc.og_activity.action_type,rc.og_activity.icon,rc.og_activity.object_str,rc.og_activity.object_id,rc.og_activity.location_str);this._navigateToComposerAndFocus(aa.STATUS,rc);this._showPrivacyEducationOnComposerOpen();this._clickedButton=qc;}.bind(this));if(ub.isBrowser('Mobile Safari < 8')){var pc=true;this._listen('click','cancel_composer',function(event){if(pc){pc=false;setTimeout(function(){jb.click(event.getTarget(),event);},0);}else{pc=true;this._navigateAwayFromComposerAndCancel();}}.bind(this));}else this._listen('click','cancel_composer',this._navigateAwayFromComposerAndCancel.bind(this));this._listen('click','submit_composer',this._confirmClicked.bind(this));this._listen('click','forsale_intercept_nonforsale',this._confirmClicked.bind(this));this._listen('click','forsale_intercept_forsale',this._postForSale.bind(this));this._listen('m:viewport:scroll-to-header',null,this._extendComposerHeight.bind(this));this._listen('click','checkin_link',function(event){if(ic&&ic.listenersRegistered())return;this._clickedButton=event.getNode('checkin_link');this._navigateToComposerAndCheckin();event.prevent();}.bind(this));this._listeners.push(ob.listen('MComposer:close:activity',null,function(){this._stayHiddenUntilOGTaggerCloses=false;m.show(this._composer);}.bind(this)),ob.listen('cancel','MComposer:dialog:place',function(){return this._navigateAwayFromComposerAndCancel();}.bind(this)),ob.listen('close','MComposer:dialog:place',function(){return m.show(this._composer);}.bind(this)));this._listeners.push(ob.listen('MComposer:post:backdate',null,function(event){this._isBackdated=m.find(this._form,'input','is_backdated');this._isBackdated.value=event.getData().value;}.bind(this)));this._listeners.push(ob.listen('MComposer:post:draft',null,function(event){var qc=event.getData();this._updatePostType(qc.type,qc.isBackdated);}.bind(this)));this._listeners.push(ob.listen('MComposer:post:scheduled:time',null,function(event){var qc=event.getData();this._updateSchedulePostTime(qc);}.bind(this)));this._listeners.push(ob.listen('MComposer:post:backdated:time',null,function(event){var qc=event.getData();this._updateBackdatedPostTime(qc);}.bind(this)));if(this._ogTagger){this._listen('click','activity_link',this._navigateToComposerAndShowActivitySelector.bind(this));this._listen('click','og_included_place_checkin',function(event){this._ogTagger.hide();this._startCheckin();}.bind(this));this._listeners.push(this._ogTagger.listen('cancelFromActivity',this._navigateAwayFromComposerAndCancel.bind(this)));}this._listeners.push(da.addListener('change',function(){return this._handleConfigUpdate();}.bind(this)));this._listeners.push(ha.addListener('change',function(){return this._handlePhotoUpdate();}.bind(this)));this._listeners.push(na.addChangeListener(function(){return this._handleStatusUpdate();}.bind(this)));this._listeners.push(ta.addChangeListener(function(){return this._handleFormatUpdate();}.bind(this)));this._listeners.push(qa.addChangeListener(function(){return this._handleSlideshowUpdate();}.bind(this)));if(this._slideshowPreviewController){this._listen('change','slideshow-option',this._handleSlideshowToggleUpdate.bind(this));this._listen('MStructuredComposerSlideshowPreview-submit',null,this._confirmClicked.bind(this));}this._listen('click','write_post_posts_by_others',function(event){this._pagePostClicked(event.getNode('write_post_posts_by_others'));event.prevent();}.bind(this));this._listen('composerPhotoLinkPostsByOthers',null,function(event){this._pagePostClicked(event.getData());event.prevent();}.bind(this));this._listen('click','write_post_admin',function(event){this._pagePostClicked(event.getNode('write_post_admin'));event.prevent();}.bind(this));this._listen('click','page_checkin',function(event){var qc=l.get(event.getNode('page_checkin'));this._isPageCheckin=true;if(!qc[t.COMPOSITION])qc[t.COMPOSITION]=new ba().setStoreData(wa.CONFIG,dc(qc,ac(ca))).setStoreData(wa.PLACE,{id:qc.pageid,name:qc.pagename,new_place:false}).serialize();if(this._photoAction)this._photoAction=new sb(this._photoAction).addQueryData('target',qc.targetid).toString();this._navigateToComposer(aa.CHECKIN,qc);if(this._ogTagger)this._ogTagger.setPlaceID(qc.pageid);event.prevent();}.bind(this));this._listeners.push(ob.listen('MComposer-write-recommendation',null,function(event){this._writeRecommendation(event.getData().element);}.bind(this)));this._listen('click','write-recommendation',function(event){this._writeRecommendation(event.getNode('write-recommendation'));event.prevent();}.bind(this));this._listen('MStructuredComposerFriendsInput-done',null,function(){return this._updateTagExpansion();}.bind(this));this._listen('MStructuredComposerFriendsInput-addedAutoTags',null,function(){return this._updateTagExpansion();}.bind(this));this._listen('MStructuredComposerFriendsInput-addedManualXYTags',null,function(){return this._updateTagExpansion();}.bind(this));this._listen('MStructuredComposerFriendsInput-removedManualTags',null,function(){return this._updateTagExpansion();}.bind(this));this._listen('MStructuredComposerOGInput:update',null,function(){return this._updateTagExpansion();}.bind(this));this._listen('MMentions:change',null,function(event){var qc=event.getData();if(qc.input!==this._textarea)return;this._hasMentions=qc.hasTags;this._numMentions=qc.numTags?qc.numTags:0;this._updateTagExpansion();}.bind(this));this._listeners.push(ja.addChangeListener(function(){if(ja.isEmpty())return;if(this._ogTagger){var qc=ja.get(ia.SUGGESTED_OG_ACTION_TYPE_ID,null),rc=ja.get(ia.ID),sc=ja.get(ia.SUGGESTION_MECHANISM);this._ogTagger.setPlaceID(rc);if(qc&&!this._ogInputController.hasValue()){this._ogTagger.setCancelButtonText(yb._("Skip"));if(this._ogTagger.selectActionTypeImplicitly(qc)){m.hide(this._composer);this._stayHiddenUntilOGTaggerCloses=true;this._ogTagger.setSuggestionMechanism(sc);q.log('og_composer_implicit_verb_selected',undefined,{place_id:rc,suggestion_mechanism:sc});ob.invoke('MComposer:open:activity');}}}}.bind(this)));this._listen('MAlbumPicker:createalbum:open',null,function(event){this._isCreateAlbumDialogOpen=true;}.bind(this));this._listen('MAlbumPicker:createalbum:close',null,function(event){this._isCreateAlbumDialogOpen=false;}.bind(this));this._listen('keydown','tokenizer-input',function(event){if(event.getNode('structured-composer')&&this.getShouldScroll()){var qc=event.getNode('tokenizer-input'),rc=vb.getPos(qc).y;kb.scrollTo(0,rc);}}.bind(this));this._listen('blur','tokenizer-input',function(event){if(event.getNode('structured-composer')&&this.getShouldScroll())kb.scrollToHeader();}.bind(this));this._listen('keyup','composer-textarea',this._updateLongReviewTipText.bind(this));this._listeners.push(na.addChangeListener(function(){return this._handleStatusUpdate();}.bind(this)));this._listen('click','photo_link',function(event){if(ic&&ic.listenersRegistered())return;var qc=event.getNode('photo_link'),rc=l.get(qc);if(this.getShouldScroll())kb.scrollToHeader();if(this._multiPhotoUploader){if(!this._getIsAlbumDisabled())m.show(xb('album-button'));this._navigateToComposerAndShowFileDialog(rc,event);}else{if(!this._getIsAlbumDisabled()){this._navigateToComposerAndShowFileDialog(rc,event);event.prevent();}else{this._navigateToComposer(aa.PHOTO,rc);this._photoOpen=true;m.show(this._attachPhoto);j.conditionClass(this._photoButton,'active',true);}this._clickedButton=qc;event.kill();ob.invoke('composerPhotoLink');ob.invoke('composerPhotoLinkPostsByOthers',null,event.getNode('write_post_posts_by_others'));}}.bind(this));this._listen('click','add-photo-thumbnail',function(event){v.log(ya.MEDIA_INTENT);jb.click(xb('photo_input'),event);event.prevent();}.bind(this));this._listen('click','photo-button',function(event){v.log(ya.MEDIA_INTENT);if(this._multiPhotoUploader){this._closePrivacy();jb.click(xb('photo_input'),event);this._determineFormAction();this._showMultiPhotoUploader();}else if(!this._getIsAlbumDisabled()){jb.click(xb('photo_input'),event);event.prevent();}else{this._closePrivacy();if(this._photoOpen){m.hide(this._attachPhoto);}else m.show(this._attachPhoto);this._photoOpen=!this._photoOpen;j.conditionClass(this._photoButton,'active',this._photoOpen);}}.bind(this));if(!this._getIsAlbumDisabled()){this._listeners.push(this._albumPicker.listen('cancel',function(event){v.log(ya.ALBUM_CANCEL);this._restoreComposer();}.bind(this)));this._listeners.push(this._albumPicker.listen('choose-album',function(event){if(event.is_mobile_uploads_album){this._resetAlbumSelection();}else{ob.invoke('MStructuredComposer-selectAlbum');v.log(ya.ALBUM_ADD);xb('album_fbid').value=event.album_id;xb('album_privacy').value=event.privacy_id;this._albumChosen=true;this._closePrivacy();this._privacySelector&&m.hide(this._privacySelector);}m.show(this._composer);}.bind(this)));this._listen('click','album-button',function(event){v.log(ya.ALBUM_INTENT);this._albumPicker.show();m.hide(this._composer);}.bind(this));}this._listen('MMultiPhotoUploader:attachments:add',null,function(qc){if(!da.isEmpty())v.log(ya.PHOTO_ADD,qc.getData());});this._listen('MMultiPhotoUploader:attachments:remove',null,function(qc){if(!da.isEmpty())v.log(ya.PHOTO_REMOVE,qc.getData());});this._listen('change','photo-input',function(event){var qc,rc=xb('photo_input');if(rc.value!==''&&this._photoAction!==''){if(!this._multiPhotoUploader){qc={photo_count:1};ob.invoke('MStructuredComposer-addedPhoto',null,qc);}rc.name="file1";this._hasPhoto=true;this._determineFormAction();this._photoButton&&j.conditionClass(this._photoButton,'active',true);if(!this._getIsAlbumDisabled()){if(!this._multiPhotoUploader)m.show(xb('photo_display'));m.show(xb('album-button'));}}else{this._hasPhoto=false;this._determineFormAction();j.conditionClass(this._photoButton,'active',false);if(!this._multiPhotoUploader){qc={photo_count:0};ob.invoke('MStructuredComposer-addedPhoto',null,qc);}if(!this._getIsAlbumDisabled()&&!this._multiPhotoUploader)this._removeAlbumAndPhoto();}}.bind(this));this._listen('multi-photos-attachment-change',null,function(event){var qc=event.getData();if(this._multiPhotoUploader.getUploader().component!==qc.multiPhotoUploader)return;var rc=qc.attachments,sc=ha.get(ga.PHOTO_INFO_LIST,[]);if(!wb(rc,sc)){var qc={};qc[ga.PHOTO_INFO_LIST]=rc;xa.photoUpdate(qc);}}.bind(this));this._listen('multi-photos-change',null,function(event){if(event.getData().input_id!='photo_input')return;var qc=this._multiPhotoUploader.getPhotosCount(),rc={photo_count:qc,is_multi_photo_upload:true};ob.invoke('MStructuredComposer-addedPhoto',null,rc);if(this._photosPreviewNux)if(qc>0){this._multiPhotoUploader.getUploader().setProps({showDropShadow:false});m.show(this._photosPreviewNux);}else{this._multiPhotoUploader.getUploader().setProps({showDropShadow:true});m.hide(this._photosPreviewNux);}this._determineFormAction();this._determineMultiPhotoComposerState();}.bind(this));this._listen('click','composer-buttons',function(event){this._textarea.blur();}.bind(this));this._listen('focus','composer-textarea',function(event){if(this.getShouldScroll())if(this._getStatusText()==='')ab.scrollTo(this._textarea,kb.getHeaderTop());}.bind(this));this._listen('click','composer-textarea',function(event){this._closePrivacy();if(this.getShouldScroll())if(this._getStatusText()==='')ab.scrollTo(this._textarea,kb.getHeaderTop());}.bind(this));this._listen(['m:page:loading'],null,this.cleanup.bind(this));this._listen('audience-x-opened',null,function(event){m.hide(this._composer);this._specificAudienceTooltip&&this._specificAudienceTooltip.hide();}.bind(this));this._listen('MMultiPhotoUploader:attachments:change',null,function(event){var qc=event.getData();this._photosUploading=qc.sending+qc.polling!==0;this._updateSubmitButtonState();}.bind(this));this._listen('MWebActivityUploader:received:share',null,this._navigateToComposer.bind(this,aa.PHOTO));if(this._photoPreview||this._photosPreviewConfig)this._listen('click','structured-composer-photo-preview-done',this._hidePhotoPreviews.bind(this));ob.invoke('MStructuredComposer:start');y.register(this);return this;};nc.prototype._cancelComposer=function(){'use strict';this._staticTemplates.style.height='';ob.invoke('MStructuredComposer-canceled',null);v.log(ya.COMPOSER_CANCEL,{maximum_character_count:na.get(oa.LONGEST_LENGTH),loaded_time:da.get(ca.OPENED_AT),publish_target:this._form.target.value||k.getID()||-1,remaining_character_count:this._getStatusText().length});var pc=this._hasPhotos();this._resetComposer();};nc.prototype.cleanup=function(){'use strict';ob.invoke('MStructuredComposer:cleanup');this._closeComposer();this._form.removeEventListener('reset',this._resetComposer,false);for(var pc=0;pc<this._listeners.length;pc++)this._listeners[pc].remove();this._listeners=[];y.unregister(this);};nc.prototype._listen=function(event,pc,qc){'use strict';this._listeners.push(ob.listen(event,pc,qc));};nc.prototype.setSpecificAudienceTooltip=function(pc){'use strict';this._specificAudienceTooltip=pc;};nc.prototype._isAudience=function(pc){'use strict';var qc=m.scry(this._buttonbar,'table','privacy-table')[0];if(!qc)return false;var rc=m.scry(qc,'tr','privacy-option checked')[0];if(!rc)return false;var sc=l.get(rc);return sc.value==pc;};nc.prototype.setInAudienceAlignmentExp=function(pc){'use strict';this._inAudienceAlignmentPublicExp=pc;};nc.prototype.setInAudienceAlignmentOnlyMeExp=function(pc){'use strict';this._inAudienceAlignmentOnlyMeExp=pc;};nc.prototype.setAudienceAlignmentFlyout=function(pc){'use strict';this._audienceAlignmentFlyout=pc;};nc.prototype._composerEligibleForInterstitial=function(pc){'use strict';var qc=this._form.target.value;if(qc&&qc!=k.getID())return false;if(this._composerType!==aa.STATUS)return false;if(!this._isAudience(pc))return false;if(kb.getScreenHeight()<340&&bb.IS_ANDROID){this._audienceAlignmentFlyout.deviceTooShort();return false;}return true;};nc.prototype.setNewcomerAudienceNux=function(pc){'use strict';this._newcomerAudienceNux=pc;};nc.prototype.setStickyGuardrailFlyout=function(pc){'use strict';this._showStickyGuardrailFlyout=pc;};nc.prototype.setDefaultPrivacyTransitionNux=function(pc){'use strict';this._defaultPrivacyTransitionNux=pc;};nc.prototype.setSharePreview=function(pc){'use strict';this._sharePreview=pc;};nc.prototype.captureFriendsPrivacyRow=function(){'use strict';this._friendsPrivacyRow=this._getPrivacyRow('value',lb.PostParam.FRIENDS);if(!this._friendsPrivacyRow)this.closeInterstitial(this._postInterstitialTooltipText[0]);if(this._waitingForFriendsRow)this._handleInterstitialFriends();};nc.prototype.capturePublicPrivacyRow=function(){'use strict';this._publicPrivacyRow=this._getPrivacyRow('value',lb.PostParam.EVERYONE);ob.invoke('MPrivacyComposerMenu:updatePrivacy',null,{row:this._publicPrivacyRow});};nc.prototype.getDefaultPrivacyRow=function(){'use strict';return this._getPrivacyRow('uhd',true);};nc.prototype._getPrivacyRow=function(pc,qc){'use strict';var rc=m.scry(this._buttonbar,'table','privacy-table')[0];if(!rc)return null;for(var sc=0;sc<rc.rows.length;sc++){var tc=rc.rows[sc],uc=l.get(tc);if(uc[pc]==qc)return tc;}};nc.prototype._hideForInterstitial=function(){'use strict';m.hide(this._composer);this._textarea.blur();};nc.prototype._closeComposer=function(){'use strict';this._textarea.blur();m.hide(this._composer);m.show(this._mainPage);ob.invoke('MMentions:removeHiddenInput');};nc.prototype._toggleSubmitButtonState=function(pc){'use strict';this._submitButtonNode.disabled=!pc;if(this._forsaleInterceptForsale){this._forsaleInterceptForsale.disabled=!pc;this._forsaleInterceptNonForsale.disabled=!pc;}if(this._slideshowPreviewButton)this._slideshowPreviewButton.disabled=!pc;};nc.prototype._toggleCancelButtonHidden=function(pc){'use strict';var qc=m.find(this._composer,'button','cancel_composer');qc=qc.parentElement;pc?m.hide(qc):m.show(qc);};nc.prototype._toggleSubmitButtonHidden=function(pc){'use strict';j.conditionShow(this._submitButtonNode.parentElement,!pc);};nc.prototype._restoreComposerWithoutFocus=function(){'use strict';ob.invoke('MMentions:decorations:show',null,{});m.hide(this._mainPage);m.show(this._composer);m.show(this._textarea);m.show(this._buttonbar);};nc.prototype._skipFocus=function(){'use strict';return da.get(ca.SKIP_FOCUS);};nc.prototype._restoreComposer=function(){'use strict';this._restoreComposerWithoutFocus();this._focusOnTextarea();};nc.prototype._incrementPhotosPreviewNuxCounter=function(){'use strict';new db(pb.getURIBuilder().getURI()).send();};nc.prototype._showPhotosPreview=function(pc){'use strict';if(!this._photoPreview)return;if(pc.state===r.UPLOADED&&!pc.isPollingTagSuggestions){if(this._photosPreviewNux)this._incrementPhotosPreviewNuxCounter();m.hide(this._composer);this._photoPreview.show(pc,this._tagSuggestionsController.getFaceboxesCopyForPhoto(pc.fbid));}};nc.prototype._hidePhotoPreviews=function(){'use strict';if(!this._photoPreview)return;m.show(this._composer);this._photoPreview.hide();};nc.prototype._updateTagExpansion=function(){'use strict';var pc=this._friendsInputController.hasTokens()||this._hasMentions,qc=this._getPrivacySelector();qc&&qc.setShowTagExpansion(pc);};nc.prototype._startCheckin=function(){'use strict';ob.invoke('open','MComposer:dialog:place');};nc.prototype._registerPhotoPreviewEvents=function(){'use strict';var pc=this._multiPhotoUploader.getUploader();pc.setProps({onThumbnailClicked:this._showPhotosPreview.bind(this)});this._photoPreview.setOnAddXYTag(this._tagSuggestionsController.addXYTag.bind(this._tagSuggestionsController));this._photoPreview.setOnDeleteXYTag(this._tagSuggestionsController.deleteXYTag.bind(this._tagSuggestionsController));this._photoPreview.setWaterfall(pc.component.getWaterfallID(),pc.component.getWaterfallAppName(),pc.component.getWaterfallSource());};nc.prototype._initPhotoPreview=function(){'use strict';if(this._multiPhotoUploader&&this._tagSuggestionsController&&this._photosPreviewConfig&&!this._photoPreview){this._photoPreview=new gb(this._photosPreviewConfig);this._registerPhotoPreviewEvents();}};ec(nc,{scrollToElem:null,showPlace:true,shouldScroll:true,syncSubmit:false,eventTaggingNuxHref:null});Object.assign(nc.prototype,{_defaultAction:null,_defaultConfig:null,_photoAction:null,_photoOpen:false,_hasPhoto:false,_albumChosen:false,_onlyMeFlyoutShown:false,_prefill:null,_forceAsync:false,_isCheckin:false,_isUnpublishedPost:false,_isPageCheckin:false,_pinPlace:false,_albumPicker:null,_EventTaggingNuxDisplayed:false,_ogTagger:null,_textarea:null,_attachPhoto:null,_clickedButton:null,_composer:null,_composerTitle:null,_contextualMessage:null,_form:null,_mainPage:null,_photoButton:null,_staticTemplates:null,_ogTaggerLoaded:false,_specificAudienceTooltip:null,_specificAudienceTooltipShown:false,_slideshowNUX:null,_listeners:null});function oc(pc){if(!pc)return '';pc=pc.trim();pc=pc.replace(/\n{3,}/,'\n\n');pc=pc.replace(/\t+/,' ');return pc;}f.exports=nc;},null);
__d('InitMStructuredComposer',['$','DOM','MLegacyDataStore','MAlbumPicker','MOpenGraphTagger','MStructuredComposer','Stratcom'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o;function p(q){o=q.friends_tagger;var r=h(q.open_id),s=j.get(r),t=s._friendsTagger||o.fromID(q.friends_tagger_id),u=null;if(q.album_picker_id)u=s._albumPicker||new k(h(q.album_picker_id));var v;if(q.og_tagger_id)v=new l(h(q.og_tagger_id));var w=new m(r,t,null,u,v,q.multi_photo_uploader,q.page_info,q.create_label,q.update_label,q.composer_target_type,q.composer_entry_point,q.friends_input,null,q.og_clearable_preview,q.should_show_tag_suggestions,q.should_auto_tag,q.photos_preview_config,q.photos_preview_nux);if(w.setDefaultHideConfig)w.setDefaultHideConfig(q.hide_config||{});if(q.privacy_selector_rewrite_id)w.setPrivacySelector(h(q.privacy_selector_rewrite_id));j.set(r,{composer:w});if(q.scroll_to_elem_id)w.setScrollToElem(q.scroll_to_elem_id);w.setSyncSubmit(q.syncsubmit);w.setShowPlace(q.showplace);w.setShouldScroll(q.shouldscroll);w.setLongReviewTips(q.long_review_tips);w.setShortReviewsDisableDone(q.short_reviews_disable_done);w.setSlideshowNUX(q.slideshow_nux);if(q.slideshow_preview_id)w.setSlideshowPreview(h(q.slideshow_preview_id));w.start();if(q.photouploaduri)w.setPhotoAction(q.photouploaduri);if(q.specific_audience_tooltip)w.setSpecificAudienceTooltip(q.specific_audience_tooltip);w.setInAudienceAlignmentExp(q.in_aaa_exp);w.setInAudienceAlignmentOnlyMeExp(q.in_aaa_onlyme_exp);w.setAudienceAlignmentFlyout(q.aaa_flyout);if(q.newcomer_audience_nux)w.setNewcomerAudienceNux(q.newcomer_audience_nux);if(q.show_sticky_guardrail_flyout)w.setStickyGuardrailFlyout(q.show_sticky_guardrail_flyout);if(q.default_privacy_transition_nux)w.setDefaultPrivacyTransitionNux(q.default_privacy_transition_nux);w.setSharePreview(q.share_preview);n.listen('MPrivacyComposerMenu::custom',null,function(x){if(x.getData().isDefaultCustomCreationInComposer||x.getData().selector.parentNode.id==q.privacy_selector_rewrite_id)if(x.getData().visible){i.hide(h('structured_composer'));}else{i.hide(h('viewport'));i.show(h('structured_composer'));}});}g.main=p;},null);
__d('MFriendsTaggerReact',['MLegacyDataStore','DOM','getActiveElement','createDeprecatedProperties','eventsMixinDeprecated','invariant','$'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();function o(p){'use strict';this.setRoot(p);i.listen(this.getRoot(),'click',null,this.$MFriendsTaggerReact1.bind(this));}o.prototype.hide=function(){'use strict';j().blur();i.hide(this.getRoot());};o.prototype.show=function(){'use strict';i.show(this.getRoot());this.getTokenizer().component.init();this.onShow&&this.onShow();};o.prototype.clear=function(){'use strict';var p=i.find(this.getRoot(),'div','tokenizer'),q=h.get(p);if(q.tokenizer){this.setEntries([]);this.onClear&&this.onClear();}};o.prototype.hasTokens=function(){'use strict';return this.getEntries().length>0;};o.prototype.getTokens=function(){'use strict';return this.getEntries().reduce(function(p,q){p[q.id]=q;return p;},{});};o.prototype.removeToken=function(p){'use strict';this.getTokenizer().component.onRemoveFromCollection(p);};o.prototype.getEntries=function(){'use strict';return this.getTokenizer().component.getEntries();};o.prototype.setEntries=function(p){'use strict';this.getTokenizer().component.setEntries(p);};o.prototype.$MFriendsTaggerReact1=function(event){'use strict';if(event.getNode('cancel_with_tagger')){this.$MFriendsTaggerReact2();}else if(event.getNode('submit_with_tagger'))this.$MFriendsTaggerReact3();};o.prototype.$MFriendsTaggerReact2=function(){'use strict';this.hide();this.invoke('cancel',{});};o.prototype.$MFriendsTaggerReact3=function(){'use strict';var p=this.getEntries();this.hide();this.invoke('submit',{tokens:p});};o.prototype.getTokenizer=function(){'use strict';var p=i.find(this.getRoot(),'div','tokenizer'),q=h.get(p);!q?m(0):void 0;!q.tokenizer?m(0):void 0;return q.tokenizer;};o.prototype.setOnShow=function(p){'use strict';this.onShow=p;};o.prototype.setOnClear=function(p){'use strict';this.onClear=p;};o.fromID=function(p){'use strict';var q=n(p),r=h.get(q);if(!r.$MFriendsTaggerReact4)r.$MFriendsTaggerReact4=new o(q);return r.$MFriendsTaggerReact4;};o.getFriendIds=function(event){'use strict';if(event.friend_ids)return event.friend_ids;return event.tokens.map(function(p){return p.id;});};k(o,{root:null});l(o,['submit','cancel']);f.exports=o;},null);
__d('MStructuredComposerFriendsInputReact',['Stratcom','CSS','DOM','React','ReactDOM','MComposerLogger','MComposerNavigationMixin','MComposerWaterfallEvent','MSubscriptionsHandlerMixin','MTokenCollection.react','MTokenRenderer.react','TokenCollection','MUnifiedTaggerConstants','BanzaiODS','MCompositionWithStore','MCompositionWithFields','MCompositionUserActions','mixin'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){var z,aa;if(c.__markCompiled)c.__markCompiled();var ba='mtouch_composer_facerec_suggestions',ca=t.SHOW_UNIFIED_TAGGER;z=babelHelpers.inherits(da,y(n,p));aa=z&&z.prototype;function da(ea,fa,ga){'use strict';aa.constructor.call(this);this.$MStructuredComposerFriendsInputReact1=ea;this.$MStructuredComposerFriendsInputReact2=fa;this.$MStructuredComposerFriendsInputReact3=new s();this.$MStructuredComposerFriendsInputReact4=l.render(k.createElement(q,{onClick:this.$MStructuredComposerFriendsInputReact5.bind(this),onRemove:this.$MStructuredComposerFriendsInputReact6.bind(this),renderer:r,collection:this.$MStructuredComposerFriendsInputReact3,collectionKey:'users_with'}),j.find(fa,'ul','friend-tokens'));this.$MStructuredComposerFriendsInputReact7=ga;this.$MStructuredComposerFriendsInputReact8=ga.style.display;this.$MStructuredComposerFriendsInputReact9={};if(ca)this.addSubscriptions(h.listen('MComposer:tagger:click',t.TOKEN_TYPES.PEOPLE,function(){return this.$MStructuredComposerFriendsInputReact5();}.bind(this)));this.addSubscriptions(j.listen(this.$MStructuredComposerFriendsInputReact7,'click',null,function(){return this.$MStructuredComposerFriendsInputReact5();}.bind(this)),this.$MStructuredComposerFriendsInputReact1.listen('cancel',function(){this.currentNavigationPolicy().addOnClose(function(){return this.$MStructuredComposerFriendsInputReact10();}.bind(this)).close();}.bind(this)),this.$MStructuredComposerFriendsInputReact1.listen('submit',function(event){this.currentNavigationPolicy().addOnClose(function(){var ha={};ha[w.TOKENS]=event.tokens;x.withUpdate(ha);m.log(o.FRIEND_TAG_ADD,{num_tags:event.tokens.length});this.$MStructuredComposerFriendsInputReact11(event.tokens.length);}.bind(this)).close();}.bind(this)),v.addChangeListener(function(){return this.$MStructuredComposerFriendsInputReact12();}.bind(this)));}da.prototype.$MStructuredComposerFriendsInputReact12=function(){'use strict';var ea=v.get(w.TOKENS,[]);if(ea!==this.$MStructuredComposerFriendsInputReact3.entries){this.$MStructuredComposerFriendsInputReact3.entries=ea;this.$MStructuredComposerFriendsInputReact13();this.$MStructuredComposerFriendsInputReact4.forceUpdate();this.$MStructuredComposerFriendsInputReact14();this.$MStructuredComposerFriendsInputReact11();this.$MStructuredComposerFriendsInputReact15();}};da.prototype.$MStructuredComposerFriendsInputReact15=function(){'use strict';this.$MStructuredComposerFriendsInputReact16&&this.$MStructuredComposerFriendsInputReact16(this.$MStructuredComposerFriendsInputReact3.entries.slice());};da.prototype.$MStructuredComposerFriendsInputReact13=function(){'use strict';if(ca)h.invoke('MComposer:tagger:update',null,{people:this.$MStructuredComposerFriendsInputReact3.entries});};da.prototype.$MStructuredComposerFriendsInputReact17=function(ea){'use strict';var fa=!this.$MStructuredComposerFriendsInputReact3.hasEntry(ea);if(fa){this.$MStructuredComposerFriendsInputReact3.addEntry(ea);this.$MStructuredComposerFriendsInputReact13();this.$MStructuredComposerFriendsInputReact14();this.$MStructuredComposerFriendsInputReact4.forceUpdate();}return fa;};da.prototype.addManualXYTag=function(ea){'use strict';if(this.$MStructuredComposerFriendsInputReact17(ea))this.$MStructuredComposerFriendsInputReact18();this.$MStructuredComposerFriendsInputReact15();};da.prototype.addAutoToken=function(ea){'use strict';if(!this.$MStructuredComposerFriendsInputReact9[ea.id])if(this.$MStructuredComposerFriendsInputReact17(ea)){this.$MStructuredComposerFriendsInputReact19();u.bumpEntityKey(ba,'add_auto_tag');}};da.prototype.onRemove=function(ea){'use strict';this.$MStructuredComposerFriendsInputReact3.removeEntry(ea);this.$MStructuredComposerFriendsInputReact14();this.$MStructuredComposerFriendsInputReact13();this.$MStructuredComposerFriendsInputReact4.forceUpdate();this.$MStructuredComposerFriendsInputReact15();};da.prototype.$MStructuredComposerFriendsInputReact6=function(ea){'use strict';this.$MStructuredComposerFriendsInputReact9[ea.id]=true;this.onRemove(ea);if(ea.autoTag)u.bumpEntityKey(ba,'remove_auto_tag');this.$MStructuredComposerFriendsInputReact20();};da.prototype.$MStructuredComposerFriendsInputReact14=function(){'use strict';var ea=this.$MStructuredComposerFriendsInputReact3.entries.length>0;if(!ca)i.conditionShow(this.$MStructuredComposerFriendsInputReact2,ea);i.conditionClass(this.$MStructuredComposerFriendsInputReact7,'active',ea);};da.prototype.$MStructuredComposerFriendsInputReact5=function(){'use strict';this.newNavigationPolicy().addOnOpen(function(){m.log(o.FRIEND_TAG_INTENT);this.$MStructuredComposerFriendsInputReact1.setEntries(this.$MStructuredComposerFriendsInputReact3.entries.slice());setTimeout(this.$MStructuredComposerFriendsInputReact1.show.bind(this.$MStructuredComposerFriendsInputReact1));}.bind(this)).addOnCloseByBrowser(function(){this.$MStructuredComposerFriendsInputReact1.hide();this.$MStructuredComposerFriendsInputReact10();}.bind(this)).open();};da.prototype.$MStructuredComposerFriendsInputReact11=function(ea){'use strict';h.invoke('MStructuredComposerFriendsInput-done',null,{num_tags:ea});};da.prototype.$MStructuredComposerFriendsInputReact19=function(){'use strict';h.invoke('MStructuredComposerFriendsInput-addedAutoTags',null,{});};da.prototype.$MStructuredComposerFriendsInputReact18=function(){'use strict';h.invoke('MStructuredComposerFriendsInput-addedManualXYTags',null,{});};da.prototype.$MStructuredComposerFriendsInputReact20=function(){'use strict';h.invoke('MStructuredComposerFriendsInput-removedManualTags',null,{});};da.prototype.$MStructuredComposerFriendsInputReact10=function(){'use strict';var ea=this.getTokenCount();h.invoke('MStructuredComposerFriendsInput-done',null,{cancel:true,num_tags:ea});m.log(o.FRIEND_TAG_CANCEL,{num_tags:ea});};da.prototype.reset=function(){'use strict';this.$MStructuredComposerFriendsInputReact4.entries=[];if(!ca)j.hide(this.$MStructuredComposerFriendsInputReact2);this.$MStructuredComposerFriendsInputReact3.entries=[];this.$MStructuredComposerFriendsInputReact9={};this.$MStructuredComposerFriendsInputReact1.clear();this.$MStructuredComposerFriendsInputReact4.forceUpdate();i.conditionClass(this.$MStructuredComposerFriendsInputReact7,'active',false);this.$MStructuredComposerFriendsInputReact1.hide();};da.prototype.getTokenCount=function(){'use strict';return this.$MStructuredComposerFriendsInputReact3.entries.length;};da.prototype.hasTokens=function(){'use strict';return this.getTokenCount()>0;};da.prototype.setVisible=function(ea){'use strict';i.conditionShow(this.$MStructuredComposerFriendsInputReact7,ea);};da.prototype.setOnEntriesChangedHandler=function(ea){'use strict';this.$MStructuredComposerFriendsInputReact16=ea;};da.prototype.getEntries=function(){'use strict';return this.$MStructuredComposerFriendsInputReact3.entries;};f.exports=da;},null);
__d('MTokenizerParagraphRoot.react',['React','cx'],function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();var l=h.PropTypes;j=babelHelpers.inherits(m,h.Component);k=j&&j.prototype;m.prototype.render=function(){'use strict';return (h.createElement('div',{className:"_5hd3"},'â€”',this.props.showSpace?' ':'',this.props.children));};function m(){'use strict';j.apply(this,arguments);}m.propTypes={showSpace:l.bool};m.defaultProps={showSpace:true};f.exports=m;},null);
__d('MTokenizerParagraphToken.react',['MTouchableArea.react','React','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k){var l,m;if(c.__markCompiled)c.__markCompiled();var n=i.PropTypes,o={use:{token:"mToken _4tk2",noborder:"mToken _4tk2 _3a7k"}};l=babelHelpers.inherits(p,i.Component);m=l&&l.prototype;function p(){var q,r;'use strict';for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return q=(r=m.constructor).call.apply(r,[this].concat(t)),this.getClassListForAttribute=function(v){return o[v][this.props[v]];}.bind(this),q;}p.prototype.render=function(){'use strict';return (i.createElement(h,null,i.createElement('span',babelHelpers['extends']({},this.props,{className:k(this.props.className,this.getClassListForAttribute('use'))}),i.createElement('span',{className:"_4tk0"},this.props.children))));};p.propTypes={use:n.oneOf(['token','noborder'])};p.defaultProps={use:'token'};f.exports=p;},null);
__d('MTokenizerParagraphAtPlace.react',['MTokenizerParagraphRoot.react','MTokenizerParagraphToken.react','React','fbt','MUnifiedTaggerConstants'],function a(b,c,d,e,f,g,h,i,j,k){var l,m;if(c.__markCompiled)c.__markCompiled();var n=c('MUnifiedTaggerConstants').TOKEN_TYPES,o=j.PropTypes;l=babelHelpers.inherits(p,j.Component);m=l&&l.prototype;function p(){var q,r;'use strict';for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return q=(r=m.constructor).call.apply(r,[this].concat(t)),this.renderNonSpecificPlace=function(){return (j.createElement(h,null,k._("in {city-name}.",[k.param('city-name',this.renderPlaceToken())])));}.bind(this),this.renderPlaceToken=function(){return (j.createElement(i,{onClick:this.props.onTokenClick.bind(null,n.PLACE)},this.props.place.name));}.bind(this),this.renderSpecificPlace=function(){return (j.createElement(h,null,k._("at {place-name}.",[k.param('place-name',this.renderPlaceToken())])));}.bind(this),q;}p.prototype.render=function(){'use strict';return this.props.place.isNonSpecific?this.renderNonSpecificPlace():this.renderSpecificPlace();};p.propTypes={onTokenClick:o.func.isRequired,place:o.object.isRequired};f.exports=p;},null);
__d('MTokenizerParagraphTokenList.react',['MTokenizerParagraphToken.react','React','fbt','intlList','invariant'],function a(b,c,d,e,f,g,h,i,j,k,l){var m,n;if(c.__markCompiled)c.__markCompiled();var o=i.PropTypes;m=babelHelpers.inherits(p,i.Component);n=m&&m.prototype;p.prototype.render=function(){'use strict';var q=this.props.names.length,r=q===2?this.props.names[1]:j._("{count} others",[j.param('count',q-1)]),s=[i.createElement(h,null,this.props.names[0]),i.createElement(h,null,r)];return (i.createElement('span',{onClick:this.props.onClick},k(s,k.CONJUNCTIONS.AND)));};function p(){'use strict';m.apply(this,arguments);}p.propTypes={onClick:o.func,names:function(q,r,s){var t=Array.isArray(q[r]);!(t&&q[r].length>1)?l(0):void 0;}};f.exports=p;},null);
__d('MTokenizerParagraphWithMultiplePeople.react',['MTokenizerParagraphRoot.react','MTokenizerParagraphTokenList.react','React','fbt','MUnifiedTaggerConstants'],function a(b,c,d,e,f,g,h,i,j,k){var l,m;if(c.__markCompiled)c.__markCompiled();var n=c('MUnifiedTaggerConstants').TOKEN_TYPES,o=j.PropTypes;l=babelHelpers.inherits(p,j.Component);m=l&&l.prototype;p.prototype.render=function(){'use strict';return (j.createElement(h,null,k._("with {list-of-people}.",[k.param('list-of-people',j.createElement(i,{onClick:this.props.onTokenClick.bind(null,n.PEOPLE),names:this.props.people.map(function(q){return q.name;})}))])));};function p(){'use strict';l.apply(this,arguments);}p.propTypes={onTokenClick:o.func.isRequired,people:o.array.isRequired};f.exports=p;},null);
__d('MTokenizerParagraphWithMultiplePeopleAtPlace.react',['MTokenizerParagraphRoot.react','MTokenizerParagraphToken.react','MTokenizerParagraphTokenList.react','React','fbt','MUnifiedTaggerConstants'],function a(b,c,d,e,f,g,h,i,j,k,l){var m,n;if(c.__markCompiled)c.__markCompiled();var o=c('MUnifiedTaggerConstants').TOKEN_TYPES,p=k.PropTypes;m=babelHelpers.inherits(q,k.Component);n=m&&m.prototype;function q(){var r,s;'use strict';for(var t=arguments.length,u=Array(t),v=0;v<t;v++)u[v]=arguments[v];return r=(s=n.constructor).call.apply(s,[this].concat(u)),this.getPeopleNames=function(){return this.props.people.map(function(w){return w.name;});}.bind(this),this.renderNonSpecificPlace=function(){return (k.createElement(h,null,l._("with {list-of-people} in {non-specific-place-name}.",[l.param('list-of-people',this.renderPeopleToken()),l.param('non-specific-place-name',this.renderPlaceToken())])));}.bind(this),this.renderPeopleToken=function(){return (k.createElement(j,{onClick:this.props.onTokenClick.bind(null,o.PEOPLE),names:this.getPeopleNames()}));}.bind(this),this.renderPlaceToken=function(){return (k.createElement(i,{onClick:this.props.onTokenClick.bind(null,o.PLACE)},this.props.place.name));}.bind(this),this.renderSpecificPlace=function(){return (k.createElement(h,null,l._("with {list-of-people} at {place-name}.",[l.param('list-of-people',this.renderPeopleToken()),l.param('place-name',this.renderPlaceToken())])));}.bind(this),r;}q.prototype.render=function(){'use strict';return this.props.place.isNonSpecific?this.renderNonSpecificPlace():this.renderSpecificPlace();};q.propTypes={onTokenClick:p.func.isRequired,place:p.object.isRequired,people:p.array.isRequired};f.exports=q;},null);
__d('MTokenizerParagraphIcon.react',['Image.react','MTokenizerParagraphToken.react','React','cx'],function a(b,c,d,e,f,g,h,i,j,k){var l,m;if(c.__markCompiled)c.__markCompiled();var n=j.PropTypes;l=babelHelpers.inherits(o,j.Component);m=l&&l.prototype;o.prototype.render=function(){'use strict';return (j.createElement(i,this.props,j.createElement(h,{className:"_2r5v",src:this.props.src})));};function o(){'use strict';l.apply(this,arguments);}o.propTypes={use:n.oneOf(['token','noborder'])};o.defaultProps={use:'noborder'};f.exports=o;},null);
__d('MTokenizerParagraphWithOGActivity.react',['MTaggableActivityPreviewTemplateQuery','MTokenizerParagraphIcon.react','MTokenizerParagraphTokenList.react','MTokenizerParagraphRoot.react','MTokenizerParagraphToken.react','React','cx','ix','MUnifiedTaggerConstants'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p,q;if(c.__markCompiled)c.__markCompiled();var r=c('MUnifiedTaggerConstants').TOKEN_TYPES,s=m.PropTypes;p=babelHelpers.inherits(t,m.Component);q=p&&p.prototype;function t(){var u,v;'use strict';for(var w=arguments.length,x=Array(w),y=0;y<w;y++)x[y]=arguments[y];return u=(v=q.constructor).call.apply(v,[this].concat(x)),this.state={template:null},this.getTemplateQuery=function(z){var aa=new h(z.ogactivity.id);if(z.people.length===1){aa.setHasPerson();}else if(z.people.length>1)aa.setHasPeople();if(z.place)aa.setHasPlace();return aa;},this.shouldRenderLoader=function(){return !(this.state.template&&this.props.ogactivity.icon);}.bind(this),this.startTemplateQuery=function(z){this.getTemplateQuery(z).fetch().done(function(aa){this.setState({template:aa});}.bind(this));}.bind(this),this.renderLoading=function(){return (m.createElement(i,{className:"_12zh",src:o('/images/loaders/indicator_blue_small.gif')}));},this.renderTemplate=function(z){return this.state.template.renderArray(this.state.template.getTokens().map(this.renderToken));}.bind(this),this.renderToken=function(z){var aa=z.token,ba=this.props.onTokenClick.bind(null,aa===r.PERSON?r.PEOPLE:aa);switch(aa){case r.ICON:return [m.createElement(i,{onClick:ba,src:this.props.ogactivity.icon,use:'token'}),' '];case r.OBJECT:return (m.createElement(l,{onClick:ba,key:aa},this.props.ogactivity.object));case r.PEOPLE:return (m.createElement(j,{onClick:ba,names:this.props.people.map(function(ca){return ca.name;}),key:aa}));case r.PERSON:return (m.createElement(l,{onClick:ba,key:aa},this.props.people[0].name));case r.PLACE:return (m.createElement(l,{onClick:ba,key:aa},this.props.place.name));}}.bind(this),u;}t.prototype.componentDidMount=function(){'use strict';this.startTemplateQuery(this.props);};t.prototype.componentWillReceiveProps=function(u){'use strict';this.setState({template:null});this.startTemplateQuery(u);};t.prototype.render=function(){'use strict';var u=this.shouldRenderLoader()?this.renderLoading():this.renderTemplate();return m.createElement(k,null,u);};t.propTypes={ogactivity:s.object.isRequired,onTokenClick:s.func.isRequired,people:s.array,place:s.object};f.exports=t;},null);
__d('MTokenizerParagraphWithPerson.react',['MTokenizerParagraphRoot.react','MTokenizerParagraphToken.react','React','fbt','MUnifiedTaggerConstants'],function a(b,c,d,e,f,g,h,i,j,k){var l,m;if(c.__markCompiled)c.__markCompiled();var n=c('MUnifiedTaggerConstants').TOKEN_TYPES,o=j.PropTypes;l=babelHelpers.inherits(p,j.Component);m=l&&l.prototype;p.prototype.render=function(){'use strict';return (j.createElement(h,null,k._("with {name1}.",[k.param('name1',j.createElement(i,{onClick:this.props.onTokenClick.bind(null,n.PEOPLE)},this.props.person.name))])));};function p(){'use strict';l.apply(this,arguments);}p.propTypes={onTokenClick:o.func.isRequired,person:o.object.isRequired};f.exports=p;},null);
__d('MTokenizerParagraphWithPersonAtPlace.react',['MTokenizerParagraphRoot.react','MTokenizerParagraphToken.react','React','fbt','MUnifiedTaggerConstants'],function a(b,c,d,e,f,g,h,i,j,k){var l,m;if(c.__markCompiled)c.__markCompiled();var n=c('MUnifiedTaggerConstants').TOKEN_TYPES,o=j.PropTypes;l=babelHelpers.inherits(p,j.Component);m=l&&l.prototype;function p(){var q,r;'use strict';for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return q=(r=m.constructor).call.apply(r,[this].concat(t)),this.renderNonSpecificPlace=function(){return (j.createElement(h,null,k._("with {name1} in {city-name}.",[k.param('name1',this.renderPersonToken()),k.param('city-name',this.renderPlaceToken())])));}.bind(this),this.renderPersonToken=function(){return (j.createElement(i,{onClick:this.props.onTokenClick.bind(null,n.PEOPLE)},this.props.person.name));}.bind(this),this.renderPlaceToken=function(){return (j.createElement(i,{onClick:this.props.onTokenClick.bind(null,n.PLACE)},this.props.place.name));}.bind(this),this.renderSpecificPlace=function(){return (j.createElement(h,null,k._("with {name1} at {place-name}.",[k.param('name1',this.renderPersonToken()),k.param('place-name',this.renderPlaceToken())])));}.bind(this),q;}p.prototype.render=function(){'use strict';return this.props.place.isNonSpecific?this.renderNonSpecificPlace():this.renderSpecificPlace();};p.propTypes={onTokenClick:o.func.isRequired,place:o.object.isRequired,person:o.object.isRequired};f.exports=p;},null);
__d('MTokenizerParagraph.react',['MTokenizerParagraphAtPlace.react','MTokenizerParagraphWithOGActivity.react','MTokenizerParagraphWithMultiplePeople.react','MTokenizerParagraphWithMultiplePeopleAtPlace.react','MTokenizerParagraphWithPerson.react','MTokenizerParagraphWithPersonAtPlace.react','React'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){var o,p;if(c.__markCompiled)c.__markCompiled();var q=n.PropTypes;o=babelHelpers.inherits(r,n.Component);p=o&&o.prototype;function r(){var s,t;'use strict';for(var u=arguments.length,v=Array(u),w=0;w<u;w++)v[w]=arguments[w];return s=(t=p.constructor).call.apply(t,[this].concat(v)),this.renderTokens=function(){var x=this.props.ogactivity,y=this.props.people||[],z=this.props.place;if(x)return (n.createElement(i,babelHelpers['extends']({},this.props,{ogactivity:x,people:y,place:z})));if(y.length>1&&z)return n.createElement(k,babelHelpers['extends']({},this.props,{place:z,people:y}));if(y.length===1&&z)return n.createElement(m,babelHelpers['extends']({},this.props,{place:z,person:y[0]}));if(z)return n.createElement(h,babelHelpers['extends']({},this.props,{place:z}));if(y.length>1)return n.createElement(j,babelHelpers['extends']({},this.props,{people:y}));if(y.length===1)return n.createElement(l,babelHelpers['extends']({},this.props,{person:y[0]}));return n.createElement('div',this.props);}.bind(this),s;}r.prototype.render=function(){'use strict';return this.renderTokens();};r.propTypes={ogactivity:q.object,onTokenClick:q.func,people:q.array,place:q.object};r.defaultProps={ogactivity:null,people:[],place:null};f.exports=r;},null);
__d('MStructuredComposerUnifiedTagger',['MCompositionPlaceStore','MSubscriptionsHandlerMixin','MTokenizerParagraph.react','MCompositionPlaceFields','React','ReactDOM','Stratcom','mixin'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p,q;if(c.__markCompiled)c.__markCompiled();p=babelHelpers.inherits(r,o(i));q=p&&p.prototype;function r(s){'use strict';q.constructor.call(this);this.$MStructuredComposerUnifiedTagger1={ogActivity:null,people:null,place:null};this.$MStructuredComposerUnifiedTagger2=s;this.addSubscriptions(h.addListener('change',function(){if(h.isEmpty()){this.setAttachments({place:null});}else this.setAttachments({place:{name:h.get(k.NAME),isNonSpecific:h.get(k.IS_NON_SPECIFIC,false)}});}.bind(this)),n.listen('MComposer:tagger:update',null,function(event){return this.setAttachments(event.getData());}.bind(this)),n.listen('MComposer:tagger:update:og-icon',null,function(event){return this.setOGIcon(event.getData().icon);}.bind(this)),n.listen('MComposer:tagger:clear',null,function(){return this.clear();}.bind(this)));this.$MStructuredComposerUnifiedTagger3();}r.prototype.clear=function(){'use strict';this.$MStructuredComposerUnifiedTagger1.ogActivity=null;this.$MStructuredComposerUnifiedTagger1.people=null;this.$MStructuredComposerUnifiedTagger1.place=null;return this.$MStructuredComposerUnifiedTagger3();};r.prototype.$MStructuredComposerUnifiedTagger4=function(s){'use strict';n.invoke('MComposer:tagger:click',s);};r.prototype.$MStructuredComposerUnifiedTagger5=function(){'use strict';return !!(this.$MStructuredComposerUnifiedTagger1.ogActivity||this.$MStructuredComposerUnifiedTagger1.people&&this.$MStructuredComposerUnifiedTagger1.people.length||this.$MStructuredComposerUnifiedTagger1.place);};r.prototype.$MStructuredComposerUnifiedTagger3=function(){'use strict';if(this.$MStructuredComposerUnifiedTagger5()){m.render(l.createElement(j,{ogactivity:this.$MStructuredComposerUnifiedTagger1.ogActivity,onTokenClick:function(s){return this.$MStructuredComposerUnifiedTagger4(s);}.bind(this),people:this.$MStructuredComposerUnifiedTagger1.people,place:this.$MStructuredComposerUnifiedTagger1.place}),this.$MStructuredComposerUnifiedTagger2);}else m.unmountComponentAtNode(this.$MStructuredComposerUnifiedTagger2);return this;};r.prototype.setAttachments=function(s){'use strict';Object.assign(this.$MStructuredComposerUnifiedTagger1,s);return this.$MStructuredComposerUnifiedTagger3();};r.prototype.setOGIcon=function(s){'use strict';if(this.$MStructuredComposerUnifiedTagger1.ogActivity)this.$MStructuredComposerUnifiedTagger1.ogActivity.icon=s;return this.$MStructuredComposerUnifiedTagger3();};f.exports=r;},null);
__d('MComposerLegacyPlaceAttachment',['CSS','DOM','MComposerLogger','MComposerWaterfallEvent','MCompositionConfigFields','MCompositionConfigStore','MCompositionPlaceFields','MCompositionPlaceStore','MCompositionUserActions','Stratcom','MSubscriptionsHandlerMixin','memoize','mixin','MUnifiedTaggerConstants'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u,v;if(c.__markCompiled)c.__markCompiled();var w=c('MUnifiedTaggerConstants').SHOW_UNIFIED_TAGGER;u=babelHelpers.inherits(x,t(r));v=u&&u.prototype;function x(y){'use strict';v.constructor.call(this);this.$MComposerLegacyPlaceAttachment1=y;this.$MComposerLegacyPlaceAttachment2=s(function(){return i.find(this.$MComposerLegacyPlaceAttachment1,'li','token');}.bind(this));this.$MComposerLegacyPlaceAttachment3=s(function(){return i.find(this.$MComposerLegacyPlaceAttachment2(),'a','remove-token');}.bind(this));this.addSubscriptions(o.addListener('change',function(){return this.$MComposerLegacyPlaceAttachment4();}.bind(this)),i.listen(this.$MComposerLegacyPlaceAttachment1,'click','remove-token',function(event){return this.$MComposerLegacyPlaceAttachment5(event);}.bind(this)),i.listen(this.$MComposerLegacyPlaceAttachment1,'click','at-button',function(){return this.$MComposerLegacyPlaceAttachment6();}.bind(this)));}x.prototype.$MComposerLegacyPlaceAttachment7=function(){'use strict';return !m.get(l.PIN_PLACE,false);};x.prototype.$MComposerLegacyPlaceAttachment8=function(){'use strict';return (!o.isEmpty()&&!m.get(l.DISABLE_PLACE_TAG,false));};x.prototype.$MComposerLegacyPlaceAttachment6=function(){'use strict';q.invoke('MStructuredComposer-addLocationClicked');};x.prototype.$MComposerLegacyPlaceAttachment4=function(){'use strict';if(w)return;h.conditionShow(this.$MComposerLegacyPlaceAttachment1,this.$MComposerLegacyPlaceAttachment8());h.conditionShow(this.$MComposerLegacyPlaceAttachment3(),this.$MComposerLegacyPlaceAttachment7());if(this.$MComposerLegacyPlaceAttachment8())i.replace(this.$MComposerLegacyPlaceAttachment2().firstChild,i.create('span',{className:'innerToken'},o.get(n.NAME)));};x.prototype.$MComposerLegacyPlaceAttachment5=function(event){'use strict';event.kill();q.invoke('MStructuredComposer-removedLocation');j.log(k.LOCATION_REMOVE);p.placeRemove();};f.exports=x;},null);
__d('MComposerStatusTextarea',['DOM','MCompositionConfigFields','MCompositionConfigStore','MCompositionStatusFields','MCompositionStatusStore','MCompositionUserActions','MJSEnvironment','MSubscriptionsHandlerMixin','MViewport','Scroll','Stratcom','Style','debounceCore','mixin'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){var v,w;if(c.__markCompiled)c.__markCompiled();var x=480,y=n.IS_ANDROID||n.IS_APPLE_WEBKIT_IOS||n.IS_CHROME||n.IS_FIREFOX&&n.OS_VERSION>14;function z(ba){var ca=t(ba,300);return function(){ca.reset();for(var da=arguments.length,ea=Array(da),fa=0;fa<da;fa++)ea[fa]=arguments[fa];ca.apply(null,ea);};}v=babelHelpers.inherits(aa,u(o));w=v&&v.prototype;function aa(ba){var ca=ba.textareaNode;'use strict';w.constructor.call(this);this.$MComposerStatusTextarea1=ca;if(ca.tagName!=='TEXTAREA'){this.$MComposerStatusTextarea2=h.find(ca,'textarea');}else this.$MComposerStatusTextarea2=ca;if(n.IS_APPLE_WEBKIT_IOS&&!n.IS_CHROME&&n.OS_VERSION>=7&&p.getScreenHeight()<=x)s.set(this.$MComposerStatusTextarea2,'height','75px');this.addSubscriptions(l.addChangeListener(function(){return this.$MComposerStatusTextarea3();}.bind(this)),j.addChangeListener(function(){return this.$MComposerStatusTextarea4();}.bind(this)),h.listen(this.$MComposerStatusTextarea2,y?'input':'keyup',null,z(function(event){return this.$MComposerStatusTextarea5(event);}.bind(this))),r.listen('MMentions:change',null,function(event){return this.$MComposerStatusTextarea6(event);}.bind(this)),r.listen('MComposerStatusTextarea:flush',null,function(event){return this.$MComposerStatusTextarea7(event);}.bind(this)));}aa.prototype.$MComposerStatusTextarea6=function(event){'use strict';var ba=event.getData().input;if(ba!==this.$MComposerStatusTextarea2)return;this.$MComposerStatusTextarea8(ba.value);};aa.prototype.$MComposerStatusTextarea3=function(){'use strict';var ba=l.get(k.TEXT,'');this.$MComposerStatusTextarea2.value=ba;r.invoke('MJSPlaceholder');};aa.prototype.$MComposerStatusTextarea4=function(){'use strict';var ba=j.get(i.INPUT_NAME),ca=this.$MComposerStatusTextarea9();if(ca.getAttribute('name')!==ba)ca.setAttribute('name',ba);};aa.prototype.$MComposerStatusTextarea9=function(){'use strict';var ba=h.scry(this.$MComposerStatusTextarea1,'input','mentionsHiddenInput')[0];return ba||this.$MComposerStatusTextarea2;};aa.prototype.$MComposerStatusTextarea5=function(event){'use strict';this.$MComposerStatusTextarea8(event.getTarget().value);};aa.prototype.$MComposerStatusTextarea7=function(event){'use strict';var ba=event.getData();this.$MComposerStatusTextarea8(ba.value);if(ba.hasMentions===false){var ca=this.$MComposerStatusTextarea9();if(ca!==this.$MComposerStatusTextarea2)ca.value=ba.value;}};aa.prototype.$MComposerStatusTextarea8=function(ba){'use strict';var ca=this.$MComposerStatusTextarea2.selectionStart,da=this.$MComposerStatusTextarea2.selectionEnd,ea=q.getTop(this.$MComposerStatusTextarea2),fa={};fa[k.TEXT]=ba;m.statusUpdate(fa);q.setTop(this.$MComposerStatusTextarea2,ea);this.$MComposerStatusTextarea2.setSelectionRange(ca,da);};f.exports=aa;},null);
__d('MComposerPlaceButton',['CSS','MCompositionConfigFields','MCompositionConfigStore','MCompositionPlaceStore','MSubscriptionsHandlerMixin','mixin'],function a(b,c,d,e,f,g,h,i,j,k,l,m){var n,o;if(c.__markCompiled)c.__markCompiled();n=babelHelpers.inherits(p,m(l));o=n&&n.prototype;function p(q){'use strict';o.constructor.call(this);this.$MComposerPlaceButton1=q;this.addSubscriptions(j.addListener('change',function(){return this.$MComposerPlaceButton2();}.bind(this)),k.addListener('change',function(){return this.$MComposerPlaceButton3();}.bind(this)));}p.prototype.$MComposerPlaceButton4=function(){'use strict';return !k.isEmpty();};p.prototype.$MComposerPlaceButton5=function(){'use strict';return (!j.get(i.PIN_PLACE)&&!j.get(i.DISABLE_PLACE_TAG));};p.prototype.$MComposerPlaceButton2=function(){'use strict';h.conditionShow(this.$MComposerPlaceButton1,this.$MComposerPlaceButton5());};p.prototype.$MComposerPlaceButton3=function(){'use strict';h.conditionClass(this.$MComposerPlaceButton1,'active',this.$MComposerPlaceButton4());};f.exports=p;},null);
__d('MComposerDialogClearablePreview',['DOM','MSubscriptionsHandlerMixin','mixin','mixInEventEmitter','MComposerDialogClearablePreviewConstants'],function a(b,c,d,e,f,g,h,i,j,k){var l,m;if(c.__markCompiled)c.__markCompiled();var n=c('MComposerDialogClearablePreviewConstants').sigils;l=babelHelpers.inherits(o,j(i));m=l&&l.prototype;function o(p,q){'use strict';m.constructor.call(this);this.$MComposerDialogClearablePreview1=q;this.$MComposerDialogClearablePreview2=p;this.addSubscriptions(h.listen(this.$MComposerDialogClearablePreview2,'click',n.CLEAR,this.$MComposerDialogClearablePreview3.bind(this)));}o.prototype.clear=function(){'use strict';this.hide();h.setContent(this.$MComposerDialogClearablePreview1,'');return this;};o.prototype.$MComposerDialogClearablePreview3=function(){'use strict';this.clear();this.emit('clear');return this;};o.prototype.hide=function(){'use strict';h.hide(this.$MComposerDialogClearablePreview2);return this;};o.prototype.setValue=function(p){'use strict';h.setContent(this.$MComposerDialogClearablePreview1,p);this.show();return this;};o.prototype.show=function(){'use strict';h.show(this.$MComposerDialogClearablePreview2);return this;};o.prototype.showIfHasValue=function(){'use strict';return !this.$MComposerDialogClearablePreview1.innerText?this.hide():this.show();};k(o,{clear:true});f.exports=o;},null);
__d('MComposerPlaceDialog',['DOM','MComposerLogger','MComposerNavigationMixin','MComposerWaterfallEvent','MCompositionConfigFields','MCompositionPlaceFields','MCompositionConfigStore','MCompositionPlaceStore','MCompositionUserActions','MPlacesTagger','MUnifiedTaggerConstants','MSubscriptionsHandlerMixin','MRequest','Stratcom','getObjectValues','fbt','mixin','whitelistObjectKeys'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){var z,aa;if(c.__markCompiled)c.__markCompiled();z=babelHelpers.inherits(ba,x(j,s));aa=z&&z.prototype;function ba(ca,da){var ea=da.preview,fa=da.tagger;'use strict';aa.constructor.call(this);this.$MComposerPlaceDialog1=ea;this.$MComposerPlaceDialog2=ca;this.$MComposerPlaceDialog3=fa||new q(this.$MComposerPlaceDialog2);this.$MComposerPlaceDialog4=true;this.addSubscriptions(this.$MComposerPlaceDialog1.addListener('clear',function(){return this.$MComposerPlaceDialog5();}.bind(this)),this.$MComposerPlaceDialog3.listen('cancel',function(){return this.$MComposerPlaceDialog6();}.bind(this)),this.$MComposerPlaceDialog3.listen('submit',function(ga){return this.$MComposerPlaceDialog7(ga);}.bind(this)),o.addListener('change',function(){return this.$MComposerPlaceDialog8();}.bind(this)),u.listen('click','at-button',function(){return this.$MComposerPlaceDialog9();}.bind(this)),u.listen('open','MComposer:dialog:place',function(){this.$MComposerPlaceDialog4=false;this.$MComposerPlaceDialog9();}.bind(this)),u.listen('back','MComposer:dialog:place',function(){return this.$MComposerPlaceDialog10();}.bind(this)),u.listen('MComposer:tagger:click',r.TOKEN_TYPES.PLACE,function(){return this.$MComposerPlaceDialog9();}.bind(this)));}ba.prototype.$MComposerPlaceDialog11=function(){'use strict';p.placeRemove();this.$MComposerPlaceDialog10();};ba.prototype.$MComposerPlaceDialog10=function(){'use strict';this.$MComposerPlaceDialog3.hide();if(!this.$MComposerPlaceDialog4){this.$MComposerPlaceDialog4=true;u.invoke('close','MComposer:dialog:place');}};ba.prototype.$MComposerPlaceDialog12=function(){'use strict';return (!n.get(l.PIN_PLACE)&&!n.get(l.DISABLE_PLACE_TAG));};ba.prototype.$MComposerPlaceDialog13=function(){'use strict';return o.get(m.IS_NON_SPECIFIC);};ba.prototype.$MComposerPlaceDialog8=function(){'use strict';if(o.isEmpty()){this.$MComposerPlaceDialog1.clear();}else this.$MComposerPlaceDialog1.setValue(this.$MComposerPlaceDialog14());};ba.prototype.$MComposerPlaceDialog9=function(){'use strict';if(this.hasNavigationPolicy())return;if(!this.$MComposerPlaceDialog12()){this.$MComposerPlaceDialog4=true;return;}i.log(k.LOCATION_INTENT);if(this.$MComposerPlaceDialog4){this.newNavigationPolicy().addOnOpen(function(){return this.$MComposerPlaceDialog15();}.bind(this)).addOnClose(function(){return this.$MComposerPlaceDialog10();}.bind(this)).open();}else this.$MComposerPlaceDialog15();};ba.prototype.$MComposerPlaceDialog6=function(){'use strict';if(this.$MComposerPlaceDialog4&&!this.hasNavigationPolicy())return;i.log(k.LOCATION_CANCEL);if(this.$MComposerPlaceDialog4){this.currentNavigationPolicy().close();}else{this.$MComposerPlaceDialog4=true;u.invoke('cancel','MComposer:dialog:place');this.$MComposerPlaceDialog3.hide();}};ba.prototype.$MComposerPlaceDialog5=function(){'use strict';if(this.$MComposerPlaceDialog4&&!this.hasNavigationPolicy())return;i.log(k.LOCATION_CANCEL);if(this.$MComposerPlaceDialog4){this.currentNavigationPolicy().addOnClose(function(){return this.$MComposerPlaceDialog11();}.bind(this)).close();}else this.$MComposerPlaceDialog10();};ba.prototype.$MComposerPlaceDialog7=function(ca){'use strict';if(this.$MComposerPlaceDialog4&&!this.hasNavigationPolicy())return;i.log(k.LOCATION_ADD);if(this.$MComposerPlaceDialog4){this.currentNavigationPolicy().addOnClose(function(){return this.$MComposerPlaceDialog16(ca);}.bind(this)).close();}else{this.$MComposerPlaceDialog10();this.$MComposerPlaceDialog16(ca);}};ba.prototype.$MComposerPlaceDialog15=function(){'use strict';this.$MComposerPlaceDialog3.show();var ca=h.scry(this.$MComposerPlaceDialog2,'*','places-category-selector-container')[0];if(ca&&ca.id&&ca.children.length===0)new t('/places/addform/category.php').addData({target_id:ca.id,parent_id:0}).setMethod('GET').send();};ba.prototype.$MComposerPlaceDialog14=function(){'use strict';if(o.get(m.IS_NON_SPECIFIC)){return w._("in {non-specific-place-name}.",[w.param('non-specific-place-name',o.get(m.NAME))]);}else return w._("at {place-name}.",[w.param('place-name',o.get(m.NAME))]);};ba.prototype.$MComposerPlaceDialog16=function(ca){'use strict';p.placeSet(y(ca,v(m)));};f.exports=ba;},null);
__d('MComposerInputsWrapper',['DOM','MComposerStoreToInputMap','MCompositionDispatcher','MCompositionStore','destroyOnUnload'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();function m(p){return i.hasOwnProperty(p.getID());}function n(p,q){return p+'-'+q;}function o(p){'use strict';this.$MComposerInputsWrapper1={};this.$MComposerInputsWrapper2=p;this.$MComposerInputsWrapper3=j.register(function(){return this.$MComposerInputsWrapper4();}.bind(this));l(function(){return j.unregister(this.$MComposerInputsWrapper3);}.bind(this));}o.prototype.$MComposerInputsWrapper5=function(){'use strict';return k.getRegisteredStores().filter(m);};o.prototype.$MComposerInputsWrapper4=function(){'use strict';var p=this.$MComposerInputsWrapper5();j.waitFor(p.map(function(q){return q.toUpdate();}));p.forEach(function(q){return this.$MComposerInputsWrapper6(q);}.bind(this));};o.prototype.$MComposerInputsWrapper6=function(p){'use strict';var q=p.getID(),r=i[q];Object.keys(r).forEach(function(s){this.$MComposerInputsWrapper7(q,r[s],p.get(s,''));}.bind(this));};o.prototype.$MComposerInputsWrapper7=function(p,q,r){'use strict';var s=n(p,q);if(!this.$MComposerInputsWrapper1.hasOwnProperty(s)){this.$MComposerInputsWrapper1[s]=h.create('input',{name:q,type:'hidden'});h.appendContent(this.$MComposerInputsWrapper2,this.$MComposerInputsWrapper1[s]);}this.$MComposerInputsWrapper1[s].value=r;};f.exports=o;},null);
__d('MComposerLegacyPlaceInput',['DOM','MCompositionPlaceFields','MCompositionPlaceStore','MSubscriptionsHandlerMixin','mixin'],function a(b,c,d,e,f,g,h,i,j,k,l){var m,n;if(c.__markCompiled)c.__markCompiled();m=babelHelpers.inherits(o,l(k));n=m&&m.prototype;function o(p){'use strict';n.constructor.call(this);this.$MComposerLegacyPlaceInput1=p;this.$MComposerLegacyPlaceInput2=h.find(this.$MComposerLegacyPlaceInput1,'input','at-input');this.$MComposerLegacyPlaceInput3=h.find(this.$MComposerLegacyPlaceInput1,'input','new-place-cat-input');this.$MComposerLegacyPlaceInput4=h.find(this.$MComposerLegacyPlaceInput1,'input','new-place-is-current');this.$MComposerLegacyPlaceInput5=h.find(this.$MComposerLegacyPlaceInput1,'input','new-place-name-input');this.$MComposerLegacyPlaceInput6=h.find(this.$MComposerLegacyPlaceInput1,'input','new-place-phone-input');this.$MComposerLegacyPlaceInput7=h.find(this.$MComposerLegacyPlaceInput1,'input','new-place-website-input');this.$MComposerLegacyPlaceInput8=h.find(this.$MComposerLegacyPlaceInput1,'input','new-place-address-input');this.$MComposerLegacyPlaceInput9=h.find(this.$MComposerLegacyPlaceInput1,'input','new-place-zip-input');this.$MComposerLegacyPlaceInput10=h.find(this.$MComposerLegacyPlaceInput1,'input','new-place-freeform');this.$MComposerLegacyPlaceInput11=h.find(this.$MComposerLegacyPlaceInput1,'input','json-location');this.$MComposerLegacyPlaceInput12=h.find(this.$MComposerLegacyPlaceInput1,'input','is-checkin');this.addSubscriptions(j.addListener('change',this.$MComposerLegacyPlaceInput13.bind(this)));}o.prototype.$MComposerLegacyPlaceInput14=function(){'use strict';this.$MComposerLegacyPlaceInput2.value='';this.$MComposerLegacyPlaceInput5.value='';this.$MComposerLegacyPlaceInput6.value='';this.$MComposerLegacyPlaceInput7.value='';this.$MComposerLegacyPlaceInput8.value='';this.$MComposerLegacyPlaceInput9.value='';h.setContent(this.$MComposerLegacyPlaceInput3,null);this.$MComposerLegacyPlaceInput10.value='';this.$MComposerLegacyPlaceInput4.value='';this.$MComposerLegacyPlaceInput11.value='{}';this.$MComposerLegacyPlaceInput12.value='';};o.prototype.$MComposerLegacyPlaceInput13=function(){'use strict';if(j.isEmpty()){this.$MComposerLegacyPlaceInput14();}else this.$MComposerLegacyPlaceInput15();};o.prototype.$MComposerLegacyPlaceInput15=function(){'use strict';this.$MComposerLegacyPlaceInput14();this.$MComposerLegacyPlaceInput12.value=true;if(j.get(i.ID,false)){this.$MComposerLegacyPlaceInput2.value=j.get(i.ID);}else this.$MComposerLegacyPlaceInput10.value=j.get(i.NAME,'');this.$MComposerLegacyPlaceInput11.value=j.get(i.JSON_LOCATION,'{}');if(j.get(i.IS_NEW)){this.$MComposerLegacyPlaceInput5.value=j.get(i.NAME,'');this.$MComposerLegacyPlaceInput6.value=j.get(i.PHONE,'');this.$MComposerLegacyPlaceInput7.value=j.get(i.WEBSITE,'');this.$MComposerLegacyPlaceInput8.value=j.get(i.ADDRESS,'');this.$MComposerLegacyPlaceInput9.value=j.get(i.ZIP,'');this.$MComposerLegacyPlaceInput10.value='';this.$MComposerLegacyPlaceInput4.value=j.get(i.IS_CURRENT,'');var p=j.get(i.TOPIC_TOKENS);if(p.value){this.$MComposerLegacyPlaceInput3.value=p.value;}else h.setContent(this.$MComposerLegacyPlaceInput3,p.map(function(q){return q.cloneNode(true);}));}};f.exports=o;},null);
__d('MPagesFinchMoreText',['$','CSS','MLegacyDataStore','Stratcom','cx','MarauderLogger','MPagesFinchUtilities'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o='more-text-trigger',p=false,q=function(t,u){var v=h(j.get(t).id),w=h(j.get(t).mask_id),x=j.get(t).masked;if(v&&w){v.style.webkitLineClamp=undefined;var y="_549n";i.conditionClass(v,y,false);var z=j.get(t).max_lines,aa=n.calculateNumberOfLinesShown(v);if(!aa)return;var ba=false,ca='inherit';if(aa>z){ba=true;ca=n.calculateHeightForNumberOfLines(v,z)+'px';}if(ba===x)return;var da="_4___";i.conditionClass(w,da,!ba);v.style.maxHeight=ca;j.set(t,{masked:ba});i.conditionClass(t,"_1h2b",ba);if(u){var ea=j.get(t).event_name,fa=j.get(t).module_name,ga=j.get(t).log_data;if(ea&&ga){ga.expand_event=!ba;m.log(ea,fa,ga);}}}},r=function(){if(p)return;p=true;var t=k.listen('click',o,function(event){var u=event.getNode(o);if(!event.getTarget().href)q(u,true);});k.listen('m:page:unload',null,function(event){t.remove();p=false;});},s=function(t){r();q(t,false);};g.initializeMoreTextNode=s;},null);
__d('MPrivacyDeferredSelector',['Stratcom','MRequest','MRequestTypes','MURI'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=null,m=null,n=null,o=false,p=false;function q(u,v,w,x){m=u;l=v;n=w;o=x;h.listen('MPrivacyDeferredSelector::init',null,function(event){r(event);h.removeCurrentListener();});}function r(event){var u=new k('/privacy/selector');u.setQueryData({pt_id:m,eco:l,selected:n,defaultSelector:o});var v=new i(u.toString());v.setType(j.DEPENDENT);v.send();}function s(u){h.invoke('MPrivacyDeferredSelector-loaded',null,{id:u});}function t(u){p=u;}f.exports={init:q,informLoaded:s,setShowNewcomerAudienceSelector:t};},null);
__d("XSharePreviewAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/share_preview\/",{sid:{type:"String"},surl:{type:"String"},existing_post_id:{type:"Int"}});},null);
__d('MSharePreview',['$','CSS','DOM','MRequest','MCompositionConfigFields','MCompositionConfigStore','MCompositionShareFields','MCompositionShareStore','MCompositionUserActions','MSubscriptionsHandlerMixin','XSharePreviewAsyncController','mixin'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t,u;if(c.__markCompiled)c.__markCompiled();t=babelHelpers.inherits(v,s(q));u=t&&t.prototype;function v(w){'use strict';u.constructor.call(this);this.$MSharePreview1=j.scry(w,'div')[0];this.addSubscriptions(o.addListener('change',function(){return this.$MSharePreview2();}.bind(this)),j.listen(w,'click','close-link-preview-button',function(event){p.shareRemoveLinkPreview(o.get(n.SHARE_URI));p.configDisablePhotosUpdate(false);}));}v.prototype.init=function(){'use strict';var w=m.get(l.POST_ID,null);if(!w)return;p.configDisablePhotosUpdate(true);var x=r.getURIBuilder().setInt('existing_post_id',w).getURI();this.$MSharePreview3=new k(x);this.$MSharePreview3.listen('finally',function(){i.hide(this.$MSharePreview1);this.$MSharePreview3=null;}.bind(this));this.$MSharePreview3.send();};v.prototype.$MSharePreview2=function(){'use strict';if(this.$MSharePreview3){this.$MSharePreview3.abort();this.$MSharePreview3=null;}if(o.isEmpty()){j.setContent(h('mshare_preview_placeholder'),null);}else{var w=o.get(n.ID),x=o.get(n.SHARE_URI);if(!w&&!x){j.setContent(h('mshare_preview_placeholder'),null);i.hide(this.$MSharePreview1);return;}i.show(this.$MSharePreview1);var y=r.getURIBuilder().setString('sid',w&&w.toString()).setString('surl',x).getURI();this.$MSharePreview3=new k(y);this.$MSharePreview3.listen('finally',function(){i.hide(this.$MSharePreview1);this.$MSharePreview3=null;}.bind(this));this.$MSharePreview3.send();}};f.exports=v;},null);