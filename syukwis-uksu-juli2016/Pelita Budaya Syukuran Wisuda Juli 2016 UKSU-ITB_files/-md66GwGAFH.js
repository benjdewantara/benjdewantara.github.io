if (self.CavalryLogger) { CavalryLogger.start_js(["uAgy6"]); }

__d("MAdsUtils",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(j){return j===Object(j);}function i(j,k){var l=j;if(Array.isArray(j)){l=j.map(i);}else if(h(j)){l={};Object.keys(j).forEach(function(m){if(m!==k)l[m]=i(j[m],k);});}return l;}f.exports={clone:i,isObject:h};},null);
__d('Tokenizer',['setTimeoutAcrossTransitions','CSS','MLegacyDataStore','DOM','MAdsUtils','Stratcom','createDeprecatedProperties','destroyOnUnload','eventsMixinDeprecated'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();function q(r){'use strict';this._containerNode=r;this._listeners=[];o(function(){while(this._listeners.length)this._listeners.pop().remove();this._listeners=null;}.bind(this));}q.prototype.start=function(){'use strict';this._orig=k.find(this._containerNode,'input','tokenizer-input');this._tokens=[];this._tokenMap={};var r=this.buildInput(this._orig.value);this._focus=r;var s=k.scry(this._containerNode,'div','tokenizer-input-container');s=s[0]||this._containerNode;this._listeners.push(k.listen(r,['click','focus','blur','keydown','keypress'],null,this.handleEvent.bind(this)),k.listen(s,'click',null,function(y){if(y.getNode('remove')){this._remove(j.get(y.getNode('token')).key);}else if(y.getTarget()==this._root)this.focus();}.bind(this)));var t=k.create('div');t.id=this._orig.id;i.conditionClass(t,'jx-tokenizer',true);t.style.cursor='text';this._root=t;t.appendChild(r);var u=this._typeahead;u.setInputNode(this._focus);u.start();var v=this._orig.parentNode;k.setContent(v,t);var w=this._initialValue||{};for(var x in w)this.addToken(x,w[x],v);k.appendContent(t,k.create('div',{style:{clear:'both'}}));this._redraw();};q.prototype.setInitialValue=function(r){'use strict';this._initialValue=r;return this;};q.prototype.setTypeahead=function(r){'use strict';r.setAllowNullSelection(false);r.removeListener();r.listen('show',function(s){if(this._tokenMap){var t=s.show,u=[];for(var v=0;v<t.length;++v){var w=t[v],x=k.scry(w,'a','typeahead-result')[0];if(x)x.removeAttribute('href');if(!(t[v].rel in this._tokenMap))u.push(t[v]);}t.length=0;t.push.apply(t,u);}}.bind(this));r.listen('choose',function(s){m.context().prevent();var event=m.invoke('Tokenizer-addedtoken',null,s);if(event.getPrevented())return;var t=JSON.parse(s.getAttribute('data-extra'));if(this.addToken(s.rel,s.name,s,t)){if(this.shouldHideResultsOnChoose())this._typeahead.hide();this._typeahead.clear();this._redraw();this.focus();}}.bind(this));r.listen('query',function(s){if(s.length)m.context().prevent();}.bind(this));this._typeahead=r;o(this._typeahead.removeListener.bind(this._typeahead));return this;};q.prototype.shouldHideResultsOnChoose=function(){'use strict';return true;};q.prototype.handleEvent=function(r){'use strict';this._typeahead.handleEvent(r);if(r.getPrevented())return;if(r.getType()=='click'){if(r.getTarget()==this._root){this.focus();r.prevent();return;}}else if(r.getType()=='keydown'){this._onkeydown(r);}else if(r.getType()=='blur')this._redraw();};q.prototype.refresh=function(){'use strict';this._redraw(true);return this;};q.prototype._redraw=function(r){'use strict';var s=this._focus;if(s.value===this._lastvalue&&!r)return;this._lastvalue=s.value;var t=k.textMetrics(this._focus,'jx-tokenizer-metrics');t.y=null;t.x+=24;t.setDim(s);s.value=s.value;if(this._typeahead)this._typeahead.refresh();};q.prototype.addToken=function(r,s,t,u){'use strict';if(r in this._tokenMap)return false;var v=this._focus,w=this._root,x=this.buildToken(r,s,t);this._tokenMap[r]={value:s,key:r,node:x};if(u)Object.keys(u).forEach(function(y){if(!(y in this._tokenMap[r]))this._tokenMap[r][y]=u[y];}.bind(this));this._tokens.push(r);w.insertBefore(x,v);this.invoke('added',r);return true;};q.prototype.clearTokens=function(){'use strict';for(var r in this._tokenMap){k.remove(this._tokenMap[r].node);delete this._tokenMap[r];}this.refresh();};q.prototype.removeToken=function(r){'use strict';if(r in this._tokenMap){var s=this._tokenMap[r].node;delete this._tokenMap[r];k.remove(s);this._redraw(true);return true;}return false;};q.prototype.buildInput=function(r){'use strict';return k.create('input',{className:'jx-tokenizer-input',type:'text',autocomplete:'off',value:r});};q.prototype.buildToken=function(r,s,t){'use strict';var u=k.create('input',{type:'hidden',value:r,name:this._orig.name+'['+this._seq+++']'}),v=k.create('a',{className:'jx-tokenizer-x',sigil:'remove'},'\u00d7');return k.create('a',{className:'jx-tokenizer-token',sigil:'token',meta:{key:r}},[s,u,v]);};q.prototype.getTokens=function(){'use strict';var r={};for(var s in this._tokenMap)r[s]=this._tokenMap[s].value;return r;};q.prototype.getTokensWithData=function(){'use strict';return l.clone(this._tokenMap,'node');};q.prototype._onkeydown=function(r){'use strict';switch(r.getSpecialKey()){case 'tab':var s=this._typeahead.submit();if(this.getNextInput()){if(!s)this._focus.value='';h(function(){this.getNextInput().focus();}.bind(this),0);}break;case 'delete':if(!this._focus.value.length){var t;while(t=this._tokens.pop())if(this._remove(t))break;}break;case 'return':break;default:if(this.getLimit()&&Object.keys(this._tokenMap).length==this.getLimit())r.prevent();h(this._redraw.bind(this),0);break;}};q.prototype._remove=function(r){'use strict';var s=this.removeToken(r);if(s){this.focus();this.invoke('removed',r);}return s;};q.prototype.focus=function(){'use strict';var r=this._focus;k.show(r);h(function(){r.focus();},0);};p(q,['added','removed']);n(q,{limit:null,nextInput:null});Object.assign(q.prototype,{_containerNode:null,_root:null,_focus:null,_orig:null,_typeahead:null,_tokenid:0,_tokens:null,_tokenMap:null,_initialValue:null,_seq:0,_lastvalue:null});f.exports=q;},null);
__d('MGroupsTypeaheadCompositeSource',['cx','DOM','fbt','TypeaheadCompositeSource'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';var l,m;if(c.__markCompiled)c.__markCompiled();l=babelHelpers.inherits(n,k);m=l&&l.prototype;function n(o){m.constructor.call(this,o);this.groupKey='category';this.addFriendsTitle=j._("ADD FRIENDS");this.addOthersTitle=j._("ADD OTHERS");this.inviteOthersTitle=j._("INVITE OTHERS");}n.prototype.renderTab=function(o,p){var q=[];if(!p||p.length===0)return q;q.push(i.create('div',{className:"_336p"},o));return q.concat(p);};n.prototype.mergeResults=function(o,p){var q=[],r=[],s=[],t=[],u={},v=void 0;if(p.length===0)return o;for(v=0;v<o.length;++v)if(o[v][this.mergeKey]){u[o[v][this.mergeKey]]=true;t.push(o[v]);}for(v=p.length-1;v>=0;--v)if(p[v][this.mergeKey]&&!(p[v][this.mergeKey] in u)){u[p[v][this.mergeKey]]=true;t.push(p[v]);}for(v=0;v<t.length;++v)if(t[v][this.groupKey]==='othersToInvite'){s.push(t[v]);}else if(t[v][this.groupKey]==='othersToAdd'){r.push(t[v]);}else q.push(t[v]);return this.renderTab(this.addFriendsTitle,q).concat(this.renderTab(this.addOthersTitle,r)).concat(this.renderTab(this.inviteOthersTitle,s));};f.exports=n;},null);
__d('MComposeSubmitHandler',['$','DOM','Stratcom','MViewport'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();function l(m){j.listen('click','send',function(){var n=h('messaging_compose_error');if(n.children.length===0)return;var o=n.offsetHeight;i.setContent(n,'');k.scrollBy(0,-o);});}g.main=l;},null);
__d('MTouchTransferFocus',['CSS','DOM','Stratcom','MViewport','MLegacyDataStore'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m='transfer-focus-container',n='focus-provider',o='focus-receiver',p='focused';j.listen(['click','touchend'],[m,n],function(q){var r=q.getNode(n),s=l.get(r);if(s.onclickIsSet)return;var t=q.getNode(m);r.onclick=function(){h.conditionClass(t,p,true);var u=i.scry(t,'input',o)[0];if(u){u.focus();var v=l.get(t);if(v.hideaddressbar)setTimeout(function(){if(k.getScrollTop()<1)k.scrollTo(0,1);},0);}};s.onclickIsSet=true;});j.listen('blur',[m,o],function(q){h.conditionClass(q.getNode(m),p,false);});},null);
__d('MTypeaheadSourceWithExclusions',['MTypeaheadTouchSource','Stratcom'],function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();j=babelHelpers.inherits(l,h);k=j&&j.prototype;function l(m,n,o){'use strict';k.constructor.call(this,m,n);var p=this.addExcludeID.bind(this);i.listen('mtypeahead:exclusions',o,function(q){var r=q.getData().ids;for(var s=0;s<r.length;++s)p(r[s]);});}l.prototype.sortHits=function(m,n){'use strict';for(var o=n.length-1;o>=0;--o)if(this._excludeIDs[n[o]])n.splice(o,1);h.prototype.sortHits.apply(this,arguments);};f.exports=l;},null);
__d('MTypeaheadTouchSourceWithSuggestions',['setTimeoutAcrossTransitions','MTypeaheadTouchSource','createDeprecatedProperties'],function a(b,c,d,e,f,g,h,i,j){var k,l;if(c.__markCompiled)c.__markCompiled();k=babelHelpers.inherits(m,i);l=k&&k.prototype;function m(n,o,p){'use strict';l.constructor.call(this,n,o);this.setSuggestions(p);var q=[];for(var r=0;r<p.length;++r)q.push(p[r].uid);this.setSuggestionsIds(q);this.setDefaultSuggestionsIds(q);}m.prototype.didStart=function(){'use strict';i.prototype.didStart.call(this);h(function(){var n=this.renderNodes(null,this.getSuggestionsIds());this.invoke('resultsready',n);this.invoke('complete');}.bind(this),0);};m.prototype.matchResults=function(n){'use strict';if(n.length===0){var o=this.getSuggestionsIds();if(this.getSuggestionsIds().length===0)o=this.getDefaultSuggestionsIds();var p=this.renderNodes(null,o);this.invoke('resultsready',p);this.invoke('complete');}else i.prototype.matchResults.call(this,n);};j(m,{suggestions:[],suggestionsIds:[],defaultSuggestionsIds:[]});f.exports=m;},null);
__d('InitMTokenizer',['$','MTypeaheadOnDemandSource','MTypeaheadSourceWithExclusions','MTypeaheadTouchSource','MTypeaheadTouchSourceWithSuggestions','Stratcom','Typeahead','TypeaheadCompositeSource','MGroupsTypeaheadCompositeSource'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q=function(r,s){var t=null,u=s.element;if(s.id)u=document.getElementById(s.id);if(s.suggestions.length){t=new l(s.src,s.source_key,s.suggestions);}else if(t){r.setRemovableTokens(false);}else if(s.exclusions){t=new j(s.src,s.source_key,u.id);}else t=new k(s.src,s.source_key);if(s.ondemand_src){var v=new i(s.ondemand_src);if(s.maxresults)v.setMaximumResultCount(s.maxresults);var w=[t,v];if(s.groups_typeahead_merger){t=new p(w);}else t=new o(w);}if(s.excludeids)s.excludeids.forEach(function(aa){t.addExcludeID(aa);});if(s.maxresults)t.setMaximumResultCount(s.maxresults);if(t instanceof k||t instanceof i)t.setShowSecondaryAction(false);var x=s.textinput;if(typeof x==='string')x=h(x);var y=new n(u,x);y.setDatasource(t);y.setTypeObjects(s.typeObjects);y.setTypeObjectsOrder(s.typeObjectsOrder);r.setTypeahead(y);m.invoke('Tokenizer-setTypeahead',null,y);r.setInitialValue(s.initialtokens);r.setLabel(s.label);r.setPlaceholder(s.placeholder);r.setLimitWidth(s.limitwidth);r.setAddExtraData(s.addExtraData);if(s.limit)r.setLimit(s.limit);if(s.freeform){var z=new RegExp(s.freeform,'i');y.listen('change',function(aa){if(z&&z.test(aa)){t.lastChange=Date.now();var ba={uri:'#',name:aa,id:aa,display:aa},ca=[t.createNode(ba)];y.showResults(ca);m.context().kill();}});}if(s.needs_template_data&&Object.keys(s.initialtokens).length>0)y.disable();r.start();};g.main=q;},null);
__d('MTokenizer',['DOM','Tokenizer','createDeprecatedProperties','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l){var m,n;if(c.__markCompiled)c.__markCompiled();m=babelHelpers.inherits(o,i);n=m&&m.prototype;function o(p){'use strict';n.constructor.call(this,p);}o.prototype.buildInput=function(p){'use strict';var q=h.create('input',{type:'text',className:'jx-tokenizer-input',sigil:'tokenizer-input focus-receiver',placeholder:this.getPlaceholder(),value:p});q.setAttribute('autocomplete','off');q.setAttribute('autocapitalize','off');q.setAttribute('autocorrect','off');q.setAttribute('aria-label',l._("List of results will show up below"));if(this.getPlaceholder()){this.placeholderWidth=o.estimatePlaceholderWidth(q)+'px';q.style.minWidth=this.placeholderWidth;}return q;};o.prototype.setLimitWidth=function(p){'use strict';this.limitWidth=p;};o.prototype.getLimitWidth=function(){'use strict';return this.limitWidth;};o.prototype.setAddExtraData=function(p){'use strict';this.addExtraData=p;};o.prototype.start=function(){'use strict';this._containerNode.tokenizer=this;i.prototype.start.call(this);if(this.getLabel()){var p=h.create('span',{className:'mTokenizerLabel'},this.getLabel());h.prependContent(this._root,p);}this.listen('removed',this.removedToken.bind(this));};o.prototype.removedToken=function(){'use strict';if(Object.keys(this._tokenMap).length===0){this._focus.placeholder=this.getPlaceholder();this._focus.style.minWidth=this.placeholderWidth;}if(this.hasMaxTokens&&this.getLimit()&&Object.keys(this._tokenMap).length<this.getLimit()){h.show(this._focus);this._typeahead._control.disabled=false;this._typeahead._stop=false;this._typeahead.refresh();this.hasMaxTokens=false;}};o.prototype.addToken=function(p,q,r,s){'use strict';if(this.hasMaxTokens)return false;var t=i.prototype.addToken.call(this,p,q,r,s);if(!this.hasMaxTokens&&this.getLimit()&&Object.keys(this._tokenMap).length>=this.getLimit()){this._typeahead.hide();this._typeahead.disable();h.hide(this._focus);this.hasMaxTokens=true;}return t;};o.prototype.removeToken=function(p){'use strict';var q=i.prototype.removeToken.call(this,p);q&&this.removedToken();return q;};o.prototype.buildToken=function(p,q,r){'use strict';var s=h.create('input',{sigil:'token-value',type:'hidden',value:p,name:this._orig.name+'['+this._seq+++']'}),t=null;if(r.getAttribute('weak_reference'))t=h.create('i',{className:'mWeakReferenceIcon'});var u=null;if(this.addExtraData&&r.getAttribute('data-extra'))u=h.create('input',{sigil:'token-extra-data',value:r.getAttribute('data-extra'),type:'hidden'});var v=this.getRemovableTokens()?h.create('span',{},'\u00a0\u00d7\u00a0'):null,w=h.create('a',{className:'touchable mCloseBtn',href:'#',sigil:'blocking-touchable remove'},v);w.setAttribute('aria-label',l._("Remove"));this._focus.placeholder='';this._focus.style.minWidth=0;var x="mToken"+(this.getLimitWidth()?' '+"mTokenLimitWidth":'')+(r.getAttribute('weak_reference')?' '+"mTokenWeakReference":'')+(p<0?' '+"mTokenWithNegativeKey":'');if(this.getLimitWidth())q=h.create('span',{className:'innerToken'},q);return h.create('span',{className:x,sigil:'token',meta:{key:p}},[t,q,s,w,u]);};o.prototype.getTypeahead=function(){'use strict';return this._typeahead;};o.prototype.focus=function(){'use strict';};o.estimatePlaceholderWidth=function(p){'use strict';var q=p.value;p.value=p.placeholder;var r=h.textMetrics(p,'jx-tokenizer-metrics');p.value=q;return r.x;};j(o,{label:null,placeholder:null,removableTokens:true});Object.assign(o.prototype,{placeholderWidth:null,hasMaxTokens:false});f.exports=o;},null);
__d('MTokenizerBehavior',['CSS','Stratcom','MViewport','Vector'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=false,m={addListener:function(n){if(l)return;l=true;i.listen('click',[['tokenizer','typeahead-result'],['remove']],function(o){o.prevent();});i.listen(['focus','blur'],'tokenizer-input',function(o){var p=o.getNode('tokenizer'),q=o.getType()=='blur';h.conditionClass(p,'blurred',q);if(q){if(n.clearvalueonblur||1)p.tokenizer&&p.tokenizer.getTypeahead().clear();}else if(n.shouldscroll)j.scrollTo(0,k.getPos(p).y);});}};f.exports=m;},null);
__d('MTokenizerWithSuggestions',['setTimeoutAcrossTransitions','CSS','DOM','MTokenizer','createDeprecatedProperties'],function a(b,c,d,e,f,g,h,i,j,k,l){var m,n;if(c.__markCompiled)c.__markCompiled();m=babelHelpers.inherits(o,k);n=m&&m.prototype;function o(p){'use strict';n.constructor.call(this,p);}o.prototype.start=function(){'use strict';k.prototype.start.call(this);i.conditionClass(this._containerNode,'suggestions',true);var p=j.scry(this._containerNode,'div','tokenizer-suggestions-label');if(p.length){this.setLabel(p[0]);j.remove(p[0]);}this.listen('removed',function(){h(this._typeahead.refresh.bind(this._typeahead),0);}.bind(this));};o.prototype.setTypeahead=function(p){'use strict';k.prototype.setTypeahead.call(this,p);p.setBlurDefer(o.blurDefer);p.listen('choose',function(q){h(function(){this._typeahead.refresh();}.bind(this),0);}.bind(this));p.listen('show',function(q){var r=q.show,s=[],t=o.maxSuggestions;for(var u=0;u<r.length;++u)if(!(r[u].rel in this._tokenMap)){s.push(r[u]);if(s.length>=t)break;}var v=this.getLabel();if(v&&v.length>0&&s.length&&p.getValue()==='')s.unshift(v);r.length=0;r.push.apply(r,s);}.bind(this));};o.prototype.shouldHideResultsOnChoose=function(){'use strict';return this.getFocused();};o.prototype.updateSuggestionsIds=function(p){'use strict';this._typeahead._datasource.setSuggestionsIds(p);this._typeahead.refresh();};o.prototype.handleEvent=function(p){'use strict';var q=p.getType();if(q=='focus'||q=='blur'){this.setFocused(q=='focus');h(function(){this._typeahead.refresh();}.bind(this),o.blurDefer);p.stop();}else k.prototype.handleEvent.call(this,p);};l(o,{focused:false,label:null});Object.assign(o,{maxSuggestions:50,blurDefer:500});f.exports=o;},null);